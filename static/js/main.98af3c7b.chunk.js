(this.webpackJsonplicresia_demo=this.webpackJsonplicresia_demo||[]).push([[0],{34:function(e,n,t){},61:function(e,n,t){"use strict";t.r(n);var i,o=t(8),c=t.n(o),a=t(22),r=t.n(a),s=(t(34),t(2)),l=t(9),d=t(3),b=t(7),u=t.n(b),h=t(6),x=t(10),p=t(4);!function(e){e.SCALE_INDEX=[0,2,4,5,7,9,11];var n=e.getBeatProps=function(e){switch(e){case"4/4":return{beatMemoriCount:4,barBeatCnt:4};case"2/4":return{beatMemoriCount:4,barBeatCnt:2};case"3/4":return{beatMemoriCount:4,barBeatCnt:3};case"6/8":return{beatMemoriCount:6,barBeatCnt:2};case"9/8":return{beatMemoriCount:6,barBeatCnt:3};case"12/8":return{beatMemoriCount:6,barBeatCnt:4}}};e.getSustainTime=function(e,t,i,o){return 6e4/i*(e+t*(1/n(o).beatMemoriCount))}}(i||(i={}));var f,g=i,j=[null,{index:0,isFlat:!1},{index:1,isFlat:!1},{index:1,isFlat:!0},{index:2,isFlat:!1},{index:3,isFlat:!1},{index:3,isFlat:!0},{index:4,isFlat:!1},{index:5,isFlat:!1},{index:6,isFlat:!1},{index:6,isFlat:!0},{index:7,isFlat:!1},{index:8,isFlat:!1},{index:8,isFlat:!0},{index:9,isFlat:!1},{index:10,isFlat:!1},{index:10,isFlat:!0},{index:11,isFlat:!1}],v=["\u2160","b\u2161","\u2161","b\u2162","\u2162","\u2163","b\u2164","\u2164","b\u2165","\u2165","b\u2166","\u2166"],m=["\u2160","#\u2160","\u2161","#\u2161","\u2162","\u2163","#\u2163","\u2164","#\u2164","\u2165","#\u2165","\u2166"],O=function(e){return(e.isFlat?v:m)[e.index]},k=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],y=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],S=function(e,n){return(e.isFlat?k:y)[(n+e.index)%12]},w=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],I=["C","C#","D","D#","E","F","F#","G","G#","A","Bb","B"],C=[{key:"major",name:"",base:null,structs:["p1","M3","p5"],attr:"triad"},{key:"minor",name:"m",base:null,structs:["p1","m3","p5"],attr:"triad"},{key:"suspend4th",name:"sus4",base:null,structs:["p1","p4","p5"],attr:"triad"},{key:"diminish",name:"dim",base:null,structs:["p1","m3","d5"],attr:"triad"},{key:"diminish-7th",name:"dim7",base:"diminish",structs:["p1","m3","d5","d7"],attr:"seventh"},{key:"augument",name:"aug",base:null,structs:["p1","M3","a5"],attr:"triad"},{key:"augument-7th",name:"aug7",base:"augument",structs:["p1","M3","a5","m7"]},{key:"minor-minus5",name:"m(-5)",base:null,structs:["p1","m3","d5"],attr:"triad"},{key:"minor7-minus5",name:"m7(-5)",base:"minor-minus5",structs:["p1","m3","d5","m7"],attr:"seventh"},{key:"major-maj7th",name:"maj7",base:"major",structs:["p1","M3","p5","M7"],attr:"seventh"},{key:"major-min7th",name:"7",base:"major",structs:["p1","M3","p5","m7"],attr:"seventh"},{key:"minor-7th",name:"m7",base:"minor",structs:["p1","m3","p5","m7"],attr:"seventh"},{key:"sus4-7th",name:"7sus4",base:"suspend4th",structs:["p1","p4","p5"]},{key:"minor-maj7th",name:"mmaj7",base:"minor",structs:["p1","m3","p5","M7"],attr:"seventh"},{key:"major-add9th",name:"add9",base:"major",structs:["p1","M2","M3","p5"],attr:"add9th"},{key:"minor-add9th",name:"madd9",base:"minor",structs:["p1","M2","m3","p5"],attr:"add9th"},{key:"major-maj9th",name:"maj9",base:"major-maj7th",structs:["p1","m3","p5"],attr:"add9th"},{key:"major-9th",name:"9",base:"major-min7th",structs:["p1","m3","p5"]}],E={p1:0,m2:1,M2:2,m3:3,M3:4,p4:5,d5:6,p5:7,a5:8,m6:8,M6:9,d7:9,m7:10,M7:11},L=[{root:{index:0,isFlat:!1},symbolKey:"major"},{root:{index:2,isFlat:!1},symbolKey:"minor"},{root:{index:4,isFlat:!1},symbolKey:"minor"},{root:{index:5,isFlat:!1},symbolKey:"major"},{root:{index:7,isFlat:!1},symbolKey:"major"},{root:{index:9,isFlat:!1},symbolKey:"minor"},{root:{index:11,isFlat:!1},symbolKey:"minor-minus5"}],D=[{root:{index:0,isFlat:!1},symbolKey:"minor"},{root:{index:2,isFlat:!1},symbolKey:"minor-minus5"},{root:{index:3,isFlat:!0},symbolKey:"major"},{root:{index:5,isFlat:!1},symbolKey:"minor"},{root:{index:7,isFlat:!1},symbolKey:"minor"},{root:{index:8,isFlat:!0},symbolKey:"major"},{root:{index:10,isFlat:!0},symbolKey:"major"}],T=["\u2160","\u2160maj7","\u2161m","\u2161m7","\u2162m","\u2162m7","\u2163","\u2163maj7","\u2164","\u21647","\u2165m","\u2165m7","\u2166m(-5)","\u2166m7(-5)"],z=["\u2160m","\u2160m7","\u2161m(-5)","\u2161m7(-5)","b\u2162","b\u2162M7","\u2163m","\u2163m7","\u2164m","\u2164m7","b\u2165","b\u2165M7","b\u2166","b\u21667"],A=function(e){var n=C.find((function(n){if(e===n.key)return n}));return void 0!=n?n:C[0]},M=function(e){var n=[];return C.forEach((function(t){e===t.base&&n.push(t.key)})),n};!function(e){e[e.SET_SYSTEM_STATE=0]="SET_SYSTEM_STATE",e[e.SET_SCORE_STATE=1]="SET_SCORE_STATE",e[e.SET_TUNE_STATE=2]="SET_TUNE_STATE",e[e.SET_SCORE_DATA=3]="SET_SCORE_DATA",e[e.SET_REFS=4]="SET_REFS",e[e.SET_INSTRUMENTS=5]="SET_INSTRUMENTS",e[e.SET_BACKING_STATE=6]="SET_BACKING_STATE",e[e.SET_RESERVE_TASKS=7]="SET_RESERVE_TASKS",e[e.SET_INVALIDATE=8]="SET_INVALIDATE"}(f||(f={}));var F,R=function(e,n){var t=n.type,i=n.payload;switch(t){case f.SET_SYSTEM_STATE:e.systemState=i.systemState;break;case f.SET_SCORE_STATE:e.scoreState=i.scoreState;break;case f.SET_SCORE_DATA:e.scoreData=i.scoreData;break;case f.SET_TUNE_STATE:e.melodyState=i.tuneState;break;case f.SET_REFS:e.refs=i.refs;break;case f.SET_INSTRUMENTS:e.instruments=i.instruments;break;case f.SET_BACKING_STATE:e.backingState=i.backingState;break;case f.SET_RESERVE_TASKS:e.reserveTasks=i.reserveTasks;break;case f.SET_INVALIDATE:e.invalidate=i.invalidate}return Object(h.a)({},e)},N=t(29),P=function(e){var n=[];switch(e){case"triad":n=[{struct:0,octave:3},{struct:1,octave:3},{struct:2,octave:3}];break;case"seventh":case"add9th":n=[{struct:0,octave:3},{struct:1,octave:3},{struct:2,octave:3},{struct:3,octave:3}]}return{voicingList:n,pattern:null,hasError:!1}};!function(e){e.OCTAVE_NUM=8,e.STRUCT_NUM=6,e.CHANNEL_MAX=12,e.getInitialRecord=function(e){return new Array(e).fill(null)},e.buildChannels=function(e){for(var n=[],t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++)e[t][i]&&n.push({octave:t,structIndex:i});return 0===n.length&&n.push({octave:-1,structIndex:0}),n},e.getVoicingListFromTable=function(e){var n=[];if(null!=e)for(var t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++)e[t][i]&&n.push({octave:t,struct:i});return n},e.buildPatternProps=function(e){var n=e.channels.length,t=[];return e.layers.forEach((function(e){var n=e.noteDivList,i=[];e.table.forEach((function(e,n){e.forEach((function(e,t){null!=e&&i.push({x:t,y:n,status:e})}))})),t.push({divs:n,notesList:i,vels:e.velocityList.slice()})})),{channelSize:n,layers:t}},e.getChannels=function(e,n){for(var t=[],i=0;i<n;i++){var o={octave:-1,structIndex:0};i<e.length&&(o.octave=e[i].octave,o.structIndex=e[i].structIndex),t.push(o)}return t.reverse()},e.convertEditorLayerFromScore=function(e,n){var t=[];return console.log(JSON.stringify(n)),n.forEach((function(n){for(var i=[],o=function(e){for(var t=[],o=function(i){var o=n.notesList.find((function(n){return n.x===i&&n.y===e}));t.push(null==o?null:o.status)},c=0;c<n.divs.length;c++)o(c);i.push(t)},c=0;c<e;c++)o(c);t.push({noteDivList:n.divs,table:i,velocityList:n.vels})})),console.log(JSON.stringify(t)),t},e.getPitchListFromVoicing=function(e,n,t){return e.map((function(e){var i=E[t.structs[e.struct]];return 12*e.octave+n+i}))},e.playBacking=function(e,n,t,i,o,c){null==i.pattern?o.forEach((function(n){var t=y[n%12],i=Math.floor(n/12);Y(t+i,e,c,5)})):i.pattern.layers.forEach((function(i){var a=[],r=0;i.divs.forEach((function(e){a.push(60/t*r);var n=4/e.rate;e.isDot?n*=1.5:e.div3>0&&(n/=3*e.div3),r+=n})),i.notesList.forEach((function(r){var s=r.status.timing*(60/t*1/32),l=a[r.x]+s,d=c-l,b=i.vels[r.x]+r.status.velAdj;b<1&&(b=1),b>10&&(b=10),b*=.6,n.push(setTimeout((function(){var n=o[r.y],t=y[n%12],i=Math.floor(n/12);Y(t+i,e,d,b)}),1e3*l))}))}))},e.stopPreview=function(e,n,t,i){var o;null===(o=e.instruments.harmony)||void 0===o||o.stop(),n.isPreview=!1,i.forEach((function(e){return clearInterval(e)})),t.backing.setState(n)};var n=e.getLimitLen=function(e){var n=e.minute,t=g.getBeatProps(e.init.beatSignature).beatMemoriCount,i=n.head/t+n.tail/t;return e.beatLen+i},t=e.getUsingLenFromDivs=function(e,n){g.getBeatProps(n.init.beatSignature).beatMemoriCount;return e.reduce((function(e,n){var t=1/n.rate;return n.isDot&&(t*=1.5),0!==n.div3&&(t*=n.div3/3),e+4*t}),0)},i=(e.checkError=function(e,o,c){var a=!1;if(null!=c){o.length<c.channels.length&&(a=!0);var r=n(e);c.layers.forEach((function(n){var i=t(n.noteDivList,e);r<i&&(a=!0)})),c.layers[0].table.forEach((function(e,n){e.forEach((function(e,t){null!=e&&i(c.layers,0,n,t)&&(a=!0)}))}))}return a},e.checkOverlapBackLayer=function(e,n,t,i){var c=e[n],a=e[0===n?1:0],r=o(c.noteDivList,i),s=Object(l.a)(r,2),d=s[0],b=s[1];console.log("left=".concat(d,", right=").concat(b));for(var u=!1,h=0;h<a.noteDivList.length;h++)if(null!=a.table[t][h]){var x=o(a.noteDivList,h),p=Object(l.a)(x,2),f=p[0],g=p[1];if(b>f&&d<g){u=!0;break}}return u}),o=e.getDivRange=function(e,n){var t=0,i=0;return e.slice(0,n+1).forEach((function(e,n){var o=1/e.rate;e.isDot&&(o*=1.5),0!==e.div3&&(o*=e.div3/3),t=i,i+=4*o})),[t,i]}}(F||(F={}));var _,K,B=F,H=function(e){return(59-e+9)%12},U=function(e){var n=0;return n+=e.len4,n+=e.len8/2,n+=e.len16/4,n+=e.len4div3/3,n+=e.len8div3/6},W=function(e,n){return q({len4:e.len4+n.len4,len8:e.len8+n.len8,len16:e.len16+n.len16,len4div3:e.len4div3+n.len4div3,len8div3:e.len8div3+n.len8div3})},q=function(e){var n=Math.floor(e.len8div3/3);e.len8div3-=3*n,e.len8+=n;var t=Math.floor(e.len8div3/2);e.len8div3-=2*t,e.len4div3+=t;var i=Math.floor(e.len4div3/3);e.len4div3-=3*i,e.len4+=i;var o=Math.floor(e.len16/2);e.len16-=2*o,e.len8+=o;var c=Math.floor(e.len8/2);return e.len8-=2*c,e.len4+=c,e},V=function(e,n){var t=0,i=0,o=0,c=0,a=0;switch(e){case 1:t=n;break;case 2:i=n;break;case 3:c=n;break;case 4:o=n;break;case 6:a=n}return q({len4:t,len8:i,len16:o,len4div3:c,len8div3:a})},J=function(e){return e.len8div3>0?6:e.len16>0?4:e.len4div3>0?3:e.len8>0?2:e.len4>0?1:0},X=function(e,n){var t=(59-e+9)%12,i=Math.floor((59-e+9)/12)+1,o=y[t%12],c=n.instruments.soundfontPlayer;null!=c&&(c.stop(),c.play(o+i,0,{duration:.5}))},Y=function(e,n,t,i){var o=n.instruments.harmony;null!=o?o.play(e,0,{gain:i,duration:t}):alert("null")},G=function(e,n,t){var i=e.melodyState;i.isPreview=!1,t.forEach((function(e){return clearInterval(e)})),e.instruments.sampler.releaseAll(),n.tune.setState(i),n.tune.adjustScrollX()},Q=function(e,n,t,i){for(var o=n.scoreState,c=(n.invalidate.melody,n.instruments.sampler,o.elementCacheList),a=n.scoreData.chordList,r=a[0].detail,s=3;s<a.length;s++){var l=c[s],d=a[s];if("chord"===d.type){var b=function(){if(l.pastSecond<e)return"continue";var t=d.detail;if(null==t.root)return{v:void 0};var o=(t.root.index+r.keyIndex)%12,c=A(t.symbolKey),a=t.beatLen+t.minute.head+t.minute.tail,s=t.backing,b=B.getPitchListFromVoicing(s.voicingList,o,c),u=60/r.bpm*a;i.push(setTimeout((function(){B.playBacking(n,i,r.bpm,s,b,u)}),l.pastSecond-e-0))}();if("continue"===b)continue;if("object"===typeof b)return b.v}}},Z=function(e,n){var t=e.melodyState,i=e.scoreData.chordList[0].detail,o=t.tableMouse.curChord,c=e.reserveTasks;if(null!=o){var a=o.detail;if(null==a.root)return;var r=(a.root.index+i.keyIndex)%12,s=A(a.symbolKey),l=a.beatLen+a.minute.head+a.minute.tail,d=a.backing,b=B.getPitchListFromVoicing(d.voicingList,r,s),u=60/i.bpm*l;B.playBacking(e,c,i.bpm,d,b,u),c.push(setTimeout((function(){t.isPreview=!1,n.tune.setState(t)}),1e3*u)),t.isPreview=!0,n.tune.setState(t)}},$=100,ee=30,ne=50,te=240,ie=480;(K=_||(_={})).previewStart=function(e,n){for(var t=e.scoreState,i=(e.instruments.sampler,t.elementCacheList),o=e.scoreData.chordList,c=e.reserveTasks,a=-1,r=function(){n.score.setScoreState(t)},s=(o[0].detail,function(s){var l=i[s],d=o[s];if("chord"===d.type){var b=d.detail;if(-1===a&&(a=l.pastSecond),null==b.root)return"continue";var u=(b.root.index+l.keyIndex)%12,h=A(b.symbolKey),x=b.beatLen+b.minute.head+b.minute.tail,p=b.backing,f=B.getPitchListFromVoicing(p.voicingList,u,h),g=60/l.bpm*x;c.push(setTimeout((function(){B.playBacking(e,c,l.bpm,p,f,g),t.focusIndex=s,t.distIndex=t.focusIndex,r()}),l.pastSecond-a-0))}s===o.length-1&&c.push(setTimeout((function(){_.stopPreview(e,n,c)}),l.pastSecond-a-0))}),l=t.focusIndex;l<o.length;l++)s(l);t.isPreview=!0,r()},K.stopPreview=function(e,n,t){var i,o=e.scoreState;o.isPreview=!1,t.forEach((function(e){return clearTimeout(e)})),n.system.setReserveTasks([]),n.score.setScoreState(o),null===(i=e.instruments.harmony)||void 0===i||i.stop()},K.previewCurHarmony=function(e,n){var t=e.scoreState,i=e.reserveTasks,o=t.elementCacheList[t.focusIndex],c=e.scoreData.chordList[t.focusIndex];if(null!=c){var a=c.detail;if(null==a.root)return;var r=(a.root.index+o.keyIndex)%12,s=A(a.symbolKey),l=a.beatLen+a.minute.head+a.minute.tail,d=a.backing,b=B.getPitchListFromVoicing(d.voicingList,r,s),u=60/o.bpm*l;B.playBacking(e,e.reserveTasks,o.bpm,d,b,u),i.push(setTimeout((function(){t.isPreview=!1,n.score.setScoreState(t)}),1e3*u)),t.isPreview=!0,n.score.setScoreState(t)}},K.updateHarmonizeCache=function(e,n){var t=e.scoreData.chordList,i=t[0].detail,o=[],c=[],a=[],r=[],s=[],l=i.keyIndex,d=i.scale,b=i.bpm,u=0,h=-1,x=0,p=0,f=0,j=-1,v=0,m=0,O=0,k=0,y=0,S=0,w=i.beatSignature,I=g.getBeatProps(w);t.forEach((function(e,n){var i=y,C=O,E=m,L=u;switch(e.type){case"section":var D=e.detail;c.push({labelName:D.labelName,beatSum:0,rangeIndexStart:n,rangeIndexEnd:t.length-2}),++h>0&&(c[h-1].rangeIndexEnd=n-1,c[h-1].beatSum=x,x=0);break;case"chord":p+=f;var T=e.detail;x+=T.beatLen;var z=T.minute.head+T.minute.tail;u+=z,j++,v=T.beatLen*I.beatMemoriCount+z;var A=Math.floor(y/I.barBeatCnt);y+=T.beatLen,A!==Math.floor(y/I.barBeatCnt)&&m++,f=g.getSustainTime(T.beatLen,z,b,w);for(var M=0;M<v;M++){var F=16;k%I.beatMemoriCount===0?F=4:k%(I.beatMemoriCount/(I.beatMemoriCount/2))===0&&(F=8);var R=I.barBeatCnt*I.beatMemoriCount,N=-1;k%R===0&&(N=++S),s.push({rate:F,barCount:N}),O++,k++}break;case"alter":var P=e.detail;switch(P.alterType){case"modulate":switch(r.push({keyIndex:l,scale:d,length:1}),P.modRel){case"domm":l=(l+24+7*P.dommVal)%12;break;case"key":l=(l+12+P.keyAdj)%12;break;case"parallel":l=(l+12+3*("major"===d?-1:1))%12,d="major"===d?"minor":"major";break;case"relative":d="major"===d?"minor":"major"}break;case"tempo":switch(P.tempoRel){case"diff":b+=P.tempoDiff;break;case"rate":b=Math.floor(1*b*(P.tempoRate/100));break;case"abs":b=P.tempoAbs}break;case"beat":a.push({beatSignature:w,length:k}),w=P.beatSignature,y=0,k=0,I=g.getBeatProps(w)}}o.push({bar:E,surplusBeat:i%I.barBeatCnt,minute:L,keyIndex:l,scale:d,bpm:b,beatSignature:w,sectionNo:h,pastSecond:p,chordIndex:j,curTotalMemori:C,reffers:{}})})),c[h].beatSum=x,a.push({beatSignature:w,length:k}),e.scoreState.elementCacheList=o,e.scoreState.sectionCacheList=c,e.scoreState.beatCacheList=a,e.scoreState.measureCacheList=s,n.score.setScoreState(e.scoreState)};var oe,ce,ae,re,se,le,de,be,ue,he,xe,pe,fe,ge,je,ve,me,Oe,ke,ye,Se,we,Ie,Ce,Ee,Le,De,Te,ze,Ae,Me,Fe,Re,Ne,Pe,_e,Ke,Be,He,Ue,We,qe,Ve,Je,Xe,Ye,Ge,Qe,Ze,$e,en,nn,tn,on,cn,an,rn,sn,ln,dn,bn,un,hn,xn,pn,fn,gn,jn,vn,mn,On,kn,yn,Sn,wn,In,Cn,En,Ln,Dn,Tn,zn,An,Mn,Fn,Rn,Nn,Pn,_n,Kn,Bn,Hn,Un,Wn,qn,Vn,Jn,Xn,Yn,Gn,Qn,Zn,$n,et,nt,tt,it,ot,ct,at,rt,st,lt,dt,bt,ut,ht,xt,pt,ft,gt,jt,vt,mt,Ot,kt,yt,St,wt,It,Ct,Et,Lt,Dt,Tt,zt,At,Mt,Ft,Rt=_,Nt=function e(n,t){var i=this;Object(p.a)(this,e),this.store=void 0,this.dispatch=void 0,this.system={setState:function(e){i.dispatch(f.SET_SYSTEM_STATE,{systemState:e})},switchSplashToMain:function(){var e=i.store.systemState;e.isSplash=!1,i.dispatch(f.SET_SYSTEM_STATE,{systemState:e})},setMainTabIndex:function(e){var n=i.store.systemState;n.mainChannelIndex=e,i.dispatch(f.SET_SYSTEM_STATE,{systemState:n})},setRefs:function(e){i.dispatch(f.SET_REFS,{refs:e})},setReserveTasks:function(e){i.dispatch(f.SET_RESERVE_TASKS,{reserveTasks:e})},setInvalidate:function(e){i.dispatch(f.SET_INVALIDATE,{invalidate:e})}},this.score={saveFile:function(){var e=i.store.scoreState,n=i.store.scoreData,t=e.fileHandle;null!=t?Object(x.a)(u.a.mark((function o(){var c;return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.createWritable();case 2:return c=o.sent,o.next=5,c.write(JSON.stringify(n));case 5:return o.next=7,c.close();case 7:return e.fileHandle=t,i.score.setScoreState(Object(h.a)({},e)),o.next=11,t.getFile();case 11:o.sent,alert("saved successfully!");case 13:case"end":return o.stop()}}),o)})))():window.showSaveFilePicker({types:[{accept:{"text/plain":[".lcrs"]}}]}).then((function(t){Object(x.a)(u.a.mark((function o(){var c;return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.createWritable();case 2:return c=o.sent,o.next=5,c.write(JSON.stringify(n));case 5:return o.next=7,c.close();case 7:e.fileHandle=t,i.score.setScoreState(Object(h.a)({},e));case 9:case"end":return o.stop()}}),o)})))()})).catch((function(){console.log("\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f")}))},setPiano:function(e){i.dispatch(f.SET_INSTRUMENTS,{instruments:Object(h.a)(Object(h.a)({},i.store.instruments),{},{harmony:e})})},setScoreTabIndex:function(e){var n=i.store.systemState;n.scoreTabIndex=e,i.dispatch(f.SET_SYSTEM_STATE,{systemState:n})},setScoreState:function(e){i.dispatch(f.SET_SCORE_STATE,{scoreState:e})},setKeySwitch:function(e){var n=i.store.scoreState;n.keySwitch=e,i.score.setScoreState(n)},setScoreData:function(e){i.dispatch(f.SET_SCORE_DATA,{scoreData:e})},moveElement:function(e){var n=i.store.scoreState,t=e?1:-1;"fixed"!==i.store.scoreData.chordList[n.focusIndex+t].type&&(n.focusIndex+=t,n.distIndex=n.focusIndex,i.score.setScoreState(n))},moveDist:function(e){var n=i.store.scoreState,t=e?1:-1;"fixed"!==i.store.scoreData.chordList[n.distIndex+t].type&&(n.distIndex+=t,i.score.setScoreState(n))},releaseRange:function(e){var n=i.store.scoreState,t=n.focusIndex<n.distIndex?n.focusIndex:n.distIndex,o=n.focusIndex>n.distIndex?n.focusIndex:n.distIndex;n.focusIndex=e?o:t,n.distIndex=n.focusIndex,i.score.setScoreState(n)},moveSection:function(e){var n=i.store.scoreState,t=n.elementCacheList[n.focusIndex].sectionNo,o=n.sectionCacheList,c=o[t],a=i.store.scoreData.chordList[n.focusIndex].type;e?t<o.length-1?n.focusIndex=o[t+1].rangeIndexStart:n.focusIndex=c.rangeIndexEnd:n.focusIndex="section"===a&&t>0?o[t-1].rangeIndexStart:c.rangeIndexStart,n.distIndex=n.focusIndex,i.score.setScoreState(n)},flashElement:function(e){},incrementDegreeRoot:function(e){var n=i.store.scoreState,t=i.store.scoreData,o=t.chordList[n.focusIndex].detail,c=e?1:-1;null==o.root?e&&(o.root={index:0,isFlat:!1},i.score.setScoreData(t),i.score.flashElement(n.focusIndex)):o.root.index+c>=0&&o.root.index+c<=11?(o.root.index+=c,o.root.isFlat=!e&&![0,2,4,5,7,9,11].includes(o.root.index),i.score.setScoreData(t),i.score.flashElement(n.focusIndex)):o.root.index+c===-1&&(o.root=null,o.symbolKey="major",i.score.setScoreData(t),i.score.flashElement(n.focusIndex))},incrementBeatLen:function(e){var n=i.store.scoreState,t=i.store.scoreData,o=t.chordList.slice(),c=o[n.focusIndex].detail,a=e?1:-1;c.beatLen+a>=1&&c.beatLen+a<=4&&(c.beatLen+=a,t.chordList=o,i.score.setScoreData(t),Rt.updateHarmonizeCache(i.store,i),i.score.flashElement(n.focusIndex))},incrementMinuteVal:function(e,n,t){var o=i.store.scoreData,c=o.chordList[e].detail,a=n?c.minute.tail:c.minute.head;(a+=t)>=-2&&a<=2&&(n?c.minute.tail=a:c.minute.head=a,o.chordList=o.chordList.slice(),i.score.setScoreData(o),Rt.updateHarmonizeCache(i.store,i))},incrementMinuteValRelation:function(e,n){var t=i.store.scoreState.focusIndex,o=i.store.scoreData.chordList,c=-1;if(e){for(var a=t+1;a<o.length-1;a++)if("chord"===o[a].type){c=a;break}}else for(var r=t-1;r>2;r--)if("chord"===o[r].type){c=r;break}-1!=c&&(i.score.incrementMinuteVal(t,e,n),i.score.incrementMinuteVal(c,!e,-n))},addChordElement:function(){var e=i.store.scoreState,n=i.store.scoreData,t=n.chordList[e.focusIndex];if("chord"===t.type&&0!=t.detail.minute.tail)return;var o={type:"chord",detail:{beatLen:e.initialBeat,minute:{head:0,tail:0},root:null,on:null,symbolKey:"major",backing:{voicingList:[],pattern:null,hasError:!1}}};n.chordList.splice(e.focusIndex+1,0,o),i.score.setScoreData(n),Rt.updateHarmonizeCache(i.store,i)},addSectionElement:function(){var e=i.store.scoreState,n=i.store.scoreData;n.chordList.splice(e.focusIndex+1,0,{type:"section",detail:{labelName:"Section"}}),i.score.setScoreData(n),Rt.updateHarmonizeCache(i.store,i)},addAlterElement:function(){var e=i.store.scoreState,n=i.store.scoreData;n.chordList.splice(e.focusIndex+1,0,{type:"alter",detail:{alterType:null,modRel:null,dommVal:0,keyAdj:0,tempoRel:null,tempoDiff:0,tempoRate:1,tempoAbs:0,beatSignature:"4/4"}}),i.score.setScoreData(n),Rt.updateHarmonizeCache(i.store,i)},removeCurElement:function(){for(var e=i.store.scoreState,n=i.store.scoreData,t=e.focusIndex<e.distIndex?e.focusIndex:e.distIndex,o=e.focusIndex>e.distIndex?e.focusIndex:e.distIndex,c=t;c<=o;c++){var a=n.chordList[c],r=i.store.scoreState.elementCacheList[c].sectionNo;if("section"===a.type&&0===r)return}n.chordList.splice(t,o-t+1),i.score.setScoreData(n),e.focusIndex=t-1,e.distIndex=e.focusIndex,i.score.setScoreState(e),Rt.updateHarmonizeCache(i.store,i)},copyElementList:function(){for(var e=i.store.scoreState,n=i.store.scoreData,t=e.focusIndex<e.distIndex?e.focusIndex:e.distIndex,o=e.focusIndex>e.distIndex?e.focusIndex:e.distIndex,c=[],a=t;a<=o;a++){var r=n.chordList[a];c.push(JSON.parse(JSON.stringify(r)))}console.log(c.length),e.copiedElementList=c,e.cloneBacking=null,i.score.setScoreState(e)},pasteElementList:function(){var e=i.store.scoreState,n=i.store.scoreData,t=e.copiedElementList;null!=t&&(console.log(t.length),t.forEach((function(t,i){n.chordList.splice(e.focusIndex+1+i,0,t)})),i.score.setScoreData(n),e.focusIndex++,e.distIndex=e.focusIndex+t.length-1,e.copiedElementList=null,i.score.setScoreState(e),Rt.updateHarmonizeCache(i.store,i))},incrementSymbol:function(e){var n=i.store.scoreState,t=i.store.scoreData,o=t.chordList[n.focusIndex].detail,c=e?1:-1;null==o.root?(o.root={index:0,isFlat:!1},i.score.setScoreData(t)):o.root.index+c>=0&&o.root.index+c<=11&&(o.root.index+=c,o.root.isFlat=!e&&![0,2,4,5,7,9,11].includes(o.root.index),i.score.setScoreData(t))},setDiatonicChord:function(e,n){var t=i.store.scoreState,o=i.store.scoreData,c=o.chordList[t.focusIndex].detail,a=("major"===e?L:D)[n];c.root=Object(h.a)({},a.root),c.symbolKey=a.symbolKey,i.score.setScoreData(o)},setDefaultBacking:function(){var e=i.store.scoreState,n=i.store.scoreData,t=n.chordList[e.focusIndex].detail,o=A(t.symbolKey);void 0!=o.attr&&(t.backing=P(o.attr),i.score.setScoreData(n))},cloneBacking:function(){var e=i.store.scoreState,n=i.store.scoreData.chordList[e.focusIndex].detail;e.cloneBacking=JSON.parse(JSON.stringify(n.backing)),e.copiedElementList=null,i.score.setScoreState(e),console.log("clone backing! \n".concat(JSON.stringify(e.cloneBacking)))},pastBacking:function(){var e=i.store.scoreState;if(null!=e.cloneBacking){console.log("paste backing! \n".concat(JSON.stringify(e.cloneBacking)));var n=i.store.scoreData;n.chordList[e.focusIndex].detail.backing=JSON.parse(JSON.stringify(e.cloneBacking)),i.score.setScoreData(n)}}},this.symbol={toNext:function(e){var n=i.store.scoreState,t=n.symbolMng,o=i.store.scoreData,c=o.chordList[n.focusIndex].detail,a=e?1:-1,r=t.index+a;r>=0&&r<=t.curLine.length-1&&(t.index+=a,c.symbolKey=t.curLine[t.index],i.score.setScoreState(n),i.score.setScoreData(o))},toBase:function(){var e=i.store.scoreState,n=e.symbolMng,t=i.store.scoreData,o=t.chordList[e.focusIndex].detail;n.parentLine.length>0&&(o.symbolKey=n.parentLine[0],i.score.setScoreData(t))},toDerive:function(){var e=i.store.scoreState,n=e.symbolMng,t=i.store.scoreData,o=t.chordList[e.focusIndex].detail;n.childrenLine.length>0&&(o.symbolKey=n.childrenLine[0],i.score.setScoreData(t))}},this.tune={setState:function(e){i.dispatch(f.SET_TUNE_STATE,{tuneState:e})},allSelect:function(){var e=i.store.melodyState,n=i.store.scoreData.notesList;n.length>0&&(e.focusIndex=0,e.distIndex=n.length-1,i.tune.setState(e))},setNotesList:function(e){var n=i.store.scoreData;n.notesList=e,i.score.setScoreData(n)},setInstrument:function(e){i.dispatch(f.SET_INSTRUMENTS,{instruments:Object(h.a)(Object(h.a)({},i.store.instruments),{},{soundfontPlayer:e})})},incrementCurPitch:function(e,n){var t=i.store.melodyState,o=t.focusIndex;if(-1!==o){t.dataHistory.add(JSON.stringify(i.store.scoreData.notesList));for(var c=i.store.scoreData.chordList[0].detail,a=g.SCALE_INDEX.map((function(e){return(c.keyIndex+e)%12})),r=i.store.scoreData.notesList,s=r[o],l=s.pitchIndex,d="octave"!==n?1:12,b=s.pitchIndex;e?s.pitchIndex>0:s.pitchIndex<59;)if(b+=d*(e?-1:1),"scale"!==n||"scale"===n&&a.includes(H(b))){s.pitchIndex=b;break}l!==s.pitchIndex&&(X(s.pitchIndex,i.store),i.tune.setNotesList(r.slice()),i.tune.adjustScrollY())}},setKeySwitch:function(e){var n=i.store.melodyState;n.keySwitch=e,i.tune.setState(n)},moveFocus:function(e){var n=i.store.melodyState,t=i.store.scoreData.notesList;-1===n.focusIndex?t.length>0&&(n.focusIndex=n.lastFocus,n.distIndex=n.focusIndex,i.tune.setState(n)):(e?n.focusIndex<t.length-1:n.focusIndex>0)&&(n.focusIndex+=e?1:-1,n.distIndex=n.focusIndex,i.tune.setState(n)),i.tune.adjustScrollX(),i.tune.updateCurChord(n.focusIndex)},moveDistFocus:function(e){var n=i.store.melodyState,t=i.store.scoreData.notesList;-1!==n.focusIndex&&((e?n.distIndex<t.length-1:n.distIndex>0)&&(n.distIndex+=e?1:-1,i.tune.setState(n)),i.tune.adjustScrollX())},updateCurChord:function(e){var n=i.store.melodyState,t=i.store.scoreData.chordList,o=U(i.store.scoreData.notesList[e].pos)*n.beatWidth,c=0,a=t.find((function(e){if("chord"===e.type){var t=e.detail.beatLen*n.beatWidth;if(o>=c&&o<c+t)return e;c+=t}}));n.tableMouse.curChord=void 0==a?null:a,i.tune.setState(n)},addNotes:function(){var e=i.store.melodyState;if(-1!==e.focusIndex){e.dataHistory.add(JSON.stringify(i.store.scoreData.notesList));var n=i.store.scoreData,t=n.notesList,o=t[e.focusIndex],c=W(o.pos,o.len),a=U(c),r=e.focusIndex===t.length-1?-1:U(t[e.focusIndex+1].pos),s=a+1/e.quantize;(-1===r||s<=r)&&(n.notesList.splice(e.focusIndex+1,0,{pos:c,pitchIndex:o.pitchIndex,len:V(e.quantize,1)}),i.score.setScoreData(n),e.focusIndex++,e.distIndex=e.focusIndex,i.tune.setState(e)),i.tune.adjustScrollX()}},removeNotes:function(){var e=i.store.melodyState;e.dataHistory.add(JSON.stringify(i.store.scoreData.notesList));var n=i.store.scoreData.notesList,t=e.focusIndex<e.distIndex?[e.focusIndex,e.distIndex]:[e.distIndex,e.focusIndex],o=Object(l.a)(t,2),c=o[0],a=o[1]-c+1;n.splice(c,a),i.tune.setNotesList(n),e.focusIndex=c-1,e.distIndex=e.focusIndex,i.tune.setState(e),i.tune.adjustScrollX()},releaseRange:function(e){var n=i.store.melodyState,t=n.focusIndex<n.distIndex?[n.focusIndex,n.distIndex]:[n.distIndex,n.focusIndex],o=Object(l.a)(t,2),c=o[0],a=o[1];n.focusIndex=e?a:c,n.distIndex=n.focusIndex,i.tune.setState(n),i.tune.adjustScrollX(),i.tune.updateCurChord(n.focusIndex)},resizeNotes:function(e){var n=i.store.melodyState;if(-1!==n.focusIndex){n.dataHistory.add(JSON.stringify(i.store.scoreData.notesList));var t=i.store.scoreData,o=t.notesList,c=o[n.focusIndex],a=U(c.len),r=U(c.pos)+a,s=n.focusIndex===o.length-1?-1:U(o[n.focusIndex+1].pos),l=1/n.quantize;if(e?-1===s||r+l<=s:a>l){var d=U(c.len)+l*(e?1:-1);c.len=V(n.quantize,d*n.quantize),t.notesList=o.slice(),i.score.setScoreData(t)}}},moveNotes:function(e){var n=i.store.melodyState;if(-1!==n.focusIndex){n.dataHistory.add(JSON.stringify(i.store.scoreData.notesList));var t=i.store.scoreData,o=t.notesList,c=n.distIndex,a=n.focusIndex,r=c>a?[a,c]:[c,a],s=Object(l.a)(r,2),d=s[0],b=s[1],u=0===d?0:U(o[d-1].pos)+U(o[n.focusIndex-1].len),h=b===o.length-1?-1:U(o[b+1].pos),x=1/n.quantize,p=U(o[d].pos),f=U(o[b].pos)+U(o[b].len);if(e?-1===h||f+x<=h:p-x>=u){for(var g=d;g<=b;g++){var j=o[g],v=U(j.pos)+x*(e?1:-1);j.pos=V(n.quantize,v*n.quantize)}t.notesList=o.slice(),i.score.setScoreData(t)}}},firstNotes:function(){var e=i.store.melodyState;i.store.scoreData.notesList.length>0&&(e.focusIndex=0,e.distIndex=e.focusIndex,i.tune.setState(e),i.tune.adjustScrollX())},adjustScrollX:function(){var e=i.store.melodyState,n=i.store.refs.melody.table,t=e.distIndex;if(-1!==t&&null!=n){var o=U(i.store.scoreData.notesList[t].pos)*e.beatWidth;n.scrollTo({left:o-300,behavior:"smooth"})}},adjustScrollY:function(){var e=i.store.melodyState,n=i.store.refs.melody.table;if(-1!==e.focusIndex&&null!=n){var t=i.store.scoreData.notesList[e.focusIndex].pitchIndex*ee;n.scrollTo({top:t-n.clientHeight/2,behavior:"smooth"})}},previewStart:function(){-1!==i.store.melodyState.focusIndex&&function(e,n){var t=e.melodyState,i=e.scoreData,o=[],c=e.instruments.soundfontPlayer,a=i.chordList[0].detail.bpm;t.lastFocus=t.focusIndex,t.isPreview=!0;for(var r=e.invalidate.melody,s=-1,l=function(l){var d=i.notesList[l],b=U(d.pos),u=U(d.len),h=d.pitchIndex,x=60/a*b;-1===s&&(s=x),o.push(setTimeout((function(){if(t.focusIndex=l,t.distIndex=t.focusIndex,r(),n.tune.adjustScrollX(),null!=c){var e=H(h),i=y[e%12],o=Math.floor((59-h+9)/12)+1;c.stop(),c.play(i+o,0,{duration:60/a*u})}}),1e3*(x-s))),l===i.notesList.length-1&&o.push(setTimeout((function(){G(e,n,o)}),1e3*(x-s+60/a*u)))},d=t.focusIndex;d<i.notesList.length;d++)l(d);t.isSolo||Q(1e3*s,e,n,o),n.system.setReserveTasks(o),n.tune.setState(t)}(i.store,i)},copyNotes:function(){for(var e=i.store.melodyState,n=i.store.scoreData.notesList,t=e.focusIndex<e.distIndex?[e.focusIndex,e.distIndex]:[e.distIndex,e.focusIndex],o=Object(l.a)(t,2),c=o[0],a=o[1]-c+1,r=[],s=n[c].pos,d=J(s),b=0;b<a;b++){var u=n[b+c],x=J(u.pos),p=d>x?d:x,f=U(u.pos)-U(s),g=V(p,f/(1/p));console.log("normalPos = ".concat(f,", unit = ").concat(p)),console.log(JSON.stringify(g)),r.push({pitchIndex:u.pitchIndex,pos:g,len:Object(h.a)({},u.len)})}e.cloneNotesList=r,i.tune.setState(e)},pasteNotes:function(){var e=i.store.melodyState;if(-1!==e.focusIndex){e.dataHistory.add(JSON.stringify(i.store.scoreData.notesList));var n=i.store.scoreData,t=n.notesList,o=t[e.focusIndex],c=W(o.pos,o.len),a=e.focusIndex===t.length-1?-1:U(t[e.focusIndex+1].pos),r=JSON.parse(JSON.stringify(e.cloneNotesList));r.forEach((function(e){e.pos=W(e.pos,c)}));var s=r[r.length-1],l=U(s.pos)+U(s.len);console.log("newRight: ".concat(l,", nextLeft: ").concat(a)),(-1===a||l<=a)&&(n.notesList=t.concat(r),n.notesList.sort((function(e,n){var t=U(e.pos),i=U(n.pos);return t===i?0:t<i?-1:1})),i.score.setScoreData(n),e.focusIndex++,e.distIndex=e.focusIndex+r.length-1,i.tune.setState(e))}},undo:function(){var e=i.store.melodyState,n=i.store.scoreData,t=e.dataHistory;console.log("undo start \u2605 length: ".concat(t.list.length,", cur: ").concat(t.cur));var o=t.undo();null!=o&&(0===t.cur&&(console.log("first undo"),t.list.unshift(JSON.stringify(n.notesList)),t.cur=1),n.notesList=JSON.parse(o),e.focusIndex>=n.notesList.length-1&&(e.focusIndex=n.notesList.length-1,e.distIndex=e.focusIndex),i.score.setScoreData(n)),console.log("undo end \u2605 length: ".concat(t.list.length,", cur: ").concat(t.cur))},redo:function(){var e=i.store.melodyState,n=i.store.scoreData,t=e.dataHistory;console.log("redo start \u2605 length: ".concat(t.list.length,", cur: ").concat(t.cur));var o=t.redo();null!=o&&(n.notesList=JSON.parse(o),e.focusIndex>=n.notesList.length-1&&(e.focusIndex=n.notesList.length-1,e.distIndex=e.focusIndex),i.score.setScoreData(n)),console.log("redo end \u2605 length: ".concat(t.list.length,", cur: ").concat(t.cur))}},this.backing={openBackingEditor:function(){var e=i.store.scoreState,n=i.store.scoreData.chordList[e.focusIndex].detail,t=e.elementCacheList[e.focusIndex],o=n.backing;e.hideMenu="backing",i.score.setScoreState(e);var c=i.backing.getInitVoicingTable(n.backing.voicingList),a=null;if(null!=o.pattern){var r=o.pattern,s=B.buildChannels(c);a={channelIndex:-1,lenIndex:0,isUsePedal:!1,layerIndex:0,channels:B.getChannels(s,r.channelSize),layers:B.convertEditorLayerFromScore(r.channelSize,r.layers)}}i.backing.setState({chordInfo:{root:n.root,on:n.on,beatLen:n.beatLen,minute:n.minute,symbolKey:n.symbolKey,init:Object(h.a)({},t)},voicingTable:c,pattern:a,isPreview:!1,hasError:o.hasError})},closeBackingEditor:function(){var e=i.store.scoreState;e.hideMenu="none",i.score.setScoreState(e)},setState:function(e){i.dispatch(f.SET_BACKING_STATE,{backingState:e})},getInitialLayer:function(){return{noteDivList:[{rate:4,isDot:!1,div3:0}],table:[[null]],velocityList:[5]}},getInitVoicingTable:function(e){for(var n=new Array(8),t=function(t){n[t]=new Array(6);for(var i=n[t],o=function(i){var o=e.find((function(e){if(e.octave===t&&e.struct===i)return e}));n[t][i]=null!=o},c=0;c<i.length;c++)o(c)},i=0;i<n.length;i++)t(i);return n},mappingEditorToScore:function(){var e=i.store.scoreState,n=i.store.scoreData,t=n.chordList[e.focusIndex].detail,o=i.store.backingState;t.backing={voicingList:B.getVoicingListFromTable(o.voicingTable),pattern:null==o.pattern?null:B.buildPatternProps(o.pattern),hasError:o.hasError},i.score.setScoreData(n)},addPatternColumn:function(){var e=i.store.backingState,n=e.pattern,t=n.layers[n.layerIndex],o=t.noteDivList,c={rate:o[n.lenIndex].rate,div3:0,isDot:!1};o.splice(n.lenIndex+1,0,c),t.noteDivList=o.slice(),t.table.forEach((function(e){e.splice(n.lenIndex+1,0,null)})),t.velocityList.splice(n.lenIndex+1,0,5),i.backing.updateErrorState(),i.backing.setState(e)},movePatternColumn:function(e){var n=i.store.backingState,t=n.pattern,o=t.layers[t.layerIndex],c=t.lenIndex;(c+=1*(e?1:-1))>=0&&c<=o.noteDivList.length-1&&(t.lenIndex=c),i.backing.setState(n)},moveChannelIndex:function(e){var n=i.store.backingState,t=n.pattern,o=t.channelIndex;(e?o<t.channels.length-1:o>0)&&(t.channelIndex+=e?1:-1),i.backing.setState(n)},setCurrentDivRate:function(e){var n=i.store.backingState,t=n.pattern,o=t.layers[t.layerIndex];o.noteDivList[t.lenIndex].rate=e,o.noteDivList=o.noteDivList.slice(),i.backing.updateErrorState(),i.backing.setState(n)},toggleCurrentDivHalf:function(){var e=i.store.backingState,n=e.pattern,t=n.layers[n.layerIndex].noteDivList[n.lenIndex];t.isDot=!t.isDot,i.backing.setState(e),i.backing.updateErrorState()},getNotes:function(){var e=i.store.backingState.pattern;return e.layers[e.layerIndex].table[e.channels.length-1-e.channelIndex][e.lenIndex]},setNotes:function(e){var n=i.store.backingState,t=n.pattern,o=t.layers[t.layerIndex];o.table[t.channels.length-1-t.channelIndex][t.lenIndex]=e,o.table=o.table.slice(),i.backing.updateErrorState(),i.backing.setState(n)},incrementVel:function(e){var n=i.store.backingState,t=n.pattern,o=t.layers[t.layerIndex],c=o.velocityList[t.lenIndex]+e;c>=1&&c<=10&&(o.velocityList[t.lenIndex]=c,i.backing.setState(n))},deleteColumn:function(){var e=i.store.backingState,n=e.pattern,t=n.layers[n.layerIndex];t.noteDivList.length>=2&&(t.noteDivList.splice(n.lenIndex,1),t.table.forEach((function(e){e.splice(n.lenIndex,1)})),t.velocityList.splice(n.lenIndex,1),n.lenIndex>0&&n.lenIndex--,i.backing.setState(e)),i.backing.updateErrorState()},changeLayer:function(){var e=i.store.backingState,n=e.pattern;n.layerIndex=0===n.layerIndex?1:0,n.lenIndex=0,n.channelIndex=-1,i.backing.setState(e)},testBacking:function(){var e=i.store.scoreData.chordList[0].detail,n=i.store.backingState,t=i.store.reserveTasks,o=n.chordInfo,c=(o.root.index+o.init.keyIndex)%12,a=A(o.symbolKey),r=o.beatLen+o.minute.head+o.minute.tail,s=60/e.bpm*r,l={voicingList:B.getVoicingListFromTable(n.voicingTable),pattern:null==n.pattern?null:B.buildPatternProps(n.pattern),hasError:!1},d=B.getPitchListFromVoicing(l.voicingList,c,a);B.playBacking(i.store,t,e.bpm,l,d,s),t.push(setTimeout((function(){n.isPreview=!1,i.backing.setState(n)}),1e3*s)),n.isPreview=!0,i.backing.setState(n)},updateErrorState:function(){var e=i.store.backingState,n=B.getVoicingListFromTable(e.voicingTable);e.hasError=B.checkError(e.chordInfo,n,e.pattern),i.backing.setState(e)}},this.store=n,this.dispatch=function(e,n){return t({type:e,payload:n})}},Pt=t(5),_t=function(){function e(){Object(p.a)(this,e),this.cur=void 0,this.list=void 0,this.cur=-1,this.list=[]}return Object(Pt.a)(e,[{key:"add",value:function(e){console.log("add start \u2605 length: ".concat(this.list.length,", cur: ").concat(this.cur)),this.cur>-1&&(this.list.splice(0,this.cur+1),this.cur=-1,console.log("restert")),this.list.unshift(e),console.log("add end \u2605 length: ".concat(this.list.length,", cur: ").concat(this.cur))}},{key:"undo",value:function(){var e=null;return this.cur<this.list.length-1&&(this.cur++,e=this.list[this.cur]),e}},{key:"redo",value:function(){var e=null;return this.cur>0&&(this.cur--,e=this.list[this.cur]),e}}]),e}(),Kt=_t,Bt={userEnv:{keyConfig:{note:{prevElement:"ArrowLeft",nextElement:"ArrowRight",prevSection:"ArrowUp",nextSection:"ArrowDown",addChord:"a",addSection:"s",addChange:"m",deleteCur:"Delete",distMode:"Shift",sustainMode:"f",incRoot:"ArrowUp",decRoot:"ArrowDown",incBeat:"ArrowRight",decBeat:"ArrowLeft",symbolMode:"c"}},colorProps:{entryBackground:"#e2a9ae"}},systemState:{isSplash:!0,mainChannelIndex:0,scoreTabIndex:0,dialogMode:"none"},backingState:null,scoreState:{fileHandle:null,isTune:!1,initialBeat:4,focusIndex:-1,distIndex:-1,elementCacheList:[],sectionCacheList:[],scaleCacheList:[],tempoCacheList:[],beatCacheList:[],measureCacheList:[],keySwitch:{distMode:!1,sustainMode:!1,symbolMode:!1,control:!1,minHeadMode:!1,minTailMode:!1},symbolMng:null,hideMenu:"none",isPreview:!1,isSolo:!1,cloneBacking:null,copiedElementList:null},melodyState:{focusIndex:-1,distIndex:-1,lastFocus:-1,quantize:4,beatWidth:120,tableMouse:{isPut:!1,lock:{x:0,y:0},width:0,prevRight:0,nextLeft:0,notesState:{index:-1,side:"normal",isResize:!1,isMove:!1},curChord:null,mousePitchIndex:-1,mouseMeasurePos:-1},timelineMouse:{pos:-1,isPut:!1,lock:-1,width:0},soundfontInfo:{name:"violin",gain:5},keySwitch:{scaleMode:!1,octave:!1,resize:!1,move:!1,shift:!1,control:!1},isPreview:!1,isSolo:!1,cloneNotesList:[],dataHistory:new Kt},scoreData:{chordList:[],notesList:[]},instruments:{sampler:new N.a({C2:"https://dl.dropbox.com/s/ebta7izw1zdphki/KEPSREC036.mp3?dl=0",D2:"https://dl.dropbox.com/s/d8bel1c9d1utk25/KEPSREC038.mp3?dl=0",E2:"https://dl.dropbox.com/s/qe48401jgb2cewo/KEPSREC040.mp3?dl=0",F2:"https://dl.dropbox.com/s/3s7sc8btjob8gru/KEPSREC041.mp3?dl=0",G2:"https://dl.dropbox.com/s/zzxvr0p4j37n9i0/KEPSREC043.mp3?dl=0",A2:"https://dl.dropbox.com/s/vcrs90e06djj7sx/KEPSREC045.mp3?dl=0",B2:"https://dl.dropbox.com/s/yvkrz0ngkijjngq/KEPSREC047.mp3?dl=0",C3:"https://dl.dropbox.com/s/qjkoqqdkqwtnctj/KEPSREC048.mp3?dl=0",D3:"https://dl.dropbox.com/s/jjyithbiwmxfn5m/KEPSREC050.mp3?dl=0",E3:"https://dl.dropbox.com/s/2s4p06g2gw2lcf7/KEPSREC052.mp3?dl=0",F3:"https://dl.dropbox.com/s/7mo0mm2bbc3im60/KEPSREC053.mp3?dl=0",G3:"https://dl.dropbox.com/s/qqrrlwogz0orihq/KEPSREC055.mp3?dl=0",A3:"https://dl.dropbox.com/s/o6oycmolcn7rhbs/KEPSREC057.mp3?dl=0",B3:"https://dl.dropbox.com/s/3s05r18hsd19t6e/KEPSREC059.mp3?dl=0",C4:"https://dl.dropbox.com/s/9fgqyu7hsj8fncc/KEPSREC060.mp3?dl=0",D4:"https://dl.dropbox.com/s/ja1d04dgy9v98x9/KEPSREC062.mp3?dl=0",E4:"https://dl.dropbox.com/s/y2379pix35gto7u/KEPSREC064.mp3?dl=0",F4:"https://dl.dropbox.com/s/h1sq8yikmdfvzqc/KEPSREC065.mp3?dl=0",G4:"https://dl.dropbox.com/s/hvzvcrm1emfum0d/KEPSREC067.mp3?dl=0",A4:"https://dl.dropbox.com/s/vy56xbt7w78o41o/KEPSREC069.mp3?dl=0",B4:"https://dl.dropbox.com/s/e9kv77pym1wtujc/KEPSREC071.mp3?dl=0",C5:"https://dl.dropbox.com/s/0v042zfk67q4a8d/KEPSREC072.mp3?dl=0",C6:"https://dl.dropbox.com/s/3u2c7qsmhnse575/KEPSREC084.mp3?dl=0"}).toDestination(),harmony:null,soundfontPlayer:null},refs:{harmonize:{note:{}},melody:{table:null,measure:null,chord:null,pitch:null}},reserveTasks:[],invalidate:{harmoniizeInvalidate:{},harmonize:null,melody:null}},Ht=t(1),Ut=function(){var e=Object(o.useContext)(xp),n=e.store,t=(e.dispatcher,"none"!==n.systemState.dialogMode);return Object(Ht.jsx)(Wt,{isDisplay:t,children:Object(Ht.jsx)(qt,{})})},Wt=d.b.div(oe||(oe=Object(s.a)(["\n    display: ",";\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #000000d8;\n    z-index: 10;\n"])),(function(e){return e.isDisplay?"block":"none"})),qt=d.b.div(ce||(ce=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 50px;\n    top: 50px;\n    width: 500px;\n    height: 400px;\n    background-color: #464646cc;\n    border: 1px solid #dadada;\n"]))),Vt=function(e){var n=Object(o.useState)(e.activeNo),t=Object(l.a)(n,2),i=t[0],c=t[1];return Object(o.useEffect)((function(){c(e.activeNo)}),[e.activeNo]),Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(Yt,{children:e.tabElements.map((function(n,t){return Object(Ht.jsx)(Jt,{name:n.name,icon:n.icon,isActive:t==i,isDisable:n.disable,selectTab:function(){return function(n){void 0!=e.selectTabIndex?e.selectTabIndex(n):c(n)}(t)}},t)}))}),Object(Ht.jsx)(Gt,{children:e.tabElements.map((function(e,n){return Object(Ht.jsx)(Xt,{cont:e.cont,isActive:n===i},n)}))})]})},Jt=function(e){return Object(Ht.jsxs)(Zt,{isActive:e.isActive,onClick:function(){return e.selectTab()},children:[Object(Ht.jsx)($t,{children:e.icon}),Object(Ht.jsx)(ei,{children:e.name})]})},Xt=function(e){return Object(Ht.jsx)(Qt,{isActive:e.isActive,children:e.cont})},Yt=d.b.div(ae||(ae=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    margin-right: 5px;\n    height: 100%;\n    background-color: #b9b9b9;\n    border: 1px solid #707070;\n    box-sizing: border-box;\n    border-radius: 10px 0 0 10px;\n    vertical-align: top;\n    box-shadow: 1px 2px 12px #aaaaaa;\n"]))),Gt=d.b.div(re||(re=Object(s.a)(["\n    display: inline-block;\n    background-color: #b9b9b9;\n    border: 1px solid #707070;\n    box-sizing: border-box;\n    width: calc(100% - 105px);\n    height: 100%;\n    border-radius: 0 6px 6px 0;\n    box-shadow: 1px 2px 12px #aaaaaa;\n"]))),Qt=d.b.div(se||(se=Object(s.a)(["\n    /* margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px); */\n    width: 100%;\n    height: 100%;\n    /* background-color: #ece6e6; */\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(de||(de=Object(s.a)(["display: inline-block;"]))):Object(d.a)(le||(le=Object(s.a)(["display: none;"])))})),Zt=d.b.div(be||(be=Object(s.a)(["\n    display: inline-block;\n    width: 90px;\n    height: 90px;\n    margin: 5px 0 0 5px;\n    border-radius: 10px;\n    ","\n    transition: background-color 500ms;\n    & *{\n        transition: color 150ms;\n    }\n    // \u30a2\u30af\u30c6\u30a3\u30d6\u3058\u3083\u306a\u3044\u6642\u3060\u3051hover\u8981\u7d20\u3092\u4ed8\u52a0\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(ue||(ue=Object(s.a)(["\n                background-color: #e4e3e1;\n                border: 1px solid #949494\n            "]))):Object(d.a)(he||(he=Object(s.a)(["\n                background-color: #d1d1d1;\n                opacity: 0.8;\n            "])))}),(function(e){return e.isActive?"":Object(d.a)(xe||(xe=Object(s.a)(["\n        &:hover {\n            & *{\n                transition: color 150ms;\n                /* background-color: #e2d6d6; */\n                text-shadow: 1px 2px 22px #f7f7f7ea;\n                color: #a7a7a7;\n            }\n        }\n    "])))})),$t=(Object(d.a)(pe||(pe=Object(s.a)(["\n    text-shadow: 1px 2px 22px #f7f7f7cf;\n    color: #a3a3a3;\n"]))),d.b.div(fe||(fe=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 60px;\n    /* background-color: #df828221; */\n    font-size: 50px;\n    color: #757575;\n    text-align: center;\n    padding-top: 5px;\n    box-sizing: border-box;\n"])))),ei=d.b.div(ge||(ge=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    /* background-color: #8482df20; */\n    font-size: 20px;\n    font-weight: 600;\n    color: #757575;\n    text-align: center;\n"]))),ni=t(26),ti=t(20),ii=t(11),oi=function(e){var n=Object(o.useState)(e.activeNo),t=Object(l.a)(n,2),i=t[0],c=t[1];return Object(o.useEffect)((function(){c(e.activeNo)}),[e.activeNo]),Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(ri,{children:e.tabElements.map((function(n,t){return Object(Ht.jsx)(ci,{name:n.name,isActive:t==i,isDisable:n.disable,selectTab:function(){return function(n){void 0!=e.selectTabIndex?e.selectTabIndex(n):c(n)}(t)}},t)}))}),Object(Ht.jsx)(si,{children:e.tabElements.map((function(e,n){return Object(Ht.jsx)(ai,{cont:e.cont,isActive:n===i},n)}))})]})},ci=function(e){return Object(Ht.jsx)(di,{isDisable:e.isDisable,isActive:e.isActive,onClick:function(){return e.selectTab()},children:e.name})},ai=function(e){return Object(Ht.jsx)(li,{isActive:e.isActive,children:e.cont})},ri=d.b.div(je||(je=Object(s.a)(["\n    display: inline-block;\n    height: 35px;\n"]))),si=d.b.div(ve||(ve=Object(s.a)(["\n    display: block;\n    background-color: #999999;\n    height: calc(100% - 35px);\n    border-radius: 0 6px 6px 6px;\n    box-shadow: 0 2px 0 0 #000b3a48;\n"]))),li=d.b.div(me||(me=Object(s.a)(["\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px);\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(ke||(ke=Object(s.a)(["display: inline-block;"]))):Object(d.a)(Oe||(Oe=Object(s.a)(["display: none;"])))})),di=d.b.div(ye||(ye=Object(s.a)(["\n    display: inline-block;\n    /* width: 100px; */\n    padding: 0 10px;\n    ","\n    /* opacity: 0.7; */\n    user-select: none;\n    margin-right: 6px;\n    font-weight: 600;\n    box-sizing: border-box;\n    line-height: 30px;\n    vertical-align: bottom;\n    transition: padding 100ms;\n"])),(function(e){return e.isActive?Object(d.a)(Se||(Se=Object(s.a)(["\n                color: #ebebeb;\n                padding: 0 35px;\n                background-color: #999999;\n                height: 35px;\n                font-size: 24px;\n                border-radius: 3px 15px 0 0;\n                text-shadow: 1px 2px 3px #00000065;\n            "]))):Object(d.a)(we||(we=Object(s.a)(["\n                height: 100%;\n                color: #555;\n                /* background-color: #90909b; */\n                background: linear-gradient(to bottom, #999999, #7a7a7a);\n                height: 30px;\n                font-size: 18px;\n                border-radius: 3px 10px 0 0;\n                ","\n            "])),e.isDisable?Object(d.a)(Ie||(Ie=Object(s.a)(["\n                    pointer-events: none;\n                    opacity: 0.7;\n                "]))):"")})),bi=(d.b.div(Ce||(Ce=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n"]))),d.b.div(Ee||(Ee=Object(s.a)(["\n    display: inline-block;\n"]))),d.b.div(Le||(Le=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n"]))),Object(d.a)(De||(De=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    font-size: 18px;\n    font-weight: 600;\n    color: black;\n    line-height: 18px;\n"]))),Object(d.a)(Te||(Te=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    font-size: 24px;\n    font-weight: 600;\n    text-align: center;\n    color: black;\n    line-height: 24px;\n    box-sizing: border-box;\n"])))),ui=Object(d.a)(ze||(ze=Object(s.a)(["\n    opacity: 0.6;\n    pointer-events: none;\n"]))),hi=function e(n){var t=this;Object(p.a)(this,e),this.scoreData=void 0,this.curIndex=void 0,this.addChord=function(e,n,i){var o=A(i),c=void 0==o.attr?{voicingList:[],pattern:null,hasError:!1}:P(o.attr);t.scoreData.chordList.splice(t.curIndex,0,{type:"chord",detail:{beatLen:e,minute:{head:0,tail:0},root:n,on:null,symbolKey:i,backing:c}}),t.curIndex++},this.addChordDiatonic=function(e,n){var i=L[n];t.addChord(e,i.root,i.symbolKey)},this.getScoreData=function(){return t.scoreData},this.scoreData={chordList:[{type:"init",detail:n},{type:"fixed",detail:{fixed:"Start"}},{type:"section",detail:{labelName:"Section"}},{type:"fixed",detail:{fixed:"End"}}],notesList:[]},this.curIndex=3},xi=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=Object(o.useState)(""),c=Object(l.a)(i,2),a=(c[0],c[1],Object(o.useState)(null)),r=Object(l.a)(a,2),s=r[0],d=r[1],b=n.scoreState.fileHandle,p=n.scoreData,f=n.systemState.scoreTabIndex,g=Object(o.useMemo)((function(){var e="-",t="-",i="-",o="-",c="-",a="-",r="-",l="-",d="-",b="-",u="-";if(0===f&&(null!=s&&(e=s.name,t="".concat(s.size.toString()," byte"),i=function(e){var n=e.getFullYear().toString(),t=(1+e.getMonth()).toString(),i=e.getDate().toString(),o=e.getHours().toString(),c=e.getMinutes().toString(),a=e.getSeconds().toString(),r="YYYY-MM-DD hh:mm:ss";return(r=(r=(r=(r=(r=r.replace(/YYYY/g,n)).replace(/MM/g,t)).replace(/DD/g,i)).replace(/hh/g,o)).replace(/mm/g,c)).replace(/ss/g,a)}(new Date(s.lastModified))),p.chordList.length>0)){var h=p.chordList[0].detail;o="".concat(w[h.keyIndex]," ").concat(h.scale),c=h.bpm.toString(),a=h.beatSignature;var x=0,g=0;p.chordList.forEach((function(e){switch(e.type){case"section":x++;break;case"chord":g++}})),r=x.toString(),l=g.toString();var j=n.scoreState.elementCacheList;if(j.length>0){var v=j[j.length-1];b="".concat(v.pastSecond/1e3,"s"),d="".concat(v.bar," (").concat(v.surplusBeat,")")}u=p.notesList.length.toString()}return[{name:e,size:t,modified:i},{key:o,tempo:c,rate:a,section:r,chord:l,bar:d,time:b,notes:u}]}),[f,p,s]),j=Object(l.a)(g,2),v=j[0],m=j[1];Object(o.useEffect)((function(){0===f&&null!=b&&b.getFile().then((function(e){d(e)}))}),[f]);var O=function(e){n.scoreState.focusIndex=2,n.scoreState.distIndex=n.scoreState.focusIndex,t.score.setScoreState(Object(h.a)({},n.scoreState)),t.score.setScoreData(e),n.scoreData=e,Rt.updateHarmonizeCache(n,t)};return Object(Ht.jsxs)(pi,{children:[Object(Ht.jsxs)(fi,{children:[Object(Ht.jsx)(ji,{onClick:function(){O({chordList:[{type:"init",detail:{keyIndex:0,bpm:100,scale:"major",beatSignature:"4/4"}},{type:"fixed",detail:{fixed:"Start"}},{type:"section",detail:{labelName:"Section"}},{type:"chord",detail:{beatLen:4,minute:{head:0,tail:0},root:null,on:null,symbolKey:"major",backing:{voicingList:[],pattern:null,hasError:!1}}},{type:"fixed",detail:{fixed:"End"}}],notesList:[]})},children:"Create an empty score."}),Object(Ht.jsx)(ji,{onClick:function(){var e=new hi({keyIndex:0,bpm:100,scale:"major",beatSignature:"4/4"});e.addChordDiatonic(2,0),e.addChordDiatonic(2,4),e.addChordDiatonic(2,5),e.addChordDiatonic(2,2),e.addChordDiatonic(2,3),e.addChordDiatonic(2,0),e.addChordDiatonic(2,1),e.addChordDiatonic(2,4),e.addChordDiatonic(2,0),e.addChordDiatonic(2,4),e.addChordDiatonic(2,5),e.addChordDiatonic(2,2),e.addChordDiatonic(2,3),e.addChordDiatonic(2,0),e.addChordDiatonic(2,1),e.addChordDiatonic(2,4),e.addChordDiatonic(2,0),O(e.getScoreData())},children:"\u2160\u2192\u2164\u2192\u2165\u2192\u2162m\u2192\u2163\u2192\u2160\u2192\u2161m\u2192\u2164\u2192\u2160"}),Object(Ht.jsx)(ji,{onClick:function(){var e=new hi({keyIndex:0,bpm:100,scale:"major",beatSignature:"4/4"});e.addChordDiatonic(2,5),e.addChordDiatonic(2,3),e.addChordDiatonic(2,4),e.addChordDiatonic(2,0),e.addChordDiatonic(2,5),e.addChordDiatonic(2,3),e.addChordDiatonic(2,4),e.addChordDiatonic(2,0),e.addChordDiatonic(2,5),e.addChordDiatonic(2,3),e.addChordDiatonic(2,4),e.addChordDiatonic(2,0),e.addChordDiatonic(2,5),e.addChordDiatonic(2,3),e.addChordDiatonic(2,4),e.addChordDiatonic(2,5),O(e.getScoreData())},children:"\u2165m\u2192\u2163\u2192\u2164\u2192\u2160\u2192\u2165m\u2192\u2163\u2192\u2164\u2192\u2160"}),Object(Ht.jsx)(ji,{onClick:function(){var e=new hi({keyIndex:0,bpm:100,scale:"major",beatSignature:"4/4"});e.addChordDiatonic(4,3),e.addChordDiatonic(4,4),e.addChordDiatonic(4,2),e.addChordDiatonic(4,5),e.addChordDiatonic(4,1),e.addChordDiatonic(4,4),e.addChord(4,{index:0,isFlat:!1},"suspend4th"),e.addChordDiatonic(4,0),O(e.getScoreData())},children:"\u2163\u2192\u2164\u2192\u2162m\u2192\u2165m\u2192\u2161m\u2192\u2164\u2192\u2160sus4\u2192\u2160"})]}),Object(Ht.jsxs)(gi,{children:[Object(Ht.jsxs)(vi,{children:[Object(Ht.jsxs)(mi,{isEnable:null!=b,children:[Object(Ht.jsx)(ki,{children:"FILE"}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"name"}),Object(Ht.jsx)(wi,{children:v.name})]}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"size"}),Object(Ht.jsx)(wi,{children:v.size})]}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"modified"}),Object(Ht.jsx)(wi,{children:v.modified})]})]}),Object(Ht.jsxs)(Oi,{isEnable:p.chordList.length>0,children:[Object(Ht.jsx)(ki,{children:"SCORE"}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"key"}),Object(Ht.jsx)(wi,{children:m.key})]}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"tempo"}),Object(Ht.jsx)(wi,{children:m.tempo})]}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"rate"}),Object(Ht.jsx)(wi,{children:m.rate})]}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"section"}),Object(Ht.jsx)(wi,{children:m.section})]}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"chord"}),Object(Ht.jsx)(wi,{children:m.chord})]}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"bar"}),Object(Ht.jsx)(wi,{children:m.bar})]}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"time"}),Object(Ht.jsx)(wi,{children:m.time})]}),Object(Ht.jsxs)(yi,{children:[Object(Ht.jsx)(Si,{children:"notes"}),Object(Ht.jsx)(wi,{children:m.notes})]})]})]}),Object(Ht.jsxs)(Ii,{children:[Object(Ht.jsx)(Ci,{onClick:function(){null!=b?Object(x.a)(u.a.mark((function e(){var i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.createWritable();case 2:return i=e.sent,e.next=5,i.write(JSON.stringify(p));case 5:return e.next=7,i.close();case 7:return n.scoreState.fileHandle=b,t.score.setScoreState(Object(h.a)({},n.scoreState)),e.next=11,b.getFile();case 11:o=e.sent,d(o),alert("saved successfully!");case 14:case"end":return e.stop()}}),e)})))():window.showSaveFilePicker({types:[{accept:{"text/plain":[".lcrs"]}}]}).then((function(e){Object(x.a)(u.a.mark((function i(){var o,c;return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.createWritable();case 2:return o=i.sent,i.next=5,o.write(JSON.stringify(p));case 5:return i.next=7,o.close();case 7:return n.scoreState.fileHandle=e,t.score.setScoreState(Object(h.a)({},n.scoreState)),i.next=11,e.getFile();case 11:c=i.sent,d(c);case 13:case"end":return i.stop()}}),i)})))()})).catch((function(){console.log("\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f")}))},children:"Save"}),Object(Ht.jsx)(Ci,{onClick:function(){Object(x.a)(u.a.mark((function e(){var t,i,o,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker();case 2:return t=e.sent,i=Object(l.a)(t,1),o=i[0],e.next=7,o.getFile();case 7:return c=e.sent,e.next=10,c.text();case 10:a=e.sent,n.scoreState.fileHandle=o,d(c),O(JSON.parse(a));case 14:case"end":return e.stop()}}),e)})))()},children:"Load"}),Object(Ht.jsx)(Ci,{onClick:function(){n.scoreState.fileHandle=null,t.score.setScoreState(Object(h.a)({},n.scoreState)),n.scoreData=p,Rt.updateHarmonizeCache(n,t),d(null)},children:"Disconnect"})]})]})]})},pi=d.b.div(Ae||(Ae=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #7e7e7e;\n    text-align: left;\n"]))),fi=d.b.div(Me||(Me=Object(s.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    background-color: #7e7e7e;\n    text-align: left;\n    vertical-align: top;\n"]))),gi=d.b.div(Fe||(Fe=Object(s.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    background-color: #888999;\n    text-align: left;\n    vertical-align: top;\n"]))),ji=d.b.div(Re||(Re=Object(s.a)(["\n    \n    display: inline-block;\n    width: calc(100% - 50px);\n    height: 50px;\n    margin: 20px 25px;\n    border: 2px solid #cacaca;\n    /* background: linear-gradient(to bottom, #585858, #a7a7a7, #585858); */\n    background-color: #000;\n    color: #ccc;\n    font-size: 30px;\n    font-weight: 600;\n    text-align: left;\n    box-sizing: border-box;\n    padding-left: 20px;\n    border-radius: 6px;\n\n    &:hover {\n        background-color: #616161;\n    }\n"]))),vi=d.b.div(Ne||(Ne=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    margin: 4px 0 4px 4px;\n    height: calc(100% - 48px);\n    /* background-color: #e98c8c; */\n    box-sizing: border-box;\n    color: #060053;\n"]))),mi=d.b.div(Pe||(Pe=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: ","px;\n    margin: 4px 0 4px 4px;\n    background-color: #9da5af;\n    border: solid 1px #1b00b3;\n    ","\n    border-radius: 4px;\n    box-sizing: border-box;\n    color: #060053;\n"])),160,(function(e){return e.isEnable?"":Object(d.a)(_e||(_e=Object(s.a)(["\n        opacity: 0.3;\n    "])))})),Oi=d.b.div(Ke||(Ke=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: calc(100% - ","px);\n    margin: 4px 0 4px 4px;\n    background-color: #9da5af;\n    border: solid 1px #1b00b3;\n    ","\n    border-radius: 4px;\n    box-sizing: border-box;\n    color: #060053;\n"])),176,(function(e){return e.isEnable?"":Object(d.a)(Be||(Be=Object(s.a)(["\n        opacity: 0.3;\n    "])))})),ki=d.b.div(He||(He=Object(s.a)(["\n    display: inline-block;\n    height: 40px;\n    font-size: 30px;\n    font-weight: 600;\n    color: #ad0000;\n    /* background-color: #3f80cf57; */\n    padding: 0 10px;\n"]))),yi=d.b.div(Ue||(Ue=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 35px;\n    /* background-color: #3fcf7b56; */\n    padding: 4px 0 0 10px;\n"]))),Si=d.b.div(We||(We=Object(s.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    width: 140px;\n    font-size: 24px;\n    line-height: 24px;\n    font-weight: 600;\n    color: #08106e;\n    border: solid 1px #1b00b3;\n    box-sizing: border-box;\n    background-color: #85a2c5;\n    border-radius: 4px;\n    text-align: center;\n"]))),wi=d.b.div(qe||(qe=Object(s.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    width: calc(100% - 170px);\n    margin-left: 10px;\n    font-size: 24px;\n    line-height: 24px;\n    /* font-weight: 600; */\n    color: #ffffff;\n    padding: 0 5px;\n    box-sizing: border-box;\n    background-color: #808080;\n    text-align: left;\n"]))),Ii=d.b.div(Ve||(Ve=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 40px;\n    background-color: #5f5f5f;\n    box-sizing: border-box;\n    text-align: left;\n"]))),Ci=d.b.div(Je||(Je=Object(s.a)(["\n    ","\n    width: 160px;\n    background-color: #8098a3;\n    border: 1px solid #000744;\n    color: #04274e;\n    border-radius: 4px;\n    margin: 5px 0 0 4px;\n    &:hover {\n        background-color: #98bfc2;\n    }\n"])),bi),Ei=function(e){var n=Object(o.useContext)(xp),t=n.store,i=n.dispatcher,c=t.scoreState,a=t.scoreData.chordList[c.focusIndex].detail;Object(o.useEffect)((function(){var e=A(a.symbolKey),n=null==e.base?null:A(e.base),t=[],o=[],r=[],s=0;if(null==n)t.push("major"),t.push("minor"),t.push("suspend4th"),t.push("diminish"),t.push("augument"),t.push("minor-minus5");else{C.forEach((function(e){e.key===n.key&&o.push(e.key)}));var l=M(n.key);C.forEach((function(e){l.includes(e.key)&&t.push(e.key)}))}t.forEach((function(e,n){e===a.symbolKey&&(s=n)}));var d=M(e.key);C.forEach((function(e){d.includes(e.key)&&r.push(e.key)})),c.symbolMng={index:s,curLine:t,parentLine:o,childrenLine:r},i.score.setScoreState(c)}),[a.symbolKey]);var r=c.symbolMng,s=[],l=[],d=[];return null!=r&&(s.push(Object(Ht.jsx)(Ti,{children:"Base"},s.length)),r.parentLine.forEach((function(e,n){var t=A(e);s.push(Object(Ht.jsxs)(zi,{isActive:!1,children:["[",null===t||void 0===t?void 0:t.name,"]"]},s.length))})),l.push(Object(Ht.jsx)(Ti,{children:"Current"},l.length)),r.curLine.forEach((function(e,n){var t=A(e);l.push(Object(Ht.jsxs)(zi,{isActive:r.index===n,children:["[",null===t||void 0===t?void 0:t.name,"]"]},l.length))})),d.push(Object(Ht.jsx)(Ti,{children:"Derives"},d.length)),r.childrenLine.forEach((function(e,n){var t=A(e);d.push(Object(Ht.jsxs)(zi,{isActive:!1,children:["[",null===t||void 0===t?void 0:t.name,"]"]},d.length))}))),Object(Ht.jsxs)(Li,{children:[Object(Ht.jsx)(Di,{children:s}),Object(Ht.jsx)(Di,{children:l}),Object(Ht.jsx)(Di,{children:d})]})},Li=d.b.div(Xe||(Xe=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 30;\n    top: 100px;\n    left: 0;\n    width: 250px;\n    height: 160px;\n    background-color: #a9cfd422;\n    border: 2px solid #000000ec;\n    box-sizing: border-box;\n    text-align: center;\n    opacity: 0.9;\n    box-shadow: 0 4px 16px 4px #000b3a48;\n    backdrop-filter: blur(6px);\n"]))),Di=d.b.div(Ye||(Ye=Object(s.a)(["\n    display: inline-block;\n    width: 80px;\n    height: 100%;\n    /* background-color: #e6e6e6; */\n    margin: 1px;\n    vertical-align: top;\n"]))),Ti=d.b.div(Ge||(Ge=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    box-sizing: border-box;\n    /* background-color: #78dab4;\n    border: 1px solid #000000; */\n    background: linear-gradient(to bottom, #7a9ea3, #78cfda, #7a9ea3);\n    /* background: linear-gradient(to bottom, #a37a7a, #da7878, #a37a7a); */\n    margin: 1px;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: #f3f3f3;\n    line-height: 17px;\n"]))),zi=d.b.div(Qe||(Qe=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: 20px;\n    box-sizing: border-box;\n    background-color: #dbdbdb;\n    ","\n    border: 1px solid #000000;\n    margin: 1px;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: #000000;\n    line-height: 16px;\n"])),(function(e){return e.isActive?Object(d.a)(Ze||(Ze=Object(s.a)(["background-color: #ffef64;"]))):""})),Ai=function(e){var n,t=Object(o.useContext)(xp),i=t.store,c=(t.dispatcher,i.scoreState),a=(i.scoreData.chordList[e.index],c.elementCacheList[e.index]),r=null===(n=A(e.detail.symbolKey))||void 0===n?void 0:n.name,s=null;null!=e.detail.root&&(O({index:e.detail.root.index,isFlat:e.detail.root.isFlat}),s=S({index:e.detail.root.index,isFlat:e.detail.root.isFlat},a.keyIndex),null!=e.detail.on&&(O({index:e.detail.on.index,isFlat:e.detail.on.isFlat}),S({index:e.detail.on.index,isFlat:e.detail.root.isFlat},a.keyIndex)));var l=-1,d=c.elementCacheList[e.index-1];3!==e.index&&d.bar===a.bar||(l=a.bar+1);var b=-1!==l&&0!==a.surplusBeat,u="-";null!=s&&(u="".concat(s).concat(r));var h="";if(0!==a.minute)switch(a.minute){case 1:h="\u2192/16";break;case 2:h="\u2192/8";break;case-1:h="\u2190/16";break;case-2:h="\u2190/8"}return Object(Ht.jsxs)(Ni,{children:[Object(Ht.jsx)(Pi,{children:u}),Object(Ht.jsxs)(_i,{children:[Object(Ht.jsx)(Mi,{isError:b,children:-1===l?Object(Ht.jsx)(Ht.Fragment,{children:"\xa0"}):l}),Object(Ht.jsxs)(Ri,{children:[Object(Ht.jsx)("span",{children:0===a.surplusBeat?Object(Ht.jsx)(Ht.Fragment,{children:"\xa0"}):a.surplusBeat}),0===a.minute?"":h]}),Object(Ht.jsxs)(Fi,{children:[Math.round(a.pastSecond/100)/10,"s"]})]})]})},Mi=d.b.div($e||($e=Object(s.a)(["\n    font-size: 12px;\n    font-weight: 600;\n    color: #c72929;\n    ","\n    box-sizing: border-box;\n"])),(function(e){return e.isError?Object(d.a)(en||(en=Object(s.a)(["\n        background-color: #ee5959;\n        color: #ffffff;\n        /* border: 2px solid #c72929; */\n        border-radius: 2px;\n    "]))):""})),Fi=d.b.div(nn||(nn=Object(s.a)(["\n    font-size: 12px;\n    font-weight: 600;\n    color: #000000a0;\n    box-sizing: border-box;\n"]))),Ri=d.b.div(tn||(tn=Object(s.a)([""]))),Ni=d.b.div(on||(on=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 4;\n    width: 100%;\n    height: 50px;\n    // background-color: #00ff2a11;\n    bottom: 0;\n    left: 0;\n    box-sizing: border-box;\n    text-align: center;\n    box-sizing: border-box;\n"]))),Pi=d.b.div(cn||(cn=Object(s.a)(["\n    display: inline-block;\n    // width: calc(100% - ","px);\n    width: 100%;\n    height: 18px;\n    // background-color: #ffc4001c;\n    font-size: 12px;\n    font-weight: 600;\n    color: #2b2b2b;\n"])),60),_i=(d.b.div(an||(an=Object(s.a)(["\n    display: inline-block;\n    width: 56px;\n    height: 30px;\n    background-color: #1100ff1c;\n"]))),d.b.div(rn||(rn=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 5;\n    width: ","px;\n    height: 100%;\n    // background-color: #0000ff11;\n    top: 0;\n    left: -","px;\n    box-sizing: border-box;\n    text-align: center;\n    \n    & "," {\n    }\n    & "," {\n        font-size: 12px;\n        color: #333;\n        & span {\n            color: #00a;\n            font-weight: 600;\n        }\n    }\n"])),50,25,Mi,Ri)),Ki=function(e){var n=Object(o.useContext)(xp),t=n.store,i=(n.dispatcher,t.scoreState),c=i.elementCacheList[e.index].sectionNo,a=i.sectionCacheList[c],r=Math.floor(a.beatSum/4),s=a.beatSum%4;return Object(Ht.jsxs)(Bi,{children:[Object(Ht.jsxs)(Hi,{children:[r,0===s?"":" (".concat(s,")")]}),Object(Ht.jsx)(Ui,{})]})},Bi=d.b.div(sn||(sn=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 4;\n    width: 100%;\n    height: 50px;\n    /* background-color: #ff000011; */\n    bottom: 0;\n    left: 0;\n    box-sizing: border-box;\n    text-align: center;\n    box-sizing: border-box;\n"]))),Hi=d.b.div(ln||(ln=Object(s.a)(["\n    display: block;\n    position: relative;\n    /* min-width: 80px; */\n    height: 16px;\n    font-size: 14px;\n    font-weight: 600;\n    color: #474386cf;\n    text-align: center;\n    line-height: 16px;\n    /* background-color: #00000042; */\n"]))),Ui=d.b.div(dn||(dn=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 8px;\n    height: calc(100% - 16px);\n    background-color: #db0000cf;\n    border-radius: 4px 4px 0 0;\n"]))),Wi=function(e){var n=e.detail.alterType;return Object(Ht.jsxs)(qi,{children:[Object(Ht.jsx)(Ji,{children:null==n?"alter":n}),Object(Ht.jsx)(Xi,{children:function(){var t="-";if(null!=n)switch(n){case"modulate":var i=e.detail.modRel;if(null!=i)switch(i){case"domm":var o=e.detail.dommVal,c=o>0?"+":"";t="".concat(i,": ").concat(c).concat(o);break;case"relative":case"parallel":t=i;break;case"key":var a=e.detail.keyAdj,r=a>0?"+":"";t="".concat(i,": ").concat(r).concat(a)}break;case"tempo":var s=e.detail.tempoRel;switch(s){case"diff":var l=e.detail.tempoDiff,d=l>0?"+":"";t="".concat(s,": ").concat(d).concat(l);break;case"rate":t="".concat(s,": ").concat(e.detail.tempoRate,"%");break;case"abs":t="".concat(s,": ").concat(e.detail.tempoAbs)}}return t}()})]})},qi=d.b.div(bn||(bn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    /* background-color: red; */\n"]))),Vi=d.b.div(un||(un=Object(s.a)(["\n    display: block;\n    position: relative;\n    min-width: 100px;\n    height: 20px;\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 20px;\n    /* background-color: #1000eb42; */\n    margin-top: 3px;\n"]))),Ji=Object(d.b)(Vi)(hn||(hn=Object(s.a)(["\n    color: #0014cc;\n"]))),Xi=Object(d.b)(Vi)(xn||(xn=Object(s.a)(["\n    color: #5e5e5e;\n"]))),Yi=function(e){var n,t,i,c=Object(o.useContext)(xp),a=c.store,r=(c.dispatcher,a.scoreState),s=r.elementCacheList[r.focusIndex],l=e.detail.minute,d=e.keySwitch,b=null===(n=A(e.detail.symbolKey))||void 0===n?void 0:n.name;return Object(o.useMemo)((function(){var n=e.detail.backing,t=null,i=null;null!=e.detail.root&&(t=O({index:e.detail.root.index,isFlat:e.detail.root.isFlat}),S({index:e.detail.root.index,isFlat:e.detail.root.isFlat},e.keyIndex),null!=e.detail.on&&(i=O({index:e.detail.on.index,isFlat:e.detail.on.isFlat}),S({index:e.detail.on.index,isFlat:e.detail.root.isFlat},e.keyIndex)));var o=("major"===s.scale?T:z).includes(t+b);return Object(Ht.jsxs)(Gi,{children:[Object(Ht.jsx)(eo,{isSwitch:d.sustainMode&&e.isCurrent,scaleRelation:null!=t&&o?"diatonic":"none",isOnChordScale:null!=e.detail.on&&[0,2,4,5,7,9,11].includes(e.detail.on.index),children:null==t?"none":Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(Qi,{children:t}),Object(Ht.jsx)(Zi,{children:b}),Object(Ht.jsx)($i,{children:null==i?"":"/".concat(i)})]})}),Object(Ht.jsx)(no,{isSwitch:d.sustainMode&&e.isCurrent,children:function(){for(var n=[],t=0;t<e.detail.beatLen;t++){var i="normal",o=0;if([0,e.detail.beatLen-1].includes(t)){var c=0===t?l.head:l.tail;0!==c&&(i=c>0?"long":"short",o=Math.abs(c))}n.push(Object(Ht.jsx)(to,{lenType:i,valueType:o},t))}return n}()}),Object(Ht.jsx)(io,{children:n.hasError?Object(Ht.jsx)(oo,{}):Object(Ht.jsxs)(Ht.Fragment,{children:[0===n.voicingList.length?"":Object(Ht.jsx)(co,{}),0===n.voicingList.length||null==n.pattern?"":Object(Ht.jsx)(ao,{})]})})]})}),[s.scale,e.isCurrent,e.detail.beatLen,null===(t=e.detail.root)||void 0===t?void 0:t.index,null===(i=e.detail.on)||void 0===i?void 0:i.index,e.detail.symbolKey,d.sustainMode,e.keyIndex,e.detail.minute.head,e.detail.minute.tail,e.detail.backing])},Gi=d.b.div(pn||(pn=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    /* border: 1px solid #c5c5cc; */\n    /* padding: 4px; */\n    box-sizing: border-box;\n    /* background-color: #00000013; */\n"]))),Qi=d.b.div(fn||(fn=Object(s.a)([""]))),Zi=d.b.div(gn||(gn=Object(s.a)([""]))),$i=d.b.div(jn||(jn=Object(s.a)([""]))),eo=d.b.div(vn||(vn=Object(s.a)(["\n    display: block;\n    /* width: 100%; */\n    height: 25px;\n    /* background-color: #f700d616; */\n    ","\n    font-size: 18px;\n    /* color: #4e516394; */\n    text-align: center;\n\n    & * {\n        display: inline-block;\n    }\n\n    & "," {\n        color: #4e5163cc;\n        ","\n        font-weight: 600;\n    }\n    & "," {\n        color: #4e5163cc;\n        ","\n    }\n    & "," {\n        color: #422e3099;\n        ","\n        font-weight: 600;\n    }\n"])),(function(e){return e.isSwitch?Object(d.a)(mn||(mn=Object(s.a)(["background-color: #0004f729;"]))):""}),Qi,(function(e){return"diatonic"===e.scaleRelation?Object(d.a)(On||(On=Object(s.a)(["color: #4e516394;"]))):"secondaly"===e.scaleRelation?Object(d.a)(kn||(kn=Object(s.a)(["color: #00116e93;"]))):Object(d.a)(yn||(yn=Object(s.a)(["color: #70000093;"])))}),Zi,(function(e){return"diatonic"===e.scaleRelation?Object(d.a)(Sn||(Sn=Object(s.a)(["color: #4e516394;"]))):"secondaly"===e.scaleRelation?Object(d.a)(wn||(wn=Object(s.a)(["color: #00116e93;"]))):Object(d.a)(In||(In=Object(s.a)(["color: #70000093;"])))}),$i,(function(e){return e.isOnChordScale?"":Object(d.a)(Cn||(Cn=Object(s.a)(["color: #70000093;"])))})),no=(d.b.div(En||(En=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 22px;\n    /* background-color: #d37979b2; */\n    font-size: 14px;\n    /* font-weight: 600; */\n    color: #9c5f74;\n    text-align: center;\n"]))),d.b.div(Ln||(Ln=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 18px;\n    ","\n    /* background-color: #d8ccccb1; */\n    text-align: center;\n"])),(function(e){return e.isSwitch?Object(d.a)(Dn||(Dn=Object(s.a)(["background-color: #0004f729;"]))):""}))),to=d.b.div(Tn||(Tn=Object(s.a)(["\n    display: inline-block;\n    width: 8px;\n    ","\n    height: calc(100% - 4px);\n    margin: 2px 2px 0 2px;\n    background-color: #e0e0e088;\n    ","\n    /* background: linear-gradient(to bottom, #9b9b9bc3, #85858514); */\n    border: solid 1px #0000004e;\n    /* border-radius: 2px; */\n    box-sizing: border-box;\n"])),(function(e){return"short"===e.lenType?Object(d.a)(zn||(zn=Object(s.a)(["\n        width: 4px;\n    "]))):"long"===e.lenType?Object(d.a)(An||(An=Object(s.a)(["\n        width: 12px;\n    "]))):""}),(function(e){return 2===e.valueType?Object(d.a)(Mn||(Mn=Object(s.a)(["\n        background-color: #db828287;\n    "]))):1===e.valueType?Object(d.a)(Fn||(Fn=Object(s.a)(["\n        background-color: #9394dd87;\n    "]))):""})),io=d.b.div(Rn||(Rn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 6px;\n    /* background-color: #00a048; */\n    text-align: left;\n"]))),oo=d.b.div(Nn||(Nn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    margin-top: 2px;\n    height: 4px;\n    border-radius: 4px;\n    background-color: #af3838;\n"]))),co=d.b.div(Pn||(Pn=Object(s.a)(["\n    display: inline-block;\n    width: calc(50% - 2px);\n    margin-top: 2px;\n    height: 4px;\n    border-radius: 4px 0 0 4px;\n    background-color: #7c89a1;\n"]))),ao=d.b.div(_n||(_n=Object(s.a)(["\n    display: inline-block;\n    width: calc(50% - 2px);\n    margin: 2px 0 0 4px;\n    height: 4px;\n    border-radius: 0 4px 4px 0;\n    background-color: #a8c7a8;\n"]))),ro=function(e){var n=e.detail.fixed;return Object(Ht.jsx)(so,{isStart:"Start"===n,children:Object(Ht.jsx)(lo,{children:n})})},so=d.b.div(Kn||(Kn=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: calc(100% - ","px);\n    border-left: 1px solid #00000083;\n    border-top: 1px solid #00000083;\n    border-right: 1px solid #00000083;\n    /* border: 1px solid #00000083; */\n    box-sizing: border-box;\n    background-color: #9b9b9b1f;\n    ","\n"])),15,(function(e){return e.isStart?Object(d.a)(Bn||(Bn=Object(s.a)(["\n        border-radius: 0 35px 0 0;\n    "]))):Object(d.a)(Hn||(Hn=Object(s.a)(["\n        border-radius: 35px 0 0 0;\n    "])))})),lo=d.b.div(Un||(Un=Object(s.a)(["\n    display: inline-block;\n    /* width: calc(100% - 10px); */\n    width: 100%;\n    height: 48px;\n    /* background-color: #47438678; */\n    font-size: 26px;\n    font-weight: 600;\n    font-style: italic;\n    line-height: 46px;\n    color: #960000b0;\n    text-align: center;\n    margin-top: 30px;\n    /* vertical-align: middle; */\n"]))),bo=function(e){return Object(Ht.jsxs)(uo,{children:[Object(Ht.jsxs)(ho,{children:[Object(Ht.jsx)(xo,{children:"Scale:"}),Object(Ht.jsx)(po,{children:e.detail.scale})]}),Object(Ht.jsxs)(ho,{children:[Object(Ht.jsx)(xo,{children:"Key:"}),Object(Ht.jsx)(po,{children:w[e.detail.keyIndex]})]}),Object(Ht.jsxs)(ho,{children:[Object(Ht.jsx)(xo,{children:"tempo:"}),Object(Ht.jsx)(po,{children:e.detail.bpm})]}),Object(Ht.jsxs)(ho,{children:[Object(Ht.jsx)(xo,{children:"Rate:"}),Object(Ht.jsx)(po,{children:e.detail.beatSignature})]})]})},uo=d.b.div(Wn||(Wn=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100px;\n"]))),ho=d.b.div(qn||(qn=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100px;\n    height: 16px;\n    margin: 1px 0;\n    /* background-color: #0066ff16; */\n    /* border-bottom: 1px solid #000; */\n    font-size: 12px;\n    font-weight: 600;\n    color: #2a2a2c;\n    line-height: 16px;\n"]))),xo=d.b.div(Vn||(Vn=Object(s.a)(["\n    display: inline-block;\n    margin: 0 2px;\n    width: 50px;\n    height: 100%;\n    color: #14a800;\n    /* background-color: #ff00b329; */\n"]))),po=d.b.div(Jn||(Jn=Object(s.a)(["\n    display: inline-block;\n    margin: 0 2px;\n    width: 40px;\n    height: 100%;\n    color: #000000;\n    /* background-color: #ff00b329; */\n"]))),fo=function(e){var n=Object(o.useContext)(xp),t=n.store,i=(n.dispatcher,t.scoreState),c=i.elementCacheList[e.index].sectionNo,a=i.sectionCacheList[c];return Object(Ht.jsx)(go,{children:Object(Ht.jsx)(jo,{children:a.labelName})})},go=d.b.div(Xn||(Xn=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    position: relative;\n    /* width: 100px; */\n    text-align: center;\n    border: 1px;\n    /* border: 1px solid #c5c5cc; */\n"]))),jo=d.b.div(Yn||(Yn=Object(s.a)(["\n    display: block;\n    position: relative;\n    min-width: 80px;\n    height: 20px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #c00;\n    text-align: center;\n    line-height: 20px;\n    /* background-color: #1000eb42; */\n    margin-top: 13px;\n"]))),vo=function(e){return Object(Ht.jsxs)(mo,{children:[Object(Ht.jsx)(ko,{children:function(){switch(e.detail.alterType){case"modulate":return"Key";case"tempo":return"Tempo";case"beat":return"Beat"}}()}),Object(Ht.jsx)(yo,{children:function(){switch(e.detail.alterType){case"modulate":var n=y[e.prevCache.keyIndex]+("major"===e.prevCache.scale?"":"m"),t=y[e.curCache.keyIndex]+("major"===e.curCache.scale?"":"m");return"".concat(n,"\u2192").concat(t);case"tempo":var i=e.prevCache.bpm,o=e.curCache.bpm;return"".concat(i,"\u2192").concat(o);case"beat":var c=e.prevCache.beatSignature,a=e.curCache.beatSignature;return"".concat(c,"\u2192").concat(a)}}()})]})},mo=d.b.div(Gn||(Gn=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 4;\n    width: 100%;\n    height: 50px;\n    /* background-color: #ff000011; */\n    bottom: 0;\n    left: 0;\n    box-sizing: border-box;\n    text-align: center;\n    box-sizing: border-box;\n"]))),Oo=d.b.div(Qn||(Qn=Object(s.a)(["\n    display: block;\n    position: relative;\n    /* min-width: 80px; */\n    height: 16px;\n    font-size: 14px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 16px;\n    /* background-color: #00000042; */\n"]))),ko=Object(d.b)(Oo)(Zn||(Zn=Object(s.a)(["\n    color: #0b00a8cf;\n"]))),yo=Object(d.b)(Oo)($n||($n=Object(s.a)(["\n    color: #050505cf;\n"]))),So=function(e){var n=Object(o.useContext)(xp),t=n.store,i=n.dispatcher,c=Object(o.useRef)({}),a=Object(o.useRef)({}),r=t.scoreState,s=r.focusIndex==e.index,l=t.scoreData.chordList,d=l[e.index],b=r.elementCacheList[e.index];Object(o.useEffect)((function(){b.reffers.wrap=c.current,b.reffers.body=a.current,i.score.setScoreState(r)}),[r.elementCacheList.length]);var u=r.focusIndex<r.distIndex?r.focusIndex:r.distIndex,h=r.focusIndex>r.distIndex?r.focusIndex:r.distIndex,x=e.index>=u&&e.index<=h,p=x&&u!=h,f=x||r.elementCacheList[r.focusIndex].sectionNo===b.sectionNo,g="chord"!==d.type?null:d.detail,j=!(f||"init"===l[r.focusIndex].type);return Object(Ht.jsxs)(Eo,{ref:c,isSelectable:"fixed"!==d.type,isActive:x,isInactive:j,isAdditional:["chord","section","alter","init"].includes(d.type),children:[Object(Ht.jsx)(Do,{children:"chord"!==d.type?Object(Ht.jsx)(Ht.Fragment,{}):Object(Ht.jsx)(Lo,{children:y[b.keyIndex]+("major"===b.scale?"":"m")})}),["init","chord","section","alter"].includes(d.type)?Object(Ht.jsx)(wo,{ref:a,isActive:x,isRange:p,isInactive:j,type:d.type,isAnytime:["fixed","init"].includes(d.type)||0===r.focusIndex,onClick:function(){"fixed"!==d.type&&(r.keySwitch.distMode?r.distIndex=e.index:(r.focusIndex=e.index,r.distIndex=r.focusIndex),i.score.setScoreState(r))},children:function(){switch(d.type){case"init":var n=d.detail;return Object(Ht.jsx)(bo,{detail:n});case"section":d.detail;return Object(Ht.jsx)(fo,{index:e.index});case"chord":var t=d.detail;return Object(Ht.jsx)(Yi,{detail:t,isCurrent:x,keyIndex:b.keyIndex,keySwitch:r.keySwitch});case"alter":var i=d.detail;return Object(Ht.jsx)(Wi,{detail:i})}}()}):Object(Ht.jsx)(ro,{detail:d.detail}),"chord"===d.type?Object(Ht.jsx)(Ai,{index:e.index,detail:g}):"section"===d.type?Object(Ht.jsx)(Ki,{index:e.index}):"alter"===d.type?Object(Ht.jsx)(vo,{detail:d.detail,prevCache:r.elementCacheList[e.index-1],curCache:b}):Object(Ht.jsx)(Ht.Fragment,{}),Object(Ht.jsx)(Ht.Fragment,{children:s&&null!=g&&null!=g.root&&t.scoreState.keySwitch.symbolMode?Object(Ht.jsx)(Ei,{}):""}),["fixed","init"].includes(d.type)?Object(Ht.jsx)(Ht.Fragment,{}):Object(Ht.jsxs)(Io,{children:[Object(Ht.jsx)(Co,{children:"-"}),Object(Ht.jsx)(Co,{onClick:function(){return i.score.addChordElement()},children:"+"})]})]})},wo=(d.b.div(et||(et=Object(s.a)(["\n    display: block;\n    width: 1px;\n    height: 10px;\n    background-color: #ad0c0c;\n"]))),d.b.div(nt||(nt=Object(s.a)(["\n    display: inline-block;\n    /* position: relative; */\n    min-width: 80px;\n    height: calc(100% - ","px);\n    border: solid 1px #00000049;\n    ","\n    ","\n    ","\n\n    opacity: 0.4;\n    border-radius: 4px;\n    ","\n    ","\n    box-sizing: border-box;\n    padding: 4px;\n    transition: background-color 100ms;\n    ","\n    ","\n"])),75,(function(e){return"section"!==e.type?"":Object(d.a)(tt||(tt=Object(s.a)(["\n        border: solid 1px #df8484;\n    "])))}),(function(e){return"init"!==e.type?"":Object(d.a)(it||(it=Object(s.a)(["\n        border: solid 1px #44b168;\n        height: 85px;\n    "])))}),(function(e){return"alter"!==e.type?"":Object(d.a)(ot||(ot=Object(s.a)(["\n        border: solid 1px #604fc0;\n    "])))}),(function(e){return e.isInactive?"":Object(d.a)(ct||(ct=Object(s.a)(["\n        background-color: #ebf1e2;\n        opacity: 1;\n    "])))}),(function(e){return e.isAnytime?Object(d.a)(at||(at=Object(s.a)(["\n        opacity: 1;\n    "]))):""}),(function(e){return e.isActive?Object(d.a)(rt||(rt=Object(s.a)(["\n        background-color: #e4badd;\n        box-shadow: 0 0 8px 0 #000b3a48;\n    "]))):""}),(function(e){return e.isRange?Object(d.a)(st||(st=Object(s.a)(["\n        background-color: #80d4e2;\n        box-shadow: 0 0 8px 0 #000b3a48;\n    "]))):""}))),Io=d.b.div(lt||(lt=Object(s.a)([""]))),Co=d.b.div(dt||(dt=Object(s.a)([""]))),Eo=d.b.div(bt||(bt=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    height: ","px;\n    padding: 0 ","px;\n    box-sizing: border-box;\n    /* margin: 10px 5px 5px 5px; */\n    border-bottom: 1px solid #47438678;\n    margin-bottom: 4px;\n    vertical-align: top;\n    /* width: 1px; */\n    transition: width 500ms, opacity 300ms;\n    /* border: 1px solid #00000015; */\n    ","\n\n    & "," {\n        display: none;\n        position: absolute;\n        z-index: 5;\n        width: ","px;\n        height: 44px;\n        /* background-color: #0000ff11; */\n        top: ","px;\n        right: -","px;\n\n        /* background-color: #0400d84e; */\n        & "," {\n            display: inline-block;\n            width: ","px;\n            height: ","px;\n            background-color: #ebebeb6e;\n            border: 1px solid #818181;\n            margin: 1px 0;\n            font-size: 15px;\n            font-weight: 600;\n            text-align: center;\n            color: #818181;\n            box-sizing: border-box;\n            line-height: 15px;\n\n            &:hover {\n                background-color: #fffb0b9d\n            }\n        }\n    }\n\n    &:hover {\n        ","\n    }\n"])),134,8,(function(e){return e.isInactive||!e.isAdditional?"":Object(d.a)(ut||(ut=Object(s.a)(["\n        /* background-color: #e8ff9549; */\n        background: linear-gradient(to bottom, transparent,transparent,transparent, #ffffff9e);\n    "])))}),Io,20,35,10,Co,20,20,(function(e){return e.isSelectable?Object(d.a)(ht||(ht=Object(s.a)(["\n            & "," {\n                ","\n                opacity: 1;\n            }\n            & "," {\n                display: inline-block;\n            }\n        "])),wo,(function(e){return e.isActive?"":Object(d.a)(xt||(xt=Object(s.a)(["background-color: #e8f3ab9b;"])))}),Io):""})),Lo=d.b.div(pt||(pt=Object(s.a)([""]))),Do=d.b.div(ft||(ft=Object(s.a)(["\n    display: inline-block;\n    /* position: relative; */\n    width: 100%;\n    height: ","px;\n    /* background-color: #eca8813b; */\n\n    & "," {\n        display: inline-block;\n        position: absolute;\n        top: -2px;\n        left: 10px;\n        width: 50px;\n        font-size: 12px;\n        color: #ca0000;\n        /* background-color: #fff; */\n    }\n"])),15,Lo),To=function(){var e=Object(o.useContext)(xp),n=e.store,t=(e.dispatcher,n.scoreData.chordList.length),i=[];if(n.scoreState.elementCacheList.length===t)for(var c=0;c<t;c++)i.push(Object(Ht.jsx)(So,{index:c},c));return Object(Ht.jsxs)(zo,{children:[Object(Ht.jsx)(Ao,{children:i}),Object(Ht.jsx)(Ao,{})]})},zo=d.b.div(gt||(gt=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: 4px 0 0 4px;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    /* background-color: #e7dddd; */\n    background-color: #e9e9e9;\n    border: 1px solid #b3b3b3;\n    border-radius: 2px;\n    box-sizing: border-box;\n    text-align: left;\n    overflow: auto;\n    \n    &::-webkit-scrollbar {\n        width: 10px;\n        height: 10px;\n    }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: #1959A8;\n    }\n    &::-webkit-scrollbar-track {\n        border-radius: 5px;\n        box-shadow: 0 0 4px #aaa inset;\n    }\n"]))),Ao=(d.b.div(jt||(jt=Object(s.a)(["\n    transform-origin: top left;\n    /* width: 100%;\n    height: 100%; */\n    transform: scale(1);\n"]))),d.b.div(vt||(vt=Object(s.a)(["\n    display: inline-block;\n    /* position: relative; */\n    padding: ","px ","px;\n    width: ","px;\n    height: ","px;\n    background-color: #d8d8d8;\n    /* overflow: hidden; */\n    margin: 10px 0 0 10px;\n    box-shadow: 0 0 18px 0 #000b3a48;\n"])),10,30,891,1260)),Mo=function(e,n,t){var i=n.userEnv.keyConfig.note,o=n.scoreState.keySwitch,c=n.scoreData,a=n.scoreState,r="init"!==c.chordList[a.focusIndex].type;if(a.isPreview)switch(e.key){case" ":Rt.stopPreview(n,t,n.reserveTasks)}else if("none"===n.scoreState.hideMenu){if(r)if(o.control)switch(e.key){case"c":var s=c.chordList[a.focusIndex];if("chord"===s.type)null!=s.detail.root&&t.score.cloneBacking();break;case"x":t.score.copyElementList();break;case"v":if(null!=a.copiedElementList)t.score.pasteElementList();else if(null!=a.cloneBacking){var l=c.chordList[a.focusIndex];if("chord"===l.type)null!=l.detail.root&&t.score.pastBacking()}break;case"s":t.score.saveFile()}else if(o.distMode)switch(e.key){case"ArrowLeft":t.score.moveDist(!1);break;case"ArrowRight":t.score.moveDist(!0)}else if(o.sustainMode)switch(e.key){case i.decRoot:t.score.incrementDegreeRoot(!1);break;case i.incRoot:t.score.incrementDegreeRoot(!0);break;case i.decBeat:t.score.incrementBeatLen(!1);break;case i.incBeat:t.score.incrementBeatLen(!0)}else if(o.minHeadMode)switch(e.key){case"ArrowLeft":t.score.incrementMinuteValRelation(!1,1);break;case"ArrowRight":t.score.incrementMinuteValRelation(!1,-1)}else if(o.minTailMode)switch(e.key){case"ArrowLeft":t.score.incrementMinuteValRelation(!0,-1);break;case"ArrowRight":t.score.incrementMinuteValRelation(!0,1)}else if(o.symbolMode)switch(e.key){case"ArrowUp":t.symbol.toNext(!1);break;case"ArrowDown":t.symbol.toNext(!0);break;case"ArrowLeft":t.symbol.toBase();break;case"ArrowRight":t.symbol.toDerive()}else!function(e,n,t){var i=n.userEnv.keyConfig.note,o=(n.scoreState.keySwitch,n.scoreData),c=n.scoreState;switch(o.chordList[c.focusIndex].type){case"chord":n.scoreState.hideMenu;var a=o.chordList[c.focusIndex].detail,r=c.elementCacheList[c.focusIndex];switch(e.key){case"z":Rt.previewCurHarmony(n,t);break;case"e":t.score.setDefaultBacking();break;case"b":null!=a.root&&t.backing.openBackingEditor();break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":t.score.setDiatonicChord(r.scale,Number(e.key)-1)}}switch(e.key){case i.prevElement:c.focusIndex===c.distIndex?t.score.moveElement(!1):t.score.releaseRange(!1);break;case i.nextElement:c.focusIndex===c.distIndex?t.score.moveElement(!0):t.score.releaseRange(!0);break;case i.prevSection:t.score.moveSection(!1);break;case i.nextSection:t.score.moveSection(!0);break;case i.addChord:t.score.addChordElement();break;case i.addSection:t.score.addSectionElement();break;case"m":t.score.addAlterElement();break;case i.deleteCur:t.score.removeCurElement();break;case" ":Rt.previewStart(n,t)}}(e,n,t)}else"backing"===n.scoreState.hideMenu&&function(e,n,t){n.userEnv.keyConfig.note;var i=n.scoreState.keySwitch,o=(n.scoreData,n.backingState);if(null!=o){var c=function(){return t.backing.setState(o)},a=o.pattern;if(o.isPreview)switch(e.key){case" ":B.stopPreview(n,o,t,n.reserveTasks)}else{switch(e.key){case"b":t.backing.closeBackingEditor();break;case"Enter":t.backing.mappingEditorToScore();break;case" ":o.hasError||t.backing.testBacking()}if(null!=a)if(i.sustainMode){var r=o.pattern,s=r.layers[r.layerIndex],l=r.channels.length-1-r.channelIndex,d=s.table[l][r.lenIndex];if(null!=d)switch(e.key){case"ArrowUp":d.velAdj++,c();break;case"ArrowDown":d.velAdj--,c();break;case"ArrowLeft":d.timing--,c();break;case"ArrowRight":d.timing++,c()}}else{switch(e.key){case"ArrowLeft":t.backing.movePatternColumn(!1);break;case"ArrowRight":t.backing.movePatternColumn(!0)}if(-1===a.channelIndex)switch(e.key){case"ArrowUp":t.backing.incrementVel(1);break;case"ArrowDown":t.backing.incrementVel(-1);break;case"a":t.backing.addPatternColumn();break;case"w":t.backing.changeLayer();break;case"1":t.backing.setCurrentDivRate(16);break;case"2":t.backing.setCurrentDivRate(8);break;case"3":t.backing.setCurrentDivRate(4);break;case"4":t.backing.setCurrentDivRate(2);break;case"5":t.backing.setCurrentDivRate(1);break;case".":t.backing.toggleCurrentDivHalf();break;case"Delete":t.backing.deleteColumn();break;case"f":a.channelIndex=0,c();break;case"Enter":t.backing.mappingEditorToScore(),t.backing.closeBackingEditor()}else switch(e.key){case"ArrowUp":t.backing.moveChannelIndex(!1);break;case"ArrowDown":t.backing.moveChannelIndex(!0);break;case"f":a.channelIndex=-1,c();break;case"Enter":var b=null==t.backing.getNotes()?{signal:"n",timing:0,velAdj:0}:null;t.backing.setNotes(b),t.backing.updateErrorState()}}}}}(e,n,t)},Fo=function(e,n,t,i){if(!n.scoreState.isPreview){var o=n.userEnv.keyConfig.note,c=n.scoreState.keySwitch;switch(e.key){case"Control":c.control=i,t.score.setKeySwitch(c);break;case o.distMode:c.control||(c.distMode=i,t.score.setKeySwitch(c));break;case o.sustainMode:c.control||c.distMode||(c.sustainMode=i,t.score.setKeySwitch(c));break;case o.symbolMode:c.control||c.distMode||c.sustainMode||(c.symbolMode=i,t.score.setKeySwitch(c));break;case"d":c.control||c.distMode||c.sustainMode||c.symbolMode||(c.minHeadMode=i,t.score.setKeySwitch(c));break;case"g":c.control||c.distMode||c.sustainMode||c.symbolMode||c.minHeadMode||(c.minTailMode=i,t.score.setKeySwitch(c))}}i&&Mo(e,n,t)};!function(e){e.___CSS_FORM=Object(d.a)(mt||(mt=Object(s.a)(["\n        display: inline-block;\n        /* width: 100px; */\n        height: 25px;\n        background-color: #bdbdbd;\n        border: 1px solid #000;\n        border-radius: 2px;\n        box-sizing: border-box;\n        color: #303030;\n        font-size: 16px;\n        font-weight: 600;\n        line-height: 20px;\n        text-align: center;\n    "]))),e.___CSS_TITLE=Object(d.a)(Ot||(Ot=Object(s.a)(["\n        display: inline-block;\n        width: 100%;\n        height: 26px;\n        /* background-color: #f0f0f0; */\n        background: linear-gradient(to bottom, #707070, #b3b3b3, #707070);\n        border: 1px solid #222222;\n        font-size: 20px;\n        color: #ffffff;\n        font-weight: 600;\n        line-height: 20px;\n        box-sizing: border-box;\n        /* border: 1px solid #c50000; */\n        text-align: center;\n    "]))),e.createNumberForm=function(e,t,i,o,c,a){return Object(Ht.jsxs)(n,{isEnable:t,children:[Object(Ht.jsx)("input",{type:"number",min:o,max:c,step:a,value:e,onChange:i}),Object(Ht.jsx)("input",{type:"range",min:o,max:c,step:a,value:e,onChange:i})]})};var n=d.b.div(kt||(kt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    ","\n    background-color: #ececec;\n\n    & * {\n        display: inline-block;\n        box-sizing: border-box;\n        vertical-align: top;\n    }\n    & input:nth-child(1) {\n        background-color: #dddddd;\n        width: 55px;\n        height: calc(100% - 4px);\n        margin: 2px 0 0 5px;\n        border: 1px solid #9b9b9b;\n        border-radius: 4px;\n    }\n    & input:nth-child(2) {\n        margin-left: 5px;\n        background-color: #f00;\n        width: calc(100% - 70px);\n        height: 100%;\n    }\n    "])),(function(e){return e.isEnable?"":Object(d.a)(yt||(yt=Object(s.a)(["\n        pointer-events: none;\n        opacity: 0.5;\n    "])))}))}(St||(St={}));var Ro,No,Po,_o,Ko,Bo,Ho,Uo,Wo,qo,Vo,Jo,Xo,Yo,Go,Qo,Zo,$o,ec,nc,tc,ic,oc,cc,ac,rc,sc,lc,dc,bc,uc,hc,xc,pc,fc,gc,jc,vc,mc,Oc,kc,yc,Sc,wc,Ic,Cc,Ec,Lc,Dc,Tc,zc,Ac,Mc,Fc,Rc,Nc,Pc,_c,Kc,Bc,Hc,Uc,Wc,qc,Vc,Jc,Xc,Yc,Gc,Qc,Zc,$c,ea,na,ta,ia,oa,ca,aa,ra,sa,la,da,ba,ua,ha,xa,pa,fa,ga,ja,va,ma,Oa,ka,ya,Sa,wa,Ia,Ca,Ea,La,Da,Ta,za,Aa,Ma,Fa,Ra,Na,Pa,_a,Ka,Ba,Ha,Ua,Wa,qa,Va,Ja,Xa,Ya,Ga,Qa,Za,$a,er,nr,tr,ir,or,cr,ar,rr,sr,lr,dr,br,ur,hr,xr,pr,fr,gr,jr,vr,mr,Or,kr,yr,Sr,wr,Ir,Cr,Er,Lr,Dr,Tr,zr,Ar,Mr,Fr,Rr,Nr,Pr,_r,Kr,Br,Hr,Ur,Wr,qr,Vr,Jr,Xr,Yr,Gr,Qr,Zr,$r,es,ns,ts,is,os,cs,as,rs,ss,ls,ds=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.scoreState,c=n.scoreData.chordList[i.focusIndex].detail,a=c.alterType,r=function(){t.score.setScoreData(n.scoreData),Rt.updateHarmonizeCache(n,t)},s=function(e,n){var t="-"===e?null:e;return Object(Ht.jsxs)(xs,{isActive:n,onClick:function(){c.alterType!==t&&(c.alterType=t,c.modRel=null,c.dommVal=0,c.keyAdj=0,c.tempoRel=null,c.tempoDiff=0,c.tempoRate=100,c.tempoAbs=100,c.beatSignature="4/4",r())},children:[" ",e]})},l=function(e){var n="-"===e?null:e;return Object(Ht.jsx)(xs,{isActive:"modulate"===c.alterType&&n==c.modRel,onClick:function(){c.modRel!==n&&(c.modRel=n,c.dommVal=0,c.keyAdj=0,r())},children:e})},d=function(e){var n="-"===e?null:e;return Object(Ht.jsx)(xs,{isActive:"tempo"===c.alterType&&n==c.tempoRel,onClick:function(){c.tempoRel!==n&&(c.tempoRel=n,c.tempoDiff=0,c.tempoRate=100,c.tempoAbs=100,r())},children:e})},b=function(e){return Object(Ht.jsx)(xs,{isActive:"beat"===c.alterType&&c.beatSignature===e,onClick:function(){c.beatSignature!==e&&(c.beatSignature=e,r())},children:e})},u=Object(Ht.jsx)(ps,{isEnable:"domm"===c.modRel,children:[-3,-2,-1,0,1,2,3].map((function(e,n){var t=e>0?"+":"";return Object(Ht.jsx)(fs,{isActive:"modulate"===c.alterType&&"domm"===c.modRel&&e==c.dommVal,onClick:function(){c.dommVal=e,r()},children:"".concat(t).concat(e)},n)}))}),h=Object(Ht.jsx)(ps,{isEnable:"key"===c.modRel,children:[-3,-2,-1,0,1,2,3].map((function(e,n){var t=e>0?"+":"";return Object(Ht.jsx)(fs,{isActive:"modulate"===c.alterType&&"key"===c.modRel&&e==c.keyAdj,onClick:function(){c.keyAdj=e,r()},children:"".concat(t).concat(e)},n)}))});return Object(Ht.jsxs)(bs,{children:[Object(Ht.jsxs)(us,{isEnable:!0,children:[Object(Ht.jsx)(hs,{children:"Type"}),s("-",null==a),s("modulate","modulate"===a),s("tempo","tempo"===a),s("beat","beat"===a)]}),Object(Ht.jsxs)(us,{isEnable:"modulate"===c.alterType,children:[Object(Ht.jsx)(hs,{children:"Modulate"}),l("-"),l("domm"),u,l("parallel"),l("relative"),l("key"),h]}),Object(Ht.jsxs)(us,{isEnable:"tempo"===c.alterType,children:[Object(Ht.jsx)(hs,{children:"Tempo"}),d("-"),d("diff"),St.createNumberForm(c.tempoDiff,"tempo"===c.alterType&&"diff"===c.tempoRel,(function(e){c.tempoDiff=e.currentTarget.valueAsNumber,r()}),-100,100,1),d("rate"),St.createNumberForm(c.tempoRate,"tempo"===c.alterType&&"rate"===c.tempoRel,(function(e){c.tempoRate=e.currentTarget.valueAsNumber,r()}),10,200,1),d("abs"),St.createNumberForm(c.tempoAbs,"tempo"===c.alterType&&"abs"===c.tempoRel,(function(e){c.tempoAbs=e.currentTarget.valueAsNumber,r()}),10,200,1)]}),Object(Ht.jsxs)(us,{isEnable:"beat"===c.alterType,children:[Object(Ht.jsx)(hs,{children:"Beat"}),b("2/4"),b("4/4"),b("3/4"),b("6/8"),b("9/8"),b("12/8")]})]})},bs=d.b.div(wt||(wt=Object(s.a)(["\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        text-align: left;\n        background-color: #b3b5c5;\n        "]))),us=d.b.div(It||(It=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    margin: 0 0 0 4px;\n    ","\n        "])),(function(e){return e.isEnable?"":Object(d.a)(Ct||(Ct=Object(s.a)(["\n    pointer-events: none;\n    opacity: 0.5;\n"])))})),hs=d.b.div(Et||(Et=Object(s.a)(["\n    ","\n    margin-top: 4px;\n"])),St.___CSS_TITLE),xs=d.b.div(Lt||(Lt=Object(s.a)(["\n        ","\n        margin-top: 1px;\n        width: 100%;\n        background-color: #c1cdd4;\n        ","\n        "])),St.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(Dt||(Dt=Object(s.a)(["\n        background-color: #e0c83e;\n    "]))):""})),ps=d.b.div(Tt||(Tt=Object(s.a)(["\n        margin: 1px;\n        background-color: #070707;\n        ","\n        "])),(function(e){return e.isEnable?"":Object(d.a)(zt||(zt=Object(s.a)(["\n        pointer-events: none;\n        opacity: 0.5;\n    "])))})),fs=d.b.div(At||(At=Object(s.a)(["\n        ","\n        width: 29px;\n        background-color: #dddddd;\n        ","\n        "])),St.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(Mt||(Mt=Object(s.a)(["\n        background-color: #e0c83e;\n    "]))):""})),gs=(d.b.div(Ft||(Ft=Object(s.a)(["\n        display: inline-block;\n        width: 100%;\n        height: 24px;\n        /* margin: 5px 0 0 0; */\n        text-align: left;\n        background-color: #ececec;\n\n        & * {\n            display: inline-block;\n            box-sizing: border-box;\n            vertical-align: top;\n    }\n        & input:nth-child(1) {\n            background-color: #dddddd;\n            width: 60px;\n            height: calc(100% - 4px);\n            margin: 2px 0 0 0;\n            border: 1px solid #9b9b9b;\n            border-radius: 4px;\n    }\n        & input:nth-child(2) {\n            margin-left: 5px;\n            background-color: #f00;\n            width: calc(100% - 70px);\n            height: 100%;\n    }\n        "]))),function(e){for(var n=Object(o.useContext)(xp),t=n.store,i=n.dispatcher,c=t.scoreState,a=t.scoreData.chordList[c.focusIndex].detail,r=c.elementCacheList[c.focusIndex],s=[],l=function(e){var n=a.beatLen>=e+1;s.push(Object(Ht.jsx)(ks,{isExist:n,onClick:function(){var n=t.scoreData;n.chordList=n.chordList.slice(),a.beatLen=e+1,n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n)},children:Object(Ht.jsx)("span",{})},e))},d=0;d<4;d++)l(d);var b=[];j.forEach((function(e,n){var o=JSON.stringify(a.root)===JSON.stringify(e),c=null!=a.on&&JSON.stringify(a.on)===JSON.stringify(e),s="major"===r.scale?["0","2","4","5","7","9","11"]:["0","2","3b","5","7","8b","10b"],l=null!=e&&s.includes(e.index+(e.isFlat?"":"b"));b.push(Object(Ht.jsx)(Cs,{isRootActive:o,isOnActive:c,isDiatonic:l,onClick:function(){var n=t.scoreData;(c||null==e)&&(a.on=null),a.root=null==e?null:Object(h.a)({},e),null==e&&(a.symbolKey="major"),n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n)},onContextMenu:function(){var n=t.scoreData;null==a.root||o||(a.on=c||null==e?null:Object(h.a)({},e),n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n))},children:null==e?"-":Object(Ht.jsxs)(Ht.Fragment,{children:[O(e)," (",S(e,r.keyIndex),")"]})},n))}));var u=[];return C.forEach((function(e,n){var o=null!=a.root&&e.key===a.symbolKey;u.push(Object(Ht.jsxs)(Ls,{isActive:o,isDiatonic:!0,onClick:function(){var n=t.scoreData;a.symbolKey=e.key,n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n)},children:["[",e.name,"]"]},n))})),Object(Ht.jsxs)(vs,{children:[Object(Ht.jsxs)(ms,{children:[Object(Ht.jsx)(js,{children:"Beat Length"}),Object(Ht.jsx)(Os,{children:s}),Object(Ht.jsxs)(ys,{children:[Object(Ht.jsx)(js,{children:"Minute Head"}),Object(Ht.jsx)(Ss,{isReverse:!0,type:"range",step:.25,min:-.5,max:.5,value:a.minute.head,onChange:function(e){var n=t.scoreData;n.chordList=n.chordList.slice(),a.minute.head=Number(e.target.value),n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n)}}),Object(Ht.jsx)(js,{children:"Minute Tail"}),Object(Ht.jsx)(Ss,{isReverse:!1,type:"range",step:.25,min:-.5,max:.5,value:a.minute.tail,onChange:function(e){var n=t.scoreData;n.chordList=n.chordList.slice(),a.minute.tail=Number(e.target.value),n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n)}})]})]}),Object(Ht.jsxs)(ws,{children:[Object(Ht.jsx)(Is,{children:b}),Object(Ht.jsx)(Es,{isDisable:null==a.root,children:u})]})]})}),js=d.b.div(Ro||(Ro=Object(s.a)(["\n    ","\n    margin-top: 4px;\n"])),St.___CSS_TITLE),vs=(d.b.div(No||(No=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 18px;\n    text-align: left;\n    /* background-color: #f0f0f0; */\n    background: linear-gradient(to bottom, #707070, #b3b3b3, #707070);\n    font-size: 14px;\n    color: #ffffff;\n    font-weight: 600;\n    line-height: 14px;\n    box-sizing: border-box;\n    /* border: 1px solid #c50000; */\n    text-align: center;\n"]))),d.b.div(Po||(Po=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    background-color: #8a8a8a;\n"])))),ms=d.b.div(_o||(_o=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 100px; */\n    text-align: left;\n    background-color: #979797;\n"]))),Os=d.b.div(Ko||(Ko=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 25px;\n    text-align: left;\n    background-color: #afafaf;\n"]))),ks=d.b.div(Bo||(Bo=Object(s.a)(["\n    display: inline-block;\n    width: 25%;\n    height: 20px;\n    text-align: left;\n    background-color: #696969;\n\n    & span{\n        display: inline-block;\n        margin: 2px 0 0 2px;\n        width: calc(100% - 4px);\n        height: calc(100% - 4px);\n        background-color: #9b8585;\n        ","\n    }\n"])),(function(e){return e.isExist?Object(d.a)(Ho||(Ho=Object(s.a)(["\n            /* background-color: #ebf37eb7; */\n            background: linear-gradient(to bottom, #c5c5c5d2, #f3f3f3d2, #c5c5c5d2);\n        "]))):""})),ys=d.b.div(Uo||(Uo=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    text-align: left;\n    background-color: #cecece;\n"]))),Ss=(d.b.div(Wo||(Wo=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 18px;\n    text-align: left;\n    /* background-color: #f0f0f0; */\n    background: linear-gradient(to bottom, #707070, #b3b3b3, #707070);\n    font-size: 14px;\n    color: #ffffff;\n    font-weight: 600;\n    line-height: 14px;\n    box-sizing: border-box;\n    border: 1px solid #222222;\n    text-align: center;\n"]))),d.b.input(qo||(qo=Object(s.a)(["\n    display: inline-block;\n    margin: 0 0 0 5px;\n    width: calc(100% - 10px);\n    height: 20px;\n    color: #3b51d1;\n    ","\n"])),(function(e){return e.isReverse?Object(d.a)(Vo||(Vo=Object(s.a)(["\n        transform: rotateY(180deg);\n    "]))):""}))),ws=d.b.div(Jo||(Jo=Object(s.a)(["\n    display: inline-block;\n    margin-top: 5px;\n    width: 100%;\n    /* height: 360px; */\n    text-align: left;\n    /* background-color: #000000; */\n    & * {\n        vertical-align: top;\n    }\n"]))),Is=d.b.div(Xo||(Xo=Object(s.a)(["\n    display: inline-block;\n    width: 90px;\n    margin: 0 0 0 1px;\n    height: 100%;\n    text-align: left;\n    /* background-color: #e6e6e6; */\n"]))),Cs=d.b.div(Yo||(Yo=Object(s.a)(["\n    display: inline-block;\n    margin: 1px 0 0 0;\n    width: 100%;\n    height: 25px;\n    text-align: left;\n    background-color: #90bbcc;\n    ","\n    ","\n    border: 1px solid #000;\n    border-radius: 2px;\n    box-sizing: border-box;\n    color: #3030308d;\n    ","\n    font-size: 16px;\n    font-weight: 600;\n    line-height: 20px;\n    text-align: center;\n    & span {\n        color: #9e9e9e;\n    }\n    &:hover {\n        background-color: #99999940;\n        ","\n        ","\n    }\n"])),(function(e){return e.isRootActive?Object(d.a)(Go||(Go=Object(s.a)(["background-color: #d12121b8;"]))):""}),(function(e){return e.isOnActive?Object(d.a)(Qo||(Qo=Object(s.a)(["background-color: #6070ffbc;"]))):""}),(function(e){return e.isDiatonic?Object(d.a)(Zo||(Zo=Object(s.a)(["color: #17007e;"]))):""}),(function(e){return e.isRootActive?Object(d.a)($o||($o=Object(s.a)(["background-color: #cc6363b8;"]))):""}),(function(e){return e.isOnActive?Object(d.a)(ec||(ec=Object(s.a)(["background-color: #94c5e6b9;"]))):""})),Es=d.b.div(nc||(nc=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 93px);\n    margin: 0 1px 0 1px;\n    height: 100%;\n    text-align: left;\n    ","\n"])),(function(e){return e.isDisable?Object(d.a)(tc||(tc=Object(s.a)(["\n        opacity: 0.3;\n        pointer-events: none;\n    "]))):""})),Ls=d.b.div(ic||(ic=Object(s.a)(["\n    ","\n    margin: 1px 0 0 0;\n    width: 100%;\n    background-color: #a1cc90;\n    ","\n    color: #fff;\n    ","\n    /* & span {\n        color: #f000;\n    } */\n    &:hover {\n        background-color: #dddddd40;\n        ","\n    }\n"])),St.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(oc||(oc=Object(s.a)(["background-color: #d12121b8;"]))):""}),(function(e){return e.isDiatonic?Object(d.a)(cc||(cc=Object(s.a)(["color: #fff;"]))):""}),(function(e){return e.isActive?Object(d.a)(ac||(ac=Object(s.a)(["background-color: #cc6363b8;"]))):""})),Ds=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.scoreData,c=i.chordList[0].detail,a=function(){i.chordList=i.chordList.slice(),t.score.setScoreData(i),Rt.updateHarmonizeCache(n,t)},r=["major","minor"].map((function(e,n){return Object(Ht.jsx)(Ms,{isActive:c.scale===e,onClick:function(){c.scale=e,a()},children:e},n)})),s=("major"===c.scale?w:I).map((function(e,n){var t=c.scale;return Object(Ht.jsx)(Rs,{isActive:c.keyIndex===n,onClick:function(){c.keyIndex=n,a()},children:"".concat(e," ").concat(t)},n)})),l=["2/4","4/4","3/4","6/8","9/8","12/8"].map((function(e,n){return Object(Ht.jsx)(Ps,{isActive:c.beatSignature===e,onClick:function(){c.beatSignature=e,a()},children:e},n)}));return Object(Ht.jsxs)(Ts,{children:[Object(Ht.jsx)(zs,{children:"Scale"}),Object(Ht.jsx)(As,{children:r}),Object(Ht.jsx)(zs,{children:"Key"}),Object(Ht.jsx)(Fs,{children:s}),Object(Ht.jsx)(zs,{children:"Tempo"}),St.createNumberForm(c.bpm,!0,(function(e){c.bpm=e.currentTarget.valueAsNumber,a()}),30,220,1),Object(Ht.jsx)(zs,{children:"Rate"}),Object(Ht.jsx)(Ns,{children:l})]})},Ts=d.b.div(rc||(rc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    background-color: #9b9eb8;\n"]))),zs=d.b.div(sc||(sc=Object(s.a)(["\n    ","\n    margin-top: 4px;\n"])),St.___CSS_TITLE),As=d.b.div(lc||(lc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    /* background-color: #ececec; */\n"]))),Ms=d.b.div(dc||(dc=Object(s.a)(["\n    ","\n    border: solid 1px #fff;\n    color: #fff;\n    width: 50%;\n    margin: 1px 0 0 0;\n\n    background-color: #61b47d;\n    ","\n"])),St.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(bc||(bc=Object(s.a)(["\n        background-color: #da909082;\n    "]))):""})),Fs=d.b.div(uc||(uc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 24px; */\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    /* background-color: #ececec; */\n"]))),Rs=d.b.div(hc||(hc=Object(s.a)(["\n    ","\n    border: solid 1px #fff;\n    color: #fff;\n    width: 100%;\n    margin: 1px 0 0 0;\n    \n    /* margin: 5px 0 0 0; */\n    background-color: #61b47d;\n    ","\n"])),St.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(xc||(xc=Object(s.a)(["\n        background-color: #da909082;\n    "]))):""})),Ns=(d.b.div(pc||(pc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    background-color: #ececec;\n\n    & * {\n        display: inline-block;\n        box-sizing: border-box;\n        vertical-align: top;\n    }\n    & input:nth-child(1) {\n        background-color: #dddddd;\n        width: 60px;\n        height: calc(100% - 4px);\n        margin: 2px 0 0 0;\n        border: 1px solid #9b9b9b;\n        border-radius: 4px;\n    }\n    & input:nth-child(2) {\n        margin-left: 5px;\n        background-color: #f00;\n        width: calc(100% - 70px);\n        height: 100%;\n    }\n"]))),d.b.div(fc||(fc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 24px; */\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    /* background-color: #ececec; */\n"])))),Ps=d.b.div(gc||(gc=Object(s.a)(["\n    ","\n    width: 100%;\n    border: solid 1px #fff;\n    color: #fff;\n    margin: 1px 0 0 0;\n    /* margin: 5px 0 0 0; */\n    background-color: #61b47d;\n    ","\n\n"])),St.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(jc||(jc=Object(s.a)(["\n        background-color: #da909082;\n    "]))):""})),_s=function(e){var n=Object(o.useContext)(xp),t=n.store,i=n.dispatcher,c=t.scoreState,a=t.scoreData.chordList[c.focusIndex].detail,r=function(e){a.labelName=e,t.scoreData.chordList=t.scoreData.chordList.slice(),i.score.setScoreData(t.scoreData)},s=Object(o.useMemo)((function(){var e=[];return["Intro","A-mero","B-mero","Sabi","C-mero","Outro"].forEach((function(n){var t=0===a.labelName.indexOf(n);e.push(Object(Ht.jsx)(Vs,{isActive:t,onClick:function(){r(n)},children:n},e.length))})),e}),[a.labelName]),l=Object(o.useMemo)((function(){var e=[],n=a.labelName.split(" ");return["",1,2,3,4,5,6,7,8,9].forEach((function(t){var i=n[n.length-1]===t.toString();e.push(Object(Ht.jsx)(Js,{isActive:i,onClick:function(){r("".concat(n[0]," ").concat(t))},children:t},e.length))})),e}),[a.labelName]);return Object(Ht.jsxs)(Ks,{children:[Object(Ht.jsx)(Bs,{type:"text",value:a.labelName,onChange:function(e){r(e.target.value)}}),Object(Ht.jsxs)(Us,{children:[Object(Ht.jsx)(Ws,{children:s}),Object(Ht.jsx)(qs,{children:l})]})]})},Ks=d.b.div(vc||(vc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    /* background-color: #b89b9b; */\n"]))),Bs=d.b.input(mc||(mc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    text-align: left;\n    background-color: #bbbbbb;\n    font-size: 22px;\n    font-weight: 600;\n    color: #a30000;\n    box-sizing: border-box;\n    outline: none;\n    border: 1px solid black;\n    border-radius: 4px;\n"]))),Hs=d.b.div(Oc||(Oc=Object(s.a)(["\n    ","\n    width: 100%;\n    vertical-align: top;\n"])),St.___CSS_FORM),Us=d.b.div(kc||(kc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    padding: 2px;\n    box-sizing: border-box;\n    background-color: #acacac;\n"]))),Ws=d.b.div(yc||(yc=Object(s.a)(["\n    display: inline-block;\n    width: calc(60% - 4px);\n    margin: 0 2px 0 2px;\n    text-align: center;\n    background-color: #dac3d8;\n    vertical-align: top;\n"]))),qs=d.b.div(Sc||(Sc=Object(s.a)(["\n    display: inline-block;\n    width: calc(40% - 2px);\n    margin: 0 2px 0 0;\n    text-align: center;\n    background-color: #dac3d8;\n    vertical-align: top;\n"]))),Vs=Object(d.b)(Hs)(wc||(wc=Object(s.a)(["\n    /* background-color: #6182b4; */\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(Ic||(Ic=Object(s.a)(["\n        background-color: #ad993fe6;\n    "]))):""})),Js=Object(d.b)(Hs)(Cc||(Cc=Object(s.a)(["\n    /* background-color: #61b4b0; */\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(Ec||(Ec=Object(s.a)(["\n        background-color: #ad993fe6;\n    "]))):""})),Xs=function(){var e=Object(o.useContext)(xp),n=e.store,t=(e.dispatcher,n.scoreState),i=n.scoreData.chordList;if(-1===t.focusIndex||t.focusIndex>i.length-1)return Object(Ht.jsx)(Ht.Fragment,{});var c=i[t.focusIndex];return Object(Ht.jsx)(Ys,{children:function(){switch(c.type){case"init":return Object(Ht.jsx)(Ds,{});case"section":return Object(Ht.jsx)(_s,{});case"chord":return Object(Ht.jsx)(gs,{});case"alter":return Object(Ht.jsx)(ds,{})}}()})},Ys=d.b.div(Lc||(Lc=Object(s.a)(["\n    display: inline-block;\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px);\n    text-align: left;\n    background-color: #8a8a8a;\n"]))),Gs=function(){var e=Object(o.useContext)(xp),n=e.store,t=(e.dispatcher,n.scoreState),i=n.scoreData.chordList[t.focusIndex],c=t.elementCacheList[t.focusIndex],a=("major"===c.scale?[0,2,4,5,7,9,11]:[0,2,3,5,7,8,10]).map((function(e){return(c.keyIndex+e)%12})),r=[],s=Object(o.useMemo)((function(){var e=[],n=[];if("chord"===i.type){var t=i.detail,o=t.root,s=A(t.symbolKey);null!=o&&null!=s&&(r=function(e,n){return n.map((function(n){return e+E[n]}))}((o.index+c.keyIndex)%12,s.structs),n=s.structs.map((function(e,n){return Object(Ht.jsxs)(Zs,{children:[Object(Ht.jsx)("span",{children:e}),Object(Ht.jsx)("span",{children:E[e]})]},n)})))}for(var l=0;l<14;l++){var d=e.length,b=a.includes(d%12),u=r.includes(d);if(e.push(Object(Ht.jsx)(el,{isBlack:!1,index:l,isScale:b,isUse:u},e.length)),[0,1,3,4,5].includes(l%7)){var h=e.length,x=a.includes(h%12),p=r.includes(h);e.push(Object(Ht.jsx)(el,{isBlack:!0,index:l,isScale:x,isUse:p},e.length))}}return[e,n]}),[r]),d=Object(l.a)(s,2),b=d[0];d[1];return Object(Ht.jsx)(Qs,{isUse:r.length>0,children:Object(Ht.jsx)($s,{children:b})})},Qs=d.b.div(Dc||(Dc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    ","\n    & * {\n        vertical-align: top;\n    }\n"])),(function(e){return e.isUse?"":Object(d.a)(Tc||(Tc=Object(s.a)(["\n        opacity: 0.5;\n    "])))})),Zs=(d.b.div(zc||(zc=Object(s.a)(["\n    display: inline-block;\n    width: 50px;\n    height: 100%;\n    background-color: #949494;\n    /* border: solid 1px #a3a3a3; */\n    box-sizing: border-box;\n    /* padding: 2px 0 0 0; */\n"]))),d.b.div(Ac||(Ac=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 15px;\n    box-sizing: border-box;\n\n    /* background-color: #4b4b4b; */\n    /* background: linear-gradient(to bottom, #adac6c, #e0df7d, #adac6c); */\n    /* background: linear-gradient(to bottom, #858585, #4b4b4b, #858585); */\n    border: solid 1px rgb(207, 207, 207);\n    margin-bottom: 1px;\n    font-size: 12px;\n    font-weight: 600;\n    line-height: 12px;\n    text-align: center;\n\n    & span:nth-child(1){\n        color: #f5e400;\n    }\n    & span:nth-child(2){\n        margin-left: 10px;\n        color: #ffffff;\n    }\n"])))),$s=d.b.div(Mc||(Mc=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 50px);\n    height: 100%;\n    /* background-color: #383838; */\n    /* padding: 12px 0 0 2px;\n    box-sizing: border-box; */\n"]))),el=d.b.div(Fc||(Fc=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: ","px;\n    left: ","px;\n    z-index: 2;\n    border: 1px solid #ffffffda;\n    border-radius: 20px;\n    width: 25px;\n    height: ","px;\n    /* background-color: #7d7d9e; */\n    ","\n    ","\n    box-sizing: border-box;\n"])),(function(e){return 2+(e.isBlack?0:32)}),(function(e){return 2+27*e.index+(e.isBlack?12.5:0)}),(function(e){return e.isBlack?32:43}),(function(e){return e.isScale?Object(d.a)(Rc||(Rc=Object(s.a)(["\n    background: radial-gradient(#d6c3ca, #a88995);\n    "]))):Object(d.a)(Nc||(Nc=Object(s.a)(["\n    background: radial-gradient(#d6cec3, #a89889);\n    "])))}),(function(e){return e.isUse?e.isScale?Object(d.a)(Pc||(Pc=Object(s.a)(["\n        background: radial-gradient(#d43131, #722a2a);\n    "]))):Object(d.a)(_c||(_c=Object(s.a)(["\n        background: radial-gradient(#e7a144, #72552a);\n    "]))):""})),nl=function(){for(var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.scoreState,c=[],a=function(e){c.push(Object(Ht.jsx)(cl,{isActive:i.initialBeat>e,onClick:function(){i.initialBeat=e+1,t.score.setScoreState(i)}},e))},r=0;r<4;r++)a(r);return Object(Ht.jsxs)(tl,{children:[Object(Ht.jsx)(il,{children:"inital beat"}),Object(Ht.jsx)(ol,{children:c})]})},tl=d.b.div(Kc||(Kc=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    margin-left: 10px;\n    /* background-color: red; */\n    & *{\n        vertical-align: top;\n    }\n"]))),il=d.b.div(Bc||(Bc=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    font-size: 18px;\n    font-weight: 600;\n    color: #979797;\n    margin-left: 4px;\n    font-style: italic;\n    line-height: 38px;\n    /* background-color: yellow; */\n"]))),ol=d.b.div(Hc||(Hc=Object(s.a)(["\n    display: inline-block;\n    width: 142px;\n    height: calc(100% - 6px);\n    margin: 3px 0 0 10px;\n    border-radius: 4px;\n    border: solid 1px #747474;\n    box-sizing: border-box;\n"]))),cl=d.b.div(Uc||(Uc=Object(s.a)(["\n    display: inline-block;\n    width: 30px;\n    height: calc(100% - 6px);\n    margin: 3px 0 0 4px;\n    background-color: #c7c7c7;\n        border: solid 1px #a1a1a1;\n    ","\n    box-sizing: border-box;\n"])),(function(e){return e.isActive?Object(d.a)(Wc||(Wc=Object(s.a)(["\n        background-color: #e4e4e4;\n        border: solid 1px #7c7c7c;\n    "]))):""})),al=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.backingState,c=function(){return t.backing.setState(i)},a=i.pattern,r=a.layers[a.layerIndex],s=a.channels.length-1-a.channelIndex,l=r.table[s][a.lenIndex],d=null==l?0:l.timing,b=null==l?0:l.velAdj;return Object(Ht.jsx)(rl,{children:null==l?Object(Ht.jsx)(Ht.Fragment,{}):Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsxs)(sl,{children:[Object(Ht.jsx)(ll,{children:"timing"}),Object(Ht.jsx)(dl,{type:"range",min:-10,max:10,step:1,value:d,onChange:function(e){l.timing=Number(e.target.value),c()}})]}),Object(Ht.jsxs)(sl,{children:[Object(Ht.jsx)(ll,{children:"velocity"}),Object(Ht.jsx)(dl,{type:"range",min:-10,max:10,step:1,value:b,onChange:function(e){l.velAdj=Number(e.target.value),c()}})]})]})})},rl=d.b.div(qc||(qc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    /* white-space: nowrap; */\n"]))),sl=d.b.div(Vc||(Vc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(50% - 2px);\n    margin: 1px 0;\n    background-color: #9c9c9c;\n"]))),ll=d.b.div(Jc||(Jc=Object(s.a)(["\n    display: inline-block;\n    margin-top: 1px;\n    margin-left: 5px;\n    height: calc(100% - 2px);\n    width: 80px;\n    background-color: #868686;\n    font-size: 16px;\n    line-height: 16px;\n    font-weight: 600;\n    color: #e7e7e7;\n    border: 1px solid #616161;\n    border-radius: 4px;\n    box-sizing: border-box;\n    text-align: center;\n"]))),dl=d.b.input(Xc||(Xc=Object(s.a)(["\n    display: inline-block;\n    outline: none;\n    margin: 6px 0 0 10px;\n    width: calc(100% - 100px);\n    height: 10px;\n    box-sizing: border-box;\n"]))),bl=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.backingState,c=[],a=i.pattern,r=a.layers[a.layerIndex];return r.noteDivList.forEach((function(e,n){var o=a.lenIndex===n,r=o&&-1!==a.channelIndex,s=e.rate;e.isDot&&(s/=1.5),0!==e.div3&&(s/=e.div3/3),c.push(Object(Ht.jsxs)(hl,{rate:s,isActive:o,isEdit:r,onClick:function(){a.channelIndex=-1,a.lenIndex=n,t.backing.setState(i)},children:[e.rate,e.isDot?".":"",0===e.div3?"":"/"]},n))})),Object(Ht.jsx)(ul,{children:c})},ul=d.b.div(Yc||(Yc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    white-space: nowrap;\n"]))),hl=d.b.div(Gc||(Gc=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - 4px);\n    margin: 2px 0 0 1px;\n    background-color: #1616beb0;\n    ","\n    ","\n    box-sizing: border-box;\n\n    font-size: 14px;\n    font-weight: 600;\n    color: #ffffffba;\n    text-align: center;\n"])),(function(e){return ie/e.rate-1}),(function(e){return e.isActive?Object(d.a)(Qc||(Qc=Object(s.a)(["\n        background-color: #6363eeaf;\n    "]))):""}),(function(e){return e.isEdit?Object(d.a)(Zc||(Zc=Object(s.a)(["\n        background-color: #b40000af;\n    "]))):""})),xl=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.backingState,c=i.pattern,a=c.channels.length,r=c.layers[c.layerIndex],s=function(){return t.backing.setState(i)},l=Object(o.useMemo)((function(){var e=Array(2);return c.layers.forEach((function(n,i){for(var o=[],l=function(e){var l=[];n.noteDivList.forEach((function(o,d){var b=a-1-e,u=c.layerIndex===i&&c.lenIndex===d,h=n.table[b][d],x=function(e){return n.table[b][d]=e},p=null!=h,f=c.layerIndex===i&&(p&&B.checkOverlapBackLayer(c.layers,i,b,d)),g=u&&c.channelIndex===e,j=o.rate;o.isDot&&(j/=1.5),0!==o.div3&&(j/=o.div3/3),l.push(Object(Ht.jsx)(gl,{rate:j,isActive:u,isEdit:g,isBack:c.layerIndex!==i,children:Object(Ht.jsx)(jl,{isUse:p,isError:f,signal:"n",isBack:c.layerIndex!==i,onClick:function(){x(null==h?{signal:"n",timing:0,velAdj:0}:null),r.table=r.table.slice(),s(),t.backing.updateErrorState()},onContextMenu:function(){c.channelIndex=e,c.lenIndex=d,s()}})},d))})),o.push(Object(Ht.jsx)(fl,{isEven:e%2==0,isFront:!0,children:l},e))},d=0;d<a;d++)l(d);e[i]=o})),e}),[c.channels,c.layerIndex,c.lenIndex,r.noteDivList,r.table,c.channelIndex]),d=0===c.layerIndex?l:l.reverse();return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(pl,{zIndex:2,children:d[1]}),Object(Ht.jsx)(pl,{zIndex:1,children:d[0]})]})},pl=d.b.div($c||($c=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    /* background-color: #000000f; */\n"]))),fl=d.b.div(ea||(ea=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    overflow: hidden;\n    white-space: nowrap;\n    ","\n"])),(function(e){return e.isFront?Object(d.a)(na||(na=Object(s.a)(["\n        ","\n    "])),(function(e){return e.isEven?Object(d.a)(ia||(ia=Object(s.a)(["\n            background-color: #42425542;\n        "]))):Object(d.a)(ta||(ta=Object(s.a)(["\n            background-color: #3a3a502f;\n        "])))})):""})),gl=d.b.div(oa||(oa=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - 1px);\n    margin: 1px 0 0 1px;\n    ","\n    ","\n    box-sizing: border-box;\n\n    &:hover {\n        background-color: #82f7ff57;\n    }\n"])),(function(e){return ie/e.rate-1}),(function(e){return e.isBack?"":Object(d.a)(ca||(ca=Object(s.a)(["\n        background-color: #00000013;\n        ","\n    "])),(function(e){return e.isActive?Object(d.a)(aa||(aa=Object(s.a)(["\n            background-color: #9b9b9b1d;\n        "]))):""}))}),(function(e){return e.isEdit?Object(d.a)(ra||(ra=Object(s.a)(["\n        border: 2px solid #d80000ba;\n    "]))):""})),jl=d.b.div(sa||(sa=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: calc(100% - 2px);\n    margin: 1px 0 0 1px;\n    background-color: #a7a7a754;\n    ","\n    box-sizing: border-box;\n    &:hover {\n        background-color: #ffffff63;\n        ","\n    }\n"])),(function(e){return e.isUse?Object(d.a)(la||(la=Object(s.a)(["\n        /* background-color: #f8fc029b; */\n        background: linear-gradient(to bottom, #9b9e00, #f8fc02, #9b9e00);\n        // \u30a8\u30e9\u30fc\u3042\u308a\n        ","\n        // \u88cf\u9762\u306e\u30ec\u30a4\u30e4\u30fc\n        ","\n    "])),(function(e){return e.isError?Object(d.a)(da||(da=Object(s.a)(["\n            opacity: 0.5;\n        "]))):""}),(function(e){return e.isBack?Object(d.a)(ba||(ba=Object(s.a)(["\n            background: linear-gradient(to bottom, #9e0000, #fc0202, #9e0000);\n            opacity: 0.5;\n        "]))):""})):""}),(function(e){return e.isUse?Object(d.a)(ua||(ua=Object(s.a)(["\n            background-color: #fdff719b;\n        "]))):""})),vl=function(){var e=Object(o.useContext)(xp),n=e.store,t=(e.dispatcher,n.backingState),i=[],c=t.pattern,a=c.layers[c.layerIndex];return a.velocityList.forEach((function(e,n){var t=c.lenIndex===n,o=a.noteDivList[n],r=o.rate;o.isDot&&(r/=1.5),0!==o.div3&&(r/=o.div3/3),i.push(Object(Ht.jsx)(Ol,{rate:r,isActive:t,children:Object(Ht.jsx)(kl,{value:e})},n))})),Object(Ht.jsx)(ml,{children:i})},ml=d.b.div(ha||(ha=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    white-space: nowrap;\n"]))),Ol=d.b.div(xa||(xa=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: calc(100% - 4px);\n    margin: 2px 0 0 1px;\n    background-color: #001763ac;\n    ","\n    box-sizing: border-box;\n    /* text-align: center; */\n"])),(function(e){return ie/e.rate-1}),(function(e){return e.isActive?Object(d.a)(pa||(pa=Object(s.a)(["\n        background-color: #173494ac;\n    "]))):""})),kl=d.b.div(fa||(fa=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    bottom: 0;\n    left: calc(50% - 6px);\n    width: 10px;\n    height: ","%;\n    background-color: #5cceddaf;\n"])),(function(e){return 10*e.value})),yl=function(){var e=Object(o.useContext)(xp),n=e.store,t=(e.dispatcher,n.backingState),i=t.chordInfo,c=(t.pattern,t.pattern),a=c.layers[c.layerIndex].noteDivList,r=B.getLimitLen(i),s=B.getUsingLenFromDivs(a,i),l=0<=r-s,d=g.getBeatProps(i.init.beatSignature),b=i.beatLen*d.beatMemoriCount;b+=i.minute.head+i.minute.tail;for(var u=4===d.beatMemoriCount?16:24,h=ie/u,x=[],p=0;p<b+1;p++){var f=p,j={thickness:1,height:10,color:"#555"};if(4===d.beatMemoriCount)switch(!0){case f%16===0:j={thickness:2,height:22,color:"#747474"};break;case f%4===0:j={thickness:1,height:18,color:"#646464"};break;case f%2===0:j={thickness:1,height:14,color:"#7a7a7a"}}else switch(!0){case f%24===0:j={thickness:2,height:22,color:"#747474"};break;case f%6===0:j={thickness:1,height:18,color:"#646464"};break;case f%3===0:j={thickness:1,height:14,color:"#7a7a7a"}}x.push(Object(Ht.jsx)(El,{width:h,height:j.height,color:j.color,thickness:j.thickness},x.length))}return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsxs)(Sl,{children:[Object(Ht.jsx)(wl,{children:Object(Ht.jsx)(bl,{})}),Object(Ht.jsxs)(Il,{children:[Object(Ht.jsx)(Cl,{children:x}),l?Object(Ht.jsx)(zl,{pos:120*r}):Object(Ht.jsx)(Ll,{pos:120*r,width:120*(s-r)})]})]}),Object(Ht.jsx)(Dl,{children:Object(Ht.jsx)(xl,{})}),Object(Ht.jsx)(Tl,{children:-1===c.channelIndex?Object(Ht.jsx)(vl,{}):Object(Ht.jsx)(al,{})})]})},Sl=d.b.div(ga||(ga=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #9292bdd6;\n"])),ne),wl=d.b.div(ja||(ja=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #9292bdd6;\n"])),25),Il=d.b.div(va||(va=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    background-color: #b492bdd5;\n    background: linear-gradient(to bottom, rgb(255, 255, 255), rgb(98, 97, 114));\n"])),25),Cl=d.b.div(ma||(ma=Object(s.a)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n"]))),El=d.b.div(Oa||(Oa=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: ","px;\n    border-left: solid ","px ",";\n    box-sizing: border-box;\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.thickness}),(function(e){return e.color})),Ll=d.b.div(ka||(ka=Object(s.a)(["\n    position: absolute;\n    z-index: 10;\n    left: ","px;\n    width: ","px;\n    height: ","px;\n    background-color: #f8000053;\n    pointer-events: none;\n"])),(function(e){return e.pos}),(function(e){return e.width}),265),Dl=d.b.div(ya||(ya=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    background-color: #97d3cec8;\n"])),te),Tl=d.b.div(Sa||(Sa=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #898997cc;\n"])),50),zl=d.b.div(wa||(wa=Object(s.a)(["\n    position: absolute;\n    z-index: 10;\n    left: ","px;\n    width: 4px;\n    height: ","px;\n    background-color: #ffffffc7;\n"])),(function(e){return e.pos}),265),Al=function(e){var n=Object(o.useContext)(xp),t=n.store,i=n.dispatcher,c=t.backingState,a=c.pattern,r=a.channels.length-1-e.index,s=a.channels.length,l=function(){i.backing.setState(c),i.backing.updateErrorState()};return Object(Ht.jsx)(Ht.Fragment,{children:Object(Ht.jsxs)(Ml,{isError:"-"===e.soundFullName,children:[Object(Ht.jsx)(Rl,{children:e.soundFullName}),Object(Ht.jsx)(Nl,{isEnable:s>1,onClick:function(){a.layers.forEach((function(e){e.table.splice(r,1)}));var e=B.buildChannels(c.voicingTable);a.channels=B.getChannels(e,a.channels.length-1),l()},children:"-"}),Object(Ht.jsx)(Nl,{isEnable:s<12,onClick:function(){a.layers.forEach((function(e){var n=B.getInitialRecord(e.noteDivList.length);e.table.splice(r,0,n)}));var e=B.buildChannels(c.voicingTable);a.channels=B.getChannels(e,a.channels.length+1),l()},children:"+"})]})})},Ml=d.b.div(Ia||(Ia=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 19px;\n    background-color: #b4b3b36f;\n    ","\n    margin: 0 0 1px 0;\n"])),(function(e){return e.isError?Object(d.a)(Ca||(Ca=Object(s.a)(["\n        background-color: #ff0000c3;\n    "]))):""})),Fl=d.b.div(Ea||(Ea=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    margin: 0 1px 0 0;\n    border: 1px solid #322e4292;\n    border-radius: 4px;\n    box-sizing: border-box;\n    font-size: 12px;\n    font-weight: 600;\n    color: #ffffff;\n    text-align: center;\n"]))),Rl=Object(d.b)(Fl)(La||(La=Object(s.a)(["\n    width: 47px;\n\n"]))),Nl=Object(d.b)(Fl)(Da||(Da=Object(s.a)(["\n    width: 25px;\n    &:hover {\n        background-color: #f1ef866c;\n    }\n    ","\n    \n"])),(function(e){return e.isEnable?"":ui})),Pl=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.backingState,c=i.chordInfo,a=A(c.symbolKey),r=i.pattern,s=(c.root.index+c.init.keyIndex)%12,l=[],d=[];null!=r&&(r.channels.forEach((function(e,n){var t="-";if(-1!==e.octave){var i=s+E[a.structs[e.structIndex]],o=e.octave+Math.floor(i/12);t=y[i%12]+o}l.push(Object(Ht.jsx)(Al,{index:n,soundFullName:t},n))})),r.layers.forEach((function(e,n){var i=0===n?"L-HAND":"R-HAND";d.push(Object(Ht.jsx)(Kl,{isActive:r.layerIndex===n,onClick:function(){n!==r.layerIndex&&t.backing.changeLayer()},children:i},n))})));return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(_l,{children:d}),Object(Ht.jsx)(Bl,{children:l}),Object(Ht.jsx)(Hl,{})]})},_l=d.b.div(Ta||(Ta=Object(s.a)(["\n    /* display: inline-block; */\n    width: 100%;\n    height: ","px;\n    background-color: #929292;\n"])),ne),Kl=d.b.div(za||(za=Object(s.a)(["\n    display: inline-block;\n    height: 22px;\n    width: calc(100% - 4px);\n    margin: 2px 0 0 2px;\n    box-sizing: border-box;\n    text-align: center;\n    \n    font-size: 14px;\n    font-weight: 600;\n    color: #3b3b3b;\n    line-height: 20px;\n    background-color: #b8b8b8;\n    border: 1px solid #7a7a7a;\n    border-radius: 2px;\n\n    ","\n\n    &:hover {\n        background-color: #d4d4d4;\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Aa||(Aa=Object(s.a)(["\n        background-color: #dad600;\n        color: #c40000;\n    "]))):""})),Bl=d.b.div(Ma||(Ma=Object(s.a)(["\n/* display: inline-block; */\n    width: 100%;\n    height: ","px;\n    background-color: #97d3cec8;\n"])),te),Hl=d.b.div(Fa||(Fa=Object(s.a)(["\n/* display: inline-block; */\n    width: 100%;\n    height: ","px;\n    background-color: #898997cc;\n"])),50),Ul=function(){for(var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.backingState,c=i.pattern,a=c.layers[c.layerIndex],r=a.noteDivList[c.lenIndex],s=i.chordInfo,l=function(){a.noteDivList=a.noteDivList.slice(),t.backing.setState(i),t.backing.updateErrorState()},d=function(e,n,t,i){return Object(Ht.jsx)(Xl,{isEnable:t,isActive:n,onClick:i,children:e})},b=function(e){return d(String(e),r.rate===e,!0,(function(){return function(e){r.rate=e,l()}(e)}))},u=[],h=0;h<B.CHANNEL_MAX;h++){var x=h+1;u.push(Object(Ht.jsx)(Jl,{value:x,children:x},h))}var p=["2/4","4/4","4/3"].includes(s.init.beatSignature),f=Object(Ht.jsxs)(Wl,{children:[Object(Ht.jsx)(Vl,{value:c.channels.length,onChange:function(e){var n=c.channels.length,t=Number(e.target.value),o=B.buildChannels(i.voicingTable);c.channels=B.getChannels(o,t);var a=Number(e.target.value)-n;c.layers.forEach((function(e,n){if(a>0)for(var t=new Array(e.noteDivList.length).fill(null),i=0;i<a;i++)e.table.push(JSON.parse(JSON.stringify(t)));else{var o=Math.abs(a);e.table.splice(-o,o)}})),l()},children:u}),b(16),b(8),b(4),b(2),b(1),d(".",r.isDot,16!==r.rate,(function(){r.isDot=!r.isDot,l()})),d("1/3",1===r.div3,p,(function(){1===r.div3?r.div3=0:r.div3=1,l()})),d("2/3",2===r.div3,p,(function(){2===r.div3?r.div3=0:r.div3=2,l()}))]}),g=-1===c.channelIndex?null:c.layers[c.layerIndex].table[c.channels.length-1-c.channelIndex][c.lenIndex],j=Object(Ht.jsxs)(ql,{children:[d("-",null==g,!0,(function(){l()})),d("\u25a1",null!=g&&"n"===g.signal,!0,(function(){l()})),d("\u30fb",null!=g&&"s"===g.signal,!0,(function(){l()})),d("\u2040",null!=g&&"t"===g.signal,!0,(function(){l()}))]});return-1===c.channelIndex?f:j},Wl=d.b.div(Ra||(Ra=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #86c5b2;\n"]))),ql=d.b.div(Na||(Na=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #86b8c5;\n"]))),Vl=d.b.select(Pa||(Pa=Object(s.a)(["\n    display: inline-block;\n    width: 50px;\n    height: 26px;\n    margin: 2px 2px 0 0;\n    color: #eeff00;\n    font-size: 20px;\n    font-weight: 600;\n    background-color: #d4d4d422;\n    border: solid 1px #555;\n    border-radius: 4px;\n    box-sizing: border-box;\n    line-height: 20px;\n    text-align: center;\n    outline: none;\n"]))),Jl=d.b.option(_a||(_a=Object(s.a)(["\n    background-color: black;\n    color: white;\n    font-size: 16px;\n    font-weight: 600;\n"]))),Xl=d.b.div(Ka||(Ka=Object(s.a)(["\n    display: inline-block;\n    width: 50px;\n    height: 26px;\n    margin: 2px 2px 0 0;\n    font-size: 20px;\n    color: white;\n    font-weight: 600;\n    background-color: #ff008023;\n    border: solid 1px #555;\n    border-radius: 4px;\n    box-sizing: border-box;\n    line-height: 20px;\n    text-align: center;\n\n    ","\n\n    ","\n\n    &:hover {\n        background-color: #ff008039;\n        ","\n    }\n"])),(function(e){return e.isEnable?"":Object(d.a)(Ba||(Ba=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))}),(function(e){return e.isActive?Object(d.a)(Ha||(Ha=Object(s.a)(["\n        background-color: #fbff0050;\n    "]))):""}),(function(e){return e.isActive?Object(d.a)(Ua||(Ua=Object(s.a)(["\n            background-color: #dfe07850;\n        "]))):""})),Yl=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.backingState,c=(i.chordInfo,null!=i.pattern),a=function(){t.backing.setState(i)};return Object(Ht.jsxs)(Gl,{children:[Object(Ht.jsx)(Ql,{children:Object(Ht.jsxs)($l,{children:[Object(Ht.jsx)(Zl,{children:"Pattern"}),Object(Ht.jsx)(ed,{isActive:c,onClick:function(){if(c)i.pattern=null,a();else{var e=i.voicingTable,n=B.buildChannels(e),o=B.getChannels(n,1);i.pattern={layerIndex:0,lenIndex:0,channelIndex:-1,channels:o,isUsePedal:!1,layers:[t.backing.getInitialLayer(),t.backing.getInitialLayer()]},a()}},children:"Use"})]})}),Object(Ht.jsx)(nd,{isActive:c,children:c?Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(td,{children:Object(Ht.jsx)(Ul,{})}),Object(Ht.jsxs)(id,{children:[Object(Ht.jsx)(od,{children:Object(Ht.jsx)(Pl,{})}),Object(Ht.jsx)(cd,{children:Object(Ht.jsx)(yl,{})})]})]}):Object(Ht.jsx)(Ht.Fragment,{})})]})},Gl=d.b.div(Wa||(Wa=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 300px; */\n    background-color: #001279;\n\n    & *{\n        /* display: inline-block;\n        width: 100%; */\n    }\n"]))),Ql=d.b.div(qa||(qa=Object(s.a)(["\n    height: 30px;\n    background-color: #a5d1c3;\n"]))),Zl=d.b.div(Va||(Va=Object(s.a)([""]))),$l=d.b.div(Ja||(Ja=Object(s.a)(["\n    display: inline-block;\n    width: 200px;\n    height: 100%;\n    /* background-color: #7986d1; */\n\n    & * {\n        display: inline-block;\n        height: calc(100% - 4px);\n        margin-top: 2px;\n        box-sizing: border-box;        \n    }\n\n    & "," {\n        width: 80px;\n        font-size: 20px;\n        color: #f1fffb;\n        font-weight: 600;\n        /* background-color: #00000028; */\n        margin: 2px 2px 0 2px;\n        line-height: 22px;\n        text-align: center;\n    }\n"])),Zl),ed=d.b.div(Xa||(Xa=Object(s.a)(["\n    width: 100px;\n    font-size: 20px;\n    color: white;\n    font-weight: 600;\n    background-color: #ff008023;\n    border: solid 1px #555;\n    border-radius: 4px;\n    line-height: 20px;\n    text-align: center;\n\n    ","\n\n    &:hover {\n        background-color: #ff008039;\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Ya||(Ya=Object(s.a)(["\n        /* background-color: #b1dfc979; */\n        color: #e00000;\n    "]))):""})),nd=d.b.div(Ga||(Ga=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    overflow: hidden;\n    height: ","px;\n    ","\n    transition: height 100ms;\n"])),370,(function(e){return e.isActive?"":Object(d.a)(Qa||(Qa=Object(s.a)(["\n        height: 0;\n    "])))})),td=d.b.div(Za||(Za=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #8d98d4;\n    text-align: left;\n"])),30),id=d.b.div($a||($a=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #d48d8d;\n\n    /* & *{\n        display: inline-block;\n        height: 100%;\n    } */\n"]))),od=d.b.div(er||(er=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    background-color: #ff0000;\n"]))),cd=d.b.div(nr||(nr=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 100px);\n    background-color: #76af90;\n"]))),ad=function(){for(var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.backingState,c=i.chordInfo,a=A(c.symbolKey),r=i.voicingTable,s=i.pattern,l=(c.root.index+c.init.keyIndex)%12,d=y[l]+a.name,b=[],u=null==s?B.OCTAVE_NUM*B.STRUCT_NUM:s.channels.length,x=0,p=function(e){for(var o=[],c=function(c){var d=a.structs.length>c,b=r[e][c];b&&x++;var p=E[a.structs[c]],f=(l+p)%12,g=e+Math.floor((l+p)/12),j=d?"".concat(y[f]).concat(g):"";o.push(Object(Ht.jsx)(gd,{isEnable:d,isSelected:b,isOver:b&&x>u,onClick:function(){if(r[e][c]=!b,null!=s){var n=B.buildChannels(r);s.channels=B.getChannels(n,s.channels.length)}t.backing.setState(Object(h.a)(Object(h.a)({},i),{},{voicingTable:r,pattern:s})),t.backing.updateErrorState()},onContextMenu:function(){var e=n.instruments.harmony;null!=e&&e.play(j,0,{duration:1})},children:j},c))},d=0;d<B.STRUCT_NUM;d++)c(d);b.push(Object(Ht.jsx)(fd,{children:o},e))},f=0;f<B.OCTAVE_NUM;f++)p(f);var g=[];return a.structs.forEach((function(e,n){var t=+E[e]%12;g.push(Object(Ht.jsxs)(xd,{children:[e," [",y[t],"]"]},n))})),Object(Ht.jsxs)(rd,{children:[Object(Ht.jsxs)(sd,{children:[Object(Ht.jsxs)(ld,{children:[Object(Ht.jsx)(dd,{children:"Chord"}),Object(Ht.jsx)(bd,{children:d})]}),Object(Ht.jsxs)(ld,{children:[Object(Ht.jsx)(dd,{children:"Type"}),Object(Ht.jsx)(bd,{children:a.attr})]})]}),Object(Ht.jsxs)(ud,{children:[Object(Ht.jsx)(hd,{children:g}),Object(Ht.jsx)(pd,{children:b})]})]})},rd=d.b.div(tr||(tr=Object(s.a)(["\n    display: inline-block;\n    width: 600px;\n"]))),sd=d.b.div(ir||(ir=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    background-color: #338f8f;\n"]))),ld=d.b.div(or||(or=Object(s.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    /* background-color: #89dada; */\n"]))),dd=d.b.div(cr||(cr=Object(s.a)(["\n    display: inline-block;\n    margin-top: 4px;\n    margin-left: 5px;\n    height: calc(100% - 8px);\n    width: 80px;\n    background-color: #69bcdd;\n    font-size: 18px;\n    line-height: 18px;\n    font-weight: 600;\n    color: #026c86;\n    border: 1px solid #303030;\n    border-radius: 2px;\n    box-sizing: border-box;\n    text-align: center;\n"]))),bd=d.b.div(ar||(ar=Object(s.a)(["\n    display: inline-block;\n    margin-top: 4px;\n    margin-left: 6px;\n    height: calc(100% - 8px);\n    /* background-color: #cccccc; */\n    font-size: 18px;\n    line-height: 18px;\n    font-weight: 600;\n    color: #ffffff;\n"]))),ud=d.b.div(rr||(rr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #c09e05;\n    border: solid 1px #888;\n    border-radius: 5px;\n    box-sizing: border-box;\n\n    & *{\n        vertical-align: top;\n        height: 100%;\n    }\n"])),142),hd=d.b.div(sr||(sr=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    /* width: 100px; */\n    background-color: #8fb5bc;\n"])),480),xd=d.b.div(lr||(lr=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: ","px;\n    margin-top: 1px;\n    /* width: 100px; */\n    /* background-color: #8fb5bc; */\n    background: linear-gradient(to bottom, #10828a, #76d5db, #10828a);\n    font-size: 16px;\n    font-weight: 600;\n    color: white;\n    padding-left: 5px;\n    box-sizing: border-box;\n"])),22),pd=d.b.div(dr||(dr=Object(s.a)(["\n    display: inline-block;\n    background-color: #a7acd8;\n"]))),fd=d.b.div(br||(br=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    /* margin-left: 1px; */\n    background-color: #a7d8c4;\n    padding-bottom: 2px;\n    box-sizing: border-box;\n"])),60),gd=d.b.div(ur||(ur=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 1px);\n    height: ","px;\n    margin: 1px 0 0 1px;\n    background-color: #409ca3;\n    color: #01004e;\n    ","\n    ","\n    ","\n    /* border: 1px solid #ffffff; */\n    box-sizing: border-box;\n\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n\n    &:hover {\n        background-color: #117dbb;\n        ","\n        ","\n    }\n"])),22,(function(e){return e.isSelected?Object(d.a)(hr||(hr=Object(s.a)(["\n        background-color: #e5e747;\n    "]))):""}),(function(e){return e.isOver?Object(d.a)(xr||(xr=Object(s.a)(["\n        background-color: #c40000;\n        color: #ffffff;\n    "]))):""}),(function(e){return e.isEnable?"":Object(d.a)(pr||(pr=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))}),(function(e){return e.isSelected?Object(d.a)(fr||(fr=Object(s.a)(["\n            background-color: #b9bb3f;\n        "]))):""}),(function(e){return e.isOver?Object(d.a)(gr||(gr=Object(s.a)(["\n            background-color: #bb3f3f;\n        "]))):""})),jd=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.backingState;return Object(Ht.jsxs)(vd,{children:[Object(Ht.jsx)(kd,{isUse:i.isPreview}),Object(Ht.jsx)(ad,{}),Object(Ht.jsx)(Yl,{}),Object(Ht.jsxs)(md,{children:[Object(Ht.jsx)(Od,{isEnable:!i.hasError,onClick:function(){i.isPreview?B.stopPreview(n,i,t,n.reserveTasks):t.backing.testBacking()},children:i.isPreview?"Stop":"Test"}),Object(Ht.jsx)(Od,{isEnable:!i.isPreview,onClick:function(){t.backing.closeBackingEditor()},children:"Cancel"}),Object(Ht.jsx)(Od,{isEnable:!i.isPreview,onClick:function(){t.backing.mappingEditorToScore(),t.backing.closeBackingEditor()},children:"Update"})]})]})},vd=d.b.div(jr||(jr=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 600px;\n"]))),md=d.b.div(vr||(vr=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    width: 100%;\n    /* background-color: #bd4646; */\n    text-align: right;\n"]))),Od=d.b.div(mr||(mr=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    height: 26px;\n    margin: 2px 2px 0 0;\n    font-size: 20px;\n    color: white;\n    font-weight: 600;\n    background-color: #0051ff21;\n    border: solid 1px #555;\n    border-radius: 4px;\n    box-sizing: border-box;\n    line-height: 20px;\n    text-align: center;\n\n    ","\n\n    &:hover {\n        background-color: #ff008039;\n    }\n"])),(function(e){return e.isEnable?"":Object(d.a)(Or||(Or=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))})),kd=d.b.div(kr||(kr=Object(s.a)(["\n    position: absolute;\n    display: ",";\n    z-index: 80;\n    width: 100%;\n    height: calc(100% - 30px);\n    background-color: #7a270028;\n"])),(function(e){return e.isUse?"block":"none"})),yd=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.scoreState,c="backing"===i.hideMenu,a=n.scoreData.chordList[n.scoreState.focusIndex],r="chord"===a.type&&null!=a.detail.root;return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(Sd,{isOpen:c,onClick:function(){t.backing.closeBackingEditor()}}),Object(Ht.jsxs)(wd,{children:[Object(Ht.jsx)(Id,{isOpen:c,children:null==n.backingState?Object(Ht.jsx)(Ht.Fragment,{}):Object(Ht.jsx)(jd,{})}),Object(Ht.jsx)(Cd,{isEnable:r,onClick:function(){"none"===i.hideMenu?t.backing.openBackingEditor():"backing"===i.hideMenu&&t.backing.closeBackingEditor()},children:Object(Ht.jsx)("div",{children:"Backing"})})]})]})},Sd=d.b.div(yr||(yr=Object(s.a)(["\n    display: ",";\n    position: absolute;\n    z-index: 10;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #01004216;\n    backdrop-filter: blur(6px);\n"])),(function(e){return e.isOpen?"inline-block":"none"})),wd=d.b.div(Sr||(Sr=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    left: 0;\n    top: 0;\n    /* width: 525px; */\n\n    & * {\n        vertical-align: top;\n    }\n"]))),Id=d.b.div(wr||(wr=Object(s.a)(["\n    display: inline-block;\n    width: ",";\n    /* height: 400px; */\n    background-color: #a3a3a3;\n    opacity: 0.9;\n    transition: width 0.1s;\n    overflow: hidden;\n"])),(function(e){return e.isOpen?"600px":0})),Cd=d.b.div(Ir||(Ir=Object(s.a)(["\n    display: inline-block;\n    width: 25px;\n    height: 150px;\n    background-color: #e4e4e4;\n    border-top: 1px solid #5a5a5a;\n    border-right: 1px solid #5a5a5a;\n    border-bottom: 1px solid #5a5a5a;\n    border-radius: 0 10px 10px 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: #5a5a5a;\n    text-align: center;\n    line-height: 16px;\n    box-sizing: border-box;\n    ","\n    \n    & div {\n        width: 150px;\n        transform-origin: top left;\n        transform: rotate(-90deg) translateX(-100%);\n        /* background-color: #fff; */\n    }\n\n    &:hover {\n        background-color: #d1e5eb;\n    }\n"])),(function(e){return e.isEnable?"":Object(d.a)(Cr||(Cr=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))})),Ed=function(){var e=Object(o.useContext)(xp),n=e.store,t=(e.dispatcher,n.scoreState);return Object(Ht.jsxs)(Ld,{children:[Object(Ht.jsx)(Dd,{children:"clipboard"}),Object(Ht.jsxs)(Td,{children:[Object(Ht.jsx)(zd,{isActive:null!=t.cloneBacking,children:"Backing"}),Object(Ht.jsx)(zd,{isActive:null!=t.copiedElementList,children:"Elements"})]})]})},Ld=d.b.div(Er||(Er=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    margin-left: 20px;\n    /* background-color: red; */\n    & *{\n        vertical-align: top;\n    }\n"]))),Dd=d.b.div(Lr||(Lr=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    font-size: 18px;\n    font-weight: 600;\n    color: #979797;\n    margin-left: 4px;\n    font-style: italic;\n    line-height: 38px;\n    /* background-color: yellow; */\n"]))),Td=d.b.div(Dr||(Dr=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    margin-left: 10px;\n    /* background-color: yellow; */\n"]))),zd=d.b.div(Tr||(Tr=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    width: 120px;\n    height: calc(100% - 8px);\n    /* background-color: #e0ff6f55; */\n    ","\n    margin: 4px 0 0 4px;\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #8f8f8f;\n    border-radius: 2px;\n    border: 1px solid #969696;\n    box-sizing: border-box;\n    text-align: center;\n"])),(function(e){return e.isActive?Object(d.a)(zr||(zr=Object(s.a)(["\n        background-color: #a8dbb3;\n    "]))):""})),Ad=12,Md=function(){var e=Object(o.useContext)(xp),n=e.store,t=(e.dispatcher,n.scoreState),i=n.scoreData.chordList,c=t.focusIndex,a=t.elementCacheList,r=Object(o.useMemo)((function(){var e=[];return e.push(Object(Ht.jsx)(Ud,{},e.length)),t.measureCacheList.forEach((function(n){var t={width:1,height:10,color:"#555"};switch(!0){case 4===n.rate:t={width:2,height:22,color:"#747474"};break;case 8===n.rate:t={width:1,height:18,color:"#646464"};break;case 16===n.rate:t={width:1,height:10,color:"#7a7a7a"}}e.push(Object(Ht.jsx)(Wd,{width:t.width,height:t.height,color:t.color,children:-1!==n.barCount?Object(Ht.jsx)(qd,{children:n.barCount}):""},e.length))})),e.push(Object(Ht.jsx)(Ud,{},e.length)),e}),[t.beatCacheList]),s=Object(o.useMemo)((function(){var e=[],n=[],o="chord"===i[c].type,r=a[c].chordIndex;return i.forEach((function(i,c){var a=t.elementCacheList[c];if("chord"===i.type&&Math.abs(a.chordIndex-r)<=5){var s=i.detail,l=(s.beatLen,s.minute.head,s.minute.tail,""),d="ather";o?a.chordIndex===r?(l="cur",d="cur"):a.chordIndex===r-1?(l="prev",d="prev"):a.chordIndex===r+1&&(l="next",d="next"):a.chordIndex===r?(l="prev",d="prev"):a.chordIndex===r+1&&(l="next",d="next");var b=g.getBeatProps(a.beatSignature),u=s.minute.head+s.minute.tail,h=s.beatLen*b.beatMemoriCount,x=16+a.curTotalMemori;e.push(Object(Ht.jsx)(Kd,{type:d,pos:x,sustain:h+u,children:l},e.length)),n.push(Object(Ht.jsx)(Bd,{isActive:"cur"===d,pos:x+s.minute.head,sustain:h},e.length))}})),[e,n]}),[i,i.length,c]),d=Object(l.a)(s,2),b=d[0],u=d[1],h=a[c].curTotalMemori*Ad;return Object(Ht.jsx)(Fd,{children:Object(Ht.jsxs)(Rd,{pos:h,children:[Object(Ht.jsxs)(Nd,{children:[Object(Ht.jsx)(Pd,{children:b}),Object(Ht.jsx)(_d,{children:u})]}),Object(Ht.jsx)(Hd,{children:r})]})})},Fd=d.b.div(Ar||(Ar=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    width: 100%;\n    text-align: left;\n    white-space: nowrap;  \n"]))),Rd=d.b.div(Mr||(Mr=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    position: absolute;\n    height: 100%;\n    /* width: 100px;\n    background-color: #000; */\n    transition: left 0.5s;\n"])),(function(e){return-e.pos})),Nd=d.b.div(Fr||(Fr=Object(s.a)(["\n    display: block;\n    /* position: relative; */\n    height: 40px;\n    /* width: 2200px; */\n    background-color: rgb(131, 131, 131);\n"]))),Pd=d.b.div(Rr||(Rr=Object(s.a)(["\n    display: block;\n    position: relative;\n    height: 30px;\n"]))),_d=d.b.div(Nr||(Nr=Object(s.a)(["\n    display: block;\n    position: relative;\n    height: 10px;\n"]))),Kd=d.b.div(Pr||(Pr=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    width: ","px;\n    height: 100%;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: white;\n    text-align: center;\n    background-color: rgb(136, 163, 133);\n    ","\n    border-left: solid 1px #000;\n    border-top: solid 1px #000;\n    border-bottom: solid 1px #000;\n    box-sizing: border-box;\n"])),(function(e){return e.pos*Ad}),(function(e){return e.sustain*Ad}),(function(e){switch(e.type){case"cur":return Object(d.a)(_r||(_r=Object(s.a)(["\n                background-color: rgb(218, 107, 134);\n                /* color: #ffe551; */\n            "])));case"prev":return Object(d.a)(Kr||(Kr=Object(s.a)(["\n                background-color: rgb(163, 177, 221);\n            "])));case"next":return Object(d.a)(Br||(Br=Object(s.a)(["\n                background-color: rgb(163, 221, 171);\n            "])));case"ather":return Object(d.a)(Hr||(Hr=Object(s.a)(["\n                background-color: rgb(192, 192, 192);\n            "])))}})),Bd=d.b.div(Ur||(Ur=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    width: ","px;\n    height: 100%;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: white;\n    text-align: center;\n    background-color: rgb(224, 224, 224);\n    border-left: solid 1px #000;\n    ","\n"])),(function(e){return e.pos*Ad}),(function(e){return e.sustain*Ad}),(function(e){return e.isActive?Object(d.a)(Wr||(Wr=Object(s.a)(["\n        /* background-color: rgb(233, 180, 228); */\n        /* color: #ffe551; */\n    "]))):""})),Hd=d.b.div(qr||(qr=Object(s.a)(["\n    display: block;\n    position: relative;\n    height: 38px;\n    background-color: rgb(48, 48, 48);\n    border-top: solid 2px rgb(128, 128, 128);\n    background: linear-gradient(to bottom, rgb(255, 255, 255), rgb(98, 97, 114));\n"]))),Ud=d.b.div(Vr||(Vr=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #d9ebe7;\n    box-sizing: border-box;\n"])),192),Wd=d.b.div(Jr||(Jr=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: ","px;\n    border-left: solid ","px ",";\n    box-sizing: border-box;\n"])),Ad,(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.color})),qd=d.b.div(Xr||(Xr=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    left: -5px;\n    top: 18px;\n    font-size: 16px;\n    font-weight: 600;\n    color: #dd0000;\n"]))),Vd=function(e){var n=Object(o.useContext)(xp),t=n.store,i=n.dispatcher,c=Object(o.useRef)({}),a=Object(o.useState)({}),r=Object(l.a)(a,2),s=(r[0],r[1],t.scoreData.chordList,t.scoreState),d=(t.scoreData.chordList[0].detail,t.scoreState.isTune);Object(o.useEffect)((function(){i.system.setInvalidate(Object(h.a)(Object(h.a)({},t.invalidate),{},{harmonize:function(){i.system.setInvalidate(Object(h.a)(Object(h.a)({},t.invalidate),{},{harmoniizeInvalidate:{}}))}}))}),[]),Object(o.useEffect)((function(){d||c.current.focus()}),[d]);var b=0===s.elementCacheList.length?Object(Ht.jsx)(Ht.Fragment,{}):Object(Ht.jsx)(Md,{}),u=0===s.elementCacheList.length?Object(Ht.jsx)(Ht.Fragment,{}):Object(Ht.jsx)(Gs,{});return Object(Ht.jsxs)(Jd,{tabIndex:999,ref:c,isActive:e.isActive,onKeyDown:function(e){return Fo(e,t,i,!0)},onKeyUp:function(e){return Fo(e,t,i,!1)},children:[Object(Ht.jsxs)(Xd,{children:[Object(Ht.jsxs)(Gd,{isEnable:!s.isPreview,children:[Object(Ht.jsx)(nl,{}),Object(Ht.jsx)(Ed,{})]}),Object(Ht.jsxs)(Qd,{children:[Object(Ht.jsx)(yd,{}),Object(Ht.jsx)(Zd,{children:Object(Ht.jsx)(To,{})}),Object(Ht.jsx)(tb,{isUse:s.isPreview})]}),Object(Ht.jsxs)($d,{children:[Object(Ht.jsx)(eb,{children:b}),Object(Ht.jsx)(nb,{children:u})]})]}),Object(Ht.jsx)(Yd,{isEnable:!s.isPreview,children:Object(Ht.jsx)(Xs,{})})]})},Jd=d.b.div(Yr||(Yr=Object(s.a)(["\n    display: ",";\n    width: 100%;\n    height: 100%;\n    outline: none;\n"])),(function(e){return e.isActive?"inline-block":"none"})),Xd=d.b.div(Gr||(Gr=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    height: 100%;\n    background-color: #c7c7c7;\n    vertical-align: top;\n"])),220),Yd=d.b.div(Qr||(Qr=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #d6d6d6;\n    vertical-align: top;\n    ","\n"])),220,(function(e){return e.isEnable?"":ui})),Gd=d.b.div(Zr||(Zr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #d4d4d4;\n    ","\n"])),35,(function(e){return e.isEnable?"":ui})),Qd=d.b.div($r||($r=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: calc(100% - ","px);\n    background-color: #e0e0e0;\n"])),115),Zd=d.b.div(es||(es=Object(s.a)(["\n    position: absolute;\n    margin-left: 25px;\n    width: calc(100% - 25px);\n    height: 100%;\n    vertical-align: top;\n"]))),$d=d.b.div(ns||(ns=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #cacaca;\n    & * {\n        vertical-align: top;\n    }\n"])),80),eb=d.b.div(ts||(ts=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    height: 100%;\n    /* background-color: #ddc2c2; */\n"])),380),nb=d.b.div(is||(is=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #757575;\n"])),380),tb=d.b.div(os||(os=Object(s.a)(["\n    position: absolute;\n    display: ",";\n    z-index: 80;\n    width: 100%;\n    height: 100%;\n    background-color: #7a270028;\n"])),(function(e){return e.isUse?"block":"none"})),ib=t(16),ob=t.n(ib),cb=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.scoreState,c=i.sectionCacheList;if(-1===i.focusIndex||i.focusIndex>i.elementCacheList.length)return Object(Ht.jsx)(Ht.Fragment,{});var a=i.elementCacheList[i.focusIndex].sectionNo,r=[];return c.forEach((function(e,n){var o=Math.floor(e.beatSum/4),c=e.beatSum%4,s=n===a;r.push(Object(Ht.jsxs)(sb,{isActive:s,onClick:function(){i.focusIndex=e.rangeIndexStart,i.distIndex=i.focusIndex,t.score.setScoreState(i)},children:[Object(Ht.jsx)(ab,{children:e.labelName}),Object(Ht.jsxs)(rb,{children:[o,0===c?"":" (".concat(c,")")]})]},n))})),Object(Ht.jsx)(Ht.Fragment,{children:r})},ab=d.b.div(cs||(cs=Object(s.a)([""]))),rb=d.b.div(as||(as=Object(s.a)([""]))),sb=d.b.div(rs||(rs=Object(s.a)(["\n    display: inline-block;\n    margin: 4px 4px 0 4px;\n    width: calc(100% - 8px);\n    height: 46px;\n    background-color: "," ;\n    border: 1px solid #929292;\n    /* border-radius: 20px 20px 20px 20px; */\n    border-radius: 2px;\n\n    text-align: center;\n\n    & "," {\n        display: inline-block;\n        width: 100%;\n        height: 25px;\n        font-size: 18px;\n        /* font-weight: 600; */\n        color: #4d4d4d;\n        /* background-color: #0000003a; */\n        line-height: 22px;\n    }\n    & "," {\n        display: inline-block;\n        width: 100%;\n        height: 21px;\n        font-size: 14px;\n        font-weight: 600;\n        color: #003eb3;\n        /* background-color: #adadad39; */\n        line-height: 20px;\n    }\n"])),(function(e){return e.isActive?Object(d.a)(ss||(ss=Object(s.a)(["\n        #97cce0dd;\n        box-shadow: 0 0 8px 0 #000b3a48;\n    "]))):Object(d.a)(ls||(ls=Object(s.a)(["\n        #c4c4c42b;\n    "])))}),ab,rb),lb=function e(){Object(p.a)(this,e)};lb.mouseDownEvent=function(e,n,t,i,o){if(0===e.button){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=c.measure.getBoundingClientRect(),r=e.clientX-a.left;n.melodyState.timelineMouse.lock=r,o()}}},lb.mouseMoveEvent=function(e,n,t,i,o){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=c.measure.getBoundingClientRect(),r=e.clientX-a.left,s=n.melodyState.timelineMouse;s.pos!==r&&(s.pos=r,o())}},lb.mouseUpEvent=function(e,n,t,i,o){if(0===e.button){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){for(var a=c.measure.getBoundingClientRect(),r=(e.clientX,a.left,n.melodyState),s=r.timelineMouse,d=s.lock+c.measure.scrollLeft,b=s.pos+c.measure.scrollLeft,u=n.scoreData.notesList,h=-1,x=-1,p=0;p<u.length;p++){var f=u[p],g=U(f.pos)*r.beatWidth,j=g+U(f.len)*r.beatWidth,v=d<b?[d,b]:[b,d],m=Object(l.a)(v,2),O=m[0],k=m[1];if(O<=g&&k>=j)-1===h&&(h=p);else if(-1!==h){x=p-1;break}}-1!==h&&-1===x&&(x=u.length-1),r.focusIndex=h,r.distIndex=x,s.lock=-1,t.tune.setState(r)}}};var db,bb,ub,hb,xb,pb,fb,gb,jb,vb,mb,Ob,kb,yb,Sb,wb,Ib,Cb,Eb,Lb,Db,Tb,zb,Ab,Mb,Fb,Rb,Nb,Pb,_b,Kb,Bb,Hb=lb,Ub=function(e){var n=Object(o.useContext)(xp),t=n.store,i=n.dispatcher,c=Object(o.useRef)(null),a=Object(o.useRef)(null),r=t.scoreState,s=e.update,l=t.scoreData.chordList,d=e.barLength,b=e.beatWidth,u=e.curChord,h=e.timelineLength,x=e.mouseMeasurePos,p=1/t.melodyState.quantize,f=t.scoreData.chordList[0].detail;Object(o.useEffect)((function(){t.refs.melody.measure=c.current,t.refs.melody.chord=a.current}),[]);var g=Object(o.useMemo)((function(){var e=[];return r.measureCacheList.forEach((function(n){var t={width:1,height:10,color:"#555"};switch(!0){case 4===n.rate:t={width:2,height:22,color:"#747474"};break;case 8===n.rate:t={width:1,height:18,color:"#646464"};break;case 16===n.rate:t={width:1,height:10,color:"#7a7a7a"}}e.push(Object(Ht.jsx)(Zb,{beatWidth:b,width:t.width,height:t.height,color:t.color,children:-1!==n.barCount?Object(Ht.jsx)($b,{children:n.barCount}):""},e.length))})),e}),[r.beatCacheList,d]),j=Object(o.useMemo)((function(){var e=[],n=0;return l.forEach((function(o,c){if("chord"===o.type){var s=o.detail,l=b*(s.beatLen+s.minute.head+s.minute.tail);if(null!=a.current){var d=a.current.scrollLeft;if(n+l-d>=0||n-d<=a.current.clientWidth){var h,x=null===(h=A(s.symbolKey))||void 0===h?void 0:h.name,p=null==s.root?"-":O(s.root)+x,g=null==s.root?"-":S(s.root,f.keyIndex)+x;e.push(Object(Ht.jsxs)(Yb,{left:n,width:l,isActive:o==u,onClick:function(){r.isTune=!1,r.focusIndex=c,i.score.setScoreState(r)},onContextMenu:function(){Z(t,i)},children:[Object(Ht.jsx)(Gb,{children:p}),Object(Ht.jsxs)(Qb,{children:[" (",g,")"]})]},e.length))}}n+=l}})),e}),[l,u]);return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(Jb,{ref:a,children:Object(Ht.jsx)(Xb,{width:h,children:j})}),Object(Ht.jsx)(Wb,{ref:c,children:Object(Ht.jsxs)(qb,{onMouseDown:function(e){return Hb.mouseDownEvent(e,t,i,h,s)},onMouseMove:function(e){return Hb.mouseMoveEvent(e,t,i,h,s)},onMouseUp:function(e){return Hb.mouseUpEvent(e,t,i,h,s)},onMouseLeave:function(){var e=t.melodyState.timelineMouse;e.pos=-1,e.lock=-1,s()},children:[g,Object(Ht.jsx)(Vb,{left:x*b*p,width:b*p})]})})]})},Wb=d.b.div(db||(db=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    background: linear-gradient(to bottom, #ffffff, #808080);\n    width: 100%;\n    height: 40px;\n    text-align: left;\n    border-top: solid 2px #000;\n    white-space: nowrap;\n    overflow: hidden;\n"]))),qb=d.b.div(bb||(bb=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    /* width: 100%; */\n    left: 0;\n    top: 0;\n    width: 10000px;\n    height: 100%;\n    &:hover {\n        background-color: #ff00b347;\n    }\n"]))),Vb=d.b.div(ub||(ub=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    left: ","px;\n    top: 0px;\n    width: ","px;\n    height: 100%;\n    background-color: #ffff006c;\n"])),(function(e){return e.left}),(function(e){return e.width})),Jb=d.b.div(hb||(hb=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #c0c0c0;\n    width: 100%;\n    height: calc(100% - 40px);\n    text-align: left;\n    white-space: nowrap;\n    overflow: hidden;\n"]))),Xb=d.b.div(xb||(xb=Object(s.a)(["\n    width: ","px;\n    height: 100%;\n    overflow: hidden;\n"])),(function(e){return e.width})),Yb=d.b.div(pb||(pb=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    width: ","px;\n    height: calc(100% - 2px);\n    box-sizing: border-box;\n    border: 1px solid #646464;\n    border-left: 4px solid #940000;\n    background-color: #ffffff22;\n    ","\n    margin: 1px 0 0 1px;\n    \n    font-size: 18px;\n    font-weight: 600;\n    text-align: center;\n\n    &:hover {\n        background-color: #fffb0037;\n    }\n"])),(function(e){return e.left}),(function(e){return e.width-1}),(function(e){return e.isActive?Object(d.a)(fb||(fb=Object(s.a)(["background-color: #ffce2c9b;"]))):""})),Gb=d.b.span(gb||(gb=Object(s.a)(["\n    color: #d80000;\n"]))),Qb=d.b.span(jb||(jb=Object(s.a)(["\n    color: #0000007d;\n"]))),Zb=(d.b.div(vb||(vb=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    pointer-events: none;\n    /* background-color: #ffffffbe; */\n    width: ","px;\n    vertical-align: bottom;\n    margin-top: 25px;\n    height: ",";\n    box-sizing: border-box;\n    border-left: solid "," #000;\n"])),(function(e){return e.beatWidth/4}),(function(e){return e.isHead?"15px":"10px"}),(function(e){return e.isHead?"2px":"1px"})),d.b.div(mb||(mb=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: ","px;\n    border-left: solid ","px ",";\n    box-sizing: border-box;\n    vertical-align: top;\n"])),(function(e){return e.beatWidth/4}),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.color}))),$b=d.b.div(Ob||(Ob=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    left: -5px;\n    top: 18px;\n    font-size: 16px;\n    font-weight: 600;\n    color: #dd0000;\n"]))),eu=function(e){var n=Object(o.useContext)(xp),t=n.store,i=(n.dispatcher,t.scoreData.chordList[0].detail),c=Object(o.useMemo)((function(){var n=[];if(null!=e.curChord){var o=e.curChord.detail,c=A(o.symbolKey),a=o.root;null!=a&&null!=c&&c.structs.forEach((function(e){n.push((a.index+i.keyIndex+E[e])%12)}))}for(var r=[],s=function(i){var o=(59-i+9)%12,c=Math.floor((59-i+9)/12)+1,a=y[o%12];nu(c);r.push(Object(Ht.jsx)(cu,{isScale:[0,2,4,5,7,9,11].includes(o),isStruct:n.includes(o),isActive:i===e.mousePitchIndex,onClick:function(){var e=t.instruments.soundfontPlayer;null!=e&&(e.stop(),e.play(a+c,0,{duration:1}))},children:a},i))},l=0;l<60;l++)s(l);return r}),[e.mousePitchIndex,e.curChord]);return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsxs)(tu,{children:[Object(Ht.jsx)(ou,{isActive:!1,children:Object(Ht.jsx)("div",{children:"hihi"})}),Object(Ht.jsx)(ou,{isActive:!1,children:Object(Ht.jsx)("div",{children:"hi"})}),Object(Ht.jsx)(ou,{isActive:!1,children:Object(Ht.jsx)("div",{children:"mid2"})}),Object(Ht.jsx)(ou,{isActive:!1,children:Object(Ht.jsx)("div",{children:"mid1"})}),Object(Ht.jsx)(ou,{isActive:!1,children:Object(Ht.jsx)("div",{children:"low"})})]}),Object(Ht.jsx)(iu,{children:c})]})},nu=function(e){switch(e){case 0:return"low";case 1:return"mid1";case 2:return"mid2";case 3:return"hi";case 4:return"hihi";default:return""}},tu=d.b.div(kb||(kb=Object(s.a)(["\n    display: inline-block;\n    width: 30px;\n    height: 100%;\n    vertical-align: top;\n"]))),iu=d.b.div(yb||(yb=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 30px);\n    height: 100%;\n    vertical-align: top;\n"]))),ou=d.b.div(Sb||(Sb=Object(s.a)(["\n    display: inline-block;\n    border: 1px solid black;\n    width: 100%;\n    height: 360px;\n    background-color: #8f8f8f;\n    ","\n    box-sizing: border-box;\n\n    font-size: 18px;\n    color: #dfdfdf;\n    font-weight: 600;\n    & div {\n        width: 360px;\n        transform-origin: top left;\n        transform: rotate(-90deg) translateX(-50%);\n        /* background-color: #fff; */\n    }\n"])),(function(e){return e.isActive?Object(d.a)(wb||(wb=Object(s.a)(["background-color: #ffc40089;"]))):""})),cu=d.b.div(Ib||(Ib=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 20px);\n    border: 1px solid black;\n    ","\n    height: ","px;\n    background-color: #adadad;\n    ","\n    ","\n    box-sizing: border-box;\n\n    padding-left: 5px;\n    line-height: 28px;\n    font-size: 18px;\n    color: #3b3b3b;\n    font-weight: 600;\n"])),(function(e){return e.isScale?Object(d.a)(Cb||(Cb=Object(s.a)(["\n        width: 100%;\n    "]))):""}),ee,(function(e){return e.isStruct?Object(d.a)(Eb||(Eb=Object(s.a)(["background-color: #e75a5a;"]))):""}),(function(e){return e.isActive?Object(d.a)(Lb||(Lb=Object(s.a)(["background-color: #9e9e6c;"]))):""})),au=function(e){var n=Object(o.useContext)(xp),t=n.store,i=n.dispatcher,c=t.melodyState;return Object(Ht.jsxs)(ru,{isActive:e.soundfontInfo.name===c.soundfontInfo.name,onClick:function(){c.soundfontInfo=e.soundfontInfo,c.isPreview=!0,i.tune.setState(c);var n=e.soundfontInfo;ob.a.instrument(new AudioContext,n.name,{gain:n.gain,release:.5}).then((function(e){i.tune.setInstrument(e)})).then((function(){c.isPreview=!1,i.tune.setState(c)}))},children:[Object(Ht.jsx)(su,{children:e.icon}),Object(Ht.jsx)(lu,{children:e.labelName})]})},ru=d.b.div(Db||(Db=Object(s.a)(["\n    display: inline-block;\n    width: 85px;\n    height: 40px;\n    text-align: center;\n    border: 1px solid #4b4b4b;\n    background-color: #cacacada;\n    ","\n    border-radius: 6px;\n    margin-left: 4px;\n    box-sizing: border-box;\n\n    &:hover {\n        background-color: #e4e4e4da;\n        ","\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Tb||(Tb=Object(s.a)(["\n        background-color: #f7f7f7da;\n    "]))):""}),(function(e){return e.isActive?Object(d.a)(zb||(zb=Object(s.a)(["\n            background-color: #f7f7f7da;\n        "]))):""})),su=d.b.div(Ab||(Ab=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    /* background-color: #ff0000da; */\n    font-size: 20px;\n    color: #4b4b4b;\n    text-align: center;\n    /* padding-top: 5px; */\n    box-sizing: border-box;\n"]))),lu=d.b.div(Mb||(Mb=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 10px;\n    /* background-color: #0400ffdc; */\n    font-size: 16px;\n    font-weight: 600;\n    line-height: 0;\n    color: #3b3b3b;\n    text-align: center;\n"]))),du=function(e){return Object(Ht.jsx)(bu,{isActive:e.isActive,isDisable:e.isDisable,onClick:e.callback,children:e.labelName})},bu=d.b.div(Fb||(Fb=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    height: 28px;\n    background: linear-gradient(to bottom, #e0e0e0, #aaaaaa, #e0e0e0);\n    ","\n    ","\n    color: #5d6e63;\n    border-radius: 2px;\n    border: solid 1px #747373;\n    font-size: 20px;\n    font-weight: 600;\n    text-align: center;\n\n    margin-left: 4px;\n"])),(function(e){return e.isActive?Object(d.a)(Rb||(Rb=Object(s.a)(["\n        background: linear-gradient(to bottom, #b7d9df, #59c6da, #b7d9df);\n    "]))):""}),(function(e){return e.isDisable?ui:""})),uu=function(e){return Object(Ht.jsx)(hu,{isDisable:e.isDisable,onClick:e.callback,children:e.labelName})},hu=d.b.div(Nb||(Nb=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    height: 28px;\n    background: linear-gradient(to bottom, #a8bae0, #818ada, #a8bae0);\n    ","\n    color: #5d5d6e;\n    border-radius: 2px;\n    border: solid 1px #737374;\n    font-size: 20px;\n    font-weight: 600;\n    text-align: center;\n\n    margin-left: 4px;\n    &:hover {\n        background: linear-gradient(to bottom, #c2d0f0, #929beb, #c2d0f0);\n    }\n"])),(function(e){return e.isDisable?ui:""})),xu=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.melodyState;return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsxs)(pu,{children:[Object(Ht.jsxs)(fu,{children:[Object(Ht.jsx)(du,{labelName:"16",isDisable:!1,isActive:4===i.quantize,callback:function(){i.quantize=4,t.tune.setState(i)}}),Object(Ht.jsx)(du,{labelName:"8",isDisable:!1,isActive:[2,6].includes(i.quantize),callback:function(){i.quantize=2,t.tune.setState(i)}}),Object(Ht.jsx)(du,{labelName:"4",isDisable:!1,isActive:[1,3].includes(i.quantize),callback:function(){i.quantize=1,t.tune.setState(i)}}),Object(Ht.jsx)(du,{labelName:"/3",isDisable:4===i.quantize,isActive:[3,6].includes(i.quantize),callback:function(){[3,6].includes(i.quantize)?i.quantize/=3:i.quantize*=3,t.tune.setState(i)}})]}),Object(Ht.jsxs)(gu,{children:[Object(Ht.jsx)(uu,{labelName:"Up",isDisable:!1,callback:function(){var e=n.scoreData.notesList;e.forEach((function(e){e.pitchIndex--})),t.tune.setNotesList(e.slice())}}),Object(Ht.jsx)(uu,{labelName:"Down",isDisable:!1,callback:function(){var e=n.scoreData.notesList;e.forEach((function(e){e.pitchIndex++})),t.tune.setNotesList(e.slice())}})]})]}),Object(Ht.jsxs)(ju,{children:[Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.h,{}),labelName:"violin",soundfontInfo:{name:"violin",gain:9}}),Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.b,{}),labelName:"e-guitar",soundfontInfo:{name:"distortion_guitar",gain:3}}),Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.e,{}),labelName:"saxphone",soundfontInfo:{name:"tenor_sax",gain:3}}),Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.g,{}),labelName:"viola",soundfontInfo:{name:"viola",gain:5}}),Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.f,{}),labelName:"trumpet",soundfontInfo:{name:"trumpet",gain:5}}),Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.a,{}),labelName:"clarinet",soundfontInfo:{name:"clarinet",gain:4}}),Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.a,{}),labelName:"oboe",soundfontInfo:{name:"oboe",gain:5}}),Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.a,{}),labelName:"flute",soundfontInfo:{name:"flute",gain:5}}),Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.d,{}),labelName:"ocarina",soundfontInfo:{name:"ocarina",gain:4}}),Object(Ht.jsx)(au,{icon:Object(Ht.jsx)(ii.b,{}),labelName:"shamisen",soundfontInfo:{name:"shamisen",gain:9}})]})]})},pu=d.b.div(Pb||(Pb=Object(s.a)(["\n    display: block;\n    padding: 4px 4px 4px 0;\n    background-color: #bbbbbb;\n"]))),fu=d.b.div(_b||(_b=Object(s.a)(["\n    display: inline-block;\n    /* margin-left: 20px; */\n"]))),gu=d.b.div(Kb||(Kb=Object(s.a)(["\n    display: inline-block;\n    margin-left: 20px;\n"]))),ju=d.b.div(Bb||(Bb=Object(s.a)(["\n    display: inline-block;\n    /* padding: 4px 4px 4px 0; */\n    background-color: #e4e4e486;\n"]))),vu=function e(){Object(p.a)(this,e)};vu.mouseDownEvent=function(e,n,t,i,o){if(0===e.button){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=n.melodyState,r=n.melodyState.tableMouse,s=r.notesState,l=n.scoreData.notesList,d=1/a.quantize,b=function(){var e=l.find((function(e){return x<U(e.pos)*a.beatWidth})),n=i;return void 0!=e&&(n=U(e.pos)*a.beatWidth),n},u=c.table.getBoundingClientRect(),x=e.clientX+c.table.scrollLeft-u.left,p=e.clientY+c.table.scrollTop-u.top;if(-1===s.index)r.isPut=!0,r.lock={x:Math.floor(x/a.beatWidth/d)*a.beatWidth*d,y:Math.floor(p/ee)*ee},r.nextLeft=b(),r.width=0;else if("normal"===s.side){var f=n.refs.melody;if(null!=f.table&&null!=f.measure&&null!=f.chord&&null!=f.pitch){a.dataHistory.add(JSON.stringify(n.scoreData.notesList));var g=f.table.getBoundingClientRect(),j=e.clientY+f.table.scrollTop-g.top,v=Math.floor(j/ee);l[s.index].pitchIndex=v,n.scoreData.notesList=l.slice(),X(v,n)}}else{var m=l[s.index];if(r.lock={x:U(m.pos)*a.beatWidth,y:0},r.nextLeft=b(),"left"===s.side){if(s.isMove=!0,r.prevRight=0,s.index>0){var O=l[s.index-1];r.prevRight=(U(O.pos)+U(O.len))*a.beatWidth}}else"right"===s.side&&(s.isResize=!0);r.notesState=Object(h.a)({},s)}o()}}},vu.mouseMoveEvent=function(e,n,t,i,o){if(0===e.button){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=n.melodyState,r=n.melodyState.tableMouse,s=r.notesState,l=n.scoreData.notesList,d=n.scoreData.chordList,b=1/a.quantize,u=c.table.getBoundingClientRect(),x=e.clientX+c.table.scrollLeft-u.left,p=e.clientY+c.table.scrollTop-u.top;if(r.isPut||s.isResize||s.isMove){if(r.isPut){var f=(Math.floor(x/a.beatWidth/b)+1)*a.beatWidth*b;r.width=(f>r.nextLeft?r.nextLeft:f)-r.lock.x}else if(s.isResize){var g=(Math.floor(x/a.beatWidth/b)+1)*a.beatWidth*b,j=l[s.index],v=g-r.lock.x;g>r.nextLeft&&(v=r.nextLeft-r.lock.x),g<=r.lock.x&&(v=a.beatWidth/a.quantize);var m=V(a.quantize,Math.floor(v/a.beatWidth*a.quantize));U(j.len)!==U(m)&&(a.dataHistory.add(JSON.stringify(n.scoreData.notesList)),j.len=m,n.scoreData.notesList=l.slice())}else if(s.isMove){var O=(Math.floor(x/a.beatWidth/b)+0)*a.beatWidth*b,k=l[s.index],y=U(k.len)*a.beatWidth,S=O;O+y>r.nextLeft&&(S=r.nextLeft-y),O<r.prevRight&&(S=r.prevRight);var w=V(a.quantize,Math.floor(S/a.beatWidth*a.quantize));U(k.pos)!==U(w)&&(a.dataHistory.add(JSON.stringify(n.scoreData.notesList)),k.pos=w,n.scoreData.notesList=l.slice())}}else{r.mousePitchIndex=Math.floor(p/ee),r.mouseMeasurePos=Math.floor(x/a.beatWidth/b);var I=0,C=d.find((function(e){if("chord"===e.type){var n=e.detail.beatLen*a.beatWidth;if(x>=I&&x<I+n)return e;I+=n}}));r.curChord=void 0==C?null:C,s.index=-1;var E=a.focusIndex;a.focusIndex=-1,s.side="normal";for(var L=0;L<l.length;L++){var D=l[L],T=U(D.pos)*a.beatWidth,z=T+U(D.len)*a.beatWidth;if(x>=T&&x<=z){s.index=L,a.focusIndex=L,x<T+10?s.side="left":x>z-10&&(s.side="right");break}}a.distIndex=a.focusIndex,-1!==E&&E!==a.focusIndex&&(a.lastFocus=E),r.notesState=Object(h.a)({},s)}o()}}},vu.mouseUpEvent=function(e,n,t,i,o){if(0===e.button){var c=n.melodyState,a=n.melodyState.tableMouse,r=a.notesState,s=n.scoreData.notesList,l=c.quantize;if(a.isPut){if(a.isPut=!1,a.width>0){c.dataHistory.add(JSON.stringify(n.scoreData.notesList));var d=Math.floor(a.lock.y/ee);s.push({pos:V(l,Math.floor(a.lock.x/c.beatWidth*l)),pitchIndex:d,len:V(l,Math.floor(a.width/c.beatWidth*l))}),s.sort((function(e,n){var t=U(e.pos),i=U(n.pos);return t===i?0:t<i?-1:1})),t.tune.setNotesList(s),X(d,n)}}else r.isMove=!1,r.isResize=!1,a.notesState=Object(h.a)({},r),t.tune.setNotesList(s.slice());o()}};var mu=vu,Ou=function e(){Object(p.a)(this,e)};Ou.keyDownEvent=function(e,n,t){n.userEnv.keyConfig.note;var i=n.melodyState.keySwitch,o=n.melodyState,c=o.focusIndex===o.distIndex,a=o.tableMouse;if(o.isPreview)switch(e.key){case" ":G(n,t,n.reserveTasks)}else if(-1!==a.notesState.index&&(a.notesState.index=-1,a.notesState.isResize=!1,a.notesState.side="normal"),a.mouseMeasurePos=-1,a.mousePitchIndex=-1,i.scaleMode||i.octave||i.resize||i.move||i.shift||i.control){if(i.control)switch(e.key){case"c":t.tune.copyNotes();break;case"v":t.tune.pasteNotes();break;case"a":t.tune.allSelect();break;case"s":t.score.saveFile();break;case"z":t.tune.undo();break;case"y":t.tune.redo()}else if(i.scaleMode||i.octave){var r=i.scaleMode?"scale":"octave";switch(e.key){case"ArrowUp":t.tune.incrementCurPitch(!0,r);break;case"ArrowDown":t.tune.incrementCurPitch(!1,r)}}else if(i.resize)switch(e.key){case"ArrowLeft":t.tune.resizeNotes(!1);break;case"ArrowRight":t.tune.resizeNotes(!0)}else if(i.move)switch(e.key){case"ArrowLeft":t.tune.moveNotes(!1);break;case"ArrowRight":t.tune.moveNotes(!0)}else if(i.shift)switch(e.key){case"ArrowLeft":t.tune.moveDistFocus(!1);break;case"ArrowRight":t.tune.moveDistFocus(!0)}}else switch(e.key){case"ArrowUp":t.tune.incrementCurPitch(!0,"normal");break;case"ArrowDown":t.tune.incrementCurPitch(!1,"normal");break;case"ArrowLeft":c?t.tune.moveFocus(!1):t.tune.releaseRange(!1);break;case"ArrowRight":c?t.tune.moveFocus(!0):t.tune.releaseRange(!0);break;case"a":t.tune.addNotes();break;case"q":alert(JSON.stringify(n.scoreData.notesList[o.focusIndex].len));break;case"w":t.tune.adjustScrollX();break;case"e":t.tune.adjustScrollY();break;case"z":Z(n,t);break;case"p":o.isSolo=!o.isSolo,t.tune.setState(o);break;case"Home":t.tune.firstNotes();break;case"1":o.quantize=4,t.tune.setState(o);break;case"2":o.quantize=2,t.tune.setState(o);break;case"3":o.quantize=1,t.tune.setState(o);break;case"/":[3,6].includes(o.quantize)?o.quantize/=3:o.quantize*=3,t.tune.setState(o);break;case"Delete":t.tune.removeNotes();break;case" ":t.tune.previewStart()}},Ou.keySwitchEvent=function(e,n,t,i){n.userEnv.keyConfig.note;var o=n.melodyState.keySwitch,c=n.melodyState;if(!c.isPreview&&("Control"===e.key&&(o.control=i,t.tune.setKeySwitch(o)),!o.control)){var a=c.focusIndex===c.distIndex;switch(e.key){case"x":o.octave=i,t.tune.setKeySwitch(o);break;case"c":a&&(o.scaleMode=i,t.tune.setKeySwitch(o));break;case"f":a&&(o.resize=i,t.tune.setKeySwitch(o));break;case"d":o.move=i,t.tune.setKeySwitch(o);break;case"Shift":o.shift=i,t.tune.setKeySwitch(o)}}i&&Ou.keyDownEvent(e,n,t)};var ku,yu,Su,wu,Iu,Cu,Eu,Lu,Du,Tu,zu,Au,Mu,Fu,Ru,Nu,Pu,_u,Ku,Bu,Hu,Uu,Wu,qu,Vu,Ju,Xu,Yu,Gu,Qu,Zu,$u,eh,nh,th,ih,oh,ch,ah,rh,sh,lh,dh,bh,uh,hh,xh,ph,fh,gh,jh,vh,mh,Oh,kh,yh,Sh,wh,Ih,Ch,Eh,Lh,Dh,Th,zh,Ah,Mh,Fh,Rh,Nh,Ph,_h,Kh,Bh,Hh,Uh,Wh,qh,Vh,Jh,Xh=Ou,Yh=function(e){var n=Object(o.useContext)(xp),t=n.store,i=n.dispatcher,c=t.melodyState,a=Object(o.useRef)(null),r=Object(o.useRef)(null),s=Object(o.useRef)(null),d=Object(o.useState)({}),b=Object(l.a)(d,2),u=(b[0],b[1]),x=Object(o.useState)({}),p=Object(l.a)(x,2),f=(p[0],p[1]),j=function(){return u({})},v=c.tableMouse,m=v.isPut,O=v.notesState,k=v.curChord,y=v.mouseMeasurePos,S=v.mousePitchIndex,w=v.width,I=v.lock,C=150,E=C*c.beatWidth*4,L=t.scoreData.notesList,D=(t.melodyState.quantize,t.scoreState.isTune);null==r.current||(r.current.scrollLeft,r.current.clientWidth);Object(o.useEffect)((function(){i.system.setRefs(Object(h.a)(Object(h.a)({},t.refs),{},{melody:Object(h.a)(Object(h.a)({},t.refs.melody),{},{table:r.current,pitch:s.current})})),i.system.setInvalidate(Object(h.a)(Object(h.a)({},t.invalidate),{},{melody:j}))}),[]),Object(o.useEffect)((function(){D&&null!=a.current&&a.current.focus()}),[D]);var T=Object(o.useMemo)((function(){for(var e=[],n=0;n<=2400;n++)e.push(Object(Ht.jsx)(bx,{isHead:n%4===0,beatWidth:c.beatWidth},n));return e}),[C]),z=t.scoreData.chordList[0].detail,A=Object(o.useMemo)((function(){for(var e=g.SCALE_INDEX.map((function(e){return(z.keyIndex+e)%12})),n=[],t=0;t<60;t++){var i=H(t);n.push(Object(Ht.jsx)(lx,{isScale:e.includes(i),isBase:i===e[0]},t))}return n}),[z.keyIndex]),M=Object(o.useMemo)((function(){for(var e=[],n=0;n<L.length;n++){var t=L[n];if(null!=r.current){var o=r.current.scrollLeft,a=U(t.pos)*c.beatWidth;if(a+U(t.len)*c.beatWidth-o<0||a-o>r.current.clientWidth)continue}var s=c.focusIndex<c.distIndex?[c.focusIndex,c.distIndex]:[c.distIndex,c.focusIndex],d=Object(l.a)(s,2),b=d[0],u=d[1],h=b<=n&&u>=n,x=g.SCALE_INDEX.map((function(e){return(z.keyIndex+e)%12})),p=H(t.pitchIndex),f=x.includes(p),j=J(t.pos),v=J(t.len);e.push(Object(Ht.jsx)(ux,{left:U(t.pos)*c.beatWidth,width:U(t.len)*c.beatWidth,side:O.side,isActive:h,isScale:c.keySwitch.scaleMode,isResize:c.keySwitch.resize,isMove:c.keySwitch.move,isOctave:c.keySwitch.octave,isPreview:c.isPreview,onContextMenu:function(){i.tune.removeNotes()},children:Object(Ht.jsx)(hx,{y:t.pitchIndex*ee,lenType:j>v?j:v,isScale:f})},n))}return e}),[L,L.length,c.focusIndex,c.distIndex,O,c.isPreview,c.keySwitch.scaleMode,c.keySwitch.octave,c.keySwitch.resize,c.keySwitch.move]);return Object(Ht.jsxs)(Gh,{tabIndex:999,ref:a,isActive:e.isActive,onKeyDown:function(e){return Xh.keySwitchEvent(e,t,i,!0)},onKeyUp:function(e){return Xh.keySwitchEvent(e,t,i,!1)},children:[Object(Ht.jsx)($h,{isEnable:!c.isPreview,children:Object(Ht.jsx)(xu,{})}),Object(Ht.jsxs)(ex,{children:[function(){var e=c.timelineMouse;if(-1===e.lock)return-1===e.pos?Object(Ht.jsx)(Ht.Fragment,{}):Object(Ht.jsx)(tx,{left:e.pos});var n=e.lock<e.pos?[e.lock,e.pos]:[e.pos,e.lock],t=Object(l.a)(n,2),i=t[0],o=t[1]-i;return Object(Ht.jsx)(ix,{left:i,width:o})}(),Object(Ht.jsx)(ox,{children:Object(Ht.jsx)(Ub,{barLength:C,beatWidth:c.beatWidth,curChord:k,timelineLength:E,mouseMeasurePos:y,update:function(){return f({})}})}),Object(Ht.jsx)(cx,{ref:s,children:Object(Ht.jsx)(eu,{mousePitchIndex:S,curChord:k})}),Object(Ht.jsxs)(ax,{ref:r,onScroll:function(){var e=t.refs.melody;if(null!=e.table&&null!=e.measure&&null!=e.chord&&null!=e.pitch){var n=e.table.scrollLeft,i=e.table.scrollTop;e.measure.scrollTo({left:n}),e.chord.scrollTo({left:n}),e.pitch.scrollTo({top:i})}j()},children:[Object(Ht.jsx)(rx,{width:E,children:T}),Object(Ht.jsx)(sx,{width:E,children:A}),Object(Ht.jsxs)(dx,{width:E,onMouseDown:function(e){return mu.mouseDownEvent(e,t,i,E,j)},onMouseMove:function(e){return mu.mouseMoveEvent(e,t,i,E,j)},onMouseUp:function(e){return mu.mouseUpEvent(e,t,i,E,j)},onMouseLeave:function(){console.log("leave!"),-1!==v.notesState.index&&(v.notesState.index=-1,v.notesState.isResize=!1,v.notesState.side="normal"),v.mouseMeasurePos=-1,v.mousePitchIndex=-1,j()},children:[m?Object(Ht.jsx)(Zh,{x:I.x,y:I.y,width:w,lenType:w%c.beatWidth===0?4:w%(c.beatWidth/2)===0?8:16}):Object(Ht.jsx)(Ht.Fragment,{}),M]}),Object(Ht.jsx)(xx,{isUse:c.isPreview,width:E})]})]})]})},Gh=d.b.div(ku||(ku=Object(s.a)(["\n    display: ",";\n    width: 100%;\n    height: 100%;\n    outline: none;\n"])),(function(e){return e.isActive?"inline-block":"none"})),Qh=Object(d.c)(yu||(yu=Object(s.a)(["\n  0%,100% {\n    opacity: 0.2;\n  }\n  50% {\n    opacity: 1;\n  }\n"]))),Zh=d.b.div(Su||(Su=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    top: ","px;\n    width: ","px;\n    height: ","px;\n    background: linear-gradient(to bottom, #dff85230, #fffb00, #dff85230);\n    border: 1px solid #fbffd9;\n    \n    animation: "," .8s linear infinite;\n"])),(function(e){return e.x}),(function(e){return e.y}),(function(e){return e.width}),(function(e){switch(e.lenType){case 4:return ee;case 8:return 24;case 16:return 18;default:return 16}}),Qh),$h=d.b.div(wu||(wu=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #b3b3b3;\n    ","\n"])),80,(function(e){return e.isEnable?"":ui})),ex=d.b.div(Iu||(Iu=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: calc(100% - ","px);\n    background-color: #464646;\n"])),80),nx=Object(d.a)(Cu||(Cu=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    pointer-events: none;\n    z-index: 99;\n    top: ","px;\n    height: calc(100% - 42px);\n    width: 3px;\n"])),32),tx=d.b.div(Eu||(Eu=Object(s.a)(["\n    ","\n    left: ","px;\n    background-color: #15ff00;\n"])),nx,(function(e){return $+e.left})),ix=(d.b.div(Lu||(Lu=Object(s.a)(["\n    ","\n    left: ","px;\n    background-color: #fbff00;\n"])),nx,(function(e){return $+e.left})),d.b.div(Du||(Du=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    pointer-events: none;\n    z-index: 99;\n    top: ","px;\n    height: calc(100% - 42px);\n    left: ","px;\n    width: ","px;\n    background-color: #ffffff8b;\n"])),32,(function(e){return $+e.left}),(function(e){return e.width}))),ox=d.b.div(Tu||(Tu=Object(s.a)(["\n    display: inline-block;\n    margin-left: ","px;\n    width: calc(100% - ","px - 10px);\n    height: ","px;\n    background-color: #534b81;\n    overflow-y: hidden;\n"])),$,$,70),cx=d.b.div(zu||(zu=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - ","px - 10px);\n    background-color: #464545;\n    vertical-align: top;\n    overflow-y: hidden;\n"])),$,70),ax=d.b.div(Au||(Au=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: #bdbdbd;\n    vertical-align: top;\n    overflow: scroll;\n    &::-webkit-scrollbar {\n        width: 10px;\n        height: 10px;\n    }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: #1959A8;\n    }\n    &::-webkit-scrollbar-track {\n        border-radius: 5px;\n        box-shadow: 0 0 4px #aaa inset;\n    }\n"])),$,70),rx=d.b.div(Mu||(Mu=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 3;\n    width: ","px;\n    height: ","px;\n    white-space: nowrap;\n"])),(function(e){return e.width}),1800),sx=d.b.div(Fu||(Fu=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* z-index: 6; */\n    width: ","px;\n    height: ","px;\n    /* pointer-events: none; */\n"])),(function(e){return e.width}),1800),lx=d.b.div(Ru||(Ru=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    margin: 1px 0 0 0;\n    background-color: #00000024;\n    /* border-bottom: 1px solid #00000018; */\n    ","\n    ","\n"])),29,(function(e){return e.isScale?Object(d.a)(Nu||(Nu=Object(s.a)(["\n        background-color: #d1d1d11f;\n    "]))):""}),(function(e){return e.isBase?Object(d.a)(Pu||(Pu=Object(s.a)(["\n        background-color: #e0e0e0;\n    "]))):""})),dx=d.b.div(_u||(_u=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 5;\n    width: ","px;\n    height: ","px;\n    cursor: crosshair;\n"])),(function(e){return e.width}),1800),bx=d.b.div(Ku||(Ku=Object(s.a)(["\n    display: inline-block;\n    /* background-color: #ffffffbe; */\n    width: ","px;\n    vertical-align: top;\n    height: ","px;\n    box-sizing: border-box;\n    border-left: solid "," #757575;\n"])),(function(e){return e.beatWidth/4}),1800,(function(e){return e.isHead?"2px":"1px"})),ux=d.b.div(Bu||(Bu=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 9;\n    left: ","px;\n    top: 0;\n    width: ","px;\n    height: 100%;\n    cursor: default;\n    background-color: #2727275a;\n    box-sizing: border-box;\n\n    // \u30a2\u30af\u30c6\u30a3\u30d6\u6642\n    ","\n    // \u30b9\u30b1\u30fc\u30eb\u30e2\u30fc\u30c9ON\n    ","\n    // \u30aa\u30af\u30bf\u30fc\u30d6\u30e2\u30fc\u30c9ON\n    ","\n    /* border-left: 1px solid #ff0000b2; */\n    ","\n\n    // \u30ad\u30fc\u30dc\u30fc\u30c9\u306b\u3088\u308b\u30ea\u30b5\u30a4\u30ba\u30e2\u30fc\u30c9ON\n    ",";\n    // \u30ad\u30fc\u30dc\u30fc\u30c9\u306b\u3088\u308b\u79fb\u52d5\u30e2\u30fc\u30c9ON\n    ",";\n    // \u30d7\u30ec\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9\n    ","\n"])),(function(e){return e.left}),(function(e){return e.width}),(function(e){return e.isActive?Object(d.a)(Hu||(Hu=Object(s.a)(["\n        background-color: #00a6cf52;\n    "]))):""}),(function(e){return e.isActive&&e.isScale?Object(d.a)(Uu||(Uu=Object(s.a)(["\n        background-color: #00cf4552;\n    "]))):""}),(function(e){return e.isActive&&e.isOctave?Object(d.a)(Wu||(Wu=Object(s.a)(["\n        background-color: #ffa9a952;\n    "]))):""}),(function(e){return e.isActive?"left"===e.side?Object(d.a)(qu||(qu=Object(s.a)(["\n        border-left: 3px solid #0026ffb1;\n        cursor : col-resize;\n        background-color: #1900ff52;\n    "]))):"right"===e.side?Object(d.a)(Vu||(Vu=Object(s.a)(["\n        border-right: 3px solid #0026ffb1;\n        cursor : col-resize;\n        background-color: #ff00006e;\n    "]))):"":""}),(function(e){return e.isActive&&e.isResize?Object(d.a)(Ju||(Ju=Object(s.a)(["\n        border-right: 3px solid #0026ffb1;\n        background-color: #ff00006e;\n    "]))):""}),(function(e){return e.isActive&&e.isMove?Object(d.a)(Xu||(Xu=Object(s.a)(["\n        border-left: 3px solid #0026ffb1;\n        background-color: #1900ff52;\n    "]))):""}),(function(e){return e.isActive&&e.isPreview?Object(d.a)(Yu||(Yu=Object(s.a)(["\n        background-color: #fffb006d;\n    "]))):""})),hx=d.b.div(Gu||(Gu=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    top: ","px;\n    width: 100%;\n    height: ","px;\n    /* background-color: red; */\n    /* background: linear-gradient(to bottom, ","); */\n    background: linear-gradient(to bottom, #f8525232, #ff0000, #f8525232);\n    ","\n    /* border: 1px solid #000; */\n    box-sizing: border-box;\n    font-size: 12px;\n    color: #000000;\n    box-shadow: 0 0 22px 0 #0000007d;\n    &:hover {\n        opacity: 0.8;\n    }\n"])),(function(e){return e.y}),(function(e){return ee-(1===e.lenType?0:2===e.lenType?6:4===e.lenType?12:14)}),(function(e){switch(e.lenType){case 4:return"#f8525232, #ff0000, #f8525232";case 8:return"#5d52f831, #0400ff, #5d52f831";case 16:return"#52f85a31, #00ff15, #52f85a31"}}),(function(e){return e.isScale?"":Object(d.a)(Qu||(Qu=Object(s.a)(["    \n       background: linear-gradient(to bottom, #f8b65231, #ffae00, #f8b65231);\n    "])))})),xx=d.b.div(Zu||(Zu=Object(s.a)(["\n    position: absolute;\n    display: ",";\n    z-index: 80;\n    width: ","px;\n    height: ","px;\n    background-color: #7a270028;\n"])),(function(e){return e.isUse?"block":"none"}),(function(e){return e.width}),1800),px=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=n.scoreState,c=n.melodyState;Object(o.useEffect)((function(){var e=c.soundfontInfo;ob.a.instrument(new AudioContext,e.name,{gain:e.gain,release:.5}).then((function(e){t.tune.setInstrument(e)})),ob.a.instrument(new AudioContext,"electric_grand_piano",{gain:2,release:.5}).then((function(e){t.score.setPiano(e)}))}),[]);var a=function(){i.isTune=!i.isTune,t.score.setScoreState(i)};if(0===n.scoreData.chordList.length)return Object(Ht.jsx)(Ht.Fragment,{});var r=i.isTune?n.melodyState.isPreview:i.isPreview,s=i.isTune?c.isSolo:i.isSolo,l=i.isTune?function(){c.isPreview?G(n,t,n.reserveTasks):t.tune.previewStart()}:function(){i.isPreview?Rt.stopPreview(n,t,n.reserveTasks):Rt.previewStart(n,t)},d=i.isTune?function(){c.isSolo=!c.isSolo,t.tune.setState(c)}:function(){i.isSolo=!i.isSolo,t.score.setScoreState(i)};return Object(Ht.jsxs)(fx,{children:[Object(Ht.jsxs)(gx,{children:[Object(Ht.jsxs)(jx,{isEnable:!r,children:[Object(Ht.jsx)(vx,{isActive:!i.isTune,onClick:function(){i.isTune&&a()},children:"Harmony"}),Object(Ht.jsx)(vx,{isActive:i.isTune,onClick:function(){i.isTune||a()},children:"Melody"})]}),Object(Ht.jsxs)(mx,{children:[Object(Ht.jsxs)(Ox,{onClick:l,children:[Object(Ht.jsx)(kx,{isActive:r,children:"Play"})," / ",Object(Ht.jsx)(kx,{isActive:!r,children:"Pause"})]}),Object(Ht.jsxs)(Ox,{onClick:d,children:[Object(Ht.jsx)(kx,{isActive:!s,children:"Emsamble"})," / ",Object(Ht.jsx)(kx,{isActive:s,children:"Solo"})]})]})]}),Object(Ht.jsxs)(yx,{tabIndex:999,onKeyDown:function(e){if(!r)switch(e.key){case"r":a()}},children:[Object(Ht.jsx)(Sx,{children:Object(Ht.jsx)(cb,{})}),Object(Ht.jsxs)(wx,{children:[Object(Ht.jsx)(Vd,{isActive:!i.isTune}),Object(Ht.jsx)(Yh,{isActive:i.isTune})]})]})]})},fx=d.b.div($u||($u=Object(s.a)(["\n    width: 100%;\n    height: 100%;\n    outline: none;\n"]))),gx=d.b.div(eh||(eh=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 35px;\n    background-color: #ececec;\n"]))),jx=d.b.div(nh||(nh=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    text-align: center;\n    margin-right: 20px;\n    ","\n"])),(function(e){return e.isEnable?"":ui})),vx=d.b.div(th||(th=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    width: 120px;\n    height: calc(100% - 8px);\n    /* background-color: #e0ff6f55; */\n    ","\n    margin: 4px 0 0 4px;\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #505050;\n    border-radius: 5px;\n    border: 1px solid #969696;\n    box-sizing: border-box;\n    &:hover {\n        background-color: #e0ff6f55;\n        ","\n    }\n"])),(function(e){return e.isActive?Object(d.a)(ih||(ih=Object(s.a)(["background-color: #e2c36dc0;"]))):""}),(function(e){return e.isActive?Object(d.a)(oh||(oh=Object(s.a)(["background-color: #e2c36dc0;"]))):""})),mx=d.b.div(ch||(ch=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    /* background-color: #e0ff6f55; */\n\n    & * {\n        margin: 3px 0 0 5px;\n    }\n"]))),Ox=d.b.div(ah||(ah=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    width: 220px;\n    height: calc(100% - 8px);\n    background-color: #e1e4ca;\n    margin: 4px 0 0 4px;\n    text-align: center;\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #000000cf;\n    border-radius: 5px;\n    border: 1px solid #969696;\n    box-sizing: border-box;\n    &:hover {\n        background-color: #eff3cf\n    }\n"]))),kx=d.b.span(rh||(rh=Object(s.a)(["\n    color: #00109e6e;\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(sh||(sh=Object(s.a)(["color: #db0000;"]))):""})),yx=d.b.div(lh||(lh=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - 35px);\n    background-color: #c50000;\n    outline: none;\n"]))),Sx=d.b.div(dh||(dh=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #d8d8d8;\n    border-right: 1px solid #3e3f57;\n    box-sizing: border-box;\n    vertical-align: top;\n"])),110),wx=d.b.div(bh||(bh=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    height: 100%;\n    background-color: #dddddd;\n    vertical-align: top;\n"])),110),Ix=10,Cx=500,Ex=function(e){for(var n=e.data.chordList,t=(e.data.notesList,Object(o.useRef)(null)),i=Object(o.useRef)(null),c=Object(o.useState)(0),a=Object(l.a)(c,2),r=a[0],s=a[1],d=Object(o.useState)(null),b=Object(l.a)(d,2),u=b[0],h=b[1],x=null!=u,p=Object(o.useMemo)((function(){for(var e=[],i=function(n,t,i,o){var c=r>=n&&r<=n+t;e.push(Object(Ht.jsx)(Rx,{pos:n,sus:t,pit:i,isRight:o,isActive:c},e.length))},o=n[0].detail,c=0,a=0;a<n.length;a++){var s=n[a];switch(s.type){case"chord":var l=s.detail,d=l.backing;null!=l.root&&function(){var e=(l.root.index+o.keyIndex)%12,n=A(l.symbolKey),t=l.beatLen+l.minute.head+l.minute.tail,a=B.getPitchListFromVoicing(d.voicingList,e,n);null==d.pattern?a.forEach((function(e){i(c,t,87-e,!1)})):d.pattern.layers.forEach((function(e,n){var t=[],o=[],r=0;e.divs.forEach((function(e){t.push(r);var n=4/e.rate;e.isDot?n*=1.5:e.div3>0&&(n/=3*e.div3),o.push(n),r+=n})),e.notesList.forEach((function(e){var r=e.status.timing*(1/32),s=c+t[e.x]+r,l=o[e.x],d=a[e.y];i(s,l,87-d,1===n)}))}));c+=t}()}}var b=null==t.current?0:t.current.clientWidth;return[e,c,o.bpm,b]}),[e.data,r,x]),f=Object(l.a)(p,4),g=f[0],j=f[1],v=f[2],m=f[3],O=[],k=0;k<88;k++)O.push(Object(Ht.jsx)(Fx,{pit:k,isScale:k%2==0},k));return Object(Ht.jsxs)(Lx,{children:[Object(Ht.jsx)(Dx,{onClick:function(){if(null==u){var e=(new Date).getTime(),n=setInterval((function(){var n=(new Date).getTime()-e;s(r+n*v/6e4)}),50);h(n)}else clearTimeout(u),h(null)}}),Object(Ht.jsxs)(Tx,{children:[Object(Ht.jsx)(Ax,{children:Object(Ht.jsx)(Px,{pos:m/2-250,ref:i,onClick:function(e){if(null!=i.current&&null==u){var n=i.current.getBoundingClientRect(),t=e.clientX-n.left;console.log(t),s(j*t/Cx)}},children:Object(Ht.jsx)(_x,{value:0===j?0:Cx*(r/j)})})}),Object(Ht.jsxs)(zx,{ref:t,children:[Object(Ht.jsxs)(Mx,{pos:r,width:j,isPlay:x,children:[O,g]}),Object(Ht.jsx)(Nx,{pos:200})]})]}),Object(Ht.jsx)(Kx,{})]})},Lx=d.b.div(uh||(uh=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #2d3246;\n    text-align: left;\n"]))),Dx=d.b.div(hh||(hh=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #95a5ca;\n    text-align: left;\n"])),100),Tx=d.b.div(xh||(xh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: calc(100% - ","px);\n    /* background-color: #2d3246; */\n    text-align: left;\n"])),150),zx=d.b.div(ph||(ph=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: auto;\n"]))),Ax=d.b.div(fh||(fh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n"]))),Mx=d.b.div(gh||(gh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: ","px;\n    width: ","px;\n    height: ","px;\n    background-color: #ffffffb5;\n    ","\n"])),(function(e){return 200-50*e.pos}),(function(e){return 50*e.width}),880,(function(e){return e.isPlay?"":Object(d.a)(jh||(jh=Object(s.a)(["\n        transition: left 0.5s;\n    "])))})),Fx=d.b.div(vh||(vh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: ","px;\n    // position: absolute;\n    width: 100%;\n    height: ","px;\n    // background-color: ",";\n    /* background-color: #0026fc11; */\n    ","\n"])),(function(e){return e.pit*Ix}),Ix,(function(e){return e.isScale?"#fffffff9f":"#00ff4cf8f"}),(function(e){return e.isScale?"":Object(d.a)(mh||(mh=Object(s.a)(["\n        background-color: #ffffff08;\n    "])))})),Rx=d.b.div(Oh||(Oh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    top: ","px;\n    width: ","px;\n    height: ","px;\n    background-color: ",";\n    opacity: 0.3;\n    ","\n"])),(function(e){return 50*e.pos}),(function(e){return e.pit*Ix}),(function(e){return 50*e.sus}),Ix,(function(e){return e.isRight?"#002ca7df":"#ad0000e0"}),(function(e){return e.isActive?Object(d.a)(kh||(kh=Object(s.a)(["\n        opacity: 1;\n        background-color: ",";\n        box-shadow: 0 0 14px 0 #ffffff46;\n    "])),(function(e){return e.isRight?"#4677ffdf":"#ff4242df"})):""})),Nx=d.b.div(yh||(yh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    height: ","px;\n    background-color: white;\n    width: 3px;\n"])),(function(e){return e.pos-1}),880),Px=d.b.div(Sh||(Sh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 5;\n    left: ","px;\n    bottom: 20px;\n    width: ","px;\n    height: 25px;\n    background-color: #000000;\n    border: solid 1px #000;\n    box-sizing: border-box;\n    opacity: 0.7;\n"])),(function(e){return e.pos}),Cx),_x=d.b.div(wh||(wh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    width: ","px;\n    height: 100%;\n    background-color: #afe7e9;\n"])),(function(e){return e.value})),Kx=d.b.div(Ih||(Ih=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #5a5e72;\n    text-align: left;\n"])),50),Bx=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher,i=-1!==n.scoreState.focusIndex;return Object(Ht.jsx)(Hx,{children:Object(Ht.jsx)(oi,{tabElements:[{name:"Manage",disable:!1,cont:Object(Ht.jsx)(xi,{})},{name:"Edit",disable:!i,cont:Object(Ht.jsx)(px,{})},{name:"Preview",disable:!i,cont:0===n.scoreData.chordList.length?Object(Ht.jsx)(Ht.Fragment,{}):Object(Ht.jsx)(Ex,{data:n.scoreData})}],activeNo:n.systemState.scoreTabIndex,selectTabIndex:function(e){return t.score.setScoreTabIndex(e)}})})},Hx=d.b.div(Ch||(Ch=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),8,8,16,16),Ux=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher;return Object(Ht.jsx)(Wx,{children:Object(Ht.jsx)(oi,{tabElements:[{name:"Sound",disable:!0,cont:Object(Ht.jsx)("div",{})},{name:"Design",disable:!0,cont:Object(Ht.jsx)("div",{})}],activeNo:n.systemState.scoreTabIndex,selectTabIndex:function(e){return t.score.setScoreTabIndex(e)}})})},Wx=d.b.div(Eh||(Eh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),8,8,16,16),qx=function(){var e=Object(o.useContext)(xp),n=e.store,t=(e.dispatcher,n.instruments.sampler),i=function(e,n){var i=[];return i.push(Object(Ht.jsx)(Yx,{children:Object(Ht.jsx)("div",{children:e})},i.length)),n.forEach((function(e){var n=e.degree,o=(n.isFlat?v:m)[n.index],c=(n.isFlat?k:y)[n.index],a=A(e.symbolKey).name;i.push(Object(Ht.jsxs)(Gx,{onMouseDown:function(n){0===n.button&&(t.releaseAll(),A(e.symbolKey).structs.map((function(n){var t=E[n];return 36+e.degree.index+t})).forEach((function(e){var n=y[e%12]+Math.floor(e/12);t.triggerAttack(n,"+0",.5)})))},children:[Object(Ht.jsxs)("div",{children:[o,a]}),Object(Ht.jsxs)("div",{children:[c,a]})]},i.length))})),Object(Ht.jsx)(Jx,{children:i})};return Object(Ht.jsxs)(Vx,{onMouseDown:function(e){2===e.button&&t.releaseAll()},children:[i("Diatonic Triad",[{degree:{index:0,isFlat:!1},symbolKey:"major"},{degree:{index:2,isFlat:!1},symbolKey:"minor"},{degree:{index:4,isFlat:!1},symbolKey:"minor"},{degree:{index:5,isFlat:!1},symbolKey:"major"},{degree:{index:7,isFlat:!1},symbolKey:"major"},{degree:{index:9,isFlat:!1},symbolKey:"minor"},{degree:{index:11,isFlat:!1},symbolKey:"minor-minus5"}]),i("Diatonic Tetrad",[{degree:{index:0,isFlat:!1},symbolKey:"major-maj7th"},{degree:{index:2,isFlat:!1},symbolKey:"minor-7th"},{degree:{index:4,isFlat:!1},symbolKey:"minor-7th"},{degree:{index:5,isFlat:!1},symbolKey:"major-maj7th"},{degree:{index:7,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:9,isFlat:!1},symbolKey:"minor-7th"},{degree:{index:11,isFlat:!1},symbolKey:"minor7-minus5"}]),i("Parallel Triad",[{degree:{index:0,isFlat:!0},symbolKey:"minor"},{degree:{index:2,isFlat:!0},symbolKey:"major"},{degree:{index:3,isFlat:!0},symbolKey:"major"},{degree:{index:5,isFlat:!0},symbolKey:"minor"},{degree:{index:7,isFlat:!0},symbolKey:"minor"},{degree:{index:8,isFlat:!0},symbolKey:"major"},{degree:{index:10,isFlat:!0},symbolKey:"major"}]),i("Secondary Dominant",[{degree:{index:7,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:9,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:11,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:0,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:2,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:4,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:10,isFlat:!1},symbolKey:"major-min7th"}])]})},Vx=d.b.div(Lh||(Lh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    margin: 4px 0 0 4px;\n    background-color: #c3d8dd6f;\n    border: solid 1px #888;\n    border-radius: 5px;\n    box-sizing: border-box;\n"]))),Jx=d.b.div(Dh||(Dh=Object(s.a)(["\n    display: inline-block;\n    width: 160px;\n    background-color: #bbbbbb;\n    padding-bottom: 5px;\n"]))),Xx=d.b.div(Th||(Th=Object(s.a)(["\n    display: inline-block;\n    width: 150px;\n    height: 80px;\n    margin: 5px 0 0 5px;\n    box-sizing: border-box;\n    border-radius: 4px;\n"]))),Yx=Object(d.b)(Xx)(zh||(zh=Object(s.a)(["\n    background-color: #51608f;\n    /* border: 1px solid #dfdfdf; */\n    font-weight: 600;\n    & div:nth-child(1) {\n        width: 100%;\n        text-align: center;\n        height: 100%;\n        font-size: 26px;\n        color: #ebebeb;\n    }\n"]))),Gx=Object(d.b)(Xx)(Ah||(Ah=Object(s.a)(["\n    background-color: #e0ebe5;\n    border: 1px solid #777;\n    & *{\n        width: 100%;\n        text-align: center;\n        height: 50%;\n    }\n    & div:nth-child(1) {\n        font-size: 26px;\n        color: #d40000;\n    }\n    & div:nth-child(2) {\n        font-size: 24px;\n        color: #000000;\n    }\n    &:hover {\n        background-color: #fcf29f;\n    }\n"]))),Qx=function(){var e=Object(o.useContext)(xp),n=e.store,t=e.dispatcher;return Object(Ht.jsx)(Zx,{children:Object(Ht.jsx)(Vt,{tabElements:[{name:"Home",icon:Object(Ht.jsx)(ni.a,{}),disable:!0,cont:Object(Ht.jsx)("div",{})},{name:"Perform",icon:Object(Ht.jsx)(ti.b,{}),disable:!0,cont:Object(Ht.jsx)(qx,{})},{name:"Score",icon:Object(Ht.jsx)(ii.c,{}),disable:!0,cont:Object(Ht.jsx)(Bx,{})},{name:"Option",icon:Object(Ht.jsx)(ti.a,{}),disable:!0,cont:Object(Ht.jsx)(Ux,{})}],activeNo:n.systemState.mainChannelIndex,selectTabIndex:function(e){return t.system.setMainTabIndex(e)}})})},Zx=d.b.div(Mh||(Mh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),15,15,30,30),$x=function(){var e=Object(o.useContext)(xp),n=(e.store,e.dispatcher),t=Object(o.useState)(!1),i=Object(l.a)(t,2),c=i[0],a=i[1],r=Object(o.useState)(),s=Object(l.a)(r,2),d=s[0],b=s[1];return Object(o.useEffect)((function(){b(setTimeout((function(){a(!0)}),3e3))}),[]),Object(o.useEffect)((function(){c&&setTimeout((function(){n.system.switchSplashToMain()}),500)}),[c]),Object(Ht.jsx)(ep,{isSwitch:c,onClick:function(e){clearTimeout(d),a(!0)},children:Object(Ht.jsxs)(tp,{children:[Object(Ht.jsx)("span",{children:"L"}),"iCreSia"]})})},ep=d.b.div(Fh||(Fh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 10;\n    /* width: 500px;\n    height: 500px; */\n    width: 100%;\n    height: 100%;\n    /* background-color: #d8d8d8; */\n    background: radial-gradient(#868686, #ffffff);\n    opacity: ",";\n    transition: opacity 500ms;\n"])),(function(e){return e.isSwitch?"0":"1"})),np=Object(d.c)(Rh||(Rh=Object(s.a)(["\n  0%, 100% {\n    opacity: 0.4;\n  }\n  50% {\n    opacity: 1;\n  }\n"]))),tp=d.b.div(Nh||(Nh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin-top: 15%;\n    width: 100%;\n    /* height: 400px; */\n    background-color: #ffffff1f;\n    background: linear-gradient(to bottom, #99999913, #ffffff13,#ffffff13,#ffffff13, #99999913);\n    color: white;\n    font-size: 130px;\n    font-weight: 600;\n    text-align: center;\n    text-shadow: 1px 2px 22px #0000003d;\n    /* line-height: 350px; */\n    animation: "," 3s linear infinite;\n    /* -webkit-box-reflect:below 1px; */\n    -webkit-box-reflect: below 1px -webkit-gradient(\n      linear,left top,left bottom,\n      from(transparent),\n      color-stop(0.6, transparent),\n      to(#f80000));\n    & span {\n        color: red;\n        font-size: 160px;\n    }\n"])),np),ip=t(27),op=t(28),cp=function(){return Object(Ht.jsxs)(ap,{children:[Object(Ht.jsxs)(rp,{children:[Object(Ht.jsx)(lp,{children:"L"}),Object(Ht.jsx)(sp,{children:"iCreSia"})]}),Object(Ht.jsxs)(dp,{children:[Object(Ht.jsxs)(up,{children:[Object(Ht.jsx)("div",{children:Object(Ht.jsx)(ip.a,{})}),"Login / Sign up"]}),Object(Ht.jsx)(hp,{children:Object(Ht.jsx)("div",{children:Object(Ht.jsx)(op.a,{})})})]})]})},ap=d.b.div(Ph||(Ph=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    background: linear-gradient(to bottom, #ececec, #e2e2e2, #eeeeee);\n    /* background-color: #c2c2c2; */\n    box-shadow: 0 0 8px 0 #000b3a48;\n"])),44),rp=d.b.div(_h||(_h=Object(s.a)(["\n    display: inline-block;\n    margin: 2px 0 0 10px;\n    width: 200px;\n    height: calc(100% - 4px);\n    /* background-color: #00000013; */\n    font-size: 34px;\n    font-weight: 600;\n    line-height: 36px;\n    text-shadow: 1px 2px 3px #8080806a;\n"]))),sp=d.b.span(Kh||(Kh=Object(s.a)(["\n    color: #ffffff;\n"]))),lp=d.b.span(Bh||(Bh=Object(s.a)(["\n    font-size: 34px;\n    color: #da4242;\n"]))),dp=d.b.div(Hh||(Hh=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    position: absolute;\n    right: 30px;\n    /* background-color: #ff00002b; */\n"]))),bp=d.b.div(Uh||(Uh=Object(s.a)(["\n    background-color: #c9c7c7;\n    &:hover {\n        background-color: #cf9bae;\n    }\n    transition: background-color 800ms;\n"]))),up=Object(d.b)(bp)(Wh||(Wh=Object(s.a)(["\n    display: inline-block;\n    width: 240px;\n    margin: 5px 10px 0 0;\n    height: calc(100% - 10px);\n    border-radius: 20px;\n    /* background: linear-gradient(to bottom, #e9baba, #d39d9d, #e9baba); */\n    /* background-color: #adadad; */\n    /* border: 1px solid #7e7e7e; */\n    /* box-shadow: 0 0 8px 0 #000b3a48; */\n    /* text-shadow: 1px 2px 3px #808080ba; */\n    text-align: center;\n    font-size: 22px;\n    font-weight: 600;\n    line-height: 28px;\n    color: #ffffff;\n    vertical-align: top;\n\n    & div {\n        display: inline-block;\n        /* background-color: #0000007d; */\n        margin: 2px 5px 0 0;\n        vertical-align: top;\n    }\n"]))),hp=Object(d.b)(bp)(qh||(qh=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: ","px;\n    margin: 3px 0 0 0;\n    border-radius: 50%;\n    /* background: linear-gradient(to bottom, #e9baba, #d39d9d, #e9baba); */\n    /* background-color: #48aa9d; */\n    /* border: 1px solid #7e7e7e; */\n    /* box-shadow: 0 0 8px 0 #000b3a48; */\n    /* text-shadow: 1px 2px 3px #808080ba; */\n    /* text-align: center; */\n    font-size: 28px;\n    font-weight: 600;\n    color: #ffffff;\n    & div {\n        display: inline-block;\n        margin: 2px 0 0 5px;\n        /* background-color: #0000007d; */\n        vertical-align: top;\n    }\n"])),38,38),xp=Object(o.createContext)({}),pp=function(){var e=Object(o.useReducer)(R,Bt),n=Object(l.a)(e,2),t=n[0],i=n[1],c=new Nt(t,i);return Object(Ht.jsx)(xp.Provider,{value:{store:t,dispatcher:c},children:Object(Ht.jsxs)(Ht.Fragment,{children:[t.systemState.isSplash?Object(Ht.jsx)($x,{}):Object(Ht.jsx)(Ht.Fragment,{}),Object(Ht.jsxs)(fp,{children:[Object(Ht.jsx)(Ut,{}),Object(Ht.jsx)(cp,{}),Object(Ht.jsx)(gp,{children:Object(Ht.jsx)(Qx,{})})]})]})})},fp=d.b.div(Vh||(Vh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background-color: #d8d8d8;\n"]))),gp=d.b.div(Jh||(Jh=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - ","px);\n    /* background-color: #c2c2c2; */\n"])),44);var jp=function(){return Object(o.useEffect)((function(){document.oncontextmenu=function(){return!1},document.onkeydown=function(e){if(e.ctrlKey&&["f","s"].includes(e.key))return!1}}),[]),Object(Ht.jsx)(pp,{})},vp=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,62)).then((function(n){var t=n.getCLS,i=n.getFID,o=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),i(e),o(e),c(e),a(e)}))};r.a.render(Object(Ht.jsx)(c.a.StrictMode,{children:Object(Ht.jsx)(jp,{})}),document.getElementById("root")),vp()}},[[61,1,2]]]);
//# sourceMappingURL=main.98af3c7b.chunk.js.map