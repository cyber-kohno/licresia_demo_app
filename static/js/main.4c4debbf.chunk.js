(this.webpackJsonplicresia_demo=this.webpackJsonplicresia_demo||[]).push([[0],{32:function(n,e,t){},59:function(n,e,t){"use strict";t.r(e);var i,o=t(7),c=t.n(o),a=t(20),r=t.n(a),s=(t(32),t(2)),l=t(8),d=t(3),b=t(5),u=t(4),h=[0,2,4,5,7,9,11],x=[null,{index:0,isFlat:!1},{index:1,isFlat:!1},{index:1,isFlat:!0},{index:2,isFlat:!1},{index:3,isFlat:!1},{index:3,isFlat:!0},{index:4,isFlat:!1},{index:5,isFlat:!1},{index:6,isFlat:!1},{index:6,isFlat:!0},{index:7,isFlat:!1},{index:8,isFlat:!1},{index:8,isFlat:!0},{index:9,isFlat:!1},{index:10,isFlat:!1},{index:10,isFlat:!0},{index:11,isFlat:!1}],p=["\u2160","b\u2161","\u2161","b\u2162","\u2162","\u2163","b\u2164","\u2164","b\u2165","\u2165","b\u2166","\u2166"],f=["\u2160","#\u2160","\u2161","#\u2161","\u2162","\u2163","#\u2163","\u2164","#\u2164","\u2165","#\u2165","\u2166"],j=function(n){return(n.isFlat?p:f)[n.index]},g=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],v=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],O=function(n,e){return(n.isFlat?g:v)[(e+n.index)%12]},m=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],k=["C","C#","D","D#","E","F","F#","G","G#","A","Bb","B"],y=[{key:"major",name:"",base:null,structs:["p1","M3","p5"],attr:"triad"},{key:"minor",name:"m",base:null,structs:["p1","m3","p5"],attr:"triad"},{key:"suspend4th",name:"sus4",base:null,structs:["p1","p4","p5"],attr:"triad"},{key:"diminish",name:"dim",base:null,structs:["p1","m3","d5"],attr:"triad"},{key:"diminish-7th",name:"dim7",base:"diminish",structs:["p1","m3","d5","d7"],attr:"seventh"},{key:"augument",name:"aug",base:null,structs:["p1","M3","a5"],attr:"triad"},{key:"augument-7th",name:"aug7",base:"augument",structs:["p1","M3","a5","m7"]},{key:"minor-minus5",name:"m(-5)",base:null,structs:["p1","m3","d5"],attr:"triad"},{key:"minor7-minus5",name:"m7(-5)",base:"minor-minus5",structs:["p1","m3","d5","m7"],attr:"seventh"},{key:"major-maj7th",name:"maj7",base:"major",structs:["p1","M3","p5","M7"],attr:"seventh"},{key:"major-min7th",name:"7",base:"major",structs:["p1","M3","p5","m7"],attr:"seventh"},{key:"minor-7th",name:"m7",base:"minor",structs:["p1","m3","p5","m7"],attr:"seventh"},{key:"sus4-7th",name:"7sus4",base:"suspend4th",structs:["p1","p4","p5"]},{key:"minor-maj7th",name:"mmaj7",base:"minor",structs:["p1","m3","p5","M7"],attr:"seventh"},{key:"major-add9th",name:"add9",base:"major",structs:["p1","M3","p5","M2"],attr:"add9th"},{key:"minor-add9th",name:"madd9",base:"minor",structs:["p1","m3","p5","M2"],attr:"add9th"},{key:"major-maj9th",name:"maj9",base:"major-maj7th",structs:["p1","m3","p5"],attr:"add9th"},{key:"major-9th",name:"9",base:"major-min7th",structs:["p1","m3","p5"]}],S={p1:0,m2:1,M2:2,m3:3,M3:4,p4:5,d5:6,p5:7,a5:8,m6:8,M6:9,d7:9,m7:10,M7:11},w=[{root:{index:0,isFlat:!1},symbolKey:"major"},{root:{index:2,isFlat:!1},symbolKey:"minor"},{root:{index:4,isFlat:!1},symbolKey:"minor"},{root:{index:5,isFlat:!1},symbolKey:"major"},{root:{index:7,isFlat:!1},symbolKey:"major"},{root:{index:9,isFlat:!1},symbolKey:"minor"},{root:{index:11,isFlat:!1},symbolKey:"minor-minus5"}],I=["\u2160","\u2160maj7","\u2161m","\u2161m7","\u2162m","\u2162m7","\u2163","\u2163maj7","\u2164","\u21647","\u2165m","\u2165m7","\u2166m(-5)","\u2166m7(-5)"],C=function(n){var e=y.find((function(e){if(n===e.key)return e}));return void 0!=e?e:y[0]},E=function(n){var e=[];return y.forEach((function(t){n===t.base&&e.push(t.key)})),e};!function(n){n[n.SET_SYSTEM_STATE=0]="SET_SYSTEM_STATE",n[n.SET_SCORE_STATE=1]="SET_SCORE_STATE",n[n.SET_TUNE_STATE=2]="SET_TUNE_STATE",n[n.SET_SCORE_DATA=3]="SET_SCORE_DATA",n[n.SET_REFS=4]="SET_REFS",n[n.SET_INSTRUMENTS=5]="SET_INSTRUMENTS",n[n.SET_BACKING_STATE=6]="SET_BACKING_STATE",n[n.SET_RESERVE_TASKS=7]="SET_RESERVE_TASKS"}(i||(i={}));var D,L,z,A,T,M,F,N,R,K,P,_,B,q,W,U,V,G,J,Y,H,X,Q,Z,$,nn,en,tn,on,cn,an,rn,sn,ln,dn,bn,un,hn,xn,pn,fn,jn,gn,vn,On,mn,kn,yn,Sn,wn,In,Cn,En,Dn,Ln,zn,An,Tn,Mn,Fn,Nn,Rn,Kn,Pn,_n,Bn,qn,Wn,Un,Vn,Gn,Jn,Yn,Hn,Xn,Qn,Zn,$n,ne,ee,te,ie,oe,ce,ae,re,se,le,de,be,ue,he,xe,pe,fe,je,ge,ve,Oe,me,ke,ye,Se,we,Ie,Ce,Ee,De,Le,ze,Ae,Te,Me,Fe,Ne,Re,Ke,Pe,_e,Be,qe,We,Ue,Ve,Ge,Je,Ye,He,Xe,Qe,Ze,$e,nt,et,tt,it,ot,ct,at,rt,st,lt,dt,bt,ut,ht,xt,pt,ft,jt,gt,vt,Ot,mt,kt,yt,St,wt,It,Ct,Et,Dt,Lt,zt,At,Tt,Mt,Ft,Nt,Rt,Kt,Pt,_t,Bt,qt,Wt,Ut,Vt,Gt,Jt,Yt,Ht,Xt=function(n,e){var t=e.type,o=e.payload;switch(t){case i.SET_SYSTEM_STATE:n.systemState=o.systemState;break;case i.SET_SCORE_STATE:n.scoreState=o.scoreState;break;case i.SET_SCORE_DATA:n.scoreData=o.scoreData;break;case i.SET_TUNE_STATE:n.melodyState=o.tuneState;break;case i.SET_REFS:n.refs=o.refs;break;case i.SET_INSTRUMENTS:n.instruments=o.instruments;break;case i.SET_BACKING_STATE:n.backingState=o.backingState;break;case i.SET_RESERVE_TASKS:n.reserveTasks=o.reserveTasks}return Object(b.a)({},n)},Qt=t(27),Zt=function(n){var e=[];switch(n){case"triad":e=[{struct:0,octave:3},{struct:1,octave:3},{struct:2,octave:3}];break;case"seventh":case"add9th":e=[{struct:0,octave:3},{struct:1,octave:3},{struct:2,octave:3},{struct:3,octave:3}]}return{voicingList:e,pattern:null}},$t=function(n){return(59-n+9)%12},ni=function(n){var e=0;return e+=n.len4,e+=n.len8/2,e+=n.len16/4,e+=n.len4div3/3,e+=n.len8div3/6},ei=function(n){var e=Math.floor(n.len8div3/3);n.len8div3-=3*e,n.len8+=e;var t=Math.floor(n.len8div3/2);n.len8div3-=2*t,n.len4div3+=t;var i=Math.floor(n.len4div3/3);n.len4div3-=3*i,n.len4+=i;var o=Math.floor(n.len16/2);n.len16-=2*o,n.len8+=o;var c=Math.floor(n.len8/2);return n.len8-=2*c,n.len4+=c,n},ti=function(n,e){var t=0,i=0,o=0,c=0,a=0;switch(n){case 1:t=e;break;case 2:i=e;break;case 3:c=e;break;case 4:o=e;break;case 6:a=e}return ei({len4:t,len8:i,len16:o,len4div3:c,len8div3:a})},ii=function(n){return n.len8div3>0?6:n.len16>0?4:n.len4div3>0?3:n.len8>0?2:n.len4>0?1:0},oi=function(n,e){var t=(59-n+9)%12,i=Math.floor((59-n+9)/12)+1,o=v[t%12],c=e.instruments.soundfontPlayer;null!=c&&(c.stop(),c.play(o+i,0,{duration:.5}))},ci=function(n,e,t){var i=e.instruments.piano;null!=i?i.play(n,0,{duration:t}):alert("null")},ai=function(n,e,t,i){for(var o=e.scoreState,c=(e.instruments.sampler,o.elementCacheList),a=e.scoreData.chordList,r=a[0].detail,s=function(o){var s=c[o],l=a[o];if("chord"===l.type){if(s.pastSecond<n)return"continue";var d=l.detail;if(null==d.root)return{v:void 0};var b=(d.root.index+r.keyIndex)%12,u=C(d.symbolKey),h=d.beatLen+d.minute.head+d.minute.tail,x=d.backing.voicingList.map((function(n){var e=S[u.structs[n.struct]];return 12*n.octave+b+e})),p=60/r.bpm*h;i.push(setTimeout((function(){e.melodyState.mouseState.curChord=l,t.tune.setState(e.melodyState);r.bpm,x.length;x.forEach((function(n,t){var i=v[n%12],o=Math.floor(n/12);ci(i+o,e,p)}))}),s.pastSecond-n-0))}},l=3;l<a.length;l++){var d=s(l);if("continue"!==d&&"object"===typeof d)return d.v}},ri=function(n){var e=n.melodyState,t=n.scoreData.chordList[0].detail,i=e.mouseState.curChord;if(null!=i){var o=i.detail;if(null==o.root)return;var c=(o.root.index+t.keyIndex)%12,a=C(o.symbolKey),r=(o.beatLen,o.minute.head,o.minute.tail,o.backing.voicingList.map((function(n){var e=S[a.structs[n.struct]];return 12*n.octave+c+e}))),s=60/t.bpm*1;r.forEach((function(e){var t=v[e%12],i=Math.floor(e/12);ci(t+i,n,s)}))}},si=100,li=30,di=function n(e,t){var o=this;Object(u.a)(this,n),this.store=void 0,this.dispatch=void 0,this.system={setState:function(n){o.dispatch(i.SET_SYSTEM_STATE,{systemState:n})},switchSplashToMain:function(){var n=o.store.systemState;n.isSplash=!1,o.dispatch(i.SET_SYSTEM_STATE,{systemState:n})},setMainTabIndex:function(n){var e=o.store.systemState;e.mainChannelIndex=n,o.dispatch(i.SET_SYSTEM_STATE,{systemState:e})},setRefs:function(n){o.dispatch(i.SET_REFS,{refs:n})},setReserveTasks:function(n){o.dispatch(i.SET_RESERVE_TASKS,{reserveTasks:n})}},this.score={setPiano:function(n){o.dispatch(i.SET_INSTRUMENTS,{instruments:Object(b.a)(Object(b.a)({},o.store.instruments),{},{piano:n})})},setScoreTabIndex:function(n){var e=o.store.systemState;e.scoreTabIndex=n,o.dispatch(i.SET_SYSTEM_STATE,{systemState:e})},setScoreState:function(n){o.dispatch(i.SET_SCORE_STATE,{scoreState:n})},setKeySwitch:function(n){var e=o.store.scoreState;e.keySwitch=n,o.score.setScoreState(e)},setScoreData:function(n){o.dispatch(i.SET_SCORE_DATA,{scoreData:n})},moveElement:function(n){var e=o.store.scoreState,t=n?1:-1;"fixed"!==o.store.scoreData.chordList[e.focusIndex+t].type&&(e.focusIndex+=t,o.score.setScoreState(e))},moveSection:function(n){var e=o.store.scoreState,t=e.elementCacheList[e.focusIndex].sectionNo,i=e.sectionCacheList,c=i[t],a=o.store.scoreData.chordList[e.focusIndex].type;n?t<i.length-1?e.focusIndex=i[t+1].rangeIndexStart:e.focusIndex=c.rangeIndexEnd:e.focusIndex="section"===a&&t>0?i[t-1].rangeIndexStart:c.rangeIndexStart,o.score.setScoreState(e)},incrementDegreeRoot:function(n){var e=o.store.scoreState,t=o.store.scoreData,i=t.chordList[e.focusIndex].detail,c=n?1:-1;null==i.root?(i.root={index:0,isFlat:!1},o.score.setScoreData(t)):i.root.index+c>=0&&i.root.index+c<=11&&(i.root.index+=c,i.root.isFlat=!n&&![0,2,4,5,7,9,11].includes(i.root.index),o.score.setScoreData(t))},incrementBeatLen:function(n){var e=o.store.scoreState,t=o.store.scoreData,i=t.chordList.slice(),c=i[e.focusIndex].detail,a=n?1:-1;c.beatLen+a>=1&&c.beatLen+a<=4&&(c.beatLen+=a,t.chordList=i,o.score.setScoreData(t))},incrementMinuteVal:function(n,e,t){var i=o.store.scoreData,c=i.chordList[n].detail,a=e?c.minute.tail:c.minute.head;(a+=t)>=-.5&&a<=.5&&(e?c.minute.tail=a:c.minute.head=a,i.chordList=i.chordList.slice(),o.score.setScoreData(i))},incrementMinuteValRelation:function(n,e){var t=o.store.scoreState.focusIndex,i=o.store.scoreData.chordList,c=-1;if(n){for(var a=t+1;a<i.length-1;a++)if("chord"===i[a].type){c=a;break}}else for(var r=t-1;r>2;r--)if("chord"===i[r].type){c=r;break}-1!=c&&(o.score.incrementMinuteVal(t,n,e),o.score.incrementMinuteVal(c,!n,-e))},addChordElement:function(){var n=o.store.scoreState,e=o.store.scoreData,t={type:"chord",detail:{beatLen:n.initialBeat,minute:{head:0,tail:0},root:null,on:null,symbolKey:"major",backing:{voicingList:[],pattern:null}}};e.chordList.splice(n.focusIndex+1,0,t),o.score.setScoreData(e)},addSectionElement:function(){var n=o.store.scoreState,e=o.store.scoreData;e.chordList.splice(n.focusIndex+1,0,{type:"section",detail:{labelName:"Section"}}),o.score.setScoreData(e)},addChangeElement:function(){var n=o.store.scoreState,e=o.store.scoreData;e.chordList.splice(n.focusIndex+1,0,{type:"change",detail:{changeType:null,modulateRelation:null,domminantValue:0,keyAdjust:0,tempoRelation:null,tempoDiff:0,tempoRate:1,tempoAbsolute:0,beatSignature:"4/4"}}),o.score.setScoreData(e)},removeCurElement:function(){var n=o.store.scoreState,e=o.store.scoreData.chordList[n.focusIndex],t=o.store.scoreState.elementCacheList[n.focusIndex].sectionNo;if("section"!==e.type||0!==t){var i=n.elementCacheList[n.focusIndex],c=i.reffers.wrap;i.reffers.body;c.style.opacity="0",c.style.overflow="hidden",c.style.width="".concat(c.clientWidth,"px"),setTimeout((function(){c.style.width="0"}),1),setTimeout((function(){c.style.opacity="",c.style.width="",c.style.overflow="";var e=o.store.scoreData;e.chordList.splice(n.focusIndex,1),o.score.setScoreData(e),n.focusIndex--,o.score.setScoreState(n)}),200)}},incrementSymbol:function(n){var e=o.store.scoreState,t=o.store.scoreData,i=t.chordList[e.focusIndex].detail,c=n?1:-1;null==i.root?(i.root={index:0,isFlat:!1},o.score.setScoreData(t)):i.root.index+c>=0&&i.root.index+c<=11&&(i.root.index+=c,i.root.isFlat=!n&&![0,2,4,5,7,9,11].includes(i.root.index),o.score.setScoreData(t))},setDiatonicChord:function(n){var e=o.store.scoreState,t=o.store.scoreData,i=t.chordList[e.focusIndex].detail,c=w[n];i.root=Object(b.a)({},c.root),i.symbolKey=c.symbolKey,o.score.setScoreData(t)},setDefaultBacking:function(){var n=o.store.scoreState,e=o.store.scoreData,t=e.chordList[n.focusIndex].detail,i=C(t.symbolKey);void 0!=i.attr&&(t.backing=Zt(i.attr),o.score.setScoreData(e))}},this.symbol={toNext:function(n){var e=o.store.scoreState,t=e.symbolMng,i=o.store.scoreData,c=i.chordList[e.focusIndex].detail,a=n?1:-1,r=t.index+a;r>=0&&r<=t.curLine.length-1&&(t.index+=a,c.symbolKey=t.curLine[t.index],o.score.setScoreState(e),o.score.setScoreData(i))},toBase:function(){var n=o.store.scoreState,e=n.symbolMng,t=o.store.scoreData,i=t.chordList[n.focusIndex].detail;e.parentLine.length>0&&(i.symbolKey=e.parentLine[0],o.score.setScoreData(t))},toDerive:function(){var n=o.store.scoreState,e=n.symbolMng,t=o.store.scoreData,i=t.chordList[n.focusIndex].detail;e.childrenLine.length>0&&(i.symbolKey=e.childrenLine[0],o.score.setScoreData(t))}},this.tune={setState:function(n){o.dispatch(i.SET_TUNE_STATE,{tuneState:n})},setNotesList:function(n){var e=o.store.scoreData;e.notesList=n,o.score.setScoreData(e)},setInstrument:function(n){o.dispatch(i.SET_INSTRUMENTS,{instruments:Object(b.a)(Object(b.a)({},o.store.instruments),{},{soundfontPlayer:n})})},incrementCurNoteKey:function(n,e){var t=o.store.melodyState.focusIndex;if(-1!==t){for(var i=o.store.scoreData.chordList[0].detail,c=h.map((function(n){return(i.keyIndex+n)%12})),a=o.store.scoreData.notesList,r=a[t],s=r.pitchIndex,l="octave"!==e?1:12,d=r.pitchIndex;n?r.pitchIndex>0:r.pitchIndex<59;)if(d+=l*(n?-1:1),"scale"!==e||"scale"===e&&c.includes($t(d))){r.pitchIndex=d;break}s!==r.pitchIndex&&(oi(r.pitchIndex,o.store),o.tune.setNotesList(a.slice()),o.tune.adjustScrollY())}},setKeySwitch:function(n){var e=o.store.melodyState;e.keySwitch=n,o.tune.setState(e)},moveFocus:function(n){var e=o.store.melodyState,t=o.store.scoreData.notesList;-1===e.focusIndex?t.length>0&&(e.focusIndex=e.lastFocus,e.distIndex=e.focusIndex,o.tune.setState(e)):(n?e.focusIndex<t.length-1:e.focusIndex>0)&&(e.focusIndex+=n?1:-1,e.distIndex=e.focusIndex,o.tune.setState(e)),o.tune.adjustScrollX(),o.tune.updateCurChord(e.focusIndex)},moveDistFocus:function(n){var e=o.store.melodyState,t=o.store.scoreData.notesList;-1!==e.focusIndex&&((n?e.distIndex<t.length-1:e.distIndex>0)&&(e.distIndex+=n?1:-1,o.tune.setState(e)),o.tune.adjustScrollX())},updateCurChord:function(n){var e=o.store.melodyState,t=o.store.scoreData.chordList,i=ni(o.store.scoreData.notesList[n].pos)*e.beatWidth,c=0,a=t.find((function(n){if("chord"===n.type){var t=n.detail.beatLen*e.beatWidth;if(i>=c&&i<c+t)return n;c+=t}}));e.mouseState.curChord=void 0==a?null:a,o.tune.setState(e)},addNotes:function(){var n=o.store.melodyState;if(-1!==n.focusIndex){var e,t,i=o.store.scoreData,c=i.notesList,a=c[n.focusIndex],r=(e=a.pos,t=a.len,ei({len4:e.len4+t.len4,len8:e.len8+t.len8,len16:e.len16+t.len16,len4div3:e.len4div3+t.len4div3,len8div3:e.len8div3+t.len8div3})),s=ni(r),l=n.focusIndex===c.length-1?-1:ni(c[n.focusIndex+1].pos),d=s+1/n.quantize;(-1===l||d<=l)&&(i.notesList.splice(n.focusIndex+1,0,{pos:r,pitchIndex:a.pitchIndex,len:ti(n.quantize,1)}),o.score.setScoreData(i),n.focusIndex++,n.distIndex=n.focusIndex,o.tune.setState(n)),o.tune.adjustScrollX()}},removeNotes:function(){var n=o.store.melodyState,e=o.store.scoreData.notesList,t=n.focusIndex<n.distIndex?[n.focusIndex,n.distIndex]:[n.distIndex,n.focusIndex],i=Object(l.a)(t,2),c=i[0],a=i[1]-c+1;e.splice(n.focusIndex,a),o.tune.setNotesList(e),n.focusIndex=c-1,n.distIndex=n.focusIndex,o.tune.setState(n)},resizeNotes:function(n){var e=o.store.melodyState;if(-1!==e.focusIndex){var t=o.store.scoreData,i=t.notesList,c=i[e.focusIndex],a=ni(c.len),r=ni(c.pos)+a,s=e.focusIndex===i.length-1?-1:ni(i[e.focusIndex+1].pos),l=1/e.quantize;if(n?-1===s||r+l<=s:a>l){var d=ni(c.len)+l*(n?1:-1);c.len=ti(e.quantize,d*e.quantize),t.notesList=i.slice(),o.score.setScoreData(t)}}},moveNotes:function(n){var e=o.store.melodyState;if(-1!==e.focusIndex){var t=o.store.scoreData,i=t.notesList,c=i[e.focusIndex],a=ni(c.pos),r=a+ni(c.len),s=0===e.focusIndex?0:ni(i[e.focusIndex-1].pos)+ni(i[e.focusIndex-1].len),l=e.focusIndex===i.length-1?-1:ni(i[e.focusIndex+1].pos),d=1/e.quantize;if(n?-1===l||r+d<=l:a-d>=s){var b=ni(c.pos)+d*(n?1:-1);c.pos=ti(e.quantize,b*e.quantize),t.notesList=i.slice(),o.score.setScoreData(t)}}},adjustScrollX:function(){var n=o.store.melodyState,e=o.store.refs.melody.table,t=n.distIndex;if(-1!==t&&null!=e){var i=ni(o.store.scoreData.notesList[t].pos)*n.beatWidth;e.scrollTo({left:i-300,behavior:"smooth"})}},adjustScrollY:function(){var n=o.store.melodyState,e=o.store.refs.melody.table;if(-1!==n.focusIndex&&null!=e){var t=o.store.scoreData.notesList[n.focusIndex].pitchIndex*li;e.scrollTo({top:t-e.clientHeight/2,behavior:"smooth"})}},previewStart:function(){-1!==o.store.melodyState.focusIndex&&function(n,e){var t=n.melodyState,i=n.scoreData,o=[],c=n.instruments.soundfontPlayer,a=i.chordList[0].detail.bpm;t.lastFocus=t.focusIndex,t.isPreview=!0;for(var r=-1,s=function(s){var l=i.notesList[s],d=ni(l.pos),b=ni(l.len),u=l.pitchIndex,h=60/a*d;-1===r&&(r=h),o.push(setTimeout((function(){if(t.focusIndex=s,t.distIndex=t.focusIndex,e.tune.setState(t),e.tune.adjustScrollX(),null!=c){var n=$t(u),i=v[n%12],o=Math.floor((59-u+9)/12)+1;c.stop(),c.play(i+o,0,{duration:60/a*b})}}),1e3*(h-r))),s===i.notesList.length-1&&o.push(setTimeout((function(){t.isPreview=!1,t.focusIndex=t.lastFocus,t.distIndex=t.focusIndex,o.forEach((function(n){return clearInterval(n)})),n.instruments.sampler.releaseAll(),e.tune.setState(t)}),1e3*(h-r+60/a*b)))},l=t.focusIndex;l<i.notesList.length;l++)s(l);ai(1e3*r,n,e,o),e.system.setReserveTasks(o),e.tune.setState(t)}(o.store,o)}},this.backing={openBackingEditor:function(){var n=o.store.scoreState,e=o.store.scoreData.chordList[n.focusIndex].detail,t=n.elementCacheList[n.focusIndex];n.hideMenu="backing",o.score.setScoreState(n);var i=o.backing.getInitVoicingTable(e.backing.voicingList);o.backing.setState({chordInfo:{symbolKey:e.symbolKey,beatLen:e.beatLen,minute:e.minute,chordRoot:(e.root.index+t.keyIndex)%12},voicingTable:i,pattern:null})},closeBackingEditor:function(){var n=o.store.scoreState;n.hideMenu="none",o.score.setScoreState(n)},setState:function(n){o.dispatch(i.SET_BACKING_STATE,{backingState:n})},getInitialLayer:function(){return{noteDivList:[{rate:4,isDot:!1,div3:0}],table:[[null]],velocityList:[5]}},getInitVoicingTable:function(n){for(var e=new Array(8),t=function(t){e[t]=new Array(6);for(var i=e[t],o=function(i){var o=n.find((function(n){if(n.octave===t&&n.struct===i)return n}));e[t][i]=null!=o},c=0;c<i.length;c++)o(c)},i=0;i<e.length;i++)t(i);return e},applyBackingToChordData:function(){var n=o.store.scoreState,e=o.store.scoreData,t=e.chordList[n.focusIndex].detail,i=o.store.backingState,c=i.voicingTable,a=t.backing;if(a.voicingList.length=0,null!=c)for(var r=0;r<c.length;r++)for(var s=0;s<c[r].length;s++)c[r][s]&&a.voicingList.push({octave:r,struct:s});if(null==i.pattern)t.backing.pattern=null;else{var l=i.pattern.channels.length,d=[];i.pattern.layers.forEach((function(n){var e=n.noteDivList,t=[];n.table.forEach((function(n,e){n.forEach((function(n,i){t.push({x:i,y:e,val:null==n?"-":n.signal})}))})),d.push({divs:e,signals:t})})),a.pattern={channelSize:l,layers:d}}o.score.setScoreData(e)},addPatternColumn:function(){var n=o.store.backingState,e=n.pattern,t=e.layers[e.layerIndex],i=t.noteDivList,c={rate:i[e.lenIndex].rate,div3:0,isDot:!1};i.splice(e.lenIndex+1,0,c),t.table.forEach((function(n){n.splice(e.lenIndex+1,0,null)})),o.backing.setState(n)},movePatternColumn:function(n){var e=o.store.backingState,t=e.pattern,i=t.layers[t.layerIndex],c=t.lenIndex;(c+=1*(n?1:-1))>=0&&c<=i.noteDivList.length-1&&(t.lenIndex=c),o.backing.setState(e)},moveChannelIndex:function(n){var e=o.store.backingState,t=e.pattern,i=t.channelIndex;(n?i<t.channels.length-1:i>0)&&(t.channelIndex+=n?1:-1),o.backing.setState(e)},setCurrentDivRate:function(n){var e=o.store.backingState,t=e.pattern;t.layers[t.layerIndex].noteDivList[t.lenIndex].rate=n,o.backing.setState(e)},toggleCurrentDivHalf:function(){var n=o.store.backingState,e=n.pattern,t=e.layers[e.layerIndex].noteDivList[e.lenIndex];t.isDot=!t.isDot,o.backing.setState(n)},getNotes:function(){var n=o.store.backingState.pattern;return n.layers[n.layerIndex].table[n.channels.length-1-n.channelIndex][n.lenIndex]},setNotes:function(n){var e=o.store.backingState,t=e.pattern;t.layers[t.layerIndex].table[t.channels.length-1-t.channelIndex][t.lenIndex]=n,o.backing.setState(e)},deleteColumn:function(){var n=o.store.backingState,e=n.pattern,t=e.layers[e.layerIndex];t.table.forEach((function(n){n.splice(e.lenIndex,1)})),t.noteDivList.splice(e.lenIndex,1),e.lenIndex--,o.backing.setState(n)},changeLayer:function(){var n=o.store.backingState,e=n.pattern;e.layerIndex=0===e.layerIndex?1:0,e.lenIndex=0,e.channelIndex=-1,o.backing.setState(n)}},this.store=e,this.dispatch=function(n,e){return t({type:n,payload:e})}},bi={userEnv:{keyConfig:{note:{prevElement:"ArrowLeft",nextElement:"ArrowRight",prevSection:"ArrowUp",nextSection:"ArrowDown",addChord:"a",addSection:"s",addChange:"f",deleteCur:"Delete",editMode:"Shift",incRoot:"ArrowUp",decRoot:"ArrowDown",incBeat:"ArrowRight",decBeat:"ArrowLeft",symbolMode:"c"}},colorProps:{entryBackground:"#e2a9ae"}},systemState:{isSplash:!0,mainChannelIndex:0,scoreTabIndex:0,dialogMode:"none"},backingState:null,scoreState:{isTune:!1,initialBeat:4,focusIndex:-1,elementCacheList:[],sectionCacheList:[],keySwitch:{editMode:!1,symbolMode:!1},symbolMng:null,hideMenu:"none",isPreview:!1,isSolo:!1},melodyState:{focusIndex:-1,distIndex:-1,lastFocus:-1,quantize:4,beatWidth:120,mouseState:{isPut:!1,lock:{x:0,y:0},width:0,prevRight:0,nextLeft:0,notesState:{index:-1,side:"normal",isResize:!1,isMove:!1},curChord:null,mousePitchIndex:-1,mouseMeasurePos:-1},soundfontInfo:{name:"violin",gain:5},keySwitch:{scaleMode:!1,octave:!1,resize:!1,move:!1,shift:!1},isPreview:!1,isSolo:!1},scoreData:{chordList:[],notesList:[]},instruments:{sampler:new Qt.a({C2:"https://dl.dropbox.com/s/ebta7izw1zdphki/KEPSREC036.mp3?dl=0",D2:"https://dl.dropbox.com/s/d8bel1c9d1utk25/KEPSREC038.mp3?dl=0",E2:"https://dl.dropbox.com/s/qe48401jgb2cewo/KEPSREC040.mp3?dl=0",F2:"https://dl.dropbox.com/s/3s7sc8btjob8gru/KEPSREC041.mp3?dl=0",G2:"https://dl.dropbox.com/s/zzxvr0p4j37n9i0/KEPSREC043.mp3?dl=0",A2:"https://dl.dropbox.com/s/vcrs90e06djj7sx/KEPSREC045.mp3?dl=0",B2:"https://dl.dropbox.com/s/yvkrz0ngkijjngq/KEPSREC047.mp3?dl=0",C3:"https://dl.dropbox.com/s/qjkoqqdkqwtnctj/KEPSREC048.mp3?dl=0",D3:"https://dl.dropbox.com/s/jjyithbiwmxfn5m/KEPSREC050.mp3?dl=0",E3:"https://dl.dropbox.com/s/2s4p06g2gw2lcf7/KEPSREC052.mp3?dl=0",F3:"https://dl.dropbox.com/s/7mo0mm2bbc3im60/KEPSREC053.mp3?dl=0",G3:"https://dl.dropbox.com/s/qqrrlwogz0orihq/KEPSREC055.mp3?dl=0",A3:"https://dl.dropbox.com/s/o6oycmolcn7rhbs/KEPSREC057.mp3?dl=0",B3:"https://dl.dropbox.com/s/3s05r18hsd19t6e/KEPSREC059.mp3?dl=0",C4:"https://dl.dropbox.com/s/9fgqyu7hsj8fncc/KEPSREC060.mp3?dl=0",D4:"https://dl.dropbox.com/s/ja1d04dgy9v98x9/KEPSREC062.mp3?dl=0",E4:"https://dl.dropbox.com/s/y2379pix35gto7u/KEPSREC064.mp3?dl=0",F4:"https://dl.dropbox.com/s/h1sq8yikmdfvzqc/KEPSREC065.mp3?dl=0",G4:"https://dl.dropbox.com/s/hvzvcrm1emfum0d/KEPSREC067.mp3?dl=0",A4:"https://dl.dropbox.com/s/vy56xbt7w78o41o/KEPSREC069.mp3?dl=0",B4:"https://dl.dropbox.com/s/e9kv77pym1wtujc/KEPSREC071.mp3?dl=0",C5:"https://dl.dropbox.com/s/0v042zfk67q4a8d/KEPSREC072.mp3?dl=0",C6:"https://dl.dropbox.com/s/3u2c7qsmhnse575/KEPSREC084.mp3?dl=0"}).toDestination(),piano:null,soundfontPlayer:null},refs:{harmonize:{note:{}},melody:{table:null,measure:null,chord:null,pitch:null}},reserveTasks:[]},ui=t(1),hi=function(){var n=Object(o.useContext)(uu),e=n.store,t=(n.dispatcher,"none"!==e.systemState.dialogMode);return Object(ui.jsx)(xi,{isDisplay:t,children:Object(ui.jsx)(pi,{})})},xi=d.b.div(D||(D=Object(s.a)(["\n    display: ",";\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #000000d8;\n    z-index: 10;\n"])),(function(n){return n.isDisplay?"block":"none"})),pi=d.b.div(L||(L=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 50px;\n    top: 50px;\n    width: 500px;\n    height: 400px;\n    background-color: #464646cc;\n    border: 1px solid #dadada;\n"]))),fi=function(n){var e=Object(o.useState)(n.activeNo),t=Object(l.a)(e,2),i=t[0],c=t[1];return Object(o.useEffect)((function(){c(n.activeNo)}),[n.activeNo]),Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsx)(vi,{children:n.tabElements.map((function(e,t){return Object(ui.jsx)(ji,{name:e.name,icon:e.icon,isActive:t==i,isDisable:e.disable,selectTab:function(){return function(e){void 0!=n.selectTabIndex?n.selectTabIndex(e):c(e)}(t)}},t)}))}),Object(ui.jsx)(Oi,{children:n.tabElements.map((function(n,e){return Object(ui.jsx)(gi,{cont:n.cont,isActive:e===i},e)}))})]})},ji=function(n){return Object(ui.jsxs)(ki,{isActive:n.isActive,onClick:function(){return n.selectTab()},children:[Object(ui.jsx)(yi,{children:n.icon}),Object(ui.jsx)(Si,{children:n.name})]})},gi=function(n){return Object(ui.jsx)(mi,{isActive:n.isActive,children:n.cont})},vi=d.b.div(z||(z=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    margin-right: 5px;\n    height: 100%;\n    background-color: #b9b9b9;\n    border: 1px solid #707070;\n    box-sizing: border-box;\n    border-radius: 10px 0 0 10px;\n    vertical-align: top;\n    box-shadow: 1px 2px 12px #aaaaaa;\n"]))),Oi=d.b.div(A||(A=Object(s.a)(["\n    display: inline-block;\n    background-color: #b9b9b9;\n    border: 1px solid #707070;\n    box-sizing: border-box;\n    width: calc(100% - 105px);\n    height: 100%;\n    border-radius: 0 6px 6px 0;\n    box-shadow: 1px 2px 12px #aaaaaa;\n"]))),mi=d.b.div(T||(T=Object(s.a)(["\n    /* margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px); */\n    width: 100%;\n    height: 100%;\n    /* background-color: #ece6e6; */\n    ","\n"])),(function(n){return n.isActive?Object(d.a)(F||(F=Object(s.a)(["display: inline-block;"]))):Object(d.a)(M||(M=Object(s.a)(["display: none;"])))})),ki=d.b.div(N||(N=Object(s.a)(["\n    display: inline-block;\n    width: 90px;\n    height: 90px;\n    margin: 5px 0 0 5px;\n    border-radius: 10px;\n    ","\n    transition: background-color 500ms;\n    & *{\n        transition: color 150ms;\n    }\n    // \u30a2\u30af\u30c6\u30a3\u30d6\u3058\u3083\u306a\u3044\u6642\u3060\u3051hover\u8981\u7d20\u3092\u4ed8\u52a0\n    ","\n"])),(function(n){return n.isActive?Object(d.a)(R||(R=Object(s.a)(["\n                background-color: #e4e3e1;\n                border: 1px solid #949494\n            "]))):Object(d.a)(K||(K=Object(s.a)(["\n                background-color: #d1d1d1;\n                opacity: 0.8;\n            "])))}),(function(n){return n.isActive?"":Object(d.a)(P||(P=Object(s.a)(["\n        &:hover {\n            & *{\n                transition: color 150ms;\n                /* background-color: #e2d6d6; */\n                text-shadow: 1px 2px 22px #f7f7f7ea;\n                color: #a7a7a7;\n            }\n        }\n    "])))})),yi=(Object(d.a)(_||(_=Object(s.a)(["\n    text-shadow: 1px 2px 22px #f7f7f7cf;\n    color: #a3a3a3;\n"]))),d.b.div(B||(B=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 60px;\n    /* background-color: #df828221; */\n    font-size: 50px;\n    color: #757575;\n    text-align: center;\n    padding-top: 5px;\n    box-sizing: border-box;\n"])))),Si=d.b.div(q||(q=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    /* background-color: #8482df20; */\n    font-size: 20px;\n    font-weight: 600;\n    color: #757575;\n    text-align: center;\n"]))),wi=t(24),Ii=t(18),Ci=t(9),Ei=function(n){var e=Object(o.useState)(n.activeNo),t=Object(l.a)(e,2),i=t[0],c=t[1];return Object(o.useEffect)((function(){c(n.activeNo)}),[n.activeNo]),Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsx)(zi,{children:n.tabElements.map((function(e,t){return Object(ui.jsx)(Di,{name:e.name,isActive:t==i,isDisable:e.disable,selectTab:function(){return function(e){void 0!=n.selectTabIndex?n.selectTabIndex(e):c(e)}(t)}},t)}))}),Object(ui.jsx)(Ai,{children:n.tabElements.map((function(n,e){return Object(ui.jsx)(Li,{cont:n.cont,isActive:e===i},e)}))})]})},Di=function(n){return Object(ui.jsx)(Mi,{isDisable:n.isDisable,isActive:n.isActive,onClick:function(){return n.selectTab()},children:n.name})},Li=function(n){return Object(ui.jsx)(Ti,{isActive:n.isActive,children:n.cont})},zi=d.b.div(W||(W=Object(s.a)(["\n    display: inline-block;\n    height: 35px;\n"]))),Ai=d.b.div(U||(U=Object(s.a)(["\n    display: block;\n    background-color: #999999;\n    height: calc(100% - 35px);\n    border-radius: 0 6px 6px 6px;\n    box-shadow: 0 2px 0 0 #000b3a48;\n"]))),Ti=d.b.div(V||(V=Object(s.a)(["\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px);\n    ","\n"])),(function(n){return n.isActive?Object(d.a)(J||(J=Object(s.a)(["display: inline-block;"]))):Object(d.a)(G||(G=Object(s.a)(["display: none;"])))})),Mi=d.b.div(Y||(Y=Object(s.a)(["\n    display: inline-block;\n    /* width: 100px; */\n    padding: 0 10px;\n    ","\n    /* opacity: 0.7; */\n    user-select: none;\n    margin-right: 6px;\n    font-weight: 600;\n    box-sizing: border-box;\n    line-height: 30px;\n    vertical-align: bottom;\n    transition: padding 100ms;\n"])),(function(n){return n.isActive?Object(d.a)(H||(H=Object(s.a)(["\n                color: #ebebeb;\n                padding: 0 35px;\n                background-color: #999999;\n                height: 35px;\n                font-size: 24px;\n                border-radius: 3px 15px 0 0;\n                text-shadow: 1px 2px 3px #00000065;\n            "]))):Object(d.a)(X||(X=Object(s.a)(["\n                height: 100%;\n                color: #555;\n                /* background-color: #90909b; */\n                background: linear-gradient(to bottom, #999999, #7a7a7a);\n                height: 30px;\n                font-size: 18px;\n                border-radius: 3px 10px 0 0;\n                ","\n            "])),n.isDisable?Object(d.a)(Q||(Q=Object(s.a)(["\n                    pointer-events: none;\n                    opacity: 0.7;\n                "]))):"")})),Fi=(d.b.div(Z||(Z=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n"]))),d.b.div($||($=Object(s.a)(["\n    display: inline-block;\n"]))),d.b.div(nn||(nn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n"]))),d.b.div(en||(en=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    font-size: 18px;\n    font-weight: 600;\n    color: black;\n    line-height: 18px;\n"]))),Object(d.a)(tn||(tn=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    font-size: 24px;\n    font-weight: 600;\n    text-align: center;\n    color: black;\n    line-height: 24px;\n    box-sizing: border-box;\n"])))),Ni=Object(d.a)(on||(on=Object(s.a)(["\n    opacity: 0.7;\n    pointer-events: none;\n"]))),Ri=function n(e){var t=this;Object(u.a)(this,n),this.scoreData=void 0,this.curIndex=void 0,this.addChord=function(n,e,i){var o=C(i),c=void 0==o.attr?{voicingList:[],pattern:null}:Zt(o.attr);t.scoreData.chordList.splice(t.curIndex,0,{type:"chord",detail:{beatLen:n,minute:{head:0,tail:0},root:e,on:null,symbolKey:i,backing:c}}),t.curIndex++},this.addChordDiatonic=function(n,e){var i=w[e];t.addChord(n,i.root,i.symbolKey)},this.getScoreData=function(){return t.scoreData},this.scoreData={chordList:[{type:"init",detail:e},{type:"fixed",detail:{fixed:"Start"}},{type:"section",detail:{labelName:"Section"}},{type:"fixed",detail:{fixed:"End"}}],notesList:[]},this.curIndex=3},Ki=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=Object(o.useState)(""),c=Object(l.a)(i,2),a=c[0],r=c[1];return Object(ui.jsxs)(Pi,{children:[Object(ui.jsxs)(_i,{children:[Object(ui.jsx)(qi,{onClick:function(){r(JSON.stringify({chordList:[{type:"init",detail:{keyIndex:0,bpm:100,scale:"major",timeSignature:"4/4"}},{type:"fixed",detail:{fixed:"Start"}},{type:"section",detail:{labelName:"Section"}},{type:"chord",detail:{beatLen:4,minute:{head:0,tail:0},root:null,on:null,symbolKey:"major",backing:{voicingList:[],pattern:null}}},{type:"fixed",detail:{fixed:"End"}}],notesList:[]}))},children:"Create an empty score."}),Object(ui.jsx)(qi,{onClick:function(){var n=new Ri({keyIndex:0,bpm:100,scale:"major",timeSignature:"4/4"});n.addChordDiatonic(2,0),n.addChordDiatonic(2,4),n.addChordDiatonic(2,5),n.addChordDiatonic(2,2),n.addChordDiatonic(2,3),n.addChordDiatonic(2,0),n.addChordDiatonic(2,1),n.addChordDiatonic(2,4),n.addChordDiatonic(2,0),r(JSON.stringify(n.getScoreData()))},children:"\u2160\u2192\u2164\u2192\u2165\u2192\u2162m\u2192\u2163\u2192\u2160\u2192\u2161m\u2192\u2164\u2192\u2160"}),Object(ui.jsx)(qi,{onClick:function(){var n=new Ri({keyIndex:0,bpm:100,scale:"major",timeSignature:"4/4"});n.addChordDiatonic(2,5),n.addChordDiatonic(2,3),n.addChordDiatonic(2,4),n.addChordDiatonic(2,0),n.addChordDiatonic(2,5),n.addChordDiatonic(2,3),n.addChordDiatonic(2,4),n.addChordDiatonic(2,0),n.addChordDiatonic(2,0),r(JSON.stringify(n.getScoreData()))},children:"\u2165m\u2192\u2163\u2192\u2164\u2192\u2160\u2192\u2165m\u2192\u2163\u2192\u2164\u2192\u2160"})]}),Object(ui.jsxs)(Bi,{children:[Object(ui.jsx)(Wi,{value:a,onChange:function(n){return r(n.target.value)}}),Object(ui.jsxs)(Ui,{children:[Object(ui.jsx)(Vi,{onClick:function(){r(JSON.stringify(e.scoreData))},children:"Reload"}),Object(ui.jsx)(Vi,{onClick:function(){var n=JSON.parse(a);t.score.setScoreData(n),e.scoreState.focusIndex=2,t.score.setScoreState(Object(b.a)({},e.scoreState)),t.score.setScoreTabIndex(1)},children:"Apply"})]})]})]})},Pi=d.b.div(cn||(cn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #7e7e7e;\n    text-align: left;\n"]))),_i=d.b.div(an||(an=Object(s.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    background-color: #7e7e7e;\n    text-align: left;\n    vertical-align: top;\n"]))),Bi=d.b.div(rn||(rn=Object(s.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    background-color: #888999;\n    text-align: left;\n    vertical-align: top;\n"]))),qi=d.b.div(sn||(sn=Object(s.a)(["\n    \n    display: inline-block;\n    width: calc(100% - 50px);\n    height: 50px;\n    margin: 20px 25px;\n    border: 2px solid #cacaca;\n    /* background: linear-gradient(to bottom, #585858, #a7a7a7, #585858); */\n    background-color: #000;\n    color: #ccc;\n    font-size: 30px;\n    font-weight: 600;\n    text-align: left;\n    box-sizing: border-box;\n    padding-left: 20px;\n    border-radius: 6px;\n\n    &:hover {\n        background-color: #616161;\n    }\n"]))),Wi=d.b.textarea(ln||(ln=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    margin: 4px 0 0 4px;\n    height: calc(100% - 44px);\n    /* background-color: #7e7e7e; */\n    text-align: left;\n    font-size: 20px;\n    resize: none;\n    box-sizing: border-box;\n    color: #060053;\n"]))),Ui=d.b.div(dn||(dn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 40px;\n    background-color: #5f5f5f;\n    box-sizing: border-box;\n    text-align: left;\n"]))),Vi=d.b.div(bn||(bn=Object(s.a)(["\n    ","\n    width: 100px;\n    background-color: #afafaf;\n    border: 1px solid #4d4d4d;\n    color: #292929;\n    border-radius: 4px;\n    margin: 5px 0 0 4px;\n    &:hover {\n        background-color: #c4c4c4;\n    }\n"])),Fi),Gi=function(n){var e=Object(o.useContext)(uu),t=e.store,i=e.dispatcher,c=t.scoreState,a=t.scoreData.chordList[c.focusIndex].detail;Object(o.useEffect)((function(){var n=C(a.symbolKey),e=null==n.base?null:C(n.base),t=[],o=[],r=[],s=0;if(null==e)t.push("major"),t.push("minor"),t.push("suspend4th"),t.push("diminish"),t.push("augument"),t.push("minor-minus5");else{y.forEach((function(n){n.key===e.key&&o.push(n.key)}));var l=E(e.key);y.forEach((function(n){l.includes(n.key)&&t.push(n.key)}))}t.forEach((function(n,e){n===a.symbolKey&&(s=e)}));var d=E(n.key);y.forEach((function(n){d.includes(n.key)&&r.push(n.key)})),c.symbolMng={index:s,curLine:t,parentLine:o,childrenLine:r},i.score.setScoreState(c)}),[a.symbolKey]);var r=c.symbolMng,s=[],l=[],d=[];return null!=r&&(s.push(Object(ui.jsx)(Hi,{children:"Base"},s.length)),r.parentLine.forEach((function(n,e){var t=C(n);s.push(Object(ui.jsxs)(Xi,{isActive:!1,children:["[",null===t||void 0===t?void 0:t.name,"]"]},s.length))})),l.push(Object(ui.jsx)(Hi,{children:"Current"},l.length)),r.curLine.forEach((function(n,e){var t=C(n);l.push(Object(ui.jsxs)(Xi,{isActive:r.index===e,children:["[",null===t||void 0===t?void 0:t.name,"]"]},l.length))})),d.push(Object(ui.jsx)(Hi,{children:"Derives"},d.length)),r.childrenLine.forEach((function(n,e){var t=C(n);d.push(Object(ui.jsxs)(Xi,{isActive:!1,children:["[",null===t||void 0===t?void 0:t.name,"]"]},d.length))}))),Object(ui.jsxs)(Ji,{children:[Object(ui.jsx)(Yi,{children:s}),Object(ui.jsx)(Yi,{children:l}),Object(ui.jsx)(Yi,{children:d})]})},Ji=d.b.div(un||(un=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 30;\n    top: 100px;\n    left: 0;\n    width: 250px;\n    height: 160px;\n    background-color: #a9cfd422;\n    border: 2px solid #000000ec;\n    box-sizing: border-box;\n    text-align: center;\n    opacity: 0.9;\n    box-shadow: 0 4px 16px 4px #000b3a48;\n    backdrop-filter: blur(6px);\n"]))),Yi=d.b.div(hn||(hn=Object(s.a)(["\n    display: inline-block;\n    width: 80px;\n    height: 100%;\n    /* background-color: #e6e6e6; */\n    margin: 1px;\n    vertical-align: top;\n"]))),Hi=d.b.div(xn||(xn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    box-sizing: border-box;\n    /* background-color: #78dab4;\n    border: 1px solid #000000; */\n    background: linear-gradient(to bottom, #7a9ea3, #78cfda, #7a9ea3);\n    /* background: linear-gradient(to bottom, #a37a7a, #da7878, #a37a7a); */\n    margin: 1px;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: #f3f3f3;\n    line-height: 17px;\n"]))),Xi=d.b.div(pn||(pn=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: 20px;\n    box-sizing: border-box;\n    background-color: #dbdbdb;\n    ","\n    border: 1px solid #000000;\n    margin: 1px;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: #000000;\n    line-height: 16px;\n"])),(function(n){return n.isActive?Object(d.a)(fn||(fn=Object(s.a)(["background-color: #ffef64;"]))):""})),Qi=function(n){var e,t=Object(o.useContext)(uu),i=t.store,c=(t.dispatcher,i.scoreState),a=(i.scoreData.chordList[n.index],c.elementCacheList[n.index]),r=null===(e=C(n.detail.symbolKey))||void 0===e?void 0:e.name,s=null;null!=n.detail.root&&(j({index:n.detail.root.index,isFlat:n.detail.root.isFlat}),s=O({index:n.detail.root.index,isFlat:n.detail.root.isFlat},a.keyIndex),null!=n.detail.on&&(j({index:n.detail.on.index,isFlat:n.detail.on.isFlat}),O({index:n.detail.on.index,isFlat:n.detail.root.isFlat},a.keyIndex)));var l=-1,d=c.elementCacheList[n.index-1];3!==n.index&&d.bar===a.bar||(l=a.bar+1);var b=-1!==l&&0!==a.beat,u="-";return null!=s&&(u="".concat(s).concat(r)),Object(ui.jsxs)(eo,{children:[Object(ui.jsx)(to,{children:u}),Object(ui.jsxs)(io,{children:[Object(ui.jsx)(Zi,{isError:b,children:-1===l?Object(ui.jsx)(ui.Fragment,{children:"\xa0"}):l}),Object(ui.jsxs)(no,{children:[Object(ui.jsx)("span",{children:0===a.beat?Object(ui.jsx)(ui.Fragment,{children:"\xa0"}):a.beat}),0===a.minute?"":" (".concat(a.minute,")")]}),Object(ui.jsxs)($i,{children:[Math.round(a.pastSecond/100)/10,"s"]})]})]})},Zi=d.b.div(jn||(jn=Object(s.a)(["\n    font-size: 12px;\n    font-weight: 600;\n    color: #c72929;\n    ","\n    box-sizing: border-box;\n"])),(function(n){return n.isError?Object(d.a)(gn||(gn=Object(s.a)(["\n        background-color: #ee5959;\n        color: #ffffff;\n        /* border: 2px solid #c72929; */\n        border-radius: 2px;\n    "]))):""})),$i=d.b.div(vn||(vn=Object(s.a)(["\n    font-size: 12px;\n    font-weight: 600;\n    color: #000000a0;\n    box-sizing: border-box;\n"]))),no=d.b.div(On||(On=Object(s.a)([""]))),eo=d.b.div(mn||(mn=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 4;\n    width: 100%;\n    height: 50px;\n    // background-color: #00ff2a11;\n    bottom: 0;\n    left: 0;\n    box-sizing: border-box;\n    text-align: center;\n    box-sizing: border-box;\n"]))),to=d.b.div(kn||(kn=Object(s.a)(["\n    display: inline-block;\n    // width: calc(100% - ","px);\n    width: 100%;\n    height: 18px;\n    // background-color: #ffc4001c;\n    font-size: 12px;\n    font-weight: 600;\n    color: #2b2b2b;\n"])),60),io=(d.b.div(yn||(yn=Object(s.a)(["\n    display: inline-block;\n    width: 56px;\n    height: 30px;\n    background-color: #1100ff1c;\n"]))),d.b.div(Sn||(Sn=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 5;\n    width: ","px;\n    height: 100%;\n    // background-color: #0000ff11;\n    top: 0;\n    left: -","px;\n    box-sizing: border-box;\n    text-align: center;\n    \n    & "," {\n    }\n    & "," {\n        font-size: 12px;\n        color: #333;\n        & span {\n            color: #00a;\n            font-weight: 600;\n        }\n    }\n"])),50,25,Zi,no)),oo=function(n){var e=Object(o.useContext)(uu),t=e.store,i=(e.dispatcher,t.scoreState),c=i.elementCacheList[n.index].sectionNo,a=i.sectionCacheList[c],r=Math.floor(a.beatSum/4),s=a.beatSum%4;return Object(ui.jsxs)(co,{children:[Object(ui.jsxs)(ao,{children:[r,0===s?"":" (".concat(s,")")]}),Object(ui.jsx)(ro,{})]})},co=d.b.div(wn||(wn=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 4;\n    width: 100%;\n    height: 50px;\n    /* background-color: #ff000011; */\n    bottom: 0;\n    left: 0;\n    box-sizing: border-box;\n    text-align: center;\n    box-sizing: border-box;\n"]))),ao=d.b.div(In||(In=Object(s.a)(["\n    display: block;\n    position: relative;\n    /* min-width: 80px; */\n    height: 16px;\n    font-size: 14px;\n    font-weight: 600;\n    color: #474386cf;\n    text-align: center;\n    line-height: 16px;\n    /* background-color: #00000042; */\n"]))),ro=d.b.div(Cn||(Cn=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 8px;\n    height: calc(100% - 16px);\n    background-color: #db0000cf;\n    border-radius: 4px 4px 0 0;\n"]))),so=function(n){return Object(ui.jsxs)(lo,{children:[Object(ui.jsx)(uo,{children:"Modulation"}),Object(ui.jsx)(ho,{children:"Domm+1"})]})},lo=d.b.div(En||(En=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    /* background-color: red; */\n"]))),bo=d.b.div(Dn||(Dn=Object(s.a)(["\n    display: block;\n    position: relative;\n    min-width: 100px;\n    height: 20px;\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 20px;\n    /* background-color: #1000eb42; */\n    margin-top: 3px;\n"]))),uo=Object(d.b)(bo)(Ln||(Ln=Object(s.a)(["\n    color: #0014cc;\n"]))),ho=Object(d.b)(bo)(zn||(zn=Object(s.a)(["\n    color: #5e5e5e;\n"]))),xo=function(n){var e,t,i,c=Object(o.useContext)(uu),a=c.store,r=(c.dispatcher,a.scoreState),s=r.elementCacheList[r.focusIndex],l=n.detail.minute,d=a.scoreState.keySwitch,b=null,u=null;null!=n.detail.root&&(b=j({index:n.detail.root.index,isFlat:n.detail.root.isFlat}),O({index:n.detail.root.index,isFlat:n.detail.root.isFlat},s.keyIndex),null!=n.detail.on&&(u=j({index:n.detail.on.index,isFlat:n.detail.on.isFlat}),O({index:n.detail.on.index,isFlat:n.detail.root.isFlat},s.keyIndex)));var h=null===(e=C(n.detail.symbolKey))||void 0===e?void 0:e.name;return Object(o.useMemo)((function(){return Object(ui.jsxs)(po,{children:[Object(ui.jsx)(vo,{isSwitch:d.editMode&&n.isCurrent,scaleRelation:null!=b&&I.includes(b+h)?"diatonic":"none",isOnChordScale:null!=n.detail.on&&[0,2,4,5,7,9,11].includes(n.detail.on.index),children:null==b?"none":Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsx)(fo,{children:b}),Object(ui.jsx)(jo,{children:h}),Object(ui.jsx)(go,{children:null==u?"":"/".concat(u)})]})}),Object(ui.jsx)(Oo,{isSwitch:d.editMode&&n.isCurrent,children:function(){for(var e=[],t=0;t<n.detail.beatLen;t++){var i="normal",o=0;if([0,n.detail.beatLen-1].includes(t)){var c=0===t?l.head:l.tail;0!==c&&(i=c>0?"long":"short",o=Math.abs(c))}e.push(Object(ui.jsx)(mo,{lenType:i,valueType:o},t))}return e}()})]})}),[n.isCurrent,n.detail.beatLen,null===(t=n.detail.root)||void 0===t?void 0:t.index,null===(i=n.detail.on)||void 0===i?void 0:i.index,n.detail.symbolKey,r.keySwitch.editMode,s.keyIndex,n.detail.minute.head,n.detail.minute.tail])},po=d.b.div(An||(An=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    /* border: 1px solid #c5c5cc; */\n    /* padding: 4px; */\n    box-sizing: border-box;\n    /* background-color: #00000013; */\n"]))),fo=d.b.div(Tn||(Tn=Object(s.a)([""]))),jo=d.b.div(Mn||(Mn=Object(s.a)([""]))),go=d.b.div(Fn||(Fn=Object(s.a)([""]))),vo=d.b.div(Nn||(Nn=Object(s.a)(["\n    display: block;\n    /* width: 100%; */\n    height: 28px;\n    /* background-color: #f700d616; */\n    ","\n    font-size: 20px;\n    /* color: #4e516394; */\n    text-align: center;\n\n    & * {\n        display: inline-block;\n    }\n\n    & "," {\n        color: #4e5163cc;\n        ","\n        font-weight: 600;\n    }\n    & "," {\n        color: #4e5163cc;\n        ","\n    }\n    & "," {\n        color: #422e3099;\n        ","\n        font-weight: 600;\n    }\n"])),(function(n){return n.isSwitch?Object(d.a)(Rn||(Rn=Object(s.a)(["background-color: #0004f729;"]))):""}),fo,(function(n){return"diatonic"===n.scaleRelation?Object(d.a)(Kn||(Kn=Object(s.a)(["color: #4e516394;"]))):"secondaly"===n.scaleRelation?Object(d.a)(Pn||(Pn=Object(s.a)(["color: #00116e93;"]))):Object(d.a)(_n||(_n=Object(s.a)(["color: #70000093;"])))}),jo,(function(n){return"diatonic"===n.scaleRelation?Object(d.a)(Bn||(Bn=Object(s.a)(["color: #4e516394;"]))):"secondaly"===n.scaleRelation?Object(d.a)(qn||(qn=Object(s.a)(["color: #00116e93;"]))):Object(d.a)(Wn||(Wn=Object(s.a)(["color: #70000093;"])))}),go,(function(n){return n.isOnChordScale?"":Object(d.a)(Un||(Un=Object(s.a)(["color: #70000093;"])))})),Oo=(d.b.div(Vn||(Vn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 22px;\n    /* background-color: #d37979b2; */\n    font-size: 14px;\n    /* font-weight: 600; */\n    color: #9c5f74;\n    text-align: center;\n"]))),d.b.div(Gn||(Gn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    ","\n    /* background-color: #d8ccccb1; */\n    text-align: center;\n"])),(function(n){return n.isSwitch?Object(d.a)(Jn||(Jn=Object(s.a)(["background-color: #0004f729;"]))):""}))),mo=d.b.div(Yn||(Yn=Object(s.a)(["\n    display: inline-block;\n    width: 8px;\n    ","\n    height: calc(100% - 4px);\n    margin: 2px 2px 0 2px;\n    background-color: #e0e0e088;\n    ","\n    /* background: linear-gradient(to bottom, #9b9b9bc3, #85858514); */\n    border: solid 1px #0000004e;\n    /* border-radius: 2px; */\n    box-sizing: border-box;\n"])),(function(n){return"short"===n.lenType?Object(d.a)(Hn||(Hn=Object(s.a)(["\n        width: 4px;\n    "]))):"long"===n.lenType?Object(d.a)(Xn||(Xn=Object(s.a)(["\n        width: 12px;\n    "]))):""}),(function(n){return.5===n.valueType?Object(d.a)(Qn||(Qn=Object(s.a)(["\n        background-color: #db828287;\n    "]))):.25===n.valueType?Object(d.a)(Zn||(Zn=Object(s.a)(["\n        background-color: #9394dd87;\n    "]))):""})),ko=function(n){var e=[];return e.push(Object(ui.jsx)(So,{},0)),e.push(Object(ui.jsx)(wo,{children:n.detail.fixed},1)),Object(ui.jsx)(yo,{children:"Start"===n.detail.fixed?e:e.reverse()})},yo=d.b.div($n||($n=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: calc(100% - ","px);\n    /* border: 1px solid #00000083; */\n    background-color: #c2c2c237;\n"])),15),So=d.b.div(ne||(ne=Object(s.a)(["\n    display: inline-block;\n    width: 10px;\n    height: 100%;\n    background-color: #d1d1d1;\n    vertical-align: middle;\n"]))),wo=d.b.div(ee||(ee=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 10px);\n    height: 48px;\n    /* background-color: #47438678; */\n    font-size: 26px;\n    font-weight: 600;\n    font-style: italic;\n    line-height: 46px;\n    color: #1b003d6f;\n    text-align: center;\n    vertical-align: middle;\n"]))),Io=function(n){return Object(ui.jsxs)(Co,{children:[Object(ui.jsxs)(Eo,{children:[Object(ui.jsx)(Do,{children:"Scale:"}),Object(ui.jsx)(Lo,{children:n.detail.scale})]}),Object(ui.jsxs)(Eo,{children:[Object(ui.jsx)(Do,{children:"Key:"}),Object(ui.jsx)(Lo,{children:m[n.detail.keyIndex]})]}),Object(ui.jsxs)(Eo,{children:[Object(ui.jsx)(Do,{children:"tempo:"}),Object(ui.jsx)(Lo,{children:n.detail.bpm})]}),Object(ui.jsxs)(Eo,{children:[Object(ui.jsx)(Do,{children:"Rate:"}),Object(ui.jsx)(Lo,{children:n.detail.timeSignature})]})]})},Co=d.b.div(te||(te=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100px;\n"]))),Eo=d.b.div(ie||(ie=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100px;\n    height: 16px;\n    margin: 1px 0;\n    /* background-color: #0066ff16; */\n    /* border-bottom: 1px solid #000; */\n    font-size: 12px;\n    font-weight: 600;\n    color: #2a2a2c;\n    line-height: 16px;\n"]))),Do=d.b.div(oe||(oe=Object(s.a)(["\n    display: inline-block;\n    margin: 0 2px;\n    width: 50px;\n    height: 100%;\n    color: #14a800;\n    /* background-color: #ff00b329; */\n"]))),Lo=d.b.div(ce||(ce=Object(s.a)(["\n    display: inline-block;\n    margin: 0 2px;\n    width: 40px;\n    height: 100%;\n    color: #000000;\n    /* background-color: #ff00b329; */\n"]))),zo=function(n){var e=Object(o.useContext)(uu),t=e.store,i=(e.dispatcher,t.scoreState),c=i.elementCacheList[n.index].sectionNo,a=i.sectionCacheList[c];return Object(ui.jsx)(Ao,{children:Object(ui.jsx)(To,{children:a.labelName})})},Ao=d.b.div(ae||(ae=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    position: relative;\n    /* width: 100px; */\n    text-align: center;\n    border: 1px;\n    /* border: 1px solid #c5c5cc; */\n"]))),To=d.b.div(re||(re=Object(s.a)(["\n    display: block;\n    position: relative;\n    min-width: 80px;\n    height: 20px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #c00;\n    text-align: center;\n    line-height: 20px;\n    /* background-color: #1000eb42; */\n    margin-top: 13px;\n"]))),Mo=function(n){var e=Object(o.useContext)(uu),t=e.store;e.dispatcher,t.scoreState;return Object(ui.jsxs)(Fo,{children:[Object(ui.jsx)(Ro,{children:"Key"}),Object(ui.jsx)(Ko,{children:"C\u2192Am"})]})},Fo=d.b.div(se||(se=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 4;\n    width: 100%;\n    height: 50px;\n    /* background-color: #ff000011; */\n    bottom: 0;\n    left: 0;\n    box-sizing: border-box;\n    text-align: center;\n    box-sizing: border-box;\n"]))),No=d.b.div(le||(le=Object(s.a)(["\n    display: block;\n    position: relative;\n    /* min-width: 80px; */\n    height: 16px;\n    font-size: 14px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 16px;\n    /* background-color: #00000042; */\n"]))),Ro=Object(d.b)(No)(de||(de=Object(s.a)(["\n    color: #0b00a8cf;\n"]))),Ko=Object(d.b)(No)(be||(be=Object(s.a)(["\n    color: #050505cf;\n"]))),Po=function(n){var e=Object(o.useContext)(uu),t=e.store,i=e.dispatcher,c=Object(o.useRef)({}),a=Object(o.useRef)({}),r=t.scoreState,s=r.focusIndex==n.index,l=t.scoreData.chordList[n.index],d=r.elementCacheList[n.index];Object(o.useEffect)((function(){d.reffers.wrap=c.current,d.reffers.body=a.current,i.score.setScoreState(r)}),[r.elementCacheList.length]);var b=r.focusIndex===n.index,u=r.elementCacheList[r.focusIndex].sectionNo===d.sectionNo,h="chord"!==l.type?null:l.detail;return Object(ui.jsxs)(Wo,{ref:c,isSelectable:"fixed"!==l.type,isActive:b,isInactive:!u,isChord:"chord"===l.type,children:[Object(ui.jsx)(Vo,{children:"chord"!==l.type?Object(ui.jsx)(ui.Fragment,{}):Object(ui.jsx)(Uo,{children:v[d.keyIndex]})}),["init","chord","section","change"].includes(l.type)?Object(ui.jsx)(_o,{ref:a,isActive:b,isInactive:!u,type:l.type,isAnytime:["fixed","init"].includes(l.type)||0===r.focusIndex,onClick:function(){"fixed"!==l.type&&(r.focusIndex=n.index,i.score.setScoreState(r))},children:function(){switch(l.type){case"init":var e=l.detail;return Object(ui.jsx)(Io,{detail:e});case"section":l.detail;return Object(ui.jsx)(zo,{index:n.index});case"chord":var t=l.detail;return Object(ui.jsx)(xo,{detail:t,isCurrent:b});case"change":var i=l.detail;return Object(ui.jsx)(so,{detail:i})}}()}):Object(ui.jsx)(ko,{detail:l.detail}),"chord"===l.type?Object(ui.jsx)(Qi,{index:n.index,detail:h}):"section"===l.type?Object(ui.jsx)(oo,{index:n.index}):"change"===l.type?Object(ui.jsx)(Mo,{index:n.index}):Object(ui.jsx)(ui.Fragment,{}),Object(ui.jsx)(ui.Fragment,{children:s&&null!=h&&null!=h.root&&t.scoreState.keySwitch.symbolMode?Object(ui.jsx)(Gi,{}):""}),["fixed","init"].includes(l.type)?Object(ui.jsx)(ui.Fragment,{}):Object(ui.jsxs)(Bo,{children:[Object(ui.jsx)(qo,{children:"-"}),Object(ui.jsx)(qo,{onClick:function(){return i.score.addChordElement()},children:"+"})]})]})},_o=(d.b.div(ue||(ue=Object(s.a)(["\n    display: block;\n    width: 1px;\n    height: 10px;\n    background-color: #ad0c0c;\n"]))),d.b.div(he||(he=Object(s.a)(["\n    display: inline-block;\n    /* position: relative; */\n    min-width: 80px;\n    height: calc(100% - ","px);\n    border: solid 1px #00000049;\n    ","\n    ","\n    ","\n\n    opacity: 0.4;\n    border-radius: 6px;\n    ","\n    ","\n    box-sizing: border-box;\n    padding: 4px;\n    transition: background-color 100ms;\n    ","\n"])),75,(function(n){return"section"!==n.type?"":Object(d.a)(xe||(xe=Object(s.a)(["\n        border: solid 1px #ff000084;\n    "])))}),(function(n){return"init"!==n.type?"":Object(d.a)(pe||(pe=Object(s.a)(["\n        border: solid 1px #006823a7;\n        height: 85px;\n    "])))}),(function(n){return"change"!==n.type?"":Object(d.a)(fe||(fe=Object(s.a)(["\n        border: solid 1px #1800a1a7;\n    "])))}),(function(n){return n.isInactive?"":Object(d.a)(je||(je=Object(s.a)(["\n        background-color: #ebebeb84;\n        opacity: 1;\n    "])))}),(function(n){return n.isAnytime?Object(d.a)(ge||(ge=Object(s.a)(["\n        opacity: 1;\n    "]))):""}),(function(n){return n.isActive?Object(d.a)(ve||(ve=Object(s.a)(["\n        background-color: #d85cce5a;\n        box-shadow: 0 0 8px 0 #000b3a48;\n    "]))):""}))),Bo=d.b.div(Oe||(Oe=Object(s.a)([""]))),qo=d.b.div(me||(me=Object(s.a)([""]))),Wo=d.b.div(ke||(ke=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    height: ","px;\n    padding: 0 ","px;\n    box-sizing: border-box;\n    /* margin: 10px 5px 5px 5px; */\n    border-bottom: 1px solid #47438678;\n    margin-bottom: 4px;\n    vertical-align: top;\n    /* width: 1px; */\n    transition: width 500ms, opacity 300ms;\n    /* border: 1px solid #00000015; */\n    ","\n\n    & "," {\n        display: none;\n        position: absolute;\n        z-index: 5;\n        width: ","px;\n        height: 44px;\n        /* background-color: #0000ff11; */\n        top: ","px;\n        right: -","px;\n\n        /* background-color: #0400d84e; */\n        & "," {\n            display: inline-block;\n            width: ","px;\n            height: ","px;\n            background-color: #ebebeb6e;\n            border: 1px solid #818181;\n            margin: 1px 0;\n            font-size: 15px;\n            font-weight: 600;\n            text-align: center;\n            color: #818181;\n            box-sizing: border-box;\n            line-height: 15px;\n\n            &:hover {\n                background-color: #fffb0b9d\n            }\n        }\n    }\n\n    &:hover {\n        ","\n    }\n"])),134,8,(function(n){return n.isInactive||!n.isChord?"":Object(d.a)(ye||(ye=Object(s.a)(["\n        background-color: #e4ecd039;\n    "])))}),Bo,20,35,10,qo,20,20,(function(n){return n.isSelectable?Object(d.a)(Se||(Se=Object(s.a)(["\n            & "," {\n                ","\n                opacity: 1;\n            }\n            & "," {\n                display: inline-block;\n            }\n        "])),_o,(function(n){return n.isActive?"":Object(d.a)(we||(we=Object(s.a)(["background-color: #fffb0018;"])))}),Bo):""})),Uo=d.b.div(Ie||(Ie=Object(s.a)([""]))),Vo=d.b.div(Ce||(Ce=Object(s.a)(["\n    display: inline-block;\n    /* position: relative; */\n    width: 100%;\n    height: ","px;\n    /* background-color: #eca8813b; */\n\n    & "," {\n        display: inline-block;\n        position: absolute;\n        top: -2px;\n        left: 10px;\n        width: 50px;\n        font-size: 12px;\n        color: #ca0000;\n        /* background-color: #fff; */\n    }\n"])),15,Uo),Go=function(){var n=Object(o.useContext)(uu),e=n.store,t=(n.dispatcher,e.scoreData.chordList.length),i=[];if(e.scoreState.elementCacheList.length===t)for(var c=0;c<t;c++)i.push(Object(ui.jsx)(Po,{index:c},c));return Object(ui.jsxs)(Jo,{children:[Object(ui.jsx)(Yo,{children:i}),Object(ui.jsx)(Yo,{})]})},Jo=d.b.div(Ee||(Ee=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: 4px 0 0 4px;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    /* background-color: #e7dddd; */\n    background-color: #e9e9e9;\n    border: 1px solid #b3b3b3;\n    border-radius: 2px;\n    box-sizing: border-box;\n    text-align: left;\n    overflow: auto;\n    \n    &::-webkit-scrollbar {\n        width: 10px;\n        height: 10px;\n    }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: #1959A8;\n    }\n    &::-webkit-scrollbar-track {\n        border-radius: 5px;\n        box-shadow: 0 0 4px #aaa inset;\n    }\n"]))),Yo=(d.b.div(De||(De=Object(s.a)(["\n    transform-origin: top left;\n    /* width: 100%;\n    height: 100%; */\n    transform: scale(1);\n"]))),d.b.div(Le||(Le=Object(s.a)(["\n    display: inline-block;\n    /* position: relative; */\n    padding: ","px ","px;\n    width: ","px;\n    height: ","px;\n    background-color: #f1f1f1;\n    /* overflow: hidden; */\n    margin: 10px 0 0 10px;\n    box-shadow: 0 0 18px 0 #000b3a48;\n"])),10,30,891,1260)),Ho=function(n,e,t){var i=e.userEnv.keyConfig.note,o=(e.scoreState.keySwitch,e.scoreData),c=e.scoreState,a=o.chordList[c.focusIndex].type;switch(a){case"chord":e.scoreState.hideMenu;switch(n.key){case"z":var r=o.chordList[c.focusIndex].detail,s=e.instruments.piano;null!=s&&function(n,e){if(n.stop(),null!=e.root){var t=e.root.index,i=C(e.symbolKey);e.backing.voicingList.map((function(n){var e=S[i.structs[n.struct]];return 12*n.octave+t+e})).forEach((function(e){var t=v[e%12]+Math.floor(e/12);n.play(t,0,{duration:1})}))}}(s,r);break;case"e":t.score.setDefaultBacking();break;case"b":t.backing.openBackingEditor()}}switch(n.key){case i.prevElement:t.score.moveElement(!1);break;case i.nextElement:t.score.moveElement(!0);break;case i.prevSection:t.score.moveSection(!1);break;case i.nextSection:t.score.moveSection(!0);break;case i.addChord:t.score.addChordElement();break;case i.addSection:t.score.addSectionElement();break;case"f":case"f":t.score.addChangeElement();break;case i.deleteCur:t.score.removeCurElement();break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":t.score.setDiatonicChord(Number(n.key)-1)}},Xo=function(n,e,t,i){if("none"===e.scoreState.hideMenu){var o=e.userEnv.keyConfig.note,c=e.scoreState.keySwitch;switch(n.key){case o.editMode:c.editMode=i,t.score.setKeySwitch(c);break;case o.symbolMode:c.symbolMode=i,t.score.setKeySwitch(c)}}i&&function(n,e,t){var i=e.userEnv.keyConfig.note,o=e.scoreState.keySwitch,c=e.scoreData,a=e.scoreState,r="init"!==c.chordList[a.focusIndex].type;if("none"===e.scoreState.hideMenu){if(r)if(o.editMode)switch(n.key){case i.decRoot:t.score.incrementDegreeRoot(!1);break;case i.incRoot:t.score.incrementDegreeRoot(!0);break;case i.decBeat:t.score.incrementBeatLen(!1);break;case i.incBeat:t.score.incrementBeatLen(!0);break;case"A":t.score.incrementMinuteValRelation(!1,-.25);break;case"S":t.score.incrementMinuteValRelation(!1,.25);break;case"D":t.score.incrementMinuteValRelation(!0,-.25);break;case"F":t.score.incrementMinuteValRelation(!0,.25)}else if(o.symbolMode)switch(n.key){case"ArrowUp":t.symbol.toNext(!1);break;case"ArrowDown":t.symbol.toNext(!0);break;case"ArrowLeft":t.symbol.toBase();break;case"ArrowRight":t.symbol.toDerive()}else Ho(n,e,t)}else"backing"===e.scoreState.hideMenu&&function(n,e,t){e.userEnv.keyConfig.note,e.scoreState.keySwitch,e.scoreData;var i=e.backingState;if(null!=i){var o=function(){return t.backing.setState(i)},c=i.pattern;switch(n.key){case"b":t.backing.closeBackingEditor();break;case"Enter":t.backing.applyBackingToChordData()}if(null!=c){switch(n.key){case"ArrowLeft":t.backing.movePatternColumn(!1);break;case"ArrowRight":t.backing.movePatternColumn(!0)}if(-1===c.channelIndex)switch(n.key){case"ArrowUp":case"ArrowDown":break;case"a":t.backing.addPatternColumn();break;case"w":t.backing.changeLayer();break;case"1":t.backing.setCurrentDivRate(16);break;case"2":t.backing.setCurrentDivRate(8);break;case"3":t.backing.setCurrentDivRate(4);break;case"4":t.backing.setCurrentDivRate(2);break;case"5":t.backing.setCurrentDivRate(1);break;case".":t.backing.toggleCurrentDivHalf();break;case"Delete":t.backing.deleteColumn();break;case"f":c.channelIndex=0,o()}else switch(n.key){case"ArrowUp":t.backing.moveChannelIndex(!1);break;case"ArrowDown":t.backing.moveChannelIndex(!0);break;case"f":c.channelIndex=-1,o();break;case"Enter":var a=null==t.backing.getNotes()?{signal:"n",timing:0,velocityAdjust:0}:null;t.backing.setNotes(a)}}}}(n,e,t)}(n,e,t)},Qo=function(n){for(var e=Object(o.useContext)(uu),t=e.store,i=e.dispatcher,c=t.scoreState,a=t.scoreData.chordList[c.focusIndex].detail,r=c.elementCacheList[c.focusIndex],s=[],l=function(n){var e=a.beatLen>=n+1;s.push(Object(ui.jsx)(tc,{isExist:e,onClick:function(){var e=t.scoreData;e.chordList=e.chordList.slice(),a.beatLen=n+1,e.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(e)},children:Object(ui.jsx)("span",{})},n))},d=0;d<4;d++)l(d);var u=[];x.forEach((function(n,e){var o=JSON.stringify(a.root)===JSON.stringify(n),c=null!=a.on&&JSON.stringify(a.on)===JSON.stringify(n);u.push(Object(ui.jsx)(sc,{isRootActive:o,isOnActive:c,isDiatonic:null!=n&&[0,2,4,5,7,9,11].includes(n.index),onClick:function(){var e=t.scoreData;(c||null==n)&&(a.on=null),a.root=null==n?null:Object(b.a)({},n),e.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(e)},onContextMenu:function(){var e=t.scoreData;null==a.root||o||(a.on=c||null==n?null:Object(b.a)({},n),e.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(e))},children:null==n?"-":Object(ui.jsxs)(ui.Fragment,{children:[j(n)," (",O(n,r.keyIndex),")"]})},e))}));var h=[];return y.forEach((function(n,e){var o=null!=a.root&&n.key===a.symbolKey;h.push(Object(ui.jsxs)(dc,{isActive:o,isDiatonic:!0,onClick:function(){var e=t.scoreData;a.symbolKey=n.key,e.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(e)},children:["[",n.name,"]"]},e))})),Object(ui.jsxs)($o,{children:[Object(ui.jsxs)(nc,{children:[Object(ui.jsx)(Zo,{children:"Beat Length"}),Object(ui.jsx)(ec,{children:s}),Object(ui.jsxs)(ic,{children:[Object(ui.jsx)(oc,{children:"Minute Head"}),Object(ui.jsx)(cc,{isReverse:!0,type:"range",step:.25,min:-.5,max:.5,value:a.minute.head,onChange:function(n){var e=t.scoreData;e.chordList=e.chordList.slice(),a.minute.head=Number(n.target.value),e.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(e)}}),Object(ui.jsx)(oc,{children:"Minute Tail"}),Object(ui.jsx)(cc,{isReverse:!1,type:"range",step:.25,min:-.5,max:.5,value:a.minute.tail,onChange:function(n){var e=t.scoreData;e.chordList=e.chordList.slice(),a.minute.tail=Number(n.target.value),e.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(e)}})]})]}),Object(ui.jsxs)(ac,{children:[Object(ui.jsx)(rc,{children:u}),Object(ui.jsx)(lc,{isDisable:null==a.root,children:h})]})]})},Zo=d.b.div(ze||(ze=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 18px;\n    text-align: left;\n    /* background-color: #f0f0f0; */\n    background: linear-gradient(to bottom, #707070, #b3b3b3, #707070);\n    font-size: 14px;\n    color: #ffffff;\n    font-weight: 600;\n    line-height: 14px;\n    box-sizing: border-box;\n    /* border: 1px solid #c50000; */\n    text-align: center;\n"]))),$o=d.b.div(Ae||(Ae=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    background-color: #8a8a8a;\n"]))),nc=d.b.div(Te||(Te=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100px;\n    text-align: left;\n    background-color: #9c93b9;\n"]))),ec=d.b.div(Me||(Me=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 25px;\n    text-align: left;\n    background-color: #afafaf;\n"]))),tc=d.b.div(Fe||(Fe=Object(s.a)(["\n    display: inline-block;\n    width: 25%;\n    height: 20px;\n    text-align: left;\n    background-color: #696969;\n\n    & span{\n        display: inline-block;\n        margin: 2px 0 0 2px;\n        width: calc(100% - 4px);\n        height: calc(100% - 4px);\n        background-color: #9b8585;\n        ","\n    }\n"])),(function(n){return n.isExist?Object(d.a)(Ne||(Ne=Object(s.a)(["\n            /* background-color: #ebf37eb7; */\n            background: linear-gradient(to bottom, #c5c5c5d2, #f3f3f3d2, #c5c5c5d2);\n        "]))):""})),ic=d.b.div(Re||(Re=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 75px;\n    text-align: left;\n    background-color: #cecece;\n"]))),oc=d.b.div(Ke||(Ke=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 18px;\n    text-align: left;\n    /* background-color: #f0f0f0; */\n    background: linear-gradient(to bottom, #707070, #b3b3b3, #707070);\n    font-size: 14px;\n    color: #ffffff;\n    font-weight: 600;\n    line-height: 14px;\n    box-sizing: border-box;\n    border: 1px solid #222222;\n    text-align: center;\n"]))),cc=d.b.input(Pe||(Pe=Object(s.a)(["\n    display: inline-block;\n    margin: 0 0 0 5px;\n    width: calc(100% - 10px);\n    height: 20px;\n    color: #3b51d1;\n    ","\n"])),(function(n){return n.isReverse?Object(d.a)(_e||(_e=Object(s.a)(["\n        transform: rotateY(180deg);\n    "]))):""})),ac=d.b.div(Be||(Be=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 360px;\n    text-align: left;\n    background-color: #78b48c;\n    & * {\n        vertical-align: top;\n    }\n"]))),rc=d.b.div(qe||(qe=Object(s.a)(["\n    display: inline-block;\n    width: 90px;\n    height: 100%;\n    text-align: left;\n    background-color: #e6e6e6;\n"]))),sc=d.b.div(We||(We=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    text-align: left;\n    background-color: #75757575;\n    ","\n    ","\n    border: 1px solid #000;\n    box-sizing: border-box;\n    color: #3030308d;\n    ","\n    font-size: 16px;\n    font-weight: 600;\n    line-height: 16px;\n    text-align: center;\n    & span {\n        color: #9e9e9e;\n    }\n    &:hover {\n        background-color: #fffdfd40;\n        ","\n        ","\n    }\n"])),(function(n){return n.isRootActive?Object(d.a)(Ue||(Ue=Object(s.a)(["background-color: #ff6060bd;"]))):""}),(function(n){return n.isOnActive?Object(d.a)(Ve||(Ve=Object(s.a)(["background-color: #6070ffbc;"]))):""}),(function(n){return n.isDiatonic?Object(d.a)(Ge||(Ge=Object(s.a)(["color: #17007e;"]))):""}),(function(n){return n.isRootActive?Object(d.a)(Je||(Je=Object(s.a)(["background-color: #ff9090bc;"]))):""}),(function(n){return n.isOnActive?Object(d.a)(Ye||(Ye=Object(s.a)(["background-color: #90d3ffbb;"]))):""})),lc=d.b.div(He||(He=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 90px);\n    height: 100%;\n    text-align: left;\n    background-color: #99e07d;\n    ","\n"])),(function(n){return n.isDisable?Object(d.a)(Xe||(Xe=Object(s.a)(["\n        opacity: 0.3;\n        pointer-events: none;\n    "]))):""})),dc=d.b.div(Qe||(Qe=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    text-align: left;\n    background-color: #75757575;\n    ","\n    border: 1px solid #000;\n    box-sizing: border-box;\n    color: #3030308d;\n    ","\n    font-size: 16px;\n    font-weight: 600;\n    line-height: 16px;\n    text-align: center;\n    & span {\n        color: #9e9e9e;\n    }\n    &:hover {\n        background-color: #fffdfd40;\n        ","\n    }\n"])),(function(n){return n.isActive?Object(d.a)(Ze||(Ze=Object(s.a)(["background-color: #ff6060bd;"]))):""}),(function(n){return n.isDiatonic?Object(d.a)($e||($e=Object(s.a)(["color: #17007e;"]))):""}),(function(n){return n.isActive?Object(d.a)(nt||(nt=Object(s.a)(["background-color: #ff9090bc;"]))):""})),bc=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.scoreData,c=i.chordList[0].detail,a=["major","minor"].map((function(n,e){return Object(ui.jsx)(pc,{isActive:c.scale===n,onClick:function(){c.scale=n,i.chordList=i.chordList.slice(),t.score.setScoreData(i)},children:n},e)})),r=("major"===c.scale?m:k).map((function(n,e){var o=c.scale;return Object(ui.jsx)(jc,{isActive:c.keyIndex===e,onClick:function(){c.keyIndex=e,i.chordList=i.chordList.slice(),t.score.setScoreData(i)},children:"".concat(n," ").concat(o)},e)})),s=["4/4","3/4"].map((function(n,e){return Object(ui.jsx)(Oc,{isActive:c.timeSignature===n,onClick:function(){c.timeSignature=n,i.chordList=i.chordList.slice(),t.score.setScoreData(i)},children:n},e)}));return Object(ui.jsxs)(uc,{children:[Object(ui.jsx)(hc,{children:"Scale"}),Object(ui.jsx)(xc,{children:a}),Object(ui.jsx)(hc,{children:"Key"}),Object(ui.jsx)(fc,{children:r}),Object(ui.jsx)(hc,{children:"Tempo"}),Object(ui.jsxs)(gc,{children:[Object(ui.jsx)("input",{type:"number",min:30,max:220,step:1,value:c.bpm,onChange:function(n){c.bpm=n.currentTarget.valueAsNumber,i.chordList=i.chordList.slice(),t.score.setScoreData(i)}}),Object(ui.jsx)("input",{type:"range",min:30,max:220,step:1,value:c.bpm,onChange:function(n){c.bpm=n.currentTarget.valueAsNumber,i.chordList=i.chordList.slice(),t.score.setScoreData(i)}})]}),Object(ui.jsx)(hc,{children:"Rate"}),Object(ui.jsx)(vc,{children:s})]})},uc=d.b.div(et||(et=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    background-color: #9b9eb8;\n"]))),hc=d.b.div(tt||(tt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 18px;\n    text-align: left;\n    /* background-color: #f0f0f0; */\n    background: linear-gradient(to bottom, #707070, #b3b3b3, #707070);\n    font-size: 14px;\n    margin: 5px 0 0 0;\n    color: #ffffff;\n    font-weight: 600;\n    line-height: 14px;\n    box-sizing: border-box;\n    text-align: center;\n"]))),xc=d.b.div(it||(it=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    /* background-color: #ececec; */\n"]))),pc=d.b.div(ot||(ot=Object(s.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    /* margin: 5px 0 0 0; */\n    background-color: #6182b4;\n    ","\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #fff;\n    line-height: 18px;\n    text-align: center;\n    border-radius: 5px;\n    border: solid 1px #ffffff;\n    box-sizing: border-box;\n"])),(function(n){return n.isActive?Object(d.a)(ct||(ct=Object(s.a)(["\n        background-color: #da909082;\n    "]))):""})),fc=d.b.div(at||(at=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 24px; */\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    /* background-color: #ececec; */\n"]))),jc=d.b.div(rt||(rt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    background-color: #61b47d;\n    ","\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #fff;\n    line-height: 18px;\n    text-align: center;\n    border-radius: 5px;\n    border: solid 1px #ffffff;\n    box-sizing: border-box;\n"])),(function(n){return n.isActive?Object(d.a)(st||(st=Object(s.a)(["\n        background-color: #da909082;\n    "]))):""})),gc=d.b.div(lt||(lt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    background-color: #ececec;\n\n    & * {\n        display: inline-block;\n        box-sizing: border-box;\n        vertical-align: top;\n    }\n    & input:nth-child(1) {\n        background-color: #dddddd;\n        width: 60px;\n        height: calc(100% - 4px);\n        margin: 2px 0 0 0;\n        border: 1px solid #9b9b9b;\n        border-radius: 4px;\n    }\n    & input:nth-child(2) {\n        margin-left: 5px;\n        background-color: #f00;\n        width: calc(100% - 70px);\n        height: 100%;\n    }\n"]))),vc=d.b.div(dt||(dt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 24px; */\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    /* background-color: #ececec; */\n"]))),Oc=d.b.div(bt||(bt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    background-color: #61b47d;\n    ","\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #fff;\n    line-height: 18px;\n    text-align: center;\n    border-radius: 5px;\n    border: solid 1px #ffffff;\n    box-sizing: border-box;\n"])),(function(n){return n.isActive?Object(d.a)(ut||(ut=Object(s.a)(["\n        background-color: #da909082;\n    "]))):""})),mc=function(n){var e=Object(o.useContext)(uu),t=e.store,i=e.dispatcher,c=t.scoreState,a=t.scoreData.chordList[c.focusIndex].detail,r=function(n){a.labelName=n,t.scoreData.chordList=t.scoreData.chordList.slice(),i.score.setScoreData(t.scoreData)},s=Object(o.useMemo)((function(){var n=[];return["Intro","A-mero","B-mero","Sabi","C-mero","Outro"].forEach((function(e){var t=0===a.labelName.indexOf(e);n.push(Object(ui.jsx)(Cc,{isActive:t,onClick:function(){r(e)},children:e},n.length))})),n}),[]),l=Object(o.useMemo)((function(){var n=[];return[1,2,3,4].forEach((function(e){var t=-1!==a.labelName.indexOf(e.toString());n.push(Object(ui.jsx)(Ec,{isActive:t,children:e},n.length))})),n}),[]);return Object(ui.jsxs)(kc,{children:[Object(ui.jsx)(yc,{type:"text",value:a.labelName,onChange:function(n){r(n.target.value)}}),Object(ui.jsx)(wc,{children:s}),Object(ui.jsx)(Ic,{children:l})]})},kc=d.b.div(ht||(ht=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    background-color: #b89b9b;\n"]))),yc=d.b.input(xt||(xt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    text-align: left;\n    background-color: #bbbbbb;\n    font-size: 22px;\n    font-weight: 600;\n    color: #a30000;\n    box-sizing: border-box;\n    outline: none;\n    border: 1px solid black;\n    border-radius: 4px;\n"]))),Sc=d.b.div(pt||(pt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n\n    font-size: 22px;\n    font-weight: 600;\n    color: #fff;\n    line-height: 24px;\n    text-align: center;\n    border-radius: 5px;\n    border: solid 1px #ffffff;\n    box-sizing: border-box;\n    vertical-align: top;\n"]))),wc=d.b.div(ft||(ft=Object(s.a)(["\n    display: inline-block;\n    width: 60%;\n    /* margin: 5px 0 0 0; */\n    text-align: center;\n    background-color: #dac3d8;\n    vertical-align: top;\n"]))),Ic=d.b.div(jt||(jt=Object(s.a)(["\n    display: inline-block;\n    width: 40%;\n    /* margin: 5px 0 0 0; */\n    text-align: center;\n    background-color: #dac3d8;\n    vertical-align: top;\n"]))),Cc=Object(d.b)(Sc)(gt||(gt=Object(s.a)(["\n    background-color: #6182b4;\n    ","\n"])),(function(n){return n.isActive?Object(d.a)(vt||(vt=Object(s.a)(["\n        background-color: #ad993fe6;\n    "]))):""})),Ec=Object(d.b)(Sc)(Ot||(Ot=Object(s.a)(["\n    background-color: #61b4b0;\n    ","\n"])),(function(n){return n.isActive?Object(d.a)(mt||(mt=Object(s.a)(["\n        background-color: #ad993fe6;\n    "]))):""})),Dc=function(){var n=Object(o.useContext)(uu),e=n.store,t=(n.dispatcher,e.scoreState),i=e.scoreData.chordList;if(-1===t.focusIndex||t.focusIndex>i.length-1)return Object(ui.jsx)(ui.Fragment,{});var c=i[t.focusIndex];return Object(ui.jsx)(Lc,{children:function(){switch(c.type){case"init":return Object(ui.jsx)(bc,{});case"section":return Object(ui.jsx)(mc,{});case"chord":return Object(ui.jsx)(Qo,{});case"change":return Object(ui.jsx)(ui.Fragment,{})}}()})},Lc=d.b.div(kt||(kt=Object(s.a)(["\n    display: inline-block;\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px);\n    text-align: left;\n    background-color: #8a8a8a;\n"]))),zc=function(){for(var n=Object(o.useContext)(uu),e=n.store,t=(n.dispatcher,e.scoreState),i=e.scoreData.chordList,c=t.focusIndex,a=t.elementCacheList,r=Object(ui.jsx)(ui.Fragment,{}),s=Object(ui.jsx)(ui.Fragment,{}),l=Object(ui.jsx)(ui.Fragment,{}),d=Object(ui.jsx)(ui.Fragment,{}),b=Object(ui.jsx)(ui.Fragment,{}),u=Object(ui.jsx)(ui.Fragment,{}),h=[],x=2,p=2,f=i.length-1,j=c;j>2;){if("chord"===i[j].type){x=j;break}j--}if(x>2)for(j=x-1;j>2;){if("chord"===i[j].type){p=j;break}j--}for(j=c+1;j<i.length-1;){if("chord"===i[j].type){f=j;break}j++}if(-1===t.focusIndex||t.focusIndex>t.elementCacheList.length)return Object(ui.jsx)(ui.Fragment,{});var g=function(n,e){for(var t=e.beat+e.minute,i=0;i<Math.floor(n/.25);i++){var o=i+Math.floor(t/.25),c={width:1,height:10,color:"#555"};switch(!0){case o%16===0:c={width:2,height:22,color:"#747474"};break;case o%4===0:c={width:1,height:18,color:"#646464"};break;case o%2===0:c={width:1,height:14,color:"#7a7a7a"}}h.push(Object(ui.jsx)(qc,{width:c.width,height:c.height,color:c.color,children:o%16===0?Object(ui.jsx)(Wc,{children:e.bar+1+(0===t?0:1)}):""},h.length))}};if(x>2)if(2===p)s=Object(ui.jsx)(Rc,{sustain:4,children:"start"}),b=Object(ui.jsx)(Rc,{sustain:4}),h.push(Object(ui.jsx)(Bc,{},h.length));else{var v=i[p].detail,O=a[p],m=v.beatLen+v.minute.head+v.minute.tail;s=Object(ui.jsx)(Rc,{sustain:v.beatLen,children:"Prev"}),b=Object(ui.jsx)(Rc,{sustain:m}),g(m,O)}if(2===x)r=Object(ui.jsx)(Kc,{sustain:4,children:"start"}),d=Object(ui.jsx)(Kc,{sustain:4}),h.push(Object(ui.jsx)(Bc,{},h.length));else{var k=i[x].detail,y=a[x],S=k.beatLen+k.minute.head+k.minute.tail;r=Object(ui.jsx)(Kc,{sustain:k.beatLen,children:"Cur"}),d=Object(ui.jsx)(Kc,{sustain:S}),g(S,y)}if(f===i.length-1)l=Object(ui.jsx)(Pc,{sustain:4,children:"end"}),u=Object(ui.jsx)(Pc,{sustain:4}),h.push(Object(ui.jsx)(Bc,{},h.length));else{var w=i[f].detail,I=a[f],C=w.beatLen+w.minute.head+w.minute.tail;l=Object(ui.jsx)(Pc,{sustain:w.beatLen,children:"Next"}),u=Object(ui.jsx)(Pc,{sustain:C}),g(C+.25,I)}return Object(ui.jsxs)(Ac,{children:[Object(ui.jsxs)(Tc,{children:[Object(ui.jsxs)(Mc,{children:[s,r,l]}),Object(ui.jsxs)(Fc,{children:[b,d,u]})]}),Object(ui.jsx)(_c,{children:h})]})},Ac=d.b.div(yt||(yt=Object(s.a)(["\n    overflow: hidden;\n    text-align: left;\n    white-space: nowrap;  \n"]))),Tc=d.b.div(St||(St=Object(s.a)(["\n    display: block;\n    /* position: relative; */\n    height: 40px;\n    /* width: 2200px; */\n    background-color: rgb(131, 131, 131);\n"]))),Mc=d.b.div(wt||(wt=Object(s.a)(["\n    display: block;\n    height: 30px;\n"]))),Fc=d.b.div(It||(It=Object(s.a)(["\n    display: block;\n    height: 10px;\n"]))),Nc=d.b.div(Ct||(Ct=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: white;\n    text-align: center;\n"])),(function(n){return 50*n.sustain})),Rc=Object(d.b)(Nc)(Et||(Et=Object(s.a)(["\n    background-color: rgba(0, 21, 211, 0.158);\n"]))),Kc=Object(d.b)(Nc)(Dt||(Dt=Object(s.a)(["\n    background-color: rgb(233, 5, 5);\n"]))),Pc=Object(d.b)(Nc)(Lt||(Lt=Object(s.a)(["\n    background-color: rgba(31, 189, 0, 0.144);\n"]))),_c=d.b.div(zt||(zt=Object(s.a)(["\n    display: block;\n    position: relative;\n    height: 38px;\n    background-color: rgb(48, 48, 48);\n    border-top: solid 2px rgb(128, 128, 128);\n    background: linear-gradient(to bottom, rgb(255, 255, 255), rgb(98, 97, 114));\n"]))),Bc=d.b.div(At||(At=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #cecece;\n    box-sizing: border-box;\n"])),200),qc=d.b.div(Tt||(Tt=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: ","px;\n    border-left: solid ","px ",";\n    box-sizing: border-box;\n"])),12.5,(function(n){return n.height}),(function(n){return n.width}),(function(n){return n.color})),Wc=d.b.div(Mt||(Mt=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    left: -5px;\n    top: 18px;\n    font-size: 16px;\n    font-weight: 600;\n    color: #dd0000;\n"]))),Uc=function(){var n=Object(o.useContext)(uu),e=n.store,t=(n.dispatcher,e.scoreState),i=e.scoreData.chordList[t.focusIndex],c=t.elementCacheList[t.focusIndex],a=null==c?[]:[0,2,4,5,7,9,11].map((function(n){return(c.keyIndex+n)%12})),r=[],s=Object(o.useMemo)((function(){var n=[],e=[];if("chord"===i.type){var t=i.detail,o=t.root,s=C(t.symbolKey);null!=o&&null!=s&&(r=function(n,e){return e.map((function(e){return n+S[e]}))}((o.index+c.keyIndex)%12,s.structs),e=s.structs.map((function(n,e){return Object(ui.jsxs)(Gc,{children:[Object(ui.jsx)("span",{children:n}),Object(ui.jsx)("span",{children:S[n]})]},e)})))}for(var l=0;l<14;l++){var d=n.length,b=a.includes(d%12),u=r.includes(d);if(n.push(Object(ui.jsx)(Yc,{isBlack:!1,index:l,isScale:b,isUse:u},n.length)),[0,1,3,4,5].includes(l%7)){var h=n.length,x=a.includes(h%12),p=r.includes(h);n.push(Object(ui.jsx)(Yc,{isBlack:!0,index:l,isScale:x,isUse:p},n.length))}}return[n,e]}),[r]),d=Object(l.a)(s,2),b=d[0];d[1];return Object(ui.jsx)(Vc,{isUse:r.length>0,children:Object(ui.jsx)(Jc,{children:b})})},Vc=d.b.div(Ft||(Ft=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    ","\n    & * {\n        vertical-align: top;\n    }\n"])),(function(n){return n.isUse?"":Object(d.a)(Nt||(Nt=Object(s.a)(["\n        opacity: 0.5;\n    "])))})),Gc=(d.b.div(Rt||(Rt=Object(s.a)(["\n    display: inline-block;\n    width: 50px;\n    height: 100%;\n    background-color: #949494;\n    /* border: solid 1px #a3a3a3; */\n    box-sizing: border-box;\n    /* padding: 2px 0 0 0; */\n"]))),d.b.div(Kt||(Kt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 15px;\n    box-sizing: border-box;\n\n    /* background-color: #4b4b4b; */\n    /* background: linear-gradient(to bottom, #adac6c, #e0df7d, #adac6c); */\n    /* background: linear-gradient(to bottom, #858585, #4b4b4b, #858585); */\n    border: solid 1px rgb(207, 207, 207);\n    margin-bottom: 1px;\n    font-size: 12px;\n    font-weight: 600;\n    line-height: 12px;\n    text-align: center;\n\n    & span:nth-child(1){\n        color: #f5e400;\n    }\n    & span:nth-child(2){\n        margin-left: 10px;\n        color: #ffffff;\n    }\n"])))),Jc=d.b.div(Pt||(Pt=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 50px);\n    height: 100%;\n    /* background-color: #383838; */\n    /* padding: 12px 0 0 2px;\n    box-sizing: border-box; */\n"]))),Yc=d.b.div(_t||(_t=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: ","px;\n    left: ","px;\n    z-index: 2;\n    border: 1px solid #ffffffda;\n    border-radius: 20px;\n    width: 25px;\n    height: ","px;\n    /* background-color: #7d7d9e; */\n    ","\n    ","\n    box-sizing: border-box;\n"])),(function(n){return 2+(n.isBlack?0:32)}),(function(n){return 2+27*n.index+(n.isBlack?12.5:0)}),(function(n){return n.isBlack?32:43}),(function(n){return n.isScale?Object(d.a)(Bt||(Bt=Object(s.a)(["\n    background: radial-gradient(#c3c3d6, #8989a8);\n    "]))):Object(d.a)(qt||(qt=Object(s.a)(["\n    background: radial-gradient(#d6c3ca, #a88995);\n    "])))}),(function(n){return n.isUse?n.isScale?Object(d.a)(Wt||(Wt=Object(s.a)(["\n        background: radial-gradient(#3e9ef7, #254e74);\n    "]))):Object(d.a)(Ut||(Ut=Object(s.a)(["\n        background: radial-gradient(#d43131, #722a2a);\n    "]))):""})),Hc=function(){for(var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.scoreState,c=[],a=function(n){c.push(Object(ui.jsx)($c,{isActive:i.initialBeat>n,onClick:function(){i.initialBeat=n+1,t.score.setScoreState(i)}},n))},r=0;r<4;r++)a(r);return Object(ui.jsxs)(Xc,{children:[Object(ui.jsx)(Qc,{children:"inital beat"}),Object(ui.jsx)(Zc,{children:c})]})},Xc=d.b.div(Vt||(Vt=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    /* background-color: red; */\n    & *{\n        vertical-align: top;\n    }\n"]))),Qc=d.b.div(Gt||(Gt=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    font-size: 18px;\n    font-weight: 600;\n    color: #979797;\n    margin-left: 4px;\n    font-style: italic;\n    line-height: 38px;\n    /* background-color: yellow; */\n"]))),Zc=d.b.div(Jt||(Jt=Object(s.a)(["\n    display: inline-block;\n    width: 142px;\n    height: calc(100% - 6px);\n    margin: 3px 0 0 8px;\n    border-radius: 4px;\n    border: solid 1px #747474;\n    box-sizing: border-box;\n"]))),$c=d.b.div(Yt||(Yt=Object(s.a)(["\n    display: inline-block;\n    width: 30px;\n    height: calc(100% - 6px);\n    margin: 3px 0 0 4px;\n    background-color: #d6d6d6;\n    ","\n    border: solid 1px #b9b9b9;\n    box-sizing: border-box;\n"])),(function(n){return n.isActive?Object(d.a)(Ht||(Ht=Object(s.a)(["background-color: #eeedcf;"]))):""})),na=function n(){Object(u.a)(this,n)};na.OCTAVE_NUM=8,na.STRUCT_NUM=6,na.CHANNEL_MAX=12,na.getInitialRecord=function(n){return new Array(n).fill(null)},na.getVoicingStructs=function(n){for(var e=[],t=0;t<n.length;t++)for(var i=0;i<n[t].length;i++)n[t][i]&&e.push({octave:t,structIndex:i});return 0===e.length&&e.push({octave:-1,structIndex:0}),e},na.getChannels=function(n,e){for(var t=[],i=0;i<e;i++){var o={octave:-1,structIndex:0};i<n.length&&(o.octave=n[i].octave,o.structIndex=n[i].structIndex),t.push(o)}return t.reverse()};var ea,ta,ia,oa,ca,aa,ra,sa,la,da,ba,ua,ha,xa,pa,fa,ja,ga,va,Oa,ma,ka,ya,Sa,wa,Ia,Ca,Ea,Da,La,za,Aa,Ta,Ma,Fa,Na,Ra,Ka,Pa,_a,Ba,qa,Wa,Ua,Va,Ga,Ja,Ya,Ha,Xa,Qa,Za,$a,nr,er,tr,ir,or,cr,ar,rr,sr,lr,dr,br,ur,hr,xr,pr,fr,jr,gr,vr,Or,mr,kr,yr,Sr,wr,Ir,Cr,Er,Dr,Lr,zr,Ar,Tr,Mr,Fr,Nr,Rr,Kr,Pr,_r,Br,qr,Wr,Ur,Vr,Gr,Jr,Yr,Hr,Xr,Qr,Zr,$r,ns,es,ts,is,os=na,cs=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.backingState,c=[],a=i.pattern,r=a.layers[a.layerIndex];return r.noteDivList.forEach((function(n,e){var o=a.lenIndex===e,r=o&&-1!==a.channelIndex,s=n.rate;n.isDot&&(s/=1.5),0!==n.div3&&(s/=n.div3/3),c.push(Object(ui.jsxs)(rs,{rate:s,isActive:o,isEdit:r,onClick:function(){a.channelIndex=-1,a.lenIndex=e,t.backing.setState(i)},children:[n.rate,n.isDot?".":"",0===n.div3?"":"/"]},e))})),Object(ui.jsx)(as,{children:c})},as=d.b.div(ea||(ea=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    white-space: nowrap;\n"]))),rs=d.b.div(ta||(ta=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - 4px);\n    margin: 2px 0 0 1px;\n    background-color: #1616beb0;\n    ","\n    ","\n    box-sizing: border-box;\n\n    font-size: 14px;\n    font-weight: 600;\n    color: #ffffffba;\n    text-align: center;\n"])),(function(n){return 480/n.rate-1}),(function(n){return n.isActive?Object(d.a)(ia||(ia=Object(s.a)(["\n        background-color: #6363eeaf;\n    "]))):""}),(function(n){return n.isEdit?Object(d.a)(oa||(oa=Object(s.a)(["\n        background-color: #b40000af;\n    "]))):""})),ss=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.backingState,c=i.pattern,a=c.channels.length,r=function(){return t.backing.setState(i)},s=Array(2);return c.layers.forEach((function(n,e){for(var t=[],i=function(e){var i=[];n.noteDivList.forEach((function(t,o){var s=a-1-e,l=c.lenIndex===o,d=n.table[s][o],b=function(e){return n.table[s][o]=e},u=null!=d,h=l&&c.channelIndex===e,x=t.rate;t.isDot&&(x/=1.5),0!==t.div3&&(x/=t.div3/3),i.push(Object(ui.jsx)(bs,{rate:x,isActive:l,isEdit:h,children:Object(ui.jsx)(us,{isUse:u,signal:"n",onClick:function(){b(null==d?{signal:"n",timing:0,velocityAdjust:0}:null),r()},onContextMenu:function(){c.channelIndex=e,c.lenIndex=o,r()}})},o))})),t.push(Object(ui.jsx)(ds,{isEven:e%2==0,isFront:!0,children:i},e))},o=0;o<a;o++)i(o);s[e]=t})),Object(ui.jsx)(ui.Fragment,{children:Object(ui.jsx)(ls,{zIndex:1,children:s[c.layerIndex]})})},ls=d.b.div(ca||(ca=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n"]))),ds=d.b.div(aa||(aa=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    overflow: hidden;\n    white-space: nowrap;\n    ","\n"])),(function(n){return n.isFront?Object(d.a)(ra||(ra=Object(s.a)(["\n        ","\n    "])),(function(n){return n.isEven?Object(d.a)(la||(la=Object(s.a)(["\n            background-color: #42425542;\n        "]))):Object(d.a)(sa||(sa=Object(s.a)(["\n            background-color: #3a3a502f;\n        "])))})):""})),bs=d.b.div(da||(da=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - 1px);\n    margin: 1px 0 0 1px;\n    background-color: #ffffff31;\n    ","\n    ","\n    box-sizing: border-box;\n\n    &:hover {\n        background-color: #82f7ff57;\n    }\n"])),(function(n){return 480/n.rate-1}),(function(n){return n.isActive?Object(d.a)(ba||(ba=Object(s.a)(["\n        background-color: #ffffff56;\n    "]))):""}),(function(n){return n.isEdit?Object(d.a)(ua||(ua=Object(s.a)(["\n        border: 2px solid #d80000ba;\n    "]))):""})),us=d.b.div(ha||(ha=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: calc(100% - 2px);\n    margin: 1px 0 0 1px;\n    background-color: #a7a7a754;\n    ","\n    box-sizing: border-box;\n    &:hover {\n        background-color: #ffffff63;\n        ","\n    }\n"])),(function(n){return n.isUse?Object(d.a)(xa||(xa=Object(s.a)(["\n        background-color: #f8fc029b;\n    "]))):""}),(function(n){return n.isUse?Object(d.a)(pa||(pa=Object(s.a)(["\n            background-color: #fdff719b;\n        "]))):""})),hs=function(){var n=Object(o.useContext)(uu),e=n.store,t=(n.dispatcher,e.backingState);t.chordInfo,t.pattern;return Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsxs)(xs,{children:[Object(ui.jsx)(ps,{children:Object(ui.jsx)(cs,{})}),Object(ui.jsx)(fs,{})]}),Object(ui.jsx)(js,{children:Object(ui.jsx)(ss,{})}),Object(ui.jsx)(gs,{})]})},xs=d.b.div(fa||(fa=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #9292bdd6;\n"])),50),ps=d.b.div(ja||(ja=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #9292bdd6;\n"])),25),fs=d.b.div(ga||(ga=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #b492bdd5;\n"])),25),js=d.b.div(va||(va=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    background-color: #97d3cec8;\n"])),240),gs=d.b.div(Oa||(Oa=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #898997cc;\n"])),60),vs=function(n){var e=Object(o.useContext)(uu),t=e.store,i=e.dispatcher,c=t.backingState,a=c.pattern,r=a.channels.length-1-n.index,s=function(){i.backing.setState(c)};return Object(ui.jsx)(ui.Fragment,{children:Object(ui.jsxs)(Os,{children:[Object(ui.jsx)(ks,{children:n.soundFullName}),Object(ui.jsx)(ys,{onClick:function(){a.layers.forEach((function(n){n.table.splice(r,1)}));var n=os.getVoicingStructs(c.voicingTable);a.channels=os.getChannels(n,a.channels.length-1),s()},children:"-"}),Object(ui.jsx)(ys,{onClick:function(){a.layers.forEach((function(n){var e=os.getInitialRecord(n.noteDivList.length);n.table.splice(r,0,e)}));var n=os.getVoicingStructs(c.voicingTable);a.channels=os.getChannels(n,a.channels.length+1),s()},children:"+"})]})})},Os=d.b.div(ma||(ma=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 19px;\n    background-color: #b4b3b36f;\n    margin: 0 0 1px 0;\n"]))),ms=d.b.div(ka||(ka=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    margin: 0 1px 0 0;\n    border: 1px solid #322e4292;\n    border-radius: 4px;\n    box-sizing: border-box;\n    font-size: 12px;\n    font-weight: 600;\n    color: #ffffff;\n    text-align: center;\n"]))),ks=Object(d.b)(ms)(ya||(ya=Object(s.a)(["\n    width: 47px;\n\n"]))),ys=Object(d.b)(ms)(Sa||(Sa=Object(s.a)(["\n    width: 25px;\n    &:hover {\n        background-color: #f1ef866c;\n    }\n    \n"]))),Ss=function(){var n=Object(o.useContext)(uu),e=n.store,t=(n.dispatcher,e.backingState),i=t.chordInfo,c=C(i.symbolKey),a=t.pattern,r=[];null!=a&&a.channels.forEach((function(n,e){var t="-";if(-1!==n.octave){var o=i.chordRoot+S[c.structs[n.structIndex]],a=n.octave+Math.floor(o/12);t=v[o%12]+a}r.push(Object(ui.jsx)(vs,{index:e,soundFullName:t},e))}));return Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsx)(ws,{}),Object(ui.jsx)(Is,{children:r}),Object(ui.jsx)(Cs,{})]})},ws=d.b.div(wa||(wa=Object(s.a)(["\n    /* display: inline-block; */\n    width: 100%;\n    height: ","px;\n    background-color: #9292bdd6;\n"])),50),Is=d.b.div(Ia||(Ia=Object(s.a)(["\n/* display: inline-block; */\n    width: 100%;\n    height: ","px;\n    background-color: #97d3cec8;\n"])),240),Cs=d.b.div(Ca||(Ca=Object(s.a)(["\n/* display: inline-block; */\n    width: 100%;\n    height: ","px;\n    background-color: #898997cc;\n"])),60),Es=function(){for(var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.backingState,c=i.pattern,a=c.layers[c.layerIndex].noteDivList[c.lenIndex],r=(i.chordInfo,function(){t.backing.setState(i)}),s=function(n,e,t){return Object(ui.jsx)(Ts,{isEnable:!0,isActive:e,onClick:t,children:n})},l=function(n){return s(String(n),a.rate===n,(function(){return function(n){a.rate=n,r()}(n)}))},d=[],b=0;b<os.CHANNEL_MAX;b++){var u=b+1;d.push(Object(ui.jsx)(As,{value:u,children:u},b))}var h=Object(ui.jsxs)(Ds,{children:[Object(ui.jsx)(zs,{value:c.channels.length,onChange:function(n){var e=c.channels.length,t=Number(n.target.value),o=os.getVoicingStructs(i.voicingTable);c.channels=os.getChannels(o,t);var a=Number(n.target.value)-e;c.layers.forEach((function(n,e){if(a>0)for(var t=new Array(n.noteDivList.length).fill(null),i=0;i<a;i++)n.table.push(JSON.parse(JSON.stringify(t)));else{var o=Math.abs(a);n.table.splice(-o,o)}})),r()},children:d}),l(16),l(8),l(4),l(2),l(1),s(".",a.isDot,(function(){a.isDot=!a.isDot,r()})),s("1/3",1===a.div3,(function(){1===a.div3?a.div3=0:a.div3=1,r()})),s("2/3",2===a.div3,(function(){2===a.div3?a.div3=0:a.div3=2,r()}))]}),x=-1===c.channelIndex?null:c.layers[c.layerIndex].table[c.channels.length-1-c.channelIndex][c.lenIndex],p=Object(ui.jsxs)(Ls,{children:[s("-",null==x,(function(){r()})),s("\u25a1",null!=x&&"n"===x.signal,(function(){r()})),s("\u30fb",null!=x&&"s"===x.signal,(function(){r()})),s("\u2040",null!=x&&"t"===x.signal,(function(){r()}))]});return-1===c.channelIndex?h:p},Ds=d.b.div(Ea||(Ea=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #86c5b2;\n"]))),Ls=d.b.div(Da||(Da=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #86b8c5;\n"]))),zs=d.b.select(La||(La=Object(s.a)(["\n    display: inline-block;\n    width: 50px;\n    height: 26px;\n    margin: 2px 2px 0 0;\n    color: #eeff00;\n    font-size: 20px;\n    font-weight: 600;\n    background-color: #d4d4d422;\n    border: solid 1px #555;\n    border-radius: 4px;\n    box-sizing: border-box;\n    line-height: 20px;\n    text-align: center;\n    outline: none;\n"]))),As=d.b.option(za||(za=Object(s.a)(["\n    background-color: black;\n    color: white;\n    font-size: 16px;\n    font-weight: 600;\n"]))),Ts=d.b.div(Aa||(Aa=Object(s.a)(["\n    display: inline-block;\n    width: 50px;\n    height: 26px;\n    margin: 2px 2px 0 0;\n    font-size: 20px;\n    color: white;\n    font-weight: 600;\n    background-color: #ff008023;\n    border: solid 1px #555;\n    border-radius: 4px;\n    box-sizing: border-box;\n    line-height: 20px;\n    text-align: center;\n\n    ","\n\n    ","\n\n    &:hover {\n        background-color: #ff008039;\n        ","\n    }\n"])),(function(n){return n.isEnable?"":Object(d.a)(Ta||(Ta=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))}),(function(n){return n.isActive?Object(d.a)(Ma||(Ma=Object(s.a)(["\n        background-color: #fbff0050;\n    "]))):""}),(function(n){return n.isActive?Object(d.a)(Fa||(Fa=Object(s.a)(["\n            background-color: #dfe07850;\n        "]))):""})),Ms=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.backingState,c=(i.chordInfo,null!=i.pattern),a=function(){t.backing.setState(i)};return Object(ui.jsxs)(Fs,{children:[Object(ui.jsx)(Ns,{children:Object(ui.jsxs)(Ks,{children:[Object(ui.jsx)(Rs,{children:"Pattern"}),Object(ui.jsx)(Ps,{isActive:c,onClick:function(){if(c)i.pattern=null,a();else{var n=i.voicingTable,e=os.getVoicingStructs(n),o=os.getChannels(e,1);i.pattern={layerIndex:0,lenIndex:0,channelIndex:-1,channels:o,isUsePedal:!1,layers:[t.backing.getInitialLayer(),t.backing.getInitialLayer()]},a()}},children:"Use"})]})}),Object(ui.jsx)(_s,{isActive:c,children:c?Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsx)(Bs,{children:Object(ui.jsx)(Es,{})}),Object(ui.jsxs)(qs,{children:[Object(ui.jsx)(Ws,{children:Object(ui.jsx)(Ss,{})}),Object(ui.jsx)(Us,{children:Object(ui.jsx)(hs,{})})]})]}):Object(ui.jsx)(ui.Fragment,{})})]})},Fs=d.b.div(Na||(Na=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 300px; */\n    background-color: #001279;\n\n    & *{\n        /* display: inline-block;\n        width: 100%; */\n    }\n"]))),Ns=d.b.div(Ra||(Ra=Object(s.a)(["\n    height: 30px;\n    background-color: #a5d1c3;\n"]))),Rs=d.b.div(Ka||(Ka=Object(s.a)([""]))),Ks=d.b.div(Pa||(Pa=Object(s.a)(["\n    display: inline-block;\n    width: 200px;\n    height: 100%;\n    /* background-color: #7986d1; */\n\n    & * {\n        display: inline-block;\n        height: calc(100% - 4px);\n        margin-top: 2px;\n        box-sizing: border-box;        \n    }\n\n    & "," {\n        width: 80px;\n        font-size: 20px;\n        color: #f1fffb;\n        font-weight: 600;\n        /* background-color: #00000028; */\n        margin: 2px 2px 0 2px;\n        line-height: 22px;\n        text-align: center;\n    }\n"])),Rs),Ps=d.b.div(_a||(_a=Object(s.a)(["\n    width: 100px;\n    font-size: 20px;\n    color: white;\n    font-weight: 600;\n    background-color: #ff008023;\n    border: solid 1px #555;\n    border-radius: 4px;\n    line-height: 20px;\n    text-align: center;\n\n    ","\n\n    &:hover {\n        background-color: #ff008039;\n    }\n"])),(function(n){return n.isActive?Object(d.a)(Ba||(Ba=Object(s.a)(["\n        /* background-color: #b1dfc979; */\n        color: #fa1d1d;\n    "]))):""})),_s=d.b.div(qa||(qa=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    overflow: hidden;\n    height: ","px;\n    ","\n    transition: height 100ms;\n"])),380,(function(n){return n.isActive?"":Object(d.a)(Wa||(Wa=Object(s.a)(["\n        height: 0;\n    "])))})),Bs=d.b.div(Ua||(Ua=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #8d98d4;\n    text-align: left;\n"])),30),qs=d.b.div(Va||(Va=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #d48d8d;\n\n    /* & *{\n        display: inline-block;\n        height: 100%;\n    } */\n"]))),Ws=d.b.div(Ga||(Ga=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    background-color: #dadada;\n"]))),Us=d.b.div(Ja||(Ja=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 100px);\n    background-color: #76af90;\n"]))),Vs=function(){for(var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.backingState,c=i.chordInfo,a=C(c.symbolKey),r=i.voicingTable,s=i.pattern,l=[],d=function(n){for(var o=[],d=function(l){var d=a.structs.length>l,u=r[n][l],h=S[a.structs[l]],x=(c.chordRoot+h)%12,p=n+Math.floor((c.chordRoot+h)/12),f=d?"".concat(v[x]).concat(p):"";o.push(Object(ui.jsx)($s,{isEnable:d,isSelected:u,onClick:function(){if(r[n][l]=!u,null!=s){var e=os.getVoicingStructs(r);s.channels=os.getChannels(e,s.channels.length)}t.backing.setState(Object(b.a)(Object(b.a)({},i),{},{voicingTable:r,pattern:s}))},onContextMenu:function(){var n=e.instruments.piano;null!=n&&n.play(f,0,{duration:1})},children:f},l))},u=0;u<os.STRUCT_NUM;u++)d(u);l.push(Object(ui.jsx)(Zs,{children:o},n))},u=0;u<os.OCTAVE_NUM;u++)d(u);return Object(ui.jsxs)(Gs,{children:[Object(ui.jsx)(Js,{}),Object(ui.jsxs)(Ys,{children:[Object(ui.jsxs)(Hs,{children:[Object(ui.jsx)(Xs,{children:"root [C]"}),Object(ui.jsx)(Xs,{children:"long3 [E]"}),Object(ui.jsx)(Xs,{children:"perfect5 [G]"})]}),Object(ui.jsx)(Qs,{children:l})]})]})},Gs=d.b.div(Ya||(Ya=Object(s.a)(["\n    display: inline-block;\n    width: 600px;\n"]))),Js=d.b.div(Ha||(Ha=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    background-color: #338f8f;\n"]))),Ys=d.b.div(Xa||(Xa=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #c09e05;\n    border: solid 1px #888;\n    border-radius: 5px;\n    box-sizing: border-box;\n\n    & *{\n        vertical-align: top;\n        height: 100%;\n    }\n"])),142),Hs=d.b.div(Qa||(Qa=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    /* width: 100px; */\n    background-color: #8fb5bc;\n"])),480),Xs=d.b.div(Za||(Za=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: ","px;\n    margin-top: 1px;\n    /* width: 100px; */\n    /* background-color: #8fb5bc; */\n    background: linear-gradient(to bottom, #10828a, #76d5db, #10828a);\n    font-size: 16px;\n    font-weight: 600;\n    color: white;\n    padding-left: 5px;\n    box-sizing: border-box;\n"])),22),Qs=d.b.div($a||($a=Object(s.a)(["\n    display: inline-block;\n    background-color: #a7acd8;\n"]))),Zs=d.b.div(nr||(nr=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    /* margin-left: 1px; */\n    background-color: #a7d8c4;\n    padding-bottom: 2px;\n    box-sizing: border-box;\n"])),60),$s=d.b.div(er||(er=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 1px);\n    height: ","px;\n    margin: 1px 0 0 1px;\n    background-color: #409ca3;\n    color: #01004e;\n    ","\n    ","\n    /* border: 1px solid #ffffff; */\n    box-sizing: border-box;\n\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n\n    &:hover {\n        background-color: #117dbb;\n        ","\n    }\n"])),22,(function(n){return n.isSelected?Object(d.a)(tr||(tr=Object(s.a)(["\n        background-color: #43a6c4;\n    color: #ffffff;\n    "]))):""}),(function(n){return n.isEnable?"":Object(d.a)(ir||(ir=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))}),(function(n){return n.isSelected?Object(d.a)(or||(or=Object(s.a)(["\n            background-color: #3f70bb;\n        "]))):""})),nl=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher;e.backingState;return Object(ui.jsxs)(el,{children:[Object(ui.jsx)(Vs,{}),Object(ui.jsx)(Ms,{}),Object(ui.jsxs)(tl,{children:[Object(ui.jsx)(il,{isEnable:!0,children:"Test"}),Object(ui.jsx)(il,{isEnable:!0,children:"Cancel"}),Object(ui.jsx)(il,{isEnable:!0,onClick:function(){t.backing.applyBackingToChordData(),t.backing.closeBackingEditor()},children:"Update"})]})]})},el=d.b.div(cr||(cr=Object(s.a)(["\n    display: inline-block;\n    width: 600px;\n"]))),tl=d.b.div(ar||(ar=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    width: 100%;\n    /* background-color: #bd4646; */\n    text-align: right;\n"]))),il=d.b.div(rr||(rr=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    height: 26px;\n    margin: 2px 2px 0 0;\n    font-size: 20px;\n    color: white;\n    font-weight: 600;\n    background-color: #0051ff21;\n    border: solid 1px #555;\n    border-radius: 4px;\n    box-sizing: border-box;\n    line-height: 20px;\n    text-align: center;\n\n    ","\n\n    &:hover {\n        background-color: #ff008039;\n    }\n"])),(function(n){return n.isEnable?"":Object(d.a)(sr||(sr=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))})),ol=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i="backing"===e.scoreState.hideMenu,c=e.scoreData.chordList,a=e.scoreState.focusIndex;return Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsx)(cl,{isOpen:i,onClick:function(){t.backing.closeBackingEditor()}}),Object(ui.jsxs)(al,{children:[Object(ui.jsx)(rl,{isOpen:i,children:null==e.backingState?Object(ui.jsx)(ui.Fragment,{}):Object(ui.jsx)(nl,{})}),Object(ui.jsx)(sl,{isEnable:"chord"===c[a].type,onClick:function(){t.backing.openBackingEditor()},children:Object(ui.jsx)("div",{children:"Backing"})})]})]})},cl=d.b.div(lr||(lr=Object(s.a)(["\n    display: ",";\n    position: absolute;\n    z-index: 10;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #01004216;\n    backdrop-filter: blur(6px);\n"])),(function(n){return n.isOpen?"inline-block":"none"})),al=d.b.div(dr||(dr=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    left: 0;\n    top: 0;\n    /* width: 525px; */\n\n    & * {\n        vertical-align: top;\n    }\n"]))),rl=d.b.div(br||(br=Object(s.a)(["\n    display: inline-block;\n    width: ",";\n    /* height: 400px; */\n    background-color: #a3a3a3;\n    opacity: 0.9;\n    transition: width 0.1s;\n    overflow: hidden;\n"])),(function(n){return n.isOpen?"600px":0})),sl=d.b.div(ur||(ur=Object(s.a)(["\n    display: inline-block;\n    width: 25px;\n    height: 150px;\n    background-color: #e4e4e4;\n    border-top: 1px solid #5a5a5a;\n    border-right: 1px solid #5a5a5a;\n    border-bottom: 1px solid #5a5a5a;\n    border-radius: 0 10px 10px 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: #5a5a5a;\n    text-align: center;\n    line-height: 16px;\n    box-sizing: border-box;\n    ","\n    \n    & div {\n        width: 150px;\n        transform-origin: top left;\n        transform: rotate(-90deg) translateX(-100%);\n        /* background-color: #fff; */\n    }\n\n    &:hover {\n        background-color: #d1e5eb;\n    }\n"])),(function(n){return n.isEnable?"":Object(d.a)(hr||(hr=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))})),ll=t(13),dl=t.n(ll),bl=function(n){var e=Object(o.useContext)(uu),t=e.store,i=e.dispatcher,c=Object(o.useRef)({}),a=t.scoreData.chordList,r=(t.scoreState.focusIndex,t.scoreData.chordList[0].detail),s=t.scoreState.isTune;return Object(o.useEffect)((function(){s||c.current.focus(),dl.a.instrument(new AudioContext,"bright_acoustic_piano",{gain:5,release:.5}).then((function(n){i.score.setPiano(n)}))}),[s]),Object(o.useEffect)((function(){var n=[],e=[],o=0,c=0,s=0,l=0,d=-1,b=-1,u=0;a.forEach((function(t,i){switch(t.type){case"fixed":break;case"init":var h=t.detail;b=h.keyIndex;break;case"section":var x=t.detail;e.push({labelName:x.labelName,beatSum:0,rangeIndexStart:i,rangeIndexEnd:a.length-2}),++d>0&&(e[d-1].rangeIndexEnd=i-1,e[d-1].beatSum=u,u=0);break;case"chord":var p=t.detail;o=c,c+=p.beatLen,u+=p.beatLen,s=l,l+=p.minute.head,l+=p.minute.tail}var f=6e4/r.bpm*(o+s),j=function(n){switch(n){case"4/4":return[4,4];case"3/4":return[3,4]}return[0,0]}(r.timeSignature)[0];n.push({bar:Math.floor(o/j),beat:o%j,minute:s,keyIndex:b,sectionNo:d,pastSecond:f,reffers:{}})})),e[d].beatSum=u,t.scoreState.elementCacheList=n,t.scoreState.sectionCacheList=e,i.score.setScoreState(t.scoreState)}),[a,a.length,r.bpm]),Object(ui.jsxs)(ul,{tabIndex:999,ref:c,isActive:n.isActive,onKeyDown:function(n){return Xo(n,t,i,!0)},onKeyUp:function(n){return Xo(n,t,i,!1)},children:[Object(ui.jsxs)(hl,{children:[Object(ui.jsx)(pl,{children:Object(ui.jsx)(Hc,{})}),Object(ui.jsxs)(fl,{children:[Object(ui.jsx)(ol,{}),Object(ui.jsx)(jl,{children:Object(ui.jsx)(Go,{})})]}),Object(ui.jsxs)(gl,{children:[Object(ui.jsx)(vl,{children:Object(ui.jsx)(zc,{})}),Object(ui.jsx)(Ol,{children:Object(ui.jsx)(Uc,{})})]})]}),Object(ui.jsx)(xl,{children:Object(ui.jsx)(Dc,{})})]})},ul=d.b.div(xr||(xr=Object(s.a)(["\n    display: ",";\n    width: 100%;\n    height: 100%;\n    outline: none;\n"])),(function(n){return n.isActive?"inline-block":"none"})),hl=d.b.div(pr||(pr=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    height: 100%;\n    background-color: #c7c7c7;\n    vertical-align: top;\n"])),220),xl=d.b.div(fr||(fr=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #d6d6d6;\n    vertical-align: top;\n"])),220),pl=d.b.div(jr||(jr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #d4d4d4;\n"])),35),fl=d.b.div(gr||(gr=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: calc(100% - ","px);\n    background-color: #e0e0e0;\n"])),115),jl=d.b.div(vr||(vr=Object(s.a)(["\n    display: inline-block;\n    margin-left: 25px;\n    width: calc(100% - 25px);\n    height: 100%;\n    vertical-align: top;\n"]))),gl=d.b.div(Or||(Or=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #cacaca;\n    & * {\n        vertical-align: top;\n    }\n"])),80),vl=d.b.div(mr||(mr=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    height: 100%;\n    background-color: #ddc2c2;\n"])),380),Ol=d.b.div(kr||(kr=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #757575;\n"])),380),ml=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.scoreState,c=i.sectionCacheList;if(-1===i.focusIndex||i.focusIndex>i.elementCacheList.length)return Object(ui.jsx)(ui.Fragment,{});var a=i.elementCacheList[i.focusIndex].sectionNo,r=[];return c.forEach((function(n,e){var o=Math.floor(n.beatSum/4),c=n.beatSum%4,s=e===a;r.push(Object(ui.jsxs)(Sl,{isActive:s,onClick:function(){i.focusIndex=n.rangeIndexStart,t.score.setScoreState(i)},children:[Object(ui.jsx)(kl,{children:n.labelName}),Object(ui.jsxs)(yl,{children:[o,0===c?"":" (".concat(c,")")]})]},e))})),Object(ui.jsx)(ui.Fragment,{children:r})},kl=d.b.div(yr||(yr=Object(s.a)([""]))),yl=d.b.div(Sr||(Sr=Object(s.a)([""]))),Sl=d.b.div(wr||(wr=Object(s.a)(["\n    display: inline-block;\n    margin: 4px 4px 0 4px;\n    width: calc(100% - 8px);\n    height: 36px;\n    background-color: "," ;\n    border: 1px solid #aaaaaa;\n    border-radius: 20px 20px 20px 20px;\n\n    text-align: center;\n\n    & "," {\n        display: inline-block;\n        width: 100%;\n        height: 20px;\n        font-size: 18px;\n        font-weight: 600;\n        color: #888;\n        /* background-color: #c500003b; */\n        line-height: 18px;\n    }\n    & "," {\n        display: inline-block;\n        width: 100%;\n        height: 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: #003eb3;\n        /* background-color: #10c5003a; */\n        line-height: 16px;\n    }\n"])),(function(n){return n.isActive?Object(d.a)(Ir||(Ir=Object(s.a)(["\n        #e7e7e6be;\n        box-shadow: 0 0 8px 0 #000b3a48;\n    "]))):Object(d.a)(Cr||(Cr=Object(s.a)(["\n        #c4c4c42b;\n    "])))}),kl,yl),wl=function(n){var e=Object(o.useContext)(uu),t=e.store,i=e.dispatcher,c=Object(o.useRef)(null),a=Object(o.useRef)(null),r=t.scoreState,s=t.scoreData.chordList,l=n.barLength,d=n.beatWidth,b=n.curChord,u=n.timelineLength,h=n.mouseMeasurePos,x=1/t.melodyState.quantize,p=t.scoreData.chordList[0].detail;Object(o.useEffect)((function(){t.refs.melody.measure=c.current,t.refs.melody.chord=a.current}),[]);var f=Object(o.useMemo)((function(){for(var n=[],e=0;e<=4*l*4;e++){var t=Object(ui.jsx)(ui.Fragment,{});e%16==0&&(t=Object(ui.jsx)(Ml,{children:Math.floor(e/16)+1})),n.push(Object(ui.jsx)(Tl,{isHead:e%4===0,beatWidth:d,children:t},e))}return n}),[l]),g=Object(o.useMemo)((function(){var n=[];return s.forEach((function(e,o){if("chord"===e.type){var c,a=e.detail,s=null===(c=C(a.symbolKey))||void 0===c?void 0:c.name,l=null==a.root?"-":j(a.root)+s,u=null==a.root?"-":O(a.root,p.keyIndex)+s;n.push(Object(ui.jsxs)(Ll,{width:d*(a.beatLen+a.minute.head+a.minute.tail),isActive:e==b,onClick:function(){r.isTune=!1,r.focusIndex=o,i.score.setScoreState(r)},onContextMenu:function(){ri(t)},children:[Object(ui.jsx)(zl,{children:l}),Object(ui.jsxs)(Al,{children:[" (",u,")"]})]},n.length))}})),n}),[s,b]);return Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsx)(El,{ref:a,children:Object(ui.jsx)(Dl,{width:u,children:g})}),Object(ui.jsxs)(Il,{ref:c,children:[f,Object(ui.jsx)(Cl,{left:h*d*x,width:d*x})]})]})},Il=d.b.div(Er||(Er=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    background: linear-gradient(to bottom, #ffffff, #808080);\n    width: 100%;\n    height: 40px;\n    text-align: left;\n    border-top: solid 2px #000;\n    white-space: nowrap;\n    overflow: hidden;\n"]))),Cl=d.b.div(Dr||(Dr=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    left: ","px;\n    top: 0px;\n    width: ","px;\n    height: 100%;\n    background-color: #ffff006c;\n"])),(function(n){return n.left}),(function(n){return n.width})),El=d.b.div(Lr||(Lr=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #c0c0c0;\n    width: 100%;\n    height: calc(100% - 40px);\n    text-align: left;\n    white-space: nowrap;\n    overflow: hidden;\n"]))),Dl=d.b.div(zr||(zr=Object(s.a)(["\n    width: ","px;\n    height: 100%;\n    overflow: hidden;\n"])),(function(n){return n.width})),Ll=d.b.div(Ar||(Ar=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - 2px);\n    box-sizing: border-box;\n    border: 1px solid #646464;\n    border-left: 4px solid #940000;\n    background-color: #ffffff22;\n    ","\n    margin: 1px 0 0 1px;\n    \n    font-size: 18px;\n    font-weight: 600;\n    text-align: center;\n\n    &:hover {\n        background-color: #fffb0037;\n    }\n"])),(function(n){return n.width-1}),(function(n){return n.isActive?Object(d.a)(Tr||(Tr=Object(s.a)(["background-color: #ffce2c9b;"]))):""})),zl=d.b.span(Mr||(Mr=Object(s.a)(["\n    color: #d80000;\n"]))),Al=d.b.span(Fr||(Fr=Object(s.a)(["\n    color: #0000007d;\n"]))),Tl=d.b.div(Nr||(Nr=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    /* background-color: #ffffffbe; */\n    width: ","px;\n    vertical-align: bottom;\n    margin-top: 25px;\n    height: ",";\n    box-sizing: border-box;\n    border-left: solid "," #000;\n"])),(function(n){return n.beatWidth/4}),(function(n){return n.isHead?"15px":"10px"}),(function(n){return n.isHead?"2px":"1px"})),Ml=d.b.div(Rr||(Rr=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    font-size: 16px;\n    font-weight: 600;\n    color: #ec0000;\n    left: -5px;\n    top: -20px;\n"]))),Fl=function(n){var e=Object(o.useContext)(uu),t=e.store,i=(e.dispatcher,t.scoreData.chordList[0].detail),c=Object(o.useMemo)((function(){var e=[];if(null!=n.curChord){var o=n.curChord.detail,c=C(o.symbolKey),a=o.root;null!=a&&null!=c&&c.structs.forEach((function(n){e.push((a.index+i.keyIndex+S[n])%12)}))}for(var r=[],s=function(i){var o=(59-i+9)%12,c=Math.floor((59-i+9)/12)+1,a=v[o%12];Nl(c);r.push(Object(ui.jsx)(_l,{isScale:[0,2,4,5,7,9,11].includes(o),isStruct:e.includes(o),isActive:i===n.mousePitchIndex,onClick:function(){var n=t.instruments.soundfontPlayer;null!=n&&(n.stop(),n.play(a+c,0,{duration:1}))},children:a},i))},l=0;l<60;l++)s(l);return r}),[n.mousePitchIndex,n.curChord]);return Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsxs)(Rl,{children:[Object(ui.jsx)(Pl,{isActive:!1,children:Object(ui.jsx)("div",{children:"hihi"})}),Object(ui.jsx)(Pl,{isActive:!1,children:Object(ui.jsx)("div",{children:"hi"})}),Object(ui.jsx)(Pl,{isActive:!1,children:Object(ui.jsx)("div",{children:"mid2"})}),Object(ui.jsx)(Pl,{isActive:!1,children:Object(ui.jsx)("div",{children:"mid1"})}),Object(ui.jsx)(Pl,{isActive:!1,children:Object(ui.jsx)("div",{children:"low"})})]}),Object(ui.jsx)(Kl,{children:c})]})},Nl=function(n){switch(n){case 0:return"low";case 1:return"mid1";case 2:return"mid2";case 3:return"hi";case 4:return"hihi";default:return""}},Rl=d.b.div(Kr||(Kr=Object(s.a)(["\n    display: inline-block;\n    width: 30px;\n    height: 100%;\n    vertical-align: top;\n"]))),Kl=d.b.div(Pr||(Pr=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 30px);\n    height: 100%;\n    vertical-align: top;\n"]))),Pl=d.b.div(_r||(_r=Object(s.a)(["\n    display: inline-block;\n    border: 1px solid black;\n    width: 100%;\n    height: 360px;\n    background-color: #758f94;\n    ","\n    box-sizing: border-box;\n\n    font-size: 18px;\n    color: #dfdfdf;\n    font-weight: 600;\n    & div {\n        width: 360px;\n        transform-origin: top left;\n        transform: rotate(-90deg) translateX(-50%);\n        /* background-color: #fff; */\n    }\n"])),(function(n){return n.isActive?Object(d.a)(Br||(Br=Object(s.a)(["background-color: #ffc40089;"]))):""})),_l=d.b.div(qr||(qr=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 20px);\n    border: 1px solid black;\n    ","\n    height: ","px;\n    background-color: #637596;\n    ","\n    ","\n    box-sizing: border-box;\n\n    padding-left: 5px;\n    line-height: 28px;\n    font-size: 18px;\n    color: #dfdfdf;\n    font-weight: 600;\n"])),(function(n){return n.isScale?Object(d.a)(Wr||(Wr=Object(s.a)(["\n        width: 100%;\n    "]))):""}),li,(function(n){return n.isStruct?Object(d.a)(Ur||(Ur=Object(s.a)(["background-color: #949494;"]))):""}),(function(n){return n.isActive?Object(d.a)(Vr||(Vr=Object(s.a)(["background-color: #9e9e6c;"]))):""})),Bl=function(n){var e=Object(o.useContext)(uu),t=e.store,i=e.dispatcher,c=t.melodyState;return Object(ui.jsxs)(ql,{isActive:n.soundfontInfo.name===c.soundfontInfo.name,onClick:function(){c.soundfontInfo=n.soundfontInfo,i.tune.setState(c);var e=n.soundfontInfo;dl.a.instrument(new AudioContext,e.name,{gain:e.gain,release:.5}).then((function(n){i.tune.setInstrument(n)})).then((function(){alert("load successful!")}))},children:[Object(ui.jsx)(Wl,{children:n.icon}),Object(ui.jsx)(Ul,{children:n.labelName})]})},ql=d.b.div(Gr||(Gr=Object(s.a)(["\n    display: inline-block;\n    width: 85px;\n    height: 40px;\n    text-align: center;\n    border: 1px solid #4b4b4b;\n    background-color: #c7c6abda;\n    ","\n    border-radius: 6px;\n    margin-left: 4px;\n    box-sizing: border-box;\n\n    &:hover {\n        background-color: #e6e2c5da;\n        ","\n    }\n"])),(function(n){return n.isActive?Object(d.a)(Jr||(Jr=Object(s.a)(["\n        background-color: #fffd7eda;\n    "]))):""}),(function(n){return n.isActive?Object(d.a)(Yr||(Yr=Object(s.a)(["\n            background-color: #fffd7eda;\n        "]))):""})),Wl=d.b.div(Hr||(Hr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    /* background-color: #ff0000da; */\n    font-size: 20px;\n    color: #4b4b4b;\n    text-align: center;\n    /* padding-top: 5px; */\n    box-sizing: border-box;\n"]))),Ul=d.b.div(Xr||(Xr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 10px;\n    /* background-color: #0400ffdc; */\n    font-size: 16px;\n    font-weight: 600;\n    line-height: 0;\n    color: #3b3b3b;\n    text-align: center;\n"]))),Vl=function(n){return Object(ui.jsx)(Gl,{isActive:n.isActive,isDisable:n.isDisable,onClick:n.callback,children:n.labelName})},Gl=d.b.div(Qr||(Qr=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    height: 28px;\n    background: linear-gradient(to bottom, #e0e0e0, #aaaaaa, #e0e0e0);\n    ","\n    ","\n    color: #5d6e63;\n    border-radius: 2px;\n    border: solid 1px #747373;\n    font-size: 20px;\n    font-weight: 600;\n    text-align: center;\n\n    margin-left: 4px;\n"])),(function(n){return n.isActive?Object(d.a)(Zr||(Zr=Object(s.a)(["\n        background: linear-gradient(to bottom, #b7d9df, #59c6da, #b7d9df);\n    "]))):""}),(function(n){return n.isDisable?Ni:""})),Jl=function(n){return Object(ui.jsx)(Yl,{isDisable:n.isDisable,onClick:n.callback,children:n.labelName})},Yl=d.b.div($r||($r=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    height: 28px;\n    background: linear-gradient(to bottom, #a8bae0, #818ada, #a8bae0);\n    ","\n    color: #5d5d6e;\n    border-radius: 2px;\n    border: solid 1px #737374;\n    font-size: 20px;\n    font-weight: 600;\n    text-align: center;\n\n    margin-left: 4px;\n    &:hover {\n        background: linear-gradient(to bottom, #c2d0f0, #929beb, #c2d0f0);\n    }\n"])),(function(n){return n.isDisable?Ni:""})),Hl=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.melodyState;return Object(ui.jsxs)(ui.Fragment,{children:[Object(ui.jsxs)(Xl,{children:[Object(ui.jsxs)(Ql,{children:[Object(ui.jsx)(Vl,{labelName:"16",isDisable:!1,isActive:4===i.quantize,callback:function(){i.quantize=4,t.tune.setState(i)}}),Object(ui.jsx)(Vl,{labelName:"8",isDisable:!1,isActive:[2,6].includes(i.quantize),callback:function(){i.quantize=2,t.tune.setState(i)}}),Object(ui.jsx)(Vl,{labelName:"4",isDisable:!1,isActive:[1,3].includes(i.quantize),callback:function(){i.quantize=1,t.tune.setState(i)}}),Object(ui.jsx)(Vl,{labelName:"/3",isDisable:4===i.quantize,isActive:[3,6].includes(i.quantize),callback:function(){[3,6].includes(i.quantize)?i.quantize/=3:i.quantize*=3,t.tune.setState(i)}})]}),Object(ui.jsxs)(Zl,{children:[Object(ui.jsx)(Jl,{labelName:"Up",isDisable:!1,callback:function(){var n=e.scoreData.notesList;n.forEach((function(n){n.pitchIndex--})),t.tune.setNotesList(n.slice())}}),Object(ui.jsx)(Jl,{labelName:"Down",isDisable:!1,callback:function(){var n=e.scoreData.notesList;n.forEach((function(n){n.pitchIndex++})),t.tune.setNotesList(n.slice())}}),Object(ui.jsx)(Jl,{labelName:"Reset",isDisable:!1,callback:function(){t.tune.setNotesList([])}})]})]}),Object(ui.jsxs)($l,{children:[Object(ui.jsx)(Bl,{icon:Object(ui.jsx)(Ci.h,{}),labelName:"violin",soundfontInfo:{name:"violin",gain:6}}),Object(ui.jsx)(Bl,{icon:Object(ui.jsx)(Ci.b,{}),labelName:"e-guitar",soundfontInfo:{name:"distortion_guitar",gain:3}}),Object(ui.jsx)(Bl,{icon:Object(ui.jsx)(Ci.e,{}),labelName:"saxphone",soundfontInfo:{name:"tenor_sax",gain:3}}),Object(ui.jsx)(Bl,{icon:Object(ui.jsx)(Ci.g,{}),labelName:"viola",soundfontInfo:{name:"viola",gain:5}}),Object(ui.jsx)(Bl,{icon:Object(ui.jsx)(Ci.f,{}),labelName:"trumpet",soundfontInfo:{name:"trumpet",gain:5}}),Object(ui.jsx)(Bl,{icon:Object(ui.jsx)(Ci.a,{}),labelName:"clarinet",soundfontInfo:{name:"clarinet",gain:3}}),Object(ui.jsx)(Bl,{icon:Object(ui.jsx)(Ci.a,{}),labelName:"oboe",soundfontInfo:{name:"oboe",gain:5}}),Object(ui.jsx)(Bl,{icon:Object(ui.jsx)(Ci.a,{}),labelName:"flute",soundfontInfo:{name:"flute",gain:5}}),Object(ui.jsx)(Bl,{icon:Object(ui.jsx)(Ci.d,{}),labelName:"ocarina",soundfontInfo:{name:"ocarina",gain:3}})]})]})},Xl=d.b.div(ns||(ns=Object(s.a)(["\n    display: block;\n    padding: 4px 4px 4px 0;\n    background-color: #bbbbbb;\n"]))),Ql=d.b.div(es||(es=Object(s.a)(["\n    display: inline-block;\n    /* margin-left: 20px; */\n"]))),Zl=d.b.div(ts||(ts=Object(s.a)(["\n    display: inline-block;\n    margin-left: 20px;\n"]))),$l=d.b.div(is||(is=Object(s.a)(["\n    display: inline-block;\n    /* padding: 4px 4px 4px 0; */\n    background-color: #e4e4e486;\n"]))),nd=function n(){Object(u.a)(this,n)};nd.mouseDownEvent=function(n,e,t,i,o){if(0===n.button){var c=e.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=e.melodyState,r=e.melodyState.mouseState,s=r.notesState,l=e.scoreData.notesList,d=1/a.quantize,u=function(){var n=l.find((function(n){return x<ni(n.pos)*a.beatWidth})),e=i;return void 0!=n&&(e=ni(n.pos)*a.beatWidth),e},h=c.table.getBoundingClientRect(),x=n.clientX+c.table.scrollLeft-h.left,p=n.clientY+c.table.scrollTop-h.top;if(-1===s.index)r.isPut=!0,r.lock={x:Math.floor(x/a.beatWidth/d)*a.beatWidth*d,y:Math.floor(p/li)*li},r.nextLeft=u(),r.width=0;else if("normal"===s.side){var f=e.refs.melody;if(null!=f.table&&null!=f.measure&&null!=f.chord&&null!=f.pitch){var j=f.table.getBoundingClientRect(),g=n.clientY+f.table.scrollTop-j.top,v=Math.floor(g/li);l[s.index].pitchIndex=v,e.scoreData.notesList=l.slice(),oi(v,e)}}else{var O=l[s.index];if(r.lock={x:ni(O.pos)*a.beatWidth,y:0},r.nextLeft=u(),"left"===s.side){if(s.isMove=!0,r.prevRight=0,s.index>0){var m=l[s.index-1];r.prevRight=(ni(m.pos)+ni(m.len))*a.beatWidth}}else"right"===s.side&&(s.isResize=!0);r.notesState=Object(b.a)({},s)}o()}}},nd.mouseMoveEvent=function(n,e,t,i,o){if(0===n.button){var c=e.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=e.melodyState,r=e.melodyState.mouseState,s=r.notesState,l=e.scoreData.notesList,d=e.scoreData.chordList,u=1/a.quantize,h=c.table.getBoundingClientRect(),x=n.clientX+c.table.scrollLeft-h.left,p=n.clientY+c.table.scrollTop-h.top;if(r.isPut||s.isResize||s.isMove){if(r.isPut){var f=(Math.floor(x/a.beatWidth/u)+1)*a.beatWidth*u;r.width=(f>r.nextLeft?r.nextLeft:f)-r.lock.x}else if(s.isResize){var j=(Math.floor(x/a.beatWidth/u)+1)*a.beatWidth*u,g=l[s.index],v=j-r.lock.x;j>r.nextLeft&&(v=r.nextLeft-r.lock.x),j<=r.lock.x&&(v=a.beatWidth/a.quantize),g.len=ti(a.quantize,Math.floor(v/a.beatWidth*a.quantize)),e.scoreData.notesList=l.slice()}else if(s.isMove){var O=(Math.floor(x/a.beatWidth/u)+0)*a.beatWidth*u,m=l[s.index],k=ni(m.len)*a.beatWidth,y=O;O+k>r.nextLeft&&(y=r.nextLeft-k),O<r.prevRight&&(y=r.prevRight),m.pos=ti(a.quantize,Math.floor(y/a.beatWidth*a.quantize)),e.scoreData.notesList=l.slice()}}else{r.mousePitchIndex=Math.floor(p/li),r.mouseMeasurePos=Math.floor(x/a.beatWidth/u);var S=0,w=d.find((function(n){if("chord"===n.type){var e=n.detail.beatLen*a.beatWidth;if(x>=S&&x<S+e)return n;S+=e}}));r.curChord=void 0==w?null:w,s.index=-1;var I=a.focusIndex;a.focusIndex=-1;for(var C=0;C<l.length;C++){var E=l[C],D=ni(E.pos)*a.beatWidth,L=D+ni(E.len)*a.beatWidth;if(x>=D&&x<=L){s.index=C,a.focusIndex=C,s.side=x<D+10?"left":x>L-10?"right":"normal";break}}a.distIndex=a.focusIndex,-1!==I&&I!==a.focusIndex&&(a.lastFocus=I),r.notesState=Object(b.a)({},s)}o()}}},nd.mouseUpEvent=function(n,e,t,i,o){if(0===n.button){var c=e.melodyState,a=e.melodyState.mouseState,r=a.notesState,s=e.scoreData.notesList,l=c.quantize;if(a.isPut){if(a.isPut=!1,a.width>0){var d=Math.floor(a.lock.y/li);s.push({pos:ti(l,Math.floor(a.lock.x/c.beatWidth*l)),pitchIndex:d,len:ti(l,Math.floor(a.width/c.beatWidth*l))}),s.sort((function(n,e){var t=ni(n.pos),i=ni(e.pos);return t===i?0:t<i?-1:1})),t.tune.setNotesList(s),oi(d,e)}}else r.isMove=!1,r.isResize=!1,a.notesState=Object(b.a)({},r),t.tune.setNotesList(s.slice());o()}};var ed=nd,td=function n(){Object(u.a)(this,n)};td.keyDownEvent=function(n,e,t){e.userEnv.keyConfig.note;var i=e.melodyState.keySwitch,o=e.melodyState,c=o.mouseState;if(o.isPreview)switch(n.key){case" ":o.isPreview=!1,e.instruments.sampler.releaseAll(),o.focusIndex=o.lastFocus,e.reserveTasks.forEach((function(n){return clearTimeout(n)})),t.system.setReserveTasks([]),t.tune.setState(o)}else{if(-1!==c.notesState.index&&(c.notesState.index=-1,c.notesState.isResize=!1,c.notesState.side="normal"),c.mouseMeasurePos=-1,c.mousePitchIndex=-1,i.scaleMode||i.octave||i.resize||i.move||i.shift){if(i.scaleMode||i.octave){var a=i.scaleMode?"scale":"octave";switch(n.key){case"ArrowUp":t.tune.incrementCurNoteKey(!0,a);break;case"ArrowDown":t.tune.incrementCurNoteKey(!1,a)}}else if(i.resize)switch(n.key){case"ArrowLeft":t.tune.resizeNotes(!1);break;case"ArrowRight":t.tune.resizeNotes(!0)}else if(i.move)switch(n.key){case"ArrowLeft":t.tune.moveNotes(!1);break;case"ArrowRight":t.tune.moveNotes(!0)}else if(i.shift)switch(n.key){case"ArrowLeft":t.tune.moveDistFocus(!1);break;case"ArrowRight":t.tune.moveDistFocus(!0)}}else switch(n.key){case"ArrowUp":t.tune.incrementCurNoteKey(!0,"normal");break;case"ArrowDown":t.tune.incrementCurNoteKey(!1,"normal");break;case"ArrowLeft":t.tune.moveFocus(!1);break;case"ArrowRight":t.tune.moveFocus(!0);break;case"a":t.tune.addNotes();break;case"q":alert(JSON.stringify(e.scoreData.notesList[o.focusIndex].len));break;case"w":t.tune.adjustScrollX();break;case"e":t.tune.adjustScrollY();break;case"z":ri(e)}switch(n.key){case"1":o.quantize=4,t.tune.setState(o);break;case"2":o.quantize=2,t.tune.setState(o);break;case"3":o.quantize=1,t.tune.setState(o);break;case"/":[3,6].includes(o.quantize)?o.quantize/=3:o.quantize*=3,t.tune.setState(o);break;case"Delete":t.tune.removeNotes();break;case" ":t.tune.previewStart()}}},td.keySwitchEvent=function(n,e,t,i){e.userEnv.keyConfig.note;var o=e.melodyState.keySwitch;if(!e.melodyState.isPreview)switch(n.key){case"x":o.octave=i,t.tune.setKeySwitch(o);break;case"c":o.scaleMode=i,t.tune.setKeySwitch(o);break;case"f":o.resize=i,t.tune.setKeySwitch(o);break;case"d":o.move=i,t.tune.setKeySwitch(o);break;case"Shift":o.shift=i,t.tune.setKeySwitch(o)}i&&td.keyDownEvent(n,e,t)};var id,od,cd,ad,rd,sd,ld,dd,bd,ud,hd,xd,pd,fd,jd,gd,vd,Od,md,kd,yd,Sd,wd,Id,Cd,Ed,Dd,Ld,zd,Ad,Td,Md,Fd,Nd,Rd,Kd,Pd,_d,Bd,qd,Wd,Ud,Vd,Gd,Jd,Yd,Hd,Xd,Qd,Zd,$d,nb,eb,tb,ib,ob,cb,ab,rb,sb,lb,db=td,bb=function(n){var e=Object(o.useContext)(uu),t=e.store,i=e.dispatcher,c=t.melodyState,a=Object(o.useRef)(null),r=Object(o.useRef)(null),s=Object(o.useRef)(null),d=Object(o.useState)({}),u=Object(l.a)(d,2),x=u[0],p=u[1],f=function(){return p({})},j=c.mouseState,g=j.isPut,v=j.notesState,O=j.curChord,m=j.mouseMeasurePos,k=j.mousePitchIndex,y=j.width,S=j.lock,w=20*c.beatWidth*4,I=t.scoreData.notesList,C=t.scoreState.isTune,E=null==r.current?0:r.current.scrollLeft+r.current.clientWidth;Object(o.useEffect)((function(){i.system.setRefs(Object(b.a)(Object(b.a)({},t.refs),{},{melody:Object(b.a)(Object(b.a)({},t.refs.melody),{},{table:r.current,pitch:s.current})}));var n=c.soundfontInfo;dl.a.instrument(new AudioContext,n.name,{gain:n.gain,release:.5}).then((function(n){i.tune.setInstrument(n)}))}),[]),Object(o.useEffect)((function(){C&&null!=a.current&&a.current.focus()}),[C]);var D=Object(o.useMemo)((function(){for(var n=[],e=0;e<=320;e++)n.push(Object(ui.jsx)(Sb,{isHead:e%4===0,beatWidth:c.beatWidth},e));return n}),[20]),L=t.scoreData.chordList[0].detail,z=Object(o.useMemo)((function(){for(var n=h.map((function(n){return(L.keyIndex+n)%12})),e=[],t=0;t<60;t++){var i=$t(t);e.push(Object(ui.jsx)(kb,{isScale:n.includes(i),isBase:i===n[0]},t))}return e}),[L.keyIndex]),A=Object(o.useMemo)((function(){for(var n=[],e=0;e<I.length;e++){var t=I[e],o=ni(t.pos)*c.beatWidth,a=o+ni(t.len)*c.beatWidth;if(null!=r.current){var s=r.current.scrollLeft+E/2;if(o-s>E/2||s-a<-E/2)continue}var d=c.focusIndex<c.distIndex?[c.focusIndex,c.distIndex]:[c.distIndex,c.focusIndex],b=Object(l.a)(d,2),u=b[0],x=b[1],p=u<=e&&x>=e,f=h.map((function(n){return(L.keyIndex+n)%12})),j=$t(t.pitchIndex),g=f.includes(j);n.push(Object(ui.jsx)(wb,{left:ni(t.pos)*c.beatWidth,width:ni(t.len)*c.beatWidth,side:v.side,isActive:p,isScale:c.keySwitch.scaleMode,isResize:c.keySwitch.resize,isMove:c.keySwitch.move,isOctave:c.keySwitch.octave,isPreview:c.isPreview,onContextMenu:function(){i.tune.removeNotes()},children:Object(ui.jsx)(Ib,{y:t.pitchIndex*li,lenType:ii(t.len),isScale:g})},e))}return n}),[I,I.length,c.focusIndex,c.distIndex,v,c.isPreview,c.keySwitch.scaleMode,c.keySwitch.octave,c.keySwitch.resize,c.keySwitch.move,x]);return Object(ui.jsxs)(ub,{tabIndex:999,ref:a,isActive:n.isActive,onKeyDown:function(n){return db.keySwitchEvent(n,t,i,!0)},onKeyUp:function(n){return db.keySwitchEvent(n,t,i,!1)},children:[Object(ui.jsx)(pb,{children:Object(ui.jsx)(Hl,{})}),Object(ui.jsxs)(fb,{children:[Object(ui.jsx)(jb,{children:Object(ui.jsx)(wl,{barLength:20,beatWidth:c.beatWidth,curChord:O,timelineLength:w,mouseMeasurePos:m})}),Object(ui.jsx)(gb,{ref:s,children:Object(ui.jsx)(Fl,{mousePitchIndex:k,curChord:O})}),Object(ui.jsxs)(vb,{ref:r,onScroll:function(){var n=t.refs.melody;if(null!=n.table&&null!=n.measure&&null!=n.chord&&null!=n.pitch){var e=n.table.scrollLeft,i=n.table.scrollTop;n.measure.scrollTo({left:e}),n.chord.scrollTo({left:e}),n.pitch.scrollTo({top:i})}f()},children:[Object(ui.jsx)(Ob,{width:w,children:D}),Object(ui.jsx)(mb,{width:w,children:z}),Object(ui.jsxs)(yb,{width:w,onMouseDown:function(n){return ed.mouseDownEvent(n,t,i,w,f)},onMouseMove:function(n){return ed.mouseMoveEvent(n,t,i,w,f)},onMouseUp:function(n){return ed.mouseUpEvent(n,t,i,w,f)},children:[g?Object(ui.jsx)(xb,{x:S.x,y:S.y,width:y,lenType:y%c.beatWidth===0?4:y%(c.beatWidth/2)===0?8:16}):Object(ui.jsx)(ui.Fragment,{}),A]}),Object(ui.jsx)(Cb,{isUse:c.isPreview,width:w})]})]})]})},ub=d.b.div(id||(id=Object(s.a)(["\n    display: ",";\n    width: 100%;\n    height: 100%;\n    outline: none;\n"])),(function(n){return n.isActive?"inline-block":"none"})),hb=Object(d.c)(od||(od=Object(s.a)(["\n  0%,100% {\n    opacity: 0.2;\n  }\n  50% {\n    opacity: 1;\n  }\n"]))),xb=d.b.div(cd||(cd=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    top: ","px;\n    width: ","px;\n    height: ","px;\n    background: linear-gradient(to bottom, #dff85230, #fffb00, #dff85230);\n    border: 1px solid #fbffd9;\n    \n    animation: "," .8s linear infinite;\n"])),(function(n){return n.x}),(function(n){return n.y}),(function(n){return n.width}),(function(n){switch(n.lenType){case 4:return li;case 8:return 24;case 16:return 18;default:return 16}}),hb),pb=d.b.div(ad||(ad=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #b3b3b3;\n"])),80),fb=d.b.div(rd||(rd=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - ","px);\n    background-color: #464646;\n"])),80),jb=d.b.div(sd||(sd=Object(s.a)(["\n    display: inline-block;\n    margin-left: ","px;\n    width: calc(100% - ","px - 10px);\n    height: ","px;\n    background-color: #534b81;\n    overflow-y: hidden;\n"])),si,si,70),gb=d.b.div(ld||(ld=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - ","px - 10px);\n    background-color: #534b81;\n    vertical-align: top;\n    overflow-y: hidden;\n"])),si,70),vb=d.b.div(dd||(dd=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: #bdbdbd;\n    vertical-align: top;\n    overflow: scroll;\n    &::-webkit-scrollbar {\n        width: 10px;\n        height: 10px;\n    }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: #1959A8;\n    }\n    &::-webkit-scrollbar-track {\n        border-radius: 5px;\n        box-shadow: 0 0 4px #aaa inset;\n    }\n"])),si,70),Ob=d.b.div(bd||(bd=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 3;\n    width: ","px;\n    height: ","px;\n    white-space: nowrap;\n"])),(function(n){return n.width}),1800),mb=d.b.div(ud||(ud=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* z-index: 6; */\n    width: ","px;\n    height: ","px;\n    /* pointer-events: none; */\n"])),(function(n){return n.width}),1800),kb=d.b.div(hd||(hd=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    margin: 1px 0 0 0;\n    background-color: #00000024;\n    /* border-bottom: 1px solid #00000018; */\n    ","\n    ","\n"])),29,(function(n){return n.isScale?Object(d.a)(xd||(xd=Object(s.a)(["\n        background-color: #d1d1d11f;\n    "]))):""}),(function(n){return n.isBase?Object(d.a)(pd||(pd=Object(s.a)(["\n        background-color: #e0e0e0;\n    "]))):""})),yb=d.b.div(fd||(fd=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 5;\n    width: ","px;\n    height: ","px;\n    cursor: crosshair;\n"])),(function(n){return n.width}),1800),Sb=d.b.div(jd||(jd=Object(s.a)(["\n    display: inline-block;\n    /* background-color: #ffffffbe; */\n    width: ","px;\n    vertical-align: top;\n    height: ","px;\n    box-sizing: border-box;\n    border-left: solid "," #757575;\n"])),(function(n){return n.beatWidth/4}),1800,(function(n){return n.isHead?"2px":"1px"})),wb=d.b.div(gd||(gd=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 9;\n    left: ","px;\n    top: 0;\n    width: ","px;\n    height: 100%;\n    cursor: default;\n    background-color: #0044ff1f;\n    box-sizing: border-box;\n\n    // \u30a2\u30af\u30c6\u30a3\u30d6\u6642\n    ","\n    // \u30b9\u30b1\u30fc\u30eb\u30e2\u30fc\u30c9ON\n    ","\n    // \u30aa\u30af\u30bf\u30fc\u30d6\u30e2\u30fc\u30c9ON\n    ","\n    /* border-left: 1px solid #ff0000b2; */\n    ","\n\n    // \u30ad\u30fc\u30dc\u30fc\u30c9\u306b\u3088\u308b\u30ea\u30b5\u30a4\u30ba\u30e2\u30fc\u30c9ON\n    ",";\n    // \u30ad\u30fc\u30dc\u30fc\u30c9\u306b\u3088\u308b\u79fb\u52d5\u30e2\u30fc\u30c9ON\n    ",";\n    // \u30d7\u30ec\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9\n    ","\n"])),(function(n){return n.left}),(function(n){return n.width}),(function(n){return n.isActive?Object(d.a)(vd||(vd=Object(s.a)(["\n        background-color: #39cfd452;\n    "]))):""}),(function(n){return n.isActive&&n.isScale?Object(d.a)(Od||(Od=Object(s.a)(["\n        background-color: #00cf4552;\n    "]))):""}),(function(n){return n.isActive&&n.isOctave?Object(d.a)(md||(md=Object(s.a)(["\n        background-color: #ffa9a952;\n    "]))):""}),(function(n){return n.isActive?"left"===n.side?Object(d.a)(kd||(kd=Object(s.a)(["\n        border-left: 3px solid #0026ffb1;\n        cursor : col-resize;\n        background-color: #1900ff52;\n    "]))):"right"===n.side?Object(d.a)(yd||(yd=Object(s.a)(["\n        border-right: 3px solid #0026ffb1;\n        cursor : col-resize;\n        background-color: #ff00006e;\n    "]))):"":""}),(function(n){return n.isActive&&n.isResize?Object(d.a)(Sd||(Sd=Object(s.a)(["\n        border-right: 3px solid #0026ffb1;\n        background-color: #ff00006e;\n    "]))):""}),(function(n){return n.isActive&&n.isMove?Object(d.a)(wd||(wd=Object(s.a)(["\n        border-left: 3px solid #0026ffb1;\n        background-color: #1900ff52;\n    "]))):""}),(function(n){return n.isActive&&n.isPreview?Object(d.a)(Id||(Id=Object(s.a)(["\n        background-color: #fffb006d;\n    "]))):""})),Ib=d.b.div(Cd||(Cd=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    top: ","px;\n    width: 100%;\n    height: ","px;\n    /* background-color: red; */\n    /* background: linear-gradient(to bottom, ","); */\n    background: linear-gradient(to bottom, #f8525232, #ff0000, #f8525232);\n    ","\n    /* border: 1px solid #000; */\n    box-sizing: border-box;\n    font-size: 12px;\n    color: #000000;\n    box-shadow: 0 0 22px 0 #0000007d;\n    &:hover {\n        opacity: 0.8;\n    }\n"])),(function(n){return n.y}),(function(n){return li-(1===n.lenType?0:2===n.lenType?6:4===n.lenType?12:14)}),(function(n){switch(n.lenType){case 4:return"#f8525232, #ff0000, #f8525232";case 8:return"#5d52f831, #0400ff, #5d52f831";case 16:return"#52f85a31, #00ff15, #52f85a31"}}),(function(n){return n.isScale?"":Object(d.a)(Ed||(Ed=Object(s.a)(["    \n       background: linear-gradient(to bottom, #f8b65231, #ffae00, #f8b65231);\n    "])))})),Cb=d.b.div(Dd||(Dd=Object(s.a)(["\n    position: absolute;\n    display: ",";\n    z-index: 80;\n    width: ","px;\n    height: ","px;\n    background-color: #007a1428;\n"])),(function(n){return n.isUse?"block":"none"}),(function(n){return n.width}),1800),Eb=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=e.scoreState,c=e.melodyState,a=function(){i.isTune=!i.isTune,t.score.setScoreState(i)};if(0===e.scoreData.chordList.length)return Object(ui.jsx)(ui.Fragment,{});var r=i.isTune?e.melodyState.isPreview:i.isPreview,s=i.isTune?c.isSolo:i.isSolo,l=i.isTune?function(){c.isPreview||t.tune.previewStart()}:function(){},d=i.isTune?function(){c.isSolo=!c.isSolo,t.tune.setState(c)}:function(){i.isSolo=!i.isSolo,t.score.setScoreState(i)};return Object(ui.jsxs)(Db,{children:[Object(ui.jsxs)(Lb,{children:[Object(ui.jsxs)(zb,{children:[Object(ui.jsx)(Ab,{isActive:!i.isTune,onClick:function(){i.isTune&&a()},children:"Harmonize"}),Object(ui.jsx)(Ab,{isActive:i.isTune,onClick:function(){i.isTune||a()},children:"Melody"})]}),Object(ui.jsxs)(Tb,{children:[Object(ui.jsxs)(Mb,{onClick:l,children:[Object(ui.jsx)(Fb,{isActive:r,children:"Play"})," / ",Object(ui.jsx)(Fb,{isActive:!r,children:"Pause"})]}),Object(ui.jsxs)(Mb,{onClick:d,children:[Object(ui.jsx)(Fb,{isActive:!s,children:"Emsamble"})," / ",Object(ui.jsx)(Fb,{isActive:s,children:"Solo"})]})]})]}),Object(ui.jsxs)(Nb,{tabIndex:999,onKeyDown:function(n){switch(n.key){case"r":a()}},children:[Object(ui.jsx)(Rb,{children:Object(ui.jsx)(ml,{})}),Object(ui.jsxs)(Kb,{children:[Object(ui.jsx)(bl,{isActive:!i.isTune}),Object(ui.jsx)(bb,{isActive:i.isTune})]})]})]})},Db=d.b.div(Ld||(Ld=Object(s.a)(["\n    width: 100%;\n    height: 100%;\n    outline: none;\n"]))),Lb=d.b.div(zd||(zd=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 35px;\n    background-color: #ececec;\n"]))),zb=d.b.div(Ad||(Ad=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    text-align: center;\n    margin-right: 20px;\n"]))),Ab=d.b.div(Td||(Td=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    width: 140px;\n    height: calc(100% - 8px);\n    /* background-color: #e0ff6f55; */\n    ","\n    margin: 4px 0 0 4px;\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #505050;\n    border-radius: 5px;\n    border: 1px solid #969696;\n    box-sizing: border-box;\n    &:hover {\n        background-color: #e0ff6f55;\n        ","\n    }\n"])),(function(n){return n.isActive?Object(d.a)(Md||(Md=Object(s.a)(["background-color: #f3b200c0;"]))):""}),(function(n){return n.isActive?Object(d.a)(Fd||(Fd=Object(s.a)(["background-color: #f3b200c0;"]))):""})),Tb=d.b.div(Nd||(Nd=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    /* background-color: #e0ff6f55; */\n\n    & * {\n        margin: 3px 0 0 5px;\n    }\n"]))),Mb=d.b.div(Rd||(Rd=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    width: 220px;\n    height: calc(100% - 8px);\n    background-color: #ecfd5273;\n    margin: 4px 0 0 4px;\n    text-align: center;\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #000000cf;\n    border-radius: 5px;\n    border: 1px solid #969696;\n    box-sizing: border-box;\n    &:hover {\n        background-color: #f6ffa373;\n    }\n"]))),Fb=d.b.span(Kd||(Kd=Object(s.a)(["\n    color: #00109e6e;\n    ","\n"])),(function(n){return n.isActive?Object(d.a)(Pd||(Pd=Object(s.a)(["color: #db0000;"]))):""})),Nb=d.b.div(_d||(_d=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - 35px);\n    background-color: #c50000;\n    outline: none;\n"]))),Rb=d.b.div(Bd||(Bd=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #d8d8d8;\n    border-right: 1px solid #3e3f57;\n    box-sizing: border-box;\n    vertical-align: top;\n"])),110),Kb=d.b.div(qd||(qd=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    height: 100%;\n    background-color: #dddddd;\n    vertical-align: top;\n"])),110),Pb=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher,i=-1!==e.scoreState.focusIndex;return Object(ui.jsx)(_b,{children:Object(ui.jsx)(Ei,{tabElements:[{name:"Manage",disable:!1,cont:Object(ui.jsx)(Ki,{})},{name:"Edit",disable:!i,cont:Object(ui.jsx)(Eb,{})},{name:"Thema",disable:!i,cont:Object(ui.jsx)("div",{})},{name:"Preview",disable:!i,cont:Object(ui.jsx)("div",{})}],activeNo:e.systemState.scoreTabIndex,selectTabIndex:function(n){return t.score.setScoreTabIndex(n)}})})},_b=d.b.div(Wd||(Wd=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),8,8,16,16),Bb=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher;return Object(ui.jsx)(qb,{children:Object(ui.jsx)(Ei,{tabElements:[{name:"Sound",disable:!0,cont:Object(ui.jsx)("div",{})},{name:"Design",disable:!0,cont:Object(ui.jsx)("div",{})}],activeNo:e.systemState.scoreTabIndex,selectTabIndex:function(n){return t.score.setScoreTabIndex(n)}})})},qb=d.b.div(Ud||(Ud=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),8,8,16,16),Wb=function(){var n=Object(o.useContext)(uu),e=n.store,t=(n.dispatcher,e.instruments.sampler),i=function(n,e){var i=[];return i.push(Object(ui.jsx)(Jb,{children:Object(ui.jsx)("div",{children:n})},i.length)),e.forEach((function(n){var e=n.degree,o=(e.isFlat?p:f)[e.index],c=(e.isFlat?g:v)[e.index],a=C(n.symbolKey).name;i.push(Object(ui.jsxs)(Yb,{onMouseDown:function(e){0===e.button&&(t.releaseAll(),C(n.symbolKey).structs.map((function(e){var t=S[e];return 36+n.degree.index+t})).forEach((function(n){var e=v[n%12]+Math.floor(n/12);t.triggerAttack(e,"+0",.5)})))},children:[Object(ui.jsxs)("div",{children:[o,a]}),Object(ui.jsxs)("div",{children:[c,a]})]},i.length))})),Object(ui.jsx)(Vb,{children:i})};return Object(ui.jsxs)(Ub,{onMouseDown:function(n){2===n.button&&t.releaseAll()},children:[i("Diatonic Triad",[{degree:{index:0,isFlat:!1},symbolKey:"major"},{degree:{index:2,isFlat:!1},symbolKey:"minor"},{degree:{index:4,isFlat:!1},symbolKey:"minor"},{degree:{index:5,isFlat:!1},symbolKey:"major"},{degree:{index:7,isFlat:!1},symbolKey:"major"},{degree:{index:9,isFlat:!1},symbolKey:"minor"},{degree:{index:11,isFlat:!1},symbolKey:"minor-minus5"}]),i("Diatonic Tetrad",[{degree:{index:0,isFlat:!1},symbolKey:"major-maj7th"},{degree:{index:2,isFlat:!1},symbolKey:"minor-7th"},{degree:{index:4,isFlat:!1},symbolKey:"minor-7th"},{degree:{index:5,isFlat:!1},symbolKey:"major-maj7th"},{degree:{index:7,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:9,isFlat:!1},symbolKey:"minor-7th"},{degree:{index:11,isFlat:!1},symbolKey:"minor7-minus5"}]),i("Parallel Triad",[{degree:{index:0,isFlat:!0},symbolKey:"minor"},{degree:{index:2,isFlat:!0},symbolKey:"major"},{degree:{index:3,isFlat:!0},symbolKey:"major"},{degree:{index:5,isFlat:!0},symbolKey:"minor"},{degree:{index:7,isFlat:!0},symbolKey:"minor"},{degree:{index:8,isFlat:!0},symbolKey:"major"},{degree:{index:10,isFlat:!0},symbolKey:"major"}]),i("Secondary Dominant",[{degree:{index:7,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:9,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:11,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:0,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:2,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:4,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:10,isFlat:!1},symbolKey:"major-min7th"}])]})},Ub=d.b.div(Vd||(Vd=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    margin: 4px 0 0 4px;\n    background-color: #c3d8dd6f;\n    border: solid 1px #888;\n    border-radius: 5px;\n    box-sizing: border-box;\n"]))),Vb=d.b.div(Gd||(Gd=Object(s.a)(["\n    display: inline-block;\n    width: 160px;\n    background-color: #bbbbbb;\n    padding-bottom: 5px;\n"]))),Gb=d.b.div(Jd||(Jd=Object(s.a)(["\n    display: inline-block;\n    width: 150px;\n    height: 80px;\n    margin: 5px 0 0 5px;\n    box-sizing: border-box;\n    border-radius: 4px;\n"]))),Jb=Object(d.b)(Gb)(Yd||(Yd=Object(s.a)(["\n    background-color: #51608f;\n    /* border: 1px solid #dfdfdf; */\n    font-weight: 600;\n    & div:nth-child(1) {\n        width: 100%;\n        text-align: center;\n        height: 100%;\n        font-size: 26px;\n        color: #ebebeb;\n    }\n"]))),Yb=Object(d.b)(Gb)(Hd||(Hd=Object(s.a)(["\n    background-color: #e0ebe5;\n    border: 1px solid #777;\n    & *{\n        width: 100%;\n        text-align: center;\n        height: 50%;\n    }\n    & div:nth-child(1) {\n        font-size: 26px;\n        color: #d40000;\n    }\n    & div:nth-child(2) {\n        font-size: 24px;\n        color: #000000;\n    }\n    &:hover {\n        background-color: #fcf29f;\n    }\n"]))),Hb=function(){var n=Object(o.useContext)(uu),e=n.store,t=n.dispatcher;return Object(ui.jsx)(Xb,{children:Object(ui.jsx)(fi,{tabElements:[{name:"Home",icon:Object(ui.jsx)(wi.a,{}),disable:!0,cont:Object(ui.jsx)("div",{})},{name:"Perform",icon:Object(ui.jsx)(Ii.b,{}),disable:!0,cont:Object(ui.jsx)(Wb,{})},{name:"Score",icon:Object(ui.jsx)(Ci.c,{}),disable:!0,cont:Object(ui.jsx)(Pb,{})},{name:"Option",icon:Object(ui.jsx)(Ii.a,{}),disable:!0,cont:Object(ui.jsx)(Bb,{})}],activeNo:e.systemState.mainChannelIndex,selectTabIndex:function(n){return t.system.setMainTabIndex(n)}})})},Xb=d.b.div(Xd||(Xd=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),15,15,30,30),Qb=function(){var n=Object(o.useContext)(uu),e=(n.store,n.dispatcher),t=Object(o.useState)(!1),i=Object(l.a)(t,2),c=i[0],a=i[1],r=Object(o.useState)(),s=Object(l.a)(r,2),d=s[0],b=s[1];return Object(o.useEffect)((function(){b(setTimeout((function(){a(!0)}),3e3))}),[]),Object(o.useEffect)((function(){c&&setTimeout((function(){e.system.switchSplashToMain()}),500)}),[c]),Object(ui.jsx)(Zb,{isSwitch:c,onClick:function(n){clearTimeout(d),a(!0)},children:Object(ui.jsxs)(nu,{children:[Object(ui.jsx)("span",{children:"L"}),"iCreSia"]})})},Zb=d.b.div(Qd||(Qd=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 10;\n    /* width: 500px;\n    height: 500px; */\n    width: 100%;\n    height: 100%;\n    /* background-color: #d8d8d8; */\n    background: radial-gradient(#868686, #ffffff);\n    opacity: ",";\n    transition: opacity 500ms;\n"])),(function(n){return n.isSwitch?"0":"1"})),$b=Object(d.c)(Zd||(Zd=Object(s.a)(["\n  0%, 100% {\n    opacity: 0.4;\n  }\n  50% {\n    opacity: 1;\n  }\n"]))),nu=d.b.div($d||($d=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin-top: 15%;\n    width: 100%;\n    height: 400px;\n    background-color: #ffffff1f;\n    /* background: linear-gradient(to bottom, #99999913, #ffffff13,#ffffff13,#ffffff13, #99999913); */\n    color: white;\n    font-size: 130px;\n    font-weight: 600;\n    text-align: center;\n    text-shadow: 1px 2px 22px #0000003d;\n    line-height: 350px;\n    animation: "," 3s linear infinite;\n    & span {\n        color: red;\n        font-size: 160px;\n    }\n"])),$b),eu=t(25),tu=t(26),iu=function(){return Object(ui.jsxs)(ou,{children:[Object(ui.jsxs)(cu,{children:[Object(ui.jsx)(ru,{children:"L"}),Object(ui.jsx)(au,{children:"iCreSia"})]}),Object(ui.jsxs)(su,{children:[Object(ui.jsxs)(du,{children:[Object(ui.jsx)("div",{children:Object(ui.jsx)(eu.a,{})}),"Login / Sign up"]}),Object(ui.jsx)(bu,{children:Object(ui.jsx)("div",{children:Object(ui.jsx)(tu.a,{})})})]})]})},ou=d.b.div(nb||(nb=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    background: linear-gradient(to bottom, #ececec, #e2e2e2, #eeeeee);\n    /* background-color: #c2c2c2; */\n    box-shadow: 0 0 8px 0 #000b3a48;\n"])),44),cu=d.b.div(eb||(eb=Object(s.a)(["\n    display: inline-block;\n    margin: 2px 0 0 10px;\n    width: 200px;\n    height: calc(100% - 4px);\n    /* background-color: #00000013; */\n    font-size: 34px;\n    font-weight: 600;\n    line-height: 36px;\n    text-shadow: 1px 2px 3px #8080806a;\n"]))),au=d.b.span(tb||(tb=Object(s.a)(["\n    color: #ffffff;\n"]))),ru=d.b.span(ib||(ib=Object(s.a)(["\n    font-size: 34px;\n    color: #da4242;\n"]))),su=d.b.div(ob||(ob=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    position: absolute;\n    right: 30px;\n    /* background-color: #ff00002b; */\n"]))),lu=d.b.div(cb||(cb=Object(s.a)(["\n    background-color: #c9c7c7;\n    &:hover {\n        background-color: #cf9bae;\n    }\n    transition: background-color 800ms;\n"]))),du=Object(d.b)(lu)(ab||(ab=Object(s.a)(["\n    display: inline-block;\n    width: 240px;\n    margin: 5px 10px 0 0;\n    height: calc(100% - 10px);\n    border-radius: 20px;\n    /* background: linear-gradient(to bottom, #e9baba, #d39d9d, #e9baba); */\n    /* background-color: #adadad; */\n    /* border: 1px solid #7e7e7e; */\n    /* box-shadow: 0 0 8px 0 #000b3a48; */\n    /* text-shadow: 1px 2px 3px #808080ba; */\n    text-align: center;\n    font-size: 22px;\n    font-weight: 600;\n    line-height: 28px;\n    color: #ffffff;\n    vertical-align: top;\n\n    & div {\n        display: inline-block;\n        /* background-color: #0000007d; */\n        margin: 2px 5px 0 0;\n        vertical-align: top;\n    }\n"]))),bu=Object(d.b)(lu)(rb||(rb=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: ","px;\n    margin: 3px 0 0 0;\n    border-radius: 50%;\n    /* background: linear-gradient(to bottom, #e9baba, #d39d9d, #e9baba); */\n    /* background-color: #48aa9d; */\n    /* border: 1px solid #7e7e7e; */\n    /* box-shadow: 0 0 8px 0 #000b3a48; */\n    /* text-shadow: 1px 2px 3px #808080ba; */\n    /* text-align: center; */\n    font-size: 28px;\n    font-weight: 600;\n    color: #ffffff;\n    & div {\n        display: inline-block;\n        margin: 2px 0 0 5px;\n        /* background-color: #0000007d; */\n        vertical-align: top;\n    }\n"])),38,38),uu=Object(o.createContext)({}),hu=function(){var n=Object(o.useReducer)(Xt,bi),e=Object(l.a)(n,2),t=e[0],i=e[1],c=new di(t,i);return Object(ui.jsx)(uu.Provider,{value:{store:t,dispatcher:c},children:Object(ui.jsxs)(ui.Fragment,{children:[t.systemState.isSplash?Object(ui.jsx)(Qb,{}):Object(ui.jsx)(ui.Fragment,{}),Object(ui.jsxs)(xu,{children:[Object(ui.jsx)(hi,{}),Object(ui.jsx)(iu,{}),Object(ui.jsx)(pu,{children:Object(ui.jsx)(Hb,{})})]})]})})},xu=d.b.div(sb||(sb=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background-color: #d8d8d8;\n"]))),pu=d.b.div(lb||(lb=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - ","px);\n    /* background-color: #c2c2c2; */\n"])),44);var fu=function(){return Object(o.useEffect)((function(){document.oncontextmenu=function(){return!1},window.addEventListener("keydown",(function(n){[32,37,38,39,40].indexOf(n.keyCode)>-1&&n.preventDefault()}),!1)}),[]),Object(ui.jsx)(hu,{})},ju=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,60)).then((function(e){var t=e.getCLS,i=e.getFID,o=e.getFCP,c=e.getLCP,a=e.getTTFB;t(n),i(n),o(n),c(n),a(n)}))};r.a.render(Object(ui.jsx)(c.a.StrictMode,{children:Object(ui.jsx)(fu,{})}),document.getElementById("root")),ju()}},[[59,1,2]]]);
//# sourceMappingURL=main.4c4debbf.chunk.js.map