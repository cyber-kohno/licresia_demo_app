(this.webpackJsonplicresia_demo=this.webpackJsonplicresia_demo||[]).push([[0],{11:function(e,n,t){"use strict";(function(e){var i,o=t(8),c=t.n(o),a=t(10),r=t(32),s=t.n(r);!function(n){var t=n.API_DOMAIN="http://localhost:5000";n.sendQueryRequestToAPI=function(e,n){return fetch(t+"/"+e,function(e){return{mode:"cors",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({sql:e})}}(n))},n.gZip=function(e){var n=encodeURIComponent(e);return s.a.gzipSync(n).toString("base64")},n.unZip=function(n){var t=e.from(n,"base64"),i=s.a.unzipSync(t);return decodeURIComponent(i.toString())},n.getStringFromDate=function(e){var n=e.getFullYear().toString(),t=(1+e.getMonth()).toString(),i=e.getDate().toString(),o=e.getHours().toString(),c=e.getMinutes().toString(),a=e.getSeconds().toString(),r="YYYY-MM-DD hh:mm:ss";return r=(r=(r=(r=(r=(r=r.replace(/YYYY/g,n)).replace(/MM/g,t)).replace(/DD/g,i)).replace(/hh/g,o)).replace(/mm/g,c)).replace(/ss/g,a)},n.saveFile=function(e,n){var t=n.fileHandle;null!=t?Object(a.a)(c.a.mark((function o(){var a,r;return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.createWritable();case 2:return a=o.sent,r=i.gZip(e),o.next=6,a.write(r);case 6:return o.next=8,a.close();case 8:return n.fileHandle=t,o.next=11,t.getFile();case 11:o.sent,alert("saved successfully!");case 13:case"end":return o.stop()}}),o)})))():window.showSaveFilePicker({types:[{accept:{"text/plain":[".lcrs"]}}]}).then((function(t){Object(a.a)(c.a.mark((function o(){var a,r;return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.createWritable();case 2:return a=o.sent,r=i.gZip(e),o.next=6,a.write(r);case 6:return o.next=8,a.close();case 8:n.fileHandle=t;case 9:case"end":return o.stop()}}),o)})))()})).catch((function(){console.log("\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f")}))}}(i||(i={})),n.a=i}).call(this,t(16).Buffer)},110:function(e,n,t){"use strict";t.r(n);var i,o=t(7),c=t.n(o),a=t(46),r=t.n(a),s=(t(58),t(2)),l=t(9),d=t(3),b=t(8),u=t.n(b),h=t(6),x=t(10),p=t(4);!function(e){e[e.SET_SYSTEM_STATE=0]="SET_SYSTEM_STATE",e[e.SET_SCORE_STATE=1]="SET_SCORE_STATE",e[e.SET_TUNE_STATE=2]="SET_TUNE_STATE",e[e.SET_SCORE_DATA=3]="SET_SCORE_DATA",e[e.SET_REFS=4]="SET_REFS",e[e.SET_INSTRUMENTS=5]="SET_INSTRUMENTS",e[e.SET_BACKING_STATE=6]="SET_BACKING_STATE",e[e.SET_RESERVE_TASKS=7]="SET_RESERVE_TASKS",e[e.SET_INVALIDATE=8]="SET_INVALIDATE"}(i||(i={}));var f,g=function(e,n){var t=n.type,o=n.payload;switch(t){case i.SET_SYSTEM_STATE:e.systemState=o.systemState;break;case i.SET_SCORE_STATE:e.scoreState=o.scoreState;break;case i.SET_SCORE_DATA:e.scoreData=o.scoreData;break;case i.SET_TUNE_STATE:e.melodyState=o.tuneState;break;case i.SET_REFS:e.refs=o.refs;break;case i.SET_INSTRUMENTS:e.instruments=o.instruments;break;case i.SET_BACKING_STATE:e.backingState=o.backingState;break;case i.SET_RESERVE_TASKS:e.reserveTasks=o.reserveTasks;break;case i.SET_INVALIDATE:e.invalidate=o.invalidate}return Object(h.a)({},e)};t(53);!function(e){e.MAJOR_SCALE_INTERVALS=[0,2,4,5,7,9,11],e.MINOR_SCALE_INTERVALS=[0,2,3,5,7,8,10],e.KEY12_FLAT_LIST=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],e.KEY12_SHARP_LIST=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];var n=e.DEGREE12_FLAT_LIST=["\u2160","b\u2161","\u2161","b\u2162","\u2162","\u2163","b\u2164","\u2164","b\u2165","\u2165","b\u2166","\u2166"],t=e.DEGREE12_SHARP_LIST=["\u2160","#\u2160","\u2161","#\u2161","\u2162","\u2163","#\u2163","\u2164","#\u2164","\u2165","#\u2165","\u2166"],i=e.KEY12_MAJOR_SCALE_LIST=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],o=e.KEY12_MINOR_SCALE_LIST=["C","C#","D","D#","E","F","F#","G","G#","A","Bb","B"],c=(e.getDisplayKeyScaleName=function(e,n){return"major"===n?i[e]:o[e]+"m"},e.SCALE_DEF_LIST=["major","minor"],e.BEAT_DEF_LIST=["2/4","4/4","3/4","6/8","9/8","12/8"],e.isFlatFromRelation=function(e){switch(e){case"M2":case"M3":case"M6":case"M7":return!1}return!0},e.getBeatProps=function(e){switch(e){case"4/4":return{beatMemoriCount:4,barBeatCnt:4};case"2/4":return{beatMemoriCount:4,barBeatCnt:2};case"3/4":return{beatMemoriCount:4,barBeatCnt:3};case"6/8":return{beatMemoriCount:6,barBeatCnt:2};case"9/8":return{beatMemoriCount:6,barBeatCnt:3};case"12/8":return{beatMemoriCount:6,barBeatCnt:4}}}),a=(e.calcSustainMsec=function(e,n,t,i){return 6e4/t*(e+n*(1/c(i).beatMemoriCount))},e.SYMBOL_LIST=[{key:"major",name:"",base:null,structs:["p1","M3","p5"],attr:"triad"},{key:"minor",name:"m",base:null,structs:["p1","m3","p5"],attr:"triad"},{key:"suspend4th",name:"sus4",base:null,structs:["p1","p4","p5"],attr:"triad"},{key:"diminish",name:"dim",base:null,structs:["p1","m3","d5"],attr:"triad"},{key:"diminish-7th",name:"dim7",base:"diminish",structs:["p1","m3","d5","d7"],attr:"seventh"},{key:"augument",name:"aug",base:null,structs:["p1","M3","a5"],attr:"triad"},{key:"augument-7th",name:"aug7",base:"augument",structs:["p1","M3","a5","m7"]},{key:"minor-minus5",name:"m(-5)",base:null,structs:["p1","m3","d5"],attr:"triad"},{key:"minor7-minus5",name:"m7(-5)",base:"minor-minus5",structs:["p1","m3","d5","m7"],attr:"seventh"},{key:"major-maj7th",name:"maj7",base:"major",structs:["p1","M3","p5","M7"],attr:"seventh"},{key:"major-min7th",name:"7",base:"major",structs:["p1","M3","p5","m7"],attr:"seventh"},{key:"minor-7th",name:"m7",base:"minor",structs:["p1","m3","p5","m7"],attr:"seventh"},{key:"sus4-7th",name:"7sus4",base:"suspend4th",structs:["p1","p4","p5"]},{key:"minor-maj7th",name:"mmaj7",base:"minor",structs:["p1","m3","p5","M7"],attr:"seventh"},{key:"major-add9th",name:"add9",base:"major",structs:["p1","M2","M3","p5"],attr:"add9th"},{key:"minor-add9th",name:"madd9",base:"minor",structs:["p1","M2","m3","p5"],attr:"add9th"},{key:"major-maj9th",name:"maj9",base:"major-maj7th",structs:["p1","m3","p5"],attr:"add9th"},{key:"major-9th",name:"9",base:"major-min7th",structs:["p1","m3","p5"]}]),r=e.IntervalRelationProps={p1:0,m2:1,M2:2,m3:3,M3:4,p4:5,d5:6,p5:7,a5:8,m6:8,M6:9,d7:9,m7:10,M7:11},s=(e.DIATONIC_MAJOR_SCALE_LIST=[{root:{index:0,isFlat:!1},symbolKey:"major"},{root:{index:2,isFlat:!1},symbolKey:"minor"},{root:{index:4,isFlat:!1},symbolKey:"minor"},{root:{index:5,isFlat:!1},symbolKey:"major"},{root:{index:7,isFlat:!1},symbolKey:"major"},{root:{index:9,isFlat:!1},symbolKey:"minor"},{root:{index:11,isFlat:!1},symbolKey:"minor-minus5"}],e.DIATONIC_MINOR_SCALE_LIST=[{root:{index:0,isFlat:!1},symbolKey:"minor"},{root:{index:2,isFlat:!1},symbolKey:"minor-minus5"},{root:{index:3,isFlat:!0},symbolKey:"major"},{root:{index:5,isFlat:!1},symbolKey:"minor"},{root:{index:7,isFlat:!1},symbolKey:"minor"},{root:{index:8,isFlat:!0},symbolKey:"major"},{root:{index:10,isFlat:!0},symbolKey:"major"}],e.ROOT_ALL=[null,{index:0,isFlat:!1},{index:1,isFlat:!1},{index:1,isFlat:!0},{index:2,isFlat:!1},{index:3,isFlat:!1},{index:3,isFlat:!0},{index:4,isFlat:!1},{index:5,isFlat:!1},{index:6,isFlat:!1},{index:6,isFlat:!0},{index:7,isFlat:!1},{index:8,isFlat:!1},{index:8,isFlat:!0},{index:9,isFlat:!1},{index:10,isFlat:!1},{index:10,isFlat:!0},{index:11,isFlat:!1}],e.getDegreeRoot=function(e){return(e.isFlat?n:t)[e.index]},e.DIATONIC_MAJOR_SCALE_DEGREE_NAMES=["\u2160","\u2160maj7","\u2161m","\u2161m7","\u2162m","\u2162m7","\u2163","\u2163maj7","\u2164","\u21647","\u2165m","\u2165m7","\u2166m(-5)","\u2166m7(-5)"]),l=e.DIATONIC_NATURAL_MINOR_SCALE_DEGREE_NAMES=["\u2160m","\u2160m7","\u2161m(-5)","\u2161m7(-5)","b\u2162","b\u2162M7","\u2163m","\u2163m7","\u2164m","\u2164m7","b\u2165","b\u2165M7","b\u2166","b\u21667"];e.getDiatonicDegreeList=function(e){return"major"===e?s:l},e.getRootName=function(e,n){return(e.isFlat?f.KEY12_FLAT_LIST:f.KEY12_SHARP_LIST)[(n+e.index)%12]},e.getSymbolFromKey=function(e){var n=a.find((function(n){if(e===n.key)return n}));return void 0!=n?n:a[0]},e.getSymbolDerives=function(e){var n=[];return a.forEach((function(t){e===t.base&&n.push(t.key)})),n},e.getIntervalValues=function(e,n){return n.map((function(n){return e+r[n]}))}}(f||(f={}));var j,v=f;!function(e){e.OCTAVE_NUM=8,e.STRUCT_NUM=6,e.CHANNEL_MAX=12,e.getInitialRecord=function(e){return new Array(e).fill(null)},e.buildChannels=function(e){for(var n=[],t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++)e[t][i]&&n.push({octave:t,structIndex:i});return 0===n.length&&n.push({octave:-1,structIndex:0}),n},e.getVoicingListFromTable=function(e){var n=[];if(null!=e)for(var t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++)e[t][i]&&n.push({octave:t,struct:i});return n},e.buildPatternProps=function(e){var n=e.channels.length,t=[];e.layers.forEach((function(e){var n=e.noteDivList,i=[];e.table.forEach((function(e,n){e.forEach((function(e,t){null!=e&&i.push({x:t,y:n,status:e})}))})),t.push({divs:n,notesList:i,vels:e.velocityList.slice()})}));var i=[];return e.pedalActs.forEach((function(e,n){null!=e&&i.push({divIndex:n,action:e})})),{channelSize:n,pedals:i,layers:t}},e.getChannels=function(e,n){for(var t=[],i=0;i<n;i++){var o={octave:-1,structIndex:0};i<e.length&&(o.octave=e[i].octave,o.structIndex=e[i].structIndex),t.push(o)}return t.reverse()},e.convertEditorLayerFromScore=function(e,n){var t=[];return console.log(JSON.stringify(n)),n.forEach((function(n){for(var i=[],o=function(e){for(var t=[],o=function(i){var o=n.notesList.find((function(n){return n.x===i&&n.y===e}));t.push(null==o?null:o.status)},c=0;c<n.divs.length;c++)o(c);i.push(t)},c=0;c<e;c++)o(c);t.push({noteDivList:n.divs,table:i,velocityList:n.vels})})),console.log(JSON.stringify(t)),t},e.getPitchListFromVoicing=function(e,n,t,i){return e.map((function(e){var t=v.IntervalRelationProps[i.structs[e.struct]];return 12*e.octave+n+t}))},e.playBacking=function(e,n,t,i,o,c){if(null==i.pattern)o.forEach((function(n){var t=v.KEY12_SHARP_LIST[n%12],i=Math.floor(n/12);M(t+i,e,c/1e3,5)}));else{var a=t.bpm,r=4===v.getBeatProps(t.beatSignature).beatMemoriCount?1:2/3,s=i.pattern,l=[];s.layers.forEach((function(t,i){var d=0,b=t.divs.map((function(e){var n=6e4/a*d,t=4/e.rate*r;return e.isDot?t*=1.5:e.div3>0&&(t/=3*e.div3),d+=t,{start:n,sustain:6e4/a*t}}));0===i&&void 0!=s.pedals&&b.forEach((function(e,n){var t,i=null===(t=s.pedals)||void 0===t?void 0:t.find((function(e){if(n===e.divIndex)return e}));void 0!=i&&(l.length>0&&(l[l.length-1].end=e.start),l.push({start:e.start,end:c,action:i.action}))}));var u=[];t.notesList.forEach((function(i){if(void 0===u.find((function(e){if(e.x===i.x&&e.y===i.y)return e}))){var c=b[i.x],r=(void 0==i.status.timing?0:i.status.timing)*(6e4/a*1/32),s=c.start+r,d=c.sustain;"s"===i.status.signal?d*=.5:"t"===i.status.signal&&function(){for(var e=i.x,n=!0;n;){e++;var o=t.notesList.find((function(n){if(n.x===e&&n.y===i.y)return n}));void 0!=o&&(d+=b[e].sustain,u.push({x:e,y:i.y}),n="t"===o.status.signal)}}();for(var h=0;h<l.length;h++){var x=l[h],p=s+c.sustain;if("off"!==x.action&&p>x.start&&p<=x.end){d=x.end-s;break}}var f=void 0==i.status.velAdj?0:i.status.velAdj,g=t.vels[i.x]+f;g<1&&(g=1),g>10&&(g=10),g*=.6,n.push(setTimeout((function(){var n=o[i.y],t=v.KEY12_SHARP_LIST[n%12],c=Math.floor(n/12);M(t+c,e,d/1e3,g)}),s))}}))}))}},e.stopPreview=function(e,n,t,i){var o;null===(o=e.instruments.harmony)||void 0===o||o.stop(),n.isPreview=!1,i.forEach((function(e){return clearInterval(e)})),t.backing.setState(n)};var n=e.getLimitLen=function(e){var n=e.minute,t=v.getBeatProps(e.init.beatSignature).beatMemoriCount;return e.beatLen+(n.head/t+n.tail/t)},t=e.getUsingLenFromDivs=function(e,n){var t=4/v.getBeatProps(n.init.beatSignature).beatMemoriCount;return e.reduce((function(e,n){var i=1/n.rate*t;return n.isDot&&(i*=1.5),0!==n.div3&&(i*=n.div3/3),e+4*i}),0)},i=(e.checkError=function(e,o,c){var a=!1;if(null!=c){o.length<c.channels.length&&(a=!0);var r=n(e);c.layers.forEach((function(n){var i=t(n.noteDivList,e);r<i&&(a=!0)})),c.layers[0].table.forEach((function(e,n){e.forEach((function(e,t){null!=e&&i(c.layers,0,n,t)&&(a=!0)}))}))}return a},e.checkOverlapBackLayer=function(e,n,t,i){for(var c=e[n],a=e[0===n?1:0],r=o(c.noteDivList,i),s=Object(l.a)(r,2),d=s[0],b=s[1],u=!1,h=0;h<a.noteDivList.length;h++)if(null!=a.table[t][h]){var x=o(a.noteDivList,h),p=Object(l.a)(x,2),f=p[0],g=p[1];if(b>f&&d<g){u=!0;break}}return u}),o=e.getDivRange=function(e,n){var t=0,i=0;return e.slice(0,n+1).forEach((function(e,n){var o=1/e.rate;e.isDot&&(o*=1.5),0!==e.div3&&(o*=e.div3/3),t=i,i+=4*o})),[t,i]};e.isPermitDot=function(e){return[8,4,2].includes(e.rate)&&0===e.div3},e.isPermit3ren=function(e){return[8,4].includes(e.rate)&&!e.isDot}}(j||(j={}));var m,O,k=j;(O=m||(m={})).updateHarmonizeCache=function(e,n){var t=e.scoreData.chordList,i=e.scoreState,o=t[0].detail,c=[],a=[],r=[],s=[],l=[],d=[],b=o.keyIndex,u=o.scale,h=o.bpm,x=0,p=-1,f=0,g=0,j=0,m=-1,O=0,k=0,y=0,S=0,w=0,I=0,L=o.beatSignature,E=0,C=0,A=function(){l.push({bpm:h,beatRate:T.beatMemoriCount/4,memoriCnt:C}),C=0},T=v.getBeatProps(L);t.forEach((function(e,n){var i=w,o=y,l=k,M=x;switch(e.type){case"fixed":"End"===e.detail.fixed&&(g+=j);break;case"section":var D=e.detail;a.push({labelName:D.labelName,beatSum:0,rangeIndexStart:n,rangeIndexEnd:t.length-2}),++p>0&&(a[p-1].rangeIndexEnd=n-1,a[p-1].beatSum=f,f=0);break;case"chord":g+=j;var _=e.detail;f+=_.beatLen;var z=_.minute.head+_.minute.tail;x+=z,m++,O=_.beatLen*T.beatMemoriCount+z;var F=Math.floor(w/T.barBeatCnt);w+=_.beatLen,F!==Math.floor(w/T.barBeatCnt)&&k++,E+=O,C+=O,j=v.calcSustainMsec(_.beatLen,z,h,L);for(var R=0;R<O;R++){var N=16;S%T.beatMemoriCount===0?N=4:S%(T.beatMemoriCount/(T.beatMemoriCount/2))===0&&(N=8);var P=T.barBeatCnt*T.beatMemoriCount,K=-1;S%P===0&&(K=++I),d.push({rate:N,barCount:K}),y++,S++}break;case"alter":var B=e.detail;switch(B.alterType){case"modulate":switch(s.push({keyIndex:b,scale:u,memoriCnt:E}),E=0,B.modRel){case"domm":b=(b+24+7*B.dommVal)%12;break;case"key":b=(b+12+B.keyAdj)%12;break;case"parallel":b=(b+12+3*("major"===u?-1:1))%12,u="major"===u?"minor":"major";break;case"relative":u="major"===u?"minor":"major"}break;case"tempo":switch(A(),B.tempoRel){case"diff":h+=B.tempoDiff;break;case"rate":h=Math.floor(1*h*(B.tempoRate/100));break;case"abs":h=B.tempoAbs}break;case"beat":A(),r.push({beatSignature:L,memoriCnt:S}),L=B.beatSignature,w=0,S=0,T=v.getBeatProps(L)}}c.push({bar:l,surplusBeat:i%T.barBeatCnt,minute:M,keyIndex:b,scale:u,bpm:h,beatSignature:L,sectionNo:p,pastSecond:g,chordIndex:m,curTotalMemori:o,reffers:{}})})),a[p].beatSum=f,s.push({keyIndex:b,scale:u,memoriCnt:E}),r.push({beatSignature:L,memoriCnt:S}),A(),i.elementCacheList=c,i.sectionCacheList=a,i.beatCacheList=r,i.tempoCacheList=l,i.scaleCacheList=s,i.measureCacheList=d,n.score.setScoreState(e.scoreState)},O.updateMelodyCache=function(e,n){var t=e.scoreData.notesList,i=(e.melodyState,[]);t.forEach((function(e){i.push({startTime:0,duration:0})}))},O.getKeyScaleFromNotesPos=function(e,n){for(var t=4*e,i=0,o=null,c=0;c<n.length;c++){var a=n[c];if(t<i){o=n[c-1];break}i+=a.memoriCnt}return null===o?n[n.length-1]:o},O.getTimeInfoFromNotesPos=function(e,n,t){for(var i=4*e,o=0,c=0,a=0,r=null,s=0;s<t.length;s++){var l=t[s];if(i<o){r=t[s-1];break}var d=l.memoriCnt/4;c+=60/l.bpm*d,a+=d,o+=l.memoriCnt}null===r&&(r=t[t.length-1]);var b=(e-a)*r.beatRate;return[c+=60/r.bpm*b,60/r.bpm*n*r.beatRate]};var y,S=m,w=function(e){return(59-e+9)%12},I=function(e){var n=0;return n+=e.len4,n+=e.len8/2,n+=e.len16/4,n+=e.len4div3/3,n+=e.len8div3/6},L=function(e,n){return E({len4:e.len4+n.len4,len8:e.len8+n.len8,len16:e.len16+n.len16,len4div3:e.len4div3+n.len4div3,len8div3:e.len8div3+n.len8div3})},E=function(e){var n=Math.floor(e.len8div3/3);e.len8div3-=3*n,e.len8+=n;var t=Math.floor(e.len8div3/2);e.len8div3-=2*t,e.len4div3+=t;var i=Math.floor(e.len4div3/3);e.len4div3-=3*i,e.len4+=i;var o=Math.floor(e.len16/2);e.len16-=2*o,e.len8+=o;var c=Math.floor(e.len8/2);return e.len8-=2*c,e.len4+=c,e},C=function(e,n){var t=0,i=0,o=0,c=0,a=0;switch(e){case 1:t=n;break;case 2:i=n;break;case 3:c=n;break;case 4:o=n;break;case 6:a=n}return E({len4:t,len8:i,len16:o,len4div3:c,len8div3:a})},A=function(e){return e.len8div3>0?6:e.len16>0?4:e.len4div3>0?3:e.len8>0?2:e.len4>0?1:0},T=function(e,n){var t=(59-e+9)%12,i=Math.floor((59-e+9)/12)+1,o=v.KEY12_SHARP_LIST[t%12],c=n.instruments.soundfontPlayer;null!=c&&(c.stop(),c.play(o+i,0,{duration:.5}))},M=function(e,n,t,i){var o=n.instruments.harmony;null!=o?o.play(e,0,{gain:i,duration:t}):alert("null")};!function(e){var n=e.stopPreview=function(e,n,t){var i=e.melodyState;i.isPreview=!1,t.forEach((function(e){return clearInterval(e)})),n.melody.setState(i),n.melody.adjustScrollX()},t=(e.previewStart=function(e,i){var o=e.melodyState,c=e.scoreState,a=e.scoreData,r=[],s=e.instruments.soundfontPlayer,d=-1===o.focusIndex?0:o.focusIndex;o.lastFocus=o.focusIndex,o.isPreview=!0;for(var b=e.invalidate.melody,u=-1,h=function(t){var d=a.notesList[t],h=I(d.pos),x=I(d.len),p=S.getTimeInfoFromNotesPos(h,x,c.tempoCacheList),f=Object(l.a)(p,2),g=f[0],j=f[1],m=d.pitchIndex;-1===u&&(u=-1===o.focusIndex?0:g);var O=w(m),k=v.KEY12_SHARP_LIST[O%12],y=Math.floor((59-m+9)/12)+1;r.push(setTimeout((function(){null!=s&&(s.stop(),s.play(k+y,0,{duration:j})),setTimeout((function(){o.focusIndex=t,o.destIndex=o.focusIndex,b(),i.melody.adjustScrollX()}),0)}),1e3*(g-u))),t===a.notesList.length-1&&r.push(setTimeout((function(){n(e,i,r)}),1e3*(g-u+j)))},x=d;x<a.notesList.length;x++)h(x);o.isSolo||t(1e3*u,e,i,r),i.system.setReserveTasks(r),i.melody.setState(o)},function(e,n,t,i){for(var o=n.scoreState,c=n.invalidate.melody,a=o.elementCacheList,r=n.scoreData.chordList,s=function(t){var o=a[t],s=r[t];if("chord"===s.type){if(o.pastSecond<e)return"continue";var l=s.detail;if(null==l.root)return{v:void 0};var d=(l.root.index+o.keyIndex)%12,b=null==l.on?-1:(l.on.index+o.keyIndex)%12,u=v.getSymbolFromKey(l.symbolKey),h=l.backing,x=k.getPitchListFromVoicing(h.voicingList,d,b,u),p=l.minute.head+l.minute.tail,f=v.calcSustainMsec(l.beatLen,p,o.bpm,o.beatSignature);i.push(setTimeout((function(){k.playBacking(n,i,o,h,x,f),setTimeout((function(){n.melodyState.tableMouse.curChord=s,c()}),0)}),o.pastSecond-e-0))}},l=3;l<r.length;l++){var d=s(l);if("continue"!==d&&"object"===typeof d)return d.v}});e.previewCurHarmony=function(e,n){var t=e.melodyState,i=e.scoreData.chordList[0].detail,o=t.tableMouse.curChord,c=e.reserveTasks;if(null!=o){var a=o.detail;if(null==a.root)return;var r=(a.root.index+i.keyIndex)%12,s=null==a.on?-1:(a.on.index+i.keyIndex)%12,l=v.getSymbolFromKey(a.symbolKey),d=a.backing,b=k.getPitchListFromVoicing(d.voicingList,r,s,l),u=a.minute.head+a.minute.tail,h=v.calcSustainMsec(a.beatLen,u,i.bpm,i.beatSignature);k.playBacking(e,c,i,d,b,h),c.push(setTimeout((function(){t.isPreview=!1,n.melody.setState(t)}),h)),t.isPreview=!0,n.melody.setState(t)}}}(y||(y={}));var D,_,z,F,R,N,P,K,B,H,U,J,V=y,Y=100,W=30,q=50,G=240,X=480,Z=t(11),Q=function e(n,t){var o=this;Object(p.a)(this,e),this.store=void 0,this.dispatch=void 0,this.system={setState:function(e){o.dispatch(i.SET_SYSTEM_STATE,{systemState:e})},switchSplashToMain:function(){var e=o.store.systemState;e.isSplash=!1,o.dispatch(i.SET_SYSTEM_STATE,{systemState:e})},setMainTabIndex:function(e){var n=o.store.systemState;n.mainChannelIndex=e,o.dispatch(i.SET_SYSTEM_STATE,{systemState:n})},setRefs:function(e){o.dispatch(i.SET_REFS,{refs:e})},setReserveTasks:function(e){o.dispatch(i.SET_RESERVE_TASKS,{reserveTasks:e})},setInvalidate:function(e){o.dispatch(i.SET_INVALIDATE,{invalidate:e})}},this.score={saveFile:function(){var e=o.store.scoreState,n=o.store.scoreData,t=e.fileHandle;null!=t?Object(x.a)(u.a.mark((function i(){var c,a;return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.createWritable();case 2:return c=i.sent,a=Z.a.gZip(JSON.stringify(n)),i.next=6,c.write(a);case 6:return i.next=8,c.close();case 8:return e.fileHandle=t,o.score.setScoreState(Object(h.a)({},e)),i.next=12,t.getFile();case 12:i.sent,console.log("saved successfully!");case 14:case"end":return i.stop()}}),i)})))():window.showSaveFilePicker({types:[{accept:{"text/plain":[".lcrs"]}}]}).then((function(t){Object(x.a)(u.a.mark((function i(){var c,a;return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.createWritable();case 2:return c=i.sent,a=Z.a.gZip(JSON.stringify(n)),i.next=6,c.write(a);case 6:return i.next=8,c.close();case 8:e.fileHandle=t,o.score.setScoreState(Object(h.a)({},e));case 10:case"end":return i.stop()}}),i)})))()})).catch((function(){console.log("\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f")}))},setPiano:function(e){o.dispatch(i.SET_INSTRUMENTS,{instruments:Object(h.a)(Object(h.a)({},o.store.instruments),{},{harmony:e})})},setScoreTabIndex:function(e){var n=o.store.systemState;n.scoreTabIndex=e,o.dispatch(i.SET_SYSTEM_STATE,{systemState:n})},setScoreState:function(e){o.dispatch(i.SET_SCORE_STATE,{scoreState:e})},setKeySwitch:function(e){var n=o.store.scoreState;n.keySwitch=e,o.score.setScoreState(n)},setScoreData:function(e){o.dispatch(i.SET_SCORE_DATA,{scoreData:e})},moveElement:function(e){var n=o.store.scoreState,t=e?1:-1;"fixed"!==o.store.scoreData.chordList[n.focusIndex+t].type&&(n.focusIndex+=t,n.distIndex=n.focusIndex,o.score.setScoreState(n))},moveDist:function(e){var n=o.store.scoreState,t=e?1:-1;"fixed"!==o.store.scoreData.chordList[n.distIndex+t].type&&(n.distIndex+=t,o.score.setScoreState(n))},releaseRange:function(e){var n=o.store.scoreState,t=n.focusIndex<n.distIndex?n.focusIndex:n.distIndex,i=n.focusIndex>n.distIndex?n.focusIndex:n.distIndex;n.focusIndex=e?i:t,n.distIndex=n.focusIndex,o.score.setScoreState(n)},moveSection:function(e){var n=o.store.scoreState,t=n.elementCacheList[n.focusIndex].sectionNo,i=n.sectionCacheList,c=i[t],a=o.store.scoreData.chordList[n.focusIndex].type;e?t<i.length-1?n.focusIndex=i[t+1].rangeIndexStart:n.focusIndex=c.rangeIndexEnd:n.focusIndex="section"===a&&t>0?i[t-1].rangeIndexStart:c.rangeIndexStart,n.distIndex=n.focusIndex,o.score.setScoreState(n)},flashElement:function(e){},incrementDegreeRoot:function(e){var n=o.store.scoreState,t=o.store.scoreData,i=t.chordList[n.focusIndex].detail,c=e?1:-1;null==i.root?e&&(i.root={index:0,isFlat:!1},o.score.setScoreData(t),o.score.flashElement(n.focusIndex)):i.root.index+c>=0&&i.root.index+c<=11?(i.root.index+=c,i.root.isFlat=!e&&![0,2,4,5,7,9,11].includes(i.root.index),o.score.setScoreData(t),o.score.flashElement(n.focusIndex)):i.root.index+c===-1&&(i.root=null,i.symbolKey="major",o.score.setScoreData(t),o.score.flashElement(n.focusIndex))},incrementBeatLen:function(e){var n=o.store.scoreState,t=o.store.scoreData,i=t.chordList.slice(),c=i[n.focusIndex].detail,a=e?1:-1;c.beatLen+a>=1&&c.beatLen+a<=4&&(c.beatLen+=a,t.chordList=i,o.score.setScoreData(t),setTimeout((function(){S.updateHarmonizeCache(o.store,o)}),1),o.score.flashElement(n.focusIndex))},incrementMinuteVal:function(e,n,t){var i=o.store.scoreData,c=i.chordList[e].detail,a=n?c.minute.tail:c.minute.head;(a+=t)>=-2&&a<=2&&(n?c.minute.tail=a:c.minute.head=a,i.chordList=i.chordList.slice(),o.score.setScoreData(i),S.updateHarmonizeCache(o.store,o))},incrementMinuteValRelation:function(e,n){var t=o.store.scoreState.focusIndex,i=o.store.scoreData.chordList,c=-1;if(e){for(var a=t+1;a<i.length-1;a++)if("chord"===i[a].type){c=a;break}}else for(var r=t-1;r>2;r--)if("chord"===i[r].type){c=r;break}-1!=c&&(o.score.incrementMinuteVal(t,e,n),o.score.incrementMinuteVal(c,!e,-n))},addChordElement:function(){var e=o.store.scoreState,n=o.store.scoreData,t=n.chordList[e.focusIndex],i=e.elementCacheList[e.focusIndex].beatSignature,c=v.getBeatProps(i).barBeatCnt;if("chord"===t.type){var a=t.detail;if(0!=a.minute.tail)return;c=a.beatLen}var r={type:"chord",detail:{beatLen:c,minute:{head:0,tail:0},root:null,on:null,symbolKey:"major",backing:{voicingList:[],pattern:null,hasError:!1}}};n.chordList.splice(e.focusIndex+1,0,r),o.score.setScoreData(n),S.updateHarmonizeCache(o.store,o)},addSectionElement:function(){var e=o.store.scoreState,n=o.store.scoreData;n.chordList.splice(e.focusIndex+1,0,{type:"section",detail:{labelName:"Section"}}),o.score.setScoreData(n),S.updateHarmonizeCache(o.store,o)},addAlterElement:function(){var e=o.store.scoreState,n=o.store.scoreData;n.chordList.splice(e.focusIndex+1,0,{type:"alter",detail:{alterType:null,modRel:null,dommVal:0,keyAdj:0,tempoRel:null,tempoDiff:0,tempoRate:1,tempoAbs:0,beatSignature:"4/4"}}),o.score.setScoreData(n),S.updateHarmonizeCache(o.store,o)},removeCurElement:function(){for(var e=o.store.scoreState,n=o.store.scoreData,t=e.focusIndex<e.distIndex?e.focusIndex:e.distIndex,i=e.focusIndex>e.distIndex?e.focusIndex:e.distIndex,c=t;c<=i;c++){var a=n.chordList[c],r=o.store.scoreState.elementCacheList[c].sectionNo;if("section"===a.type&&0===r)return}n.chordList.splice(t,i-t+1),o.score.setScoreData(n),e.focusIndex=t-1,e.distIndex=e.focusIndex,o.score.setScoreState(e),S.updateHarmonizeCache(o.store,o)},copyElementList:function(){for(var e=o.store.scoreState,n=o.store.scoreData,t=e.focusIndex<e.distIndex?e.focusIndex:e.distIndex,i=e.focusIndex>e.distIndex?e.focusIndex:e.distIndex,c=[],a=t;a<=i;a++){var r=n.chordList[a];c.push(JSON.parse(JSON.stringify(r)))}console.log(c.length),e.copiedElementList=c,e.cloneBacking=null,o.score.setScoreState(e)},pasteElementList:function(){var e=o.store.scoreState,n=o.store.scoreData,t=e.copiedElementList;null!=t&&(console.log(t.length),t.forEach((function(t,i){n.chordList.splice(e.focusIndex+1+i,0,t)})),o.score.setScoreData(n),e.focusIndex++,e.distIndex=e.focusIndex+t.length-1,e.copiedElementList=null,o.score.setScoreState(e),S.updateHarmonizeCache(o.store,o))},incrementSymbol:function(e){var n=o.store.scoreState,t=o.store.scoreData,i=t.chordList[n.focusIndex].detail,c=e?1:-1;null==i.root?(i.root={index:0,isFlat:!1},o.score.setScoreData(t)):i.root.index+c>=0&&i.root.index+c<=11&&(i.root.index+=c,i.root.isFlat=!e&&![0,2,4,5,7,9,11].includes(i.root.index),o.score.setScoreData(t))},setDiatonicChord:function(e,n){var t=o.store.scoreState,i=o.store.scoreData,c=i.chordList[t.focusIndex].detail,a=("major"===e?v.DIATONIC_MAJOR_SCALE_LIST:v.DIATONIC_MINOR_SCALE_LIST)[n];c.root=Object(h.a)({},a.root),c.symbolKey=a.symbolKey,o.score.setScoreData(i)},setDefaultBacking:function(){var e=o.store.scoreState,n=o.store.scoreData,t=n.chordList[e.focusIndex].detail,i=v.getSymbolFromKey(t.symbolKey);void 0!=i.attr&&(t.backing=function(e){var n=[];switch(e){case"triad":n=[{struct:0,octave:3},{struct:1,octave:3},{struct:2,octave:3}];break;case"seventh":case"add9th":n=[{struct:0,octave:3},{struct:1,octave:3},{struct:2,octave:3},{struct:3,octave:3}]}return{voicingList:n,pattern:null,hasError:!1}}(i.attr),o.score.setScoreData(n))},cloneBacking:function(){var e=o.store.scoreState,n=o.store.scoreData.chordList[e.focusIndex].detail;e.cloneBacking=JSON.parse(JSON.stringify(n.backing)),e.copiedElementList=null,o.score.setScoreState(e),console.log("clone backing! \n".concat(JSON.stringify(e.cloneBacking)))},pastBacking:function(){var e=o.store.scoreState;if(null!=e.cloneBacking){console.log("paste backing! \n".concat(JSON.stringify(e.cloneBacking)));var n=o.store.scoreData;n.chordList[e.focusIndex].detail.backing=JSON.parse(JSON.stringify(e.cloneBacking)),o.score.setScoreData(n)}}},this.symbol={toNext:function(e){var n=o.store.scoreState,t=n.symbolMng,i=o.store.scoreData,c=i.chordList[n.focusIndex].detail,a=e?1:-1,r=t.index+a;r>=0&&r<=t.curLine.length-1&&(t.index+=a,c.symbolKey=t.curLine[t.index],o.score.setScoreState(n),o.score.setScoreData(i))},toBase:function(){var e=o.store.scoreState,n=e.symbolMng,t=o.store.scoreData,i=t.chordList[e.focusIndex].detail;n.parentLine.length>0&&(i.symbolKey=n.parentLine[0],o.score.setScoreData(t))},toDerive:function(){var e=o.store.scoreState,n=e.symbolMng,t=o.store.scoreData,i=t.chordList[e.focusIndex].detail;n.childrenLine.length>0&&(i.symbolKey=n.childrenLine[0],o.score.setScoreData(t))}},this.melody={setState:function(e){o.dispatch(i.SET_TUNE_STATE,{tuneState:e})},allSelect:function(){var e=o.store.melodyState,n=o.store.scoreData.notesList;n.length>0&&(e.focusIndex=0,e.destIndex=n.length-1,o.melody.setState(e))},setNotesList:function(e){var n=o.store.scoreData;n.notesList=e,o.score.setScoreData(n)},setInstrument:function(e){o.dispatch(i.SET_INSTRUMENTS,{instruments:Object(h.a)(Object(h.a)({},o.store.instruments),{},{soundfontPlayer:e})})},incrementCurPitch:function(e,n){var t=o.store.scoreState,i=o.store.melodyState,c=i.focusIndex,a=i.destIndex,r=o.store.scoreData.notesList;if(-1!==c)if(c!==a){r.filter((function(e,n){return n>=c&&n<=a})).forEach((function(n){n.pitchIndex+=1*(e?-1:1),i.dataHistory.add(JSON.stringify(o.store.scoreData.notesList)),o.melody.setNotesList(r.slice())}))}else{for(var s=r[c],l=v.MAJOR_SCALE_INTERVALS,d=I(s.pos),b=S.getKeyScaleFromNotesPos(d,t.scaleCacheList),u=l.map((function(e){return(b.keyIndex+e)%12})),h=s.pitchIndex,x="octave"!==n?1:12,p=s.pitchIndex;e?s.pitchIndex>0:s.pitchIndex<59;)if(p+=x*(e?-1:1),"scale"!==n||"scale"===n&&u.includes(w(p))){s.pitchIndex=p;break}h!==s.pitchIndex&&(T(s.pitchIndex,o.store),i.dataHistory.add(JSON.stringify(o.store.scoreData.notesList)),o.melody.setNotesList(r.slice()),o.melody.adjustScrollY())}},setKeySwitch:function(e){var n=o.store.melodyState;n.keySwitch=e,o.melody.setState(n)},moveFocus:function(e){var n=o.store.melodyState,t=o.store.scoreData.notesList;-1===n.focusIndex?t.length>0&&(n.focusIndex=n.lastFocus,n.destIndex=n.focusIndex,o.melody.setState(n)):(e?n.focusIndex<t.length-1:n.focusIndex>0)&&(n.focusIndex+=e?1:-1,n.destIndex=n.focusIndex,o.melody.setState(n)),o.melody.adjustScrollX(),o.melody.updateCurChord(n.focusIndex)},moveDestFocus:function(e){var n=o.store.melodyState,t=o.store.scoreData.notesList;-1!==n.focusIndex&&((e?n.destIndex<t.length-1:n.destIndex>0)&&(n.destIndex+=e?1:-1,o.melody.setState(n)),o.melody.adjustScrollX())},updateCurChord:function(e){var n=o.store.melodyState,t=o.store.scoreData.chordList,i=I(o.store.scoreData.notesList[e].pos)*n.beatWidth,c=0,a=t.find((function(e){if("chord"===e.type){var t=e.detail.beatLen*n.beatWidth;if(i>=c&&i<c+t)return e;c+=t}}));n.tableMouse.curChord=void 0==a?null:a,o.melody.setState(n)},addNotes:function(){var e=o.store.melodyState,n=e.focusIndex;if(-1!==n){e.dataHistory.add(JSON.stringify(o.store.scoreData.notesList));var t=o.store.scoreData,i=t.notesList,c=i[n],a=L(c.pos,c.len),r=I(a),s=n===i.length-1?-1:I(i[e.focusIndex+1].pos),l=r+1/e.quantize;(-1===s||l<=s)&&(t.notesList.splice(n+1,0,{pos:a,pitchIndex:c.pitchIndex,len:C(e.quantize,1)}),o.score.setScoreData(t),e.focusIndex++,e.destIndex=e.focusIndex,o.melody.setState(e)),o.melody.adjustScrollX()}},removeNotes:function(){var e=o.store.melodyState,n=o.store.scoreData.notesList;e.dataHistory.add(JSON.stringify(o.store.scoreData.notesList));var t=e.focusIndex<e.destIndex?[e.focusIndex,e.destIndex]:[e.destIndex,e.focusIndex],i=Object(l.a)(t,2),c=i[0],a=i[1]-c+1;n.splice(c,a),o.melody.setNotesList(n),e.focusIndex=c-1,e.destIndex=e.focusIndex,o.melody.setState(e),o.melody.adjustScrollX()},releaseRange:function(e){var n=o.store.melodyState,t=n.focusIndex<n.destIndex?[n.focusIndex,n.destIndex]:[n.destIndex,n.focusIndex],i=Object(l.a)(t,2),c=i[0],a=i[1];n.focusIndex=e?a:c,n.destIndex=n.focusIndex,o.melody.setState(n),o.melody.adjustScrollX(),o.melody.updateCurChord(n.focusIndex)},resizeNotes:function(e){var n=o.store.melodyState;if(-1!==n.focusIndex){n.dataHistory.add(JSON.stringify(o.store.scoreData.notesList));var t=o.store.scoreData,i=t.notesList,c=i[n.focusIndex],a=I(c.len),r=I(c.pos)+a,s=n.focusIndex===i.length-1?-1:I(i[n.focusIndex+1].pos),l=1/n.quantize;if(e?-1===s||r+l<=s:a>l){var d=I(c.len)+l*(e?1:-1);c.len=C(n.quantize,d*n.quantize),t.notesList=i.slice(),o.score.setScoreData(t)}}},moveNotes:function(e){var n=o.store.melodyState;if(-1!==n.focusIndex){n.dataHistory.add(JSON.stringify(o.store.scoreData.notesList));var t=o.store.scoreData,i=t.notesList,c=n.destIndex,a=n.focusIndex,r=c>a?[a,c]:[c,a],s=Object(l.a)(r,2),d=s[0],b=s[1],u=0===d?0:I(i[d-1].pos)+I(i[n.focusIndex-1].len),h=b===i.length-1?-1:I(i[b+1].pos),x=1/n.quantize,p=I(i[d].pos),f=I(i[b].pos)+I(i[b].len);if(e?-1===h||f+x<=h:p-x>=u){for(var g=d;g<=b;g++){var j=i[g],v=I(j.pos)+x*(e?1:-1);j.pos=C(n.quantize,v*n.quantize)}t.notesList=i.slice(),o.score.setScoreData(t)}}},firstNotes:function(){var e=o.store.melodyState;o.store.scoreData.notesList.length>0&&(e.focusIndex=0,e.destIndex=e.focusIndex,o.melody.setState(e),o.melody.adjustScrollX())},adjustScrollX:function(){var e=o.store.melodyState,n=o.store.refs.melody.table,t=e.destIndex;if(-1!==t&&null!=n){var i=I(o.store.scoreData.notesList[t].pos)*e.beatWidth;n.scrollTo({left:i-300,behavior:"smooth"})}},adjustScrollY:function(){var e=o.store.melodyState,n=o.store.refs.melody.table;if(-1!==e.focusIndex&&null!=n){var t=o.store.scoreData.notesList[e.focusIndex].pitchIndex*W;n.scrollTo({top:t-n.clientHeight/2,behavior:"smooth"})}},previewStart:function(){o.store.melodyState;V.previewStart(o.store,o)},copyNotes:function(){for(var e=o.store.melodyState,n=o.store.scoreData.notesList,t=e.focusIndex<e.destIndex?[e.focusIndex,e.destIndex]:[e.destIndex,e.focusIndex],i=Object(l.a)(t,2),c=i[0],a=i[1]-c+1,r=[],s=n[c].pos,d=A(s),b=0;b<a;b++){var u=n[b+c],x=A(u.pos),p=d>x?d:x,f=I(u.pos)-I(s),g=C(p,f/(1/p));console.log("normalPos = ".concat(f,", unit = ").concat(p)),console.log(JSON.stringify(g)),r.push({pitchIndex:u.pitchIndex,pos:g,len:Object(h.a)({},u.len)})}e.cloneNotesList=r,o.melody.setState(e)},pasteNotes:function(){var e=o.store.melodyState;if(-1!==e.focusIndex){e.dataHistory.add(JSON.stringify(o.store.scoreData.notesList));var n=o.store.scoreData,t=n.notesList,i=t[e.focusIndex],c=L(i.pos,i.len),a=e.focusIndex===t.length-1?-1:I(t[e.focusIndex+1].pos),r=JSON.parse(JSON.stringify(e.cloneNotesList));r.forEach((function(e){e.pos=L(e.pos,c)}));var s=r[r.length-1],l=I(s.pos)+I(s.len);console.log("newRight: ".concat(l,", nextLeft: ").concat(a)),(-1===a||l<=a)&&(n.notesList=t.concat(r),n.notesList.sort((function(e,n){var t=I(e.pos),i=I(n.pos);return t===i?0:t<i?-1:1})),o.score.setScoreData(n),e.focusIndex++,e.destIndex=e.focusIndex+r.length-1,o.melody.setState(e))}},undo:function(){var e=o.store.melodyState,n=o.store.scoreData,t=e.dataHistory;console.log("undo start \u2605 length: ".concat(t.list.length,", cur: ").concat(t.cur));var i=t.undo();null!=i&&(0===t.cur&&(console.log("first undo"),t.list.unshift(JSON.stringify(n.notesList)),t.cur=1),n.notesList=JSON.parse(i),e.focusIndex>=n.notesList.length-1&&(e.focusIndex=n.notesList.length-1,e.destIndex=e.focusIndex),o.score.setScoreData(n)),console.log("undo end \u2605 length: ".concat(t.list.length,", cur: ").concat(t.cur))},redo:function(){var e=o.store.melodyState,n=o.store.scoreData,t=e.dataHistory;console.log("redo start \u2605 length: ".concat(t.list.length,", cur: ").concat(t.cur));var i=t.redo();null!=i&&(n.notesList=JSON.parse(i),e.focusIndex>=n.notesList.length-1&&(e.focusIndex=n.notesList.length-1,e.destIndex=e.focusIndex),o.score.setScoreData(n)),console.log("redo end \u2605 length: ".concat(t.list.length,", cur: ").concat(t.cur))}},this.backing={openBackingEditor:function(){var e=o.store.scoreState,n=o.store.scoreData.chordList[e.focusIndex].detail,t=e.elementCacheList[e.focusIndex],i=n.backing;e.hideMenu="backing",o.score.setScoreState(e);var c=o.backing.getInitVoicingTable(n.backing.voicingList),a=null;if(null!=i.pattern){var r=i.pattern,s=k.buildChannels(c),l=k.getChannels(s,r.channelSize),d=k.convertEditorLayerFromScore(r.channelSize,r.layers),b=[];if(void 0!=r.pedals)for(var u=function(e){var n=r.pedals.find((function(n){if(n.divIndex===e)return n}));void 0==n?b.push(null):b.push(n.action)},x=0;x<r.layers[0].divs.length;x++)u(x);else for(var p=0;p<r.layers[0].divs.length;p++)0===p?b.push("on"):b.push(null);a={channelIndex:-1,lenIndex:0,mode:"velocity",layerIndex:0,channels:l,layers:d,pedalActs:b}}o.backing.setState({chordInfo:{root:n.root,on:n.on,beatLen:n.beatLen,minute:n.minute,symbolKey:n.symbolKey,init:Object(h.a)({},t)},voicingTable:c,pattern:a,isPreview:!1,hasError:i.hasError})},closeBackingEditor:function(){var e=o.store.scoreState;e.hideMenu="none",o.score.setScoreState(e),setTimeout((function(){o.backing.setState(null)}),50)},setState:function(e){o.dispatch(i.SET_BACKING_STATE,{backingState:e})},getInitialLayer:function(){return{noteDivList:[{rate:4,isDot:!1,div3:0}],table:[[null]],velocityList:[5]}},getInitVoicingTable:function(e){for(var n=new Array(8),t=function(t){n[t]=new Array(6);for(var i=n[t],o=function(i){var o=e.find((function(e){if(e.octave===t&&e.struct===i)return e}));n[t][i]=null!=o},c=0;c<i.length;c++)o(c)},i=0;i<n.length;i++)t(i);return n},mappingEditorToScore:function(){var e=o.store.scoreState,n=o.store.scoreData,t=n.chordList[e.focusIndex].detail,i=o.store.backingState;t.backing={voicingList:k.getVoicingListFromTable(i.voicingTable),pattern:null==i.pattern?null:k.buildPatternProps(i.pattern),hasError:i.hasError},o.score.setScoreData(n)},addPatternColumn:function(){var e=o.store.backingState,n=e.pattern,t=n.layers[n.layerIndex],i=t.noteDivList,c=i[n.lenIndex],a={rate:c.rate,div3:c.div3,isDot:c.isDot};i.splice(n.lenIndex+1,0,a),t.noteDivList=i.slice(),t.table.forEach((function(e){e.splice(n.lenIndex+1,0,null)})),t.velocityList.splice(n.lenIndex+1,0,5),0===n.layerIndex&&n.pedalActs.splice(n.lenIndex+1,0,null),o.backing.updateErrorState(),o.backing.setState(e)},movePatternColumn:function(e){var n=o.store.backingState,t=n.pattern,i=t.layers[t.layerIndex],c=t.lenIndex;(c+=1*(e?1:-1))>=0&&c<=i.noteDivList.length-1&&(t.lenIndex=c),o.backing.setState(n)},moveChannelIndex:function(e){var n=o.store.backingState,t=n.pattern,i=t.channelIndex;(e?i<t.channels.length-1:i>0)&&(t.channelIndex+=e?1:-1),o.backing.setState(n)},setCurrentDivRate:function(e){var n=o.store.backingState,t=n.pattern,i=t.layers[t.layerIndex],c=i.noteDivList[t.lenIndex];c.rate=e,c.isDot=!1,c.div3=0,i.noteDivList=i.noteDivList.slice(),o.backing.updateErrorState(),o.backing.setState(n)},toggleCurrentDivHalf:function(){var e=o.store.backingState,n=e.pattern,t=n.layers[n.layerIndex],i=t.noteDivList[n.lenIndex];k.isPermitDot(i)&&(i.isDot=!i.isDot,t.noteDivList=t.noteDivList.slice(),o.backing.setState(e),o.backing.updateErrorState())},getNotes:function(){var e=o.store.backingState.pattern;return e.layers[e.layerIndex].table[e.channels.length-1-e.channelIndex][e.lenIndex]},setNotes:function(e){var n=o.store.backingState,t=n.pattern,i=t.layers[t.layerIndex];i.table[t.channels.length-1-t.channelIndex][t.lenIndex]=e,i.table=i.table.slice(),o.backing.updateErrorState(),o.backing.setState(n)},incrementVel:function(e){var n=o.store.backingState,t=n.pattern,i=t.layers[t.layerIndex],c=i.velocityList[t.lenIndex]+e;c>=1&&c<=10&&(i.velocityList[t.lenIndex]=c,o.backing.setState(n))},deleteColumn:function(){var e=o.store.backingState,n=e.pattern,t=n.layers[n.layerIndex];if(t.noteDivList.length>=2){if(t.noteDivList.splice(n.lenIndex,1),t.table.forEach((function(e){e.splice(n.lenIndex,1)})),t.velocityList.splice(n.lenIndex,1),0===n.layerIndex){if(n.lenIndex<n.pedalActs.length-1)for(var i=n.lenIndex+1;i<n.pedalActs.length;i++)n.pedalActs[i]=null;n.pedalActs.splice(n.lenIndex,1)}n.lenIndex>0&&n.lenIndex--,o.backing.setState(e)}o.backing.updateErrorState()},switchLayer:function(){var e=o.store.backingState,n=e.pattern;n.layerIndex=0===n.layerIndex?1:0,n.lenIndex=0,n.channelIndex=-1,o.backing.setState(e)},switchMode:function(){var e=o.store.backingState,n=e.pattern;"velocity"===n.mode?n.mode="pedal":"pedal"===n.mode&&(n.mode="velocity"),o.backing.setState(e)},testBacking:function(){var e=o.store.backingState,n=o.store.reserveTasks,t=e.chordInfo,i=t.init,c=(t.root.index+t.init.keyIndex)%12,a=null==t.on?-1:(t.on.index+t.init.keyIndex)%12,r=v.getSymbolFromKey(t.symbolKey),s=v.calcSustainMsec(t.beatLen,t.minute.head+t.minute.tail,i.bpm,i.beatSignature),l={voicingList:k.getVoicingListFromTable(e.voicingTable),pattern:null==e.pattern?null:k.buildPatternProps(e.pattern),hasError:!1},d=k.getPitchListFromVoicing(l.voicingList,c,a,r);k.playBacking(o.store,n,i,l,d,s),n.push(setTimeout((function(){e.isPreview=!1,o.backing.setState(e)}),s)),e.isPreview=!0,o.backing.setState(e)},updateErrorState:function(){var e=o.store.backingState,n=k.getVoicingListFromTable(e.voicingTable);e.hasError=k.checkError(e.chordInfo,n,e.pattern),o.backing.setState(e)}},this.store=n,this.dispatch=function(e,n){return t({type:e,payload:n})}},$=t(5),ee={userEnv:{keyConfig:{note:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown",addChord:"a",addSection:"s",addChange:"m",deleteCur:"Delete",distMode:"Shift",edit1:"f",edit2:"c",incRoot:"ArrowUp",decRoot:"ArrowDown",incBeat:"ArrowRight",decBeat:"ArrowLeft"}},colorProps:{entryBackground:"#e2a9ae"}},systemState:{isSplash:!0,mainChannelIndex:2,scoreTabIndex:0,dialog:null},backingState:null,scoreState:{fileHandle:null,isMelody:!1,initialBeat:4,focusIndex:-1,distIndex:-1,elementCacheList:[],sectionCacheList:[],scaleCacheList:[],tempoCacheList:[],beatCacheList:[],measureCacheList:[],keySwitch:{distMode:!1,sustainMode:!1,chordMode:!1,symbolMode:!1,control:!1,minHeadMode:!1,minTailMode:!1},symbolMng:null,hideMenu:"none",isPreview:!1,isSolo:!1,cloneBacking:null,copiedElementList:null},melodyState:{focusIndex:-1,destIndex:-1,lastFocus:-1,quantize:4,beatWidth:120,tableMouse:{isPut:!1,lock:{x:0,y:0},width:0,prevRight:0,nextLeft:0,notesState:{index:-1,side:"normal",isResize:!1,isMove:!1},curChord:null,mousePitchIndex:-1,mouseMeasurePos:-1},timelineMouse:{pos:-1,isPut:!1,lock:-1,width:0},soundfontInfo:{name:"violin",gain:9},keySwitch:{scaleMode:!1,octave:!1,resize:!1,move:!1,shift:!1,control:!1},isPreview:!1,isSolo:!1,cloneNotesList:[],dataHistory:new(function(){function e(){Object(p.a)(this,e),this.cur=void 0,this.list=void 0,this.cur=-1,this.list=[]}return Object($.a)(e,[{key:"add",value:function(e){this.cur>-1&&(this.list.splice(0,this.cur+1),this.cur=-1,console.log("restert")),this.list.unshift(e)}},{key:"undo",value:function(){var e=null;return this.cur<this.list.length-1&&(this.cur++,e=this.list[this.cur]),e}},{key:"redo",value:function(){var e=null;return this.cur>0&&(this.cur--,e=this.list[this.cur]),e}}]),e}()),notesCacheList:[]},scoreData:{chordList:[],notesList:[]},instruments:{harmony:null,soundfontPlayer:null},refs:{harmonize:{note:{}},melody:{table:null,measure:null,chord:null,pitch:null}},reserveTasks:[],invalidate:{harmoniizeInvalidate:{},harmonize:null,melody:null}},ne=t(1),te=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.systemState.dialog;return null==i?Object(ne.jsx)(ne.Fragment,{}):Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ie,{onClick:function(){n.systemState.dialog=null,t.system.setState(n.systemState)}}),i]})},ie=d.b.div(D||(D=Object(s.a)(["\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #000329a2;\n    z-index: 10;\n    text-align: center;\n"])));!function(e){var n=e.FONT_SMALL=16,t=e.FONT_MIDIUM=22,i=(e.FONT_LARGE=32,e.CSS_LABEL=Object(d.a)(K||(K=Object(s.a)(["\n        display: inline-block;\n        font-weight: 600;\n        text-align: center;\n        color: black;\n        box-sizing: border-box;\n    "]))));e.CSS_LABEL_SMALL=Object(d.a)(B||(B=Object(s.a)(["\n        ","\n        height: 22px;\n        font-size: ","px;\n        line-height: 22px;\n    "])),i,n),e.CSS_LABEL_MIDIUM=Object(d.a)(H||(H=Object(s.a)(["\n        ","\n        height: 30px;\n        font-size: ","px;\n        line-height: 26px;\n    "])),i,t),e.CSS_BUTTON_DISABLE=Object(d.a)(U||(U=Object(s.a)(["\n        pointer-events: none;\n        opacity: 0.5;\n    "])))}(J||(J={}));var oe,ce,ae,re,se,le,de,be,ue,he,xe,pe,fe,ge,je,ve,me,Oe,ke,ye,Se,we,Ie,Le=J,Ee=(d.b.div(_||(_=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n"]))),d.b.div(z||(z=Object(s.a)(["\n    display: inline-block;\n"]))),d.b.div(F||(F=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n"]))),Object(d.a)(R||(R=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    font-size: 18px;\n    font-weight: 600;\n    color: black;\n    line-height: 18px;\n"]))),Object(d.a)(N||(N=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    font-size: 24px;\n    font-weight: 600;\n    text-align: center;\n    color: black;\n    line-height: 24px;\n    box-sizing: border-box;\n"])))),Ce=Object(d.a)(P||(P=Object(s.a)(["\n    opacity: 0.6;\n    pointer-events: none;\n"]))),Ae=function(e){var n=Object(o.useState)(e.activeNo),t=Object(l.a)(n,2),i=t[0],c=t[1];return Object(o.useEffect)((function(){c(e.activeNo)}),[e.activeNo]),Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(De,{children:e.tabElements.map((function(n,t){return Object(ne.jsx)(Te,{name:n.name,icon:n.icon,isActive:t==i,isEnable:n.isEnable,selectTab:function(){return function(n){void 0!=e.selectTabIndex?e.selectTabIndex(n):c(n)}(t)}},t)}))}),Object(ne.jsx)(_e,{children:e.tabElements.map((function(e,n){return Object(ne.jsx)(Me,{cont:e.cont,isActive:n===i},n)}))})]})},Te=function(e){return Object(ne.jsxs)(Fe,{isEnable:e.isEnable,isActive:e.isActive,onClick:function(){return e.selectTab()},children:[Object(ne.jsx)(Re,{children:e.icon}),Object(ne.jsx)(Ne,{children:e.name})]})},Me=function(e){return Object(ne.jsx)(ze,{isActive:e.isActive,children:e.cont})},De=d.b.div(oe||(oe=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    margin-right: 5px;\n    height: 100%;\n    background-color: #b9b9b9;\n    border: 1px solid #707070;\n    box-sizing: border-box;\n    border-radius: 10px 0 0 10px;\n    vertical-align: top;\n    box-shadow: 1px 2px 12px #aaaaaa;\n"]))),_e=d.b.div(ce||(ce=Object(s.a)(["\n    display: inline-block;\n    background-color: #b9b9b9;\n    border: 1px solid #707070;\n    box-sizing: border-box;\n    width: calc(100% - 105px);\n    height: 100%;\n    border-radius: 0 6px 6px 0;\n    box-shadow: 1px 2px 12px #aaaaaa;\n"]))),ze=d.b.div(ae||(ae=Object(s.a)(["\n    /* margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px); */\n    width: 100%;\n    height: 100%;\n    /* background-color: #ece6e6; */\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(se||(se=Object(s.a)(["display: inline-block;"]))):Object(d.a)(re||(re=Object(s.a)(["display: none;"])))})),Fe=d.b.div(le||(le=Object(s.a)(["\n    display: inline-block;\n    width: 90px;\n    height: 90px;\n    margin: 5px 0 0 5px;\n    border-radius: 10px;\n    ","\n    ","\n    transition: background-color 500ms;\n    & *{\n        transition: color 150ms;\n    }\n    // \u30a2\u30af\u30c6\u30a3\u30d6\u3058\u3083\u306a\u3044\u6642\u3060\u3051hover\u8981\u7d20\u3092\u4ed8\u52a0\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(de||(de=Object(s.a)(["\n                background-color: #e4e3e1;\n                border: 1px solid #949494\n            "]))):Object(d.a)(be||(be=Object(s.a)(["\n                background-color: #d1d1d1;\n                opacity: 0.8;\n            "])))}),(function(e){return e.isEnable?"":Le.CSS_BUTTON_DISABLE}),(function(e){return e.isActive?"":Object(d.a)(ue||(ue=Object(s.a)(["\n        &:hover {\n            & *{\n                transition: color 150ms;\n                /* background-color: #e2d6d6; */\n                text-shadow: 1px 2px 22px #f7f7f7ea;\n                color: #a7a7a7;\n            }\n        }\n    "])))})),Re=(Object(d.a)(he||(he=Object(s.a)(["\n    text-shadow: 1px 2px 22px #f7f7f7cf;\n    color: #a3a3a3;\n"]))),d.b.div(xe||(xe=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 60px;\n    /* background-color: #df828221; */\n    font-size: 50px;\n    color: #757575;\n    text-align: center;\n    padding-top: 5px;\n    box-sizing: border-box;\n"])))),Ne=d.b.div(pe||(pe=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    /* background-color: #8482df20; */\n    font-size: 20px;\n    font-weight: 600;\n    color: #757575;\n    text-align: center;\n"]))),Pe=t(50),Ke=t(34),Be=t(12),He=function(e){var n=Object(o.useState)(e.activeNo),t=Object(l.a)(n,2),i=t[0],c=t[1];return Object(o.useEffect)((function(){c(e.activeNo)}),[e.activeNo]),Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(Ve,{children:e.tabElements.map((function(n,t){return Object(ne.jsx)(Ue,{name:n.name,isActive:t==i,isDisable:n.disable,selectTab:function(){return function(n){void 0!=e.selectTabIndex?e.selectTabIndex(n):c(n)}(t)}},t)}))}),Object(ne.jsx)(Ye,{children:e.tabElements.map((function(e,n){return Object(ne.jsx)(Je,{cont:e.cont,isActive:n===i},n)}))})]})},Ue=function(e){return Object(ne.jsx)(qe,{isDisable:e.isDisable,isActive:e.isActive,onClick:function(){return e.selectTab()},children:e.name})},Je=function(e){return Object(ne.jsx)(We,{isActive:e.isActive,children:e.cont})},Ve=d.b.div(fe||(fe=Object(s.a)(["\n    display: inline-block;\n    height: 35px;\n"]))),Ye=d.b.div(ge||(ge=Object(s.a)(["\n    display: block;\n    background-color: #999999;\n    height: calc(100% - 35px);\n    border-radius: 0 6px 6px 6px;\n    box-shadow: 0 2px 0 0 #000b3a48;\n"]))),We=d.b.div(je||(je=Object(s.a)(["\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px);\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(me||(me=Object(s.a)(["display: inline-block;"]))):Object(d.a)(ve||(ve=Object(s.a)(["display: none;"])))})),qe=d.b.div(Oe||(Oe=Object(s.a)(["\n    display: inline-block;\n    /* width: 100px; */\n    padding: 0 10px;\n    ","\n    /* opacity: 0.7; */\n    user-select: none;\n    margin-right: 6px;\n    font-weight: 600;\n    box-sizing: border-box;\n    line-height: 30px;\n    vertical-align: bottom;\n    transition: padding 100ms;\n"])),(function(e){return e.isActive?Object(d.a)(ke||(ke=Object(s.a)(["\n                color: #ebebeb;\n                padding: 0 35px;\n                background-color: #999999;\n                height: 35px;\n                font-size: 24px;\n                border-radius: 3px 15px 0 0;\n                text-shadow: 1px 2px 3px #00000065;\n            "]))):Object(d.a)(ye||(ye=Object(s.a)(["\n                height: 100%;\n                color: #555;\n                /* background-color: #90909b; */\n                background: linear-gradient(to bottom, #999999, #7a7a7a);\n                height: 30px;\n                font-size: 18px;\n                border-radius: 3px 10px 0 0;\n                ","\n            "])),e.isDisable?Object(d.a)(Se||(Se=Object(s.a)(["\n                    pointer-events: none;\n                    opacity: 0.7;\n                "]))):"")}));(Ie=we||(we={})).SECTION_CATEGORY=["Section","Intro","A","B","C","D","Outro"],Ie.SECTION_NO=["","1","2","3","4","5","6"];var Ge,Xe=we;!function(e){e.search=function(e){return console.log(JSON.stringify(e)),t.filter((function(n){return n.condition.beat===e.beat&&(0===e.step||n.condition.step===e.step)&&(""===e.firstChord||n.condition.firstChord===e.firstChord)&&(""===e.secondChord||n.condition.secondChord===e.secondChord)}))};var n=function(e){var n=e.split("@"),t=Number(n[0]);return n[1].split(" ").map((function(e){var n=Number(e.charAt(0))-1,i=e.charAt(1),o=e.charAt(2),c=v.DIATONIC_MAJOR_SCALE_LIST[n];var a=""===o?t:Number(o);return{root:c.root,symbolKey:c.symbolKey,beatLen:a}}))},t=[{condition:{beat:"4/4",step:2,firstChord:"\u2160",secondChord:"\u2164"},chordList:n("2@1 5 6 3 4 1 2 5")},{condition:{beat:"4/4",step:2,firstChord:"\u2160",secondChord:"\u2164"},chordList:n("2@1 5 6 3 4 3 2 5")},{condition:{beat:"4/4",step:2,firstChord:"\u2160",secondChord:"\u2164"},chordList:n("2@1 5 6 5 4 1 2 5")},{condition:{beat:"4/4",step:2,firstChord:"\u2160",secondChord:"\u2164"},chordList:n("2@1 5 6 4 1 5 6 4")},{condition:{beat:"4/4",step:4,firstChord:"\u2160",secondChord:"\u2163"},chordList:n("4@1 4 5 6 2 5")},{condition:{beat:"4/4",step:4,firstChord:"\u2160",secondChord:"\u2165m"},chordList:n("4@1 6 2 5 1 6 2 5")},{condition:{beat:"4/4",step:4,firstChord:"\u2160",secondChord:"\u2165m"},chordList:n("4@1 6 4 5 1 6 4 5")},{condition:{beat:"4/4",step:2,firstChord:"\u2163",secondChord:"\u2164"},chordList:n("2@4 5 3 6 4 5 3 6")}]}(Ge||(Ge={}));var Ze,Qe,$e,en,nn=Ge;(en=$e||($e={}))._TitleLabel=d.b.div(Ze||(Ze=Object(s.a)(["\n        ",";\n        background-color: #f0f0f049;\n        width: 120px;\n        text-align: center;\n        border-radius: 10px;\n        color: #2c2c2c;\n        border: solid 1px #ffffff79;\n        box-sizing: border-box;\n        vertical-align: top;\n    "])),Le.CSS_LABEL_MIDIUM),en._Combobox=d.b.select(Qe||(Qe=Object(s.a)(["\n        display: inline-block;\n        height: 30px;\n        ","\n        font-size: ","px;\n        text-align: left;\n        color: black;\n        line-height: 24px;\n        width: ","px;\n        box-sizing: border-box;\n    "])),(function(e){return e.isEnable?"":Le.CSS_BUTTON_DISABLE}),Le.FONT_MIDIUM,(function(e){return e.width}));var tn,on=$e;!function(e){var n=e.STEP_LIST=[0,2,3,4],t=(e.DEGREE_FILTER_LIST=["","\u2160","\u2164","\u2163","\u2165m","\u2161m","\u2162m"],e.getInitialBlockList=function(){return[{label:{fixed:"Start"}},{label:{fixed:"End"}}]},e.getBlankBlockList=function(){return[{label:{fixed:"Start"}},{label:{labelName:"Section"},chordList:[t()]},{label:{fixed:"End"}}]},e.getDefaultChord=function(){return{beatLen:4,minute:{head:0,tail:0},root:null,on:null,symbolKey:"major",backing:{voicingList:[],pattern:null,hasError:!1}}});e.getFilteredStepList=function(e){return n.filter((function(n){if(0===n)return!0;switch(e){case"4/4":case"6/8":if(3===n)return!1;break;case"3/4":case"9/8":if(3!==n)return!1;break;case"2/4":case"6/8":if(2!==n)return!1}return!0}))},e.buildScoreData=function(e){var n=[];return n.push({type:"init",detail:{keyIndex:0,bpm:100,scale:"major",beatSignature:"4/4"}}),e.forEach((function(e){void 0==e.chordList?n.push({type:"fixed",detail:e.label}):(n.push({type:"section",detail:e.label}),e.chordList.forEach((function(e){n.push({type:"chord",detail:e})})))})),{chordList:n,notesList:[]}}}(tn||(tn={}));var cn,an,rn,sn,ln,dn,bn,un,hn,xn,pn,fn,gn,jn,vn,mn,On,kn,yn,Sn,wn,In,Ln,En,Cn,An,Tn,Mn,Dn,_n,zn,Fn,Rn,Nn,Pn,Kn,Bn,Hn,Un,Jn,Vn,Yn,Wn,qn,Gn,Xn,Zn,Qn,$n,et,nt,tt,it,ot,ct,at,rt,st,lt,dt,bt,ut,ht,xt,pt,ft,gt,jt,vt,mt,Ot,kt,yt,St,wt,It,Lt,Et,Ct,At,Tt,Mt,Dt,_t,zt,Ft,Rt,Nt,Pt,Kt,Bt,Ht,Ut,Jt,Vt,Yt,Wt,qt,Gt,Xt,Zt,Qt,$t,ei,ni,ti,ii,oi,ci,ai,ri,si,li,di,bi,ui,hi,xi,pi,fi,gi,ji,vi,mi,Oi,ki,yi,Si,wi,Ii,Li,Ei,Ci,Ai,Ti,Mi,Di,_i,zi,Fi,Ri,Ni,Pi,Ki=tn,Bi=function(e){var n=Object(o.useState)(2),t=Object(l.a)(n,2),i=t[0],c=t[1],a=Object(o.useState)(["",""]),r=Object(l.a)(a,2),s=r[0],d=r[1],b=Object(o.useState)("Section"),u=Object(l.a)(b,2),h=u[0],x=u[1],p=Object(o.useState)(""),f=Object(l.a)(p,2),g=f[0],j=f[1],m=Object(o.useState)(-1),O=Object(l.a)(m,2),k=O[0],y=O[1],S=Object(o.useMemo)((function(){return""===e.beat?[0]:Ki.getFilteredStepList(e.beat)}),[e.beat]),w=Object(o.useMemo)((function(){return S.map((function(e,n){var t=0===e?"":e;return Object(ne.jsx)("option",{value:e,children:t},n)}))}),[S]),I=Object(o.useMemo)((function(){return[Ki.DEGREE_FILTER_LIST.map((function(e,n){return Object(ne.jsx)("option",{value:e,children:e},n)})),Ki.DEGREE_FILTER_LIST.map((function(e,n){return Object(ne.jsx)("option",{value:e,children:e},n)}))]}),[s]),L=Object(o.useMemo)((function(){if(""===e.beat)return[[],[Object(ne.jsx)(ne.Fragment,{})]];var n=e.beat,t=nn.search({beat:e.beat,step:i,firstChord:s[0],secondChord:s[1]}),o=t.map((function(e,t){var i=k===t,o=[],c=0,a=v.getBeatProps(n).barBeatCnt;return e.chordList.forEach((function(e,n){var t=v.getDegreeRoot(e.root)+v.getSymbolFromKey(e.symbolKey).name;if(0!==n){var i=c%a===0?" | ":"\u30fb";o.push(Object(ne.jsx)(Wi,{children:i}))}var r=!1;0===n?r=""!==s[0]:1===n&&(r=""!==s[1]),o.push(Object(ne.jsx)(Yi,{isMatch:r,children:t})),c+=e.beatLen})),Object(ne.jsx)(Vi,{isActive:i,onClick:function(){y(t)},children:o},t)}));return[t,o]}),[e.beat,i,s,k]),E=Object(l.a)(L,2),C=E[0],A=E[1],T=Object(o.useMemo)((function(){return[Xe.SECTION_CATEGORY.map((function(e,n){return Object(ne.jsx)("option",{value:e,children:e},n)})),Xe.SECTION_NO.map((function(e,n){return Object(ne.jsx)("option",{value:e,children:e},n)}))]}),[]),M=Object(l.a)(T,2),D=M[0],_=M[1],z=function(e,n){var t=e.target.value;s[n]=t,0===n&&""===t&&(s[1]=""),d(s.slice()),y(-1)},F=-1!==k;return Object(ne.jsxs)(Hi,{isEnable:""!==e.beat,children:[Object(ne.jsxs)(Ui,{children:[Object(ne.jsx)(on._TitleLabel,{children:"Step"}),Object(ne.jsx)(on._Combobox,{isEnable:!0,width:150,value:i,onChange:function(e){!function(e){c(Number(e.target.value)),y(-1)}(e)},children:w})]}),Object(ne.jsxs)(Ui,{children:[Object(ne.jsx)(on._TitleLabel,{children:"Chord"}),Object(ne.jsx)(on._Combobox,{isEnable:!0,width:80,value:s[0],onChange:function(e){z(e,0)},children:I[0]}),Object(ne.jsx)(on._Combobox,{isEnable:""!==s[0],width:90,value:s[1],onChange:function(e){z(e,1)},children:I[1]})]}),Object(ne.jsx)(Ji,{children:Object(ne.jsx)("div",{children:A})}),Object(ne.jsxs)(Ui,{children:[Object(ne.jsx)(on._TitleLabel,{children:"Section"}),Object(ne.jsx)(on._Combobox,{isEnable:F,width:150,value:h,onChange:function(e){x(e.target.value)},children:D}),Object(ne.jsx)(on._Combobox,{isEnable:F,width:80,value:g,onChange:function(e){j(e.target.value)},children:_})]}),Object(ne.jsxs)(qi,{children:[Object(ne.jsx)(Gi,{isEnable:!0,onClick:function(){},children:"Reset"}),Object(ne.jsx)(Gi,{isEnable:-1!==k,onClick:function(){var n=""===g?"":" ".concat(g),t=h+n;e.insertProgUnit(C[k],t),y(-1),c(0),d(["",""])},children:"Add"})]})]})},Hi=d.b.div(cn||(cn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    ","\n"])),(function(e){return e.isEnable?"":Le.CSS_BUTTON_DISABLE})),Ui=d.b.div(an||(an=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    /* background-color: #d5eae4; */\n    /* margin: 2px 0 0 0; */\n    text-align: left;\n    & *{\n        margin: 5px 0 0 5px;\n    }\n"])),40),Ji=d.b.div(rn||(rn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - ","px);\n    /* background-color: #babaa8; */\n    text-align: left;\n    & >div{\n        display: inline-block;\n        width: calc(100% - 8px);\n        height: calc(100% - 8px);\n        margin: 4px 0 0 4px;\n        background-color: #dde0e7;\n        box-sizing: border-box;\n        border: 1px solid #797979;\n        overflow-y: auto;\n    }\n"])),160),Vi=d.b.div(sn||(sn=Object(s.a)(["\n    ","\n    display: inline-block;\n    width: 100%;\n    background-color: #00000010;\n    ","\n    text-align: left;\n    margin: 2px 0 0 0;\n    padding: 0 0 0 5px;\n"])),Le.CSS_LABEL_MIDIUM,(function(e){return e.isActive?Object(d.a)(ln||(ln=Object(s.a)(["\n        background-color: #f6ff0062;\n    "]))):""})),Yi=d.b.span(dn||(dn=Object(s.a)(["\n    color: #000f59;\n    ","\n"])),(function(e){return e.isMatch?Object(d.a)(bn||(bn=Object(s.a)(["\n        color: #a0000d;\n        /* background-color: #5eff0061; */\n    "]))):""})),Wi=d.b.span(un||(un=Object(s.a)(["\n    color: #0000005d;\n"]))),qi=d.b.div(hn||(hn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    /* background-color: #94babd; */\n    text-align: center;\n    & *{\n        margin: 5px 0 0 5px;\n    }\n"])),40),Gi=d.b.div(xn||(xn=Object(s.a)(["\n    ",";\n    ",";\n    background-color: #737d94;\n    width: 130px;\n    text-align: center;\n    border-radius: 4px;\n    border: solid 1px #505971;\n    box-sizing: border-box;\n    &:hover {\n        background-color: #8da0b0;\n    }\n"])),Le.CSS_LABEL_MIDIUM,(function(e){return e.isEnable?"":Le.CSS_BUTTON_DISABLE})),Xi=function(e){var n=e.blockList.map((function(e,n){var t=void 0==e.chordList,i=t?e.label.fixed:e.label.labelName,o=t?Object(ne.jsx)($i,{children:i}):Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(eo,{children:i}),Object(ne.jsx)(no,{children:e.chordList.map((function(e,n){var t,i="none";return null!==e.root&&(i=v.getDegreeRoot({index:e.root.index,isFlat:e.root.isFlat})+(null===(t=v.getSymbolFromKey(e.symbolKey))||void 0===t?void 0:t.name)),Object(ne.jsxs)(to,{children:[Object(ne.jsx)(io,{children:i}),Object(ne.jsx)(oo,{children:function(){for(var n=[],t=0;t<e.beatLen;t++)n.push(Object(ne.jsx)(co,{},t));return n}()})]},n)}))})]});return Object(ne.jsx)(Qi,{isFixed:t,children:o},n)}));return Object(ne.jsx)(Zi,{children:n})},Zi=d.b.div(pn||(pn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    overflow-y: auto;\n"]))),Qi=d.b.div(fn||(fn=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 10px);\n    background-color: #e8e4c5;\n    margin: 5px 0 0 5px;\n    box-sizing: border-box;\n    /* border: 1px solid #7e7e7ee8; */\n    text-align: center;\n    ","\n"])),(function(e){return e.isFixed?Object(d.a)(gn||(gn=Object(s.a)(["\n        text-align: left;\n    "]))):""})),$i=d.b.div(jn||(jn=Object(s.a)(["\n    ","\n    width: 200px;\n    background-color: #b14272;\n    border-radius: 2px 15px 15px 2px;\n    color: white;\n    margin: 5px 0 5px 5px;\n"])),Le.CSS_LABEL_SMALL),eo=d.b.div(vn||(vn=Object(s.a)(["\n    ","\n    width: 120px;\n    background-color: #4297b1;\n    color: white;\n    border-radius: 2px;\n    margin: 5px 0 0 0;\n"])),Le.CSS_LABEL_SMALL),no=d.b.div(mn||(mn=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 10px);\n    /* height: 100px; */\n    padding: 0 5px 5px 0;\n    background-color: #c2d6dd1e;\n    border: solid 2px #ab4343;\n    border-radius: 8px;\n    box-sizing: border-box;\n    margin: 5px 0 5px 0;\n    text-align: left;\n"]))),to=d.b.div(On||(On=Object(s.a)(["\n    display: inline-block;\n    height: 45px;\n    background-color: #676767;\n    color: white;\n    border-radius: 2px;\n    margin: 5px 0 0 5px;\n"]))),io=d.b.div(kn||(kn=Object(s.a)(["\n    ","\n    padding: 0 20px;\n    /* background-color: #b38282; */\n    color: white;\n"])),Le.CSS_LABEL_SMALL),oo=d.b.div(yn||(yn=Object(s.a)(["\n    display: block;\n    height: 25px;\n    min-width: 100%;\n    /* background-color: #c5adad; */\n    text-align: center;\n"]))),co=d.b.div(Sn||(Sn=Object(s.a)(["\n    display: inline-block;\n    width: 8px;\n    height: calc(100% - 12px);\n    margin: 6px 2px 0 2px;\n    background-color: #ddd796;\n    border-radius: 2px;\n"]))),ao=function(e){var n=Object(o.useContext)(pg),t=(n.store,n.dispatcher,Object(o.useMemo)((function(){return["short major 01","short major 02","short minor 01"].map((function(e,n){return Object(ne.jsx)(so,{children:e},n)}))}),[]));return Object(ne.jsx)(ro,{children:t})},ro=d.b.div(wn||(wn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n"]))),so=d.b.div(In||(In=Object(s.a)(["\n    ","\n    display: inline-block;\n    width: 100%;\n    background-color: #87b4b4;\n    text-align: left;\n    margin: 2px 0 0 0;\n    padding: 0 0 0 5px;\n    color: #eb0000;\n"])),Le.CSS_LABEL_MIDIUM),lo=function(e){var n=Object(o.useContext)(pg),t=n.store,i=n.dispatcher,c=Object(o.useState)("blank"),a=Object(l.a)(c,2),r=a[0],s=a[1],d=Object(o.useState)(Ki.getBlankBlockList()),b=Object(l.a)(d,2),u=b[0],h=b[1],x=Object(o.useState)(""),p=Object(l.a)(x,2),f=p[0],g=p[1],j=function(){t.systemState.dialog=null,i.system.setState(t.systemState)},m=Object(o.useMemo)((function(){return"blank"===r?[Object(ne.jsx)("option",{value:""},0)]:[""].concat(v.BEAT_DEF_LIST).map((function(e,n){return Object(ne.jsx)("option",{value:e,children:e},n)}))}),[r]),O=function(e,n){var t={label:{labelName:n},chordList:e.chordList.map((function(e){var n=Ki.getDefaultChord();return n.beatLen=e.beatLen,n.symbolKey=e.symbolKey,n.root=e.root,n}))};u.splice(u.length-1,0,t),h(u.slice())},k=function(e,n,t){return Object(ne.jsx)(vo,{isActive:n,onClick:t,children:e})},y=u.length<=2,S="blank"===r?"":f;return Object(ne.jsxs)(bo,{children:[Object(ne.jsxs)(uo,{children:[k("Blank","blank"===r,(function(){h(Ki.getBlankBlockList()),s("blank")})),k("Custom","custom"===r,(function(){h(Ki.getInitialBlockList()),s("custom")})),k("Template","template"===r,(function(){h([]),s("template")}))]}),Object(ne.jsxs)(ho,{children:[Object(ne.jsxs)(xo,{isEnable:"blank"!==r,children:[Object(ne.jsxs)(po,{children:[Object(ne.jsx)(on._TitleLabel,{children:"Beat"}),Object(ne.jsx)(on._Combobox,{value:S,isEnable:y,width:150,onChange:function(e){!function(e){g(e.target.value)}(e)},children:m})]}),Object(ne.jsx)(fo,{children:function(){switch(r){case"blank":return Object(ne.jsx)(ne.Fragment,{});case"custom":return Object(ne.jsx)(Bi,{beat:f,insertProgUnit:O});case"template":return Object(ne.jsx)(ao,{})}}()})]}),Object(ne.jsx)(go,{children:Object(ne.jsx)(Xi,{blockList:u})})]}),Object(ne.jsxs)(jo,{children:[Object(ne.jsx)(mo,{isEnable:!0,onClick:j,children:"Cancel"}),Object(ne.jsx)(mo,{isEnable:!0,onClick:function(){var n=Ki.buildScoreData(u);e.setScoreData(n),j(),t.systemState.scoreTabIndex=1,i.system.setState(t.systemState)},children:"Start"})]})]})},bo=d.b.div(Ln||(Ln=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 50px;\n    top: 50px;\n    width: 1024px;\n    height: 768px;\n    z-index: 11;\n    /* top: 100px;\n    left: 100px; */\n    /* width: calc(100% - 200px);\n    height: calc(100% - 200px); */\n    background-color: #929292;\n    border: solid 2px #404250;\n    border-radius: 8px;\n    /* border: 1px solid #dadada; */\n"]))),uo=d.b.div(En||(En=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #7d8d97;\n    text-align: center;\n"])),50),ho=d.b.div(Cn||(Cn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - ","px);\n    /* background-color: #7d8d97; */\n    text-align: left;\n"])),100),xo=d.b.div(An||(An=Object(s.a)(["\n   display: inline-block;\n   vertical-align: top;\n   width: calc(50% - 6px);\n   height: calc(100% - 8px);\n   background-color: #bdced8;\n   text-align: left;\n   margin: 4px 2px 4px 4px;\n   ","\n"])),(function(e){return e.isEnable?"":Le.CSS_BUTTON_DISABLE})),po=d.b.div(Tn||(Tn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    /* background-color: #b4c7ba; */\n    padding: 5px 0 0 5px;\n    box-sizing: border-box;\n"])),40),fo=(d.b.select(Mn||(Mn=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    font-size: ","px;\n    text-align: left;\n    color: black;\n    vertical-align: top;\n    line-height: 24px;\n    width: 210px;\n    box-sizing: border-box;\n    margin: 0 0 0 5px;\n"])),Le.FONT_MIDIUM),d.b.div(Dn||(Dn=Object(s.a)(["\n    display: inline-block;\n    background-color: #cedbd7;\n    border: 1px solid #696969;\n    box-sizing: border-box;\n    margin: 5px 0 0 5px;\n    width: calc(100% - 10px);\n    height: calc(100% - ","px);\n"])),50)),go=d.b.div(_n||(_n=Object(s.a)(["\n    display: inline-block;\n    vertical-align: top;\n    width: calc(50% - 6px);\n    height: calc(100% - 8px);\n    background-color: #bdced8;\n    text-align: left;\n    margin: 4px 4px 4px 2px;\n"]))),jo=d.b.div(zn||(zn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #d1d1d1;\n    text-align: right;\n    & *{\n        margin: 10px 5px 0 0;\n    }\n"])),50),vo=d.b.div(Fn||(Fn=Object(s.a)(["\n    ",";\n    background-color: #5083c5;\n    ",";\n    width: 200px;\n    margin: 10px 5px 0 0;\n    text-align: center;\n    border-radius: 4px;\n    border: solid 1px #375176;\n    box-sizing: border-box;\n    &:hover {\n        background-color: #77a7e6;\n    ",";\n}\n"])),Le.CSS_LABEL_MIDIUM,(function(e){return e.isActive?Object(d.a)(Rn||(Rn=Object(s.a)(["\n        background-color: #c5b950;\n    "]))):""}),(function(e){return e.isActive?Object(d.a)(Nn||(Nn=Object(s.a)(["\n            background-color: #c5b950;\n    "]))):""})),mo=d.b.div(Pn||(Pn=Object(s.a)(["\n    ",";\n    ",";\n    background-color: #5c9253;\n    width: 130px;\n    text-align: center;\n    border-radius: 4px;\n    border: solid 1px #2d5625;\n    box-sizing: border-box;\n    &:hover {\n        background-color: #7eaf75;\n    }\n"])),Le.CSS_LABEL_MIDIUM,(function(e){return e.isEnable?"":Le.CSS_BUTTON_DISABLE})),Oo=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=Object(o.useState)(null),c=Object(l.a)(i,2),a=c[0],r=c[1],s=n.scoreState.fileHandle,d=n.scoreData,b=n.systemState.scoreTabIndex,p=Object(o.useMemo)((function(){var e="-",t="-",i="-",o="-",c="-",r="-",s="-",l="-",u="-",h="-",x="-";if(0===b&&(null!=a&&(e=a.name,t="".concat(a.size.toString()," byte"),i=Z.a.getStringFromDate(new Date(a.lastModified))),d.chordList.length>0)){var p=d.chordList[0].detail;o="".concat(v.KEY12_MAJOR_SCALE_LIST[p.keyIndex]," ").concat(p.scale),c=p.bpm.toString(),r=p.beatSignature;var f=0,g=0;d.chordList.forEach((function(e){switch(e.type){case"section":f++;break;case"chord":g++}})),s=f.toString(),l=g.toString();var j=n.scoreState.elementCacheList;if(j.length>0){var m=j[j.length-1];h="".concat(m.pastSecond/1e3,"s"),u="".concat(m.bar," (").concat(m.surplusBeat,")")}x=d.notesList.length.toString()}return[{name:e,size:t,modified:i},{key:o,tempo:c,rate:r,section:s,chord:l,bar:u,time:h,notes:x}]}),[b,d,a]),f=Object(l.a)(p,2),g=f[0],j=f[1];Object(o.useEffect)((function(){0===b&&null!=s&&s.getFile().then((function(e){r(e)}))}),[b]);var m=function(e){n.scoreState.focusIndex=2,n.scoreState.distIndex=n.scoreState.focusIndex,t.score.setScoreState(Object(h.a)({},n.scoreState)),t.score.setScoreData(e),n.scoreData=e,S.updateHarmonizeCache(n,t)},O=function(e,n){return Object(ne.jsxs)(Ao,{children:[Object(ne.jsx)(To,{children:e}),Object(ne.jsx)(Mo,{children:n})]})},k=function(){Object(x.a)(u.a.mark((function e(){var t,i,o,c,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker();case 2:return t=e.sent,i=Object(l.a)(t,1),o=i[0],e.next=7,o.getFile();case 7:return c=e.sent,e.next=10,c.text();case 10:a=e.sent,n.scoreState.fileHandle=o,r(c),s=Z.a.unZip(a),console.log(s),m(JSON.parse(s));case 16:case"end":return e.stop()}}),e)})))()};return Object(ne.jsxs)(ko,{children:[Object(ne.jsxs)(Do,{children:[Object(ne.jsx)(_o,{onClick:function(){n.systemState.dialog=Object(ne.jsx)(lo,{setScoreData:m}),t.system.setState(n.systemState)},children:"new score"}),Object(ne.jsx)(_o,{onClick:k,children:"load file"}),Object(ne.jsx)(_o,{onClick:k,children:"search local"}),Object(ne.jsx)(_o,{onClick:function(){n.scoreState.fileHandle=null,t.score.setScoreState(Object(h.a)({},n.scoreState)),n.scoreData=d,S.updateHarmonizeCache(n,t),r(null)},children:"disconnect"})]}),Object(ne.jsxs)(yo,{children:[Object(ne.jsx)(So,{children:Object(ne.jsx)(Eo,{isEnable:!0})}),Object(ne.jsxs)(wo,{children:[Object(ne.jsxs)(Io,{isEnable:null!=s,children:[Object(ne.jsx)(Co,{children:"DATA"}),O("file",g.name),O("name",g.name),O("url",g.name),O("size",g.name)]}),Object(ne.jsxs)(Lo,{isEnable:d.chordList.length>0,children:[Object(ne.jsx)(Co,{children:"SCORE"}),O("key",j.key),O("tempo",j.tempo),O("rate",j.rate),O("section",j.section),O("chord",j.chord),O("bar",j.bar),O("time",j.time),O("notes",j.notes)]})]})]})]})},ko=d.b.div(Kn||(Kn=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #7e7e7e;\n    text-align: left;\n"]))),yo=d.b.div(Bn||(Bn=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: calc(100% - 40px);\n"]))),So=d.b.div(Hn||(Hn=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 50%;\n    height: 100%;\n    /* background-color: #8a6b6b; */\n    text-align: left;\n    vertical-align: top;\n"]))),wo=d.b.div(Un||(Un=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 50%;\n    height: 100%;\n    /* background-color: #969696; */\n    text-align: left;\n    vertical-align: top;\n"]))),Io=(d.b.div(Jn||(Jn=Object(s.a)(["\n    \n    display: inline-block;\n    width: calc(100% - 50px);\n    height: 50px;\n    margin: 20px 25px;\n    border: 2px solid #cacaca;\n    /* background: linear-gradient(to bottom, #585858, #a7a7a7, #585858); */\n    background-color: #000;\n    color: #ccc;\n    font-size: 30px;\n    font-weight: 600;\n    text-align: left;\n    box-sizing: border-box;\n    padding-left: 20px;\n    border-radius: 6px;\n\n    &:hover {\n        background-color: #616161;\n    }\n"]))),d.b.div(Vn||(Vn=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 8px);\n    margin: 4px 0 4px 4px;\n    height: calc(100% - 48px);\n    background-color: #ffffff;\n    box-sizing: border-box;\n    color: #060053;\n"]))),d.b.div(Yn||(Yn=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: ","px;\n    margin: 4px 0 4px 4px;\n    background-color: #9da5af;\n    border: solid 1px #1b00b3;\n    ","\n    border-radius: 4px;\n    box-sizing: border-box;\n    color: #060053;\n"])),260,(function(e){return e.isEnable?"":Object(d.a)(Wn||(Wn=Object(s.a)(["\n        opacity: 0.3;\n    "])))}))),Lo=d.b.div(qn||(qn=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: calc(100% - ","px);\n    margin: 0 0 4px 4px;\n    background-color: #acacac;\n    border: solid 1px #1b00b3;\n    ","\n    border-radius: 4px;\n    box-sizing: border-box;\n    color: #060053;\n"])),272,(function(e){return e.isEnable?"":Object(d.a)(Gn||(Gn=Object(s.a)(["\n        opacity: 0.3;\n    "])))})),Eo=d.b.div(Xn||(Xn=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    margin: 4px 0 4px 4px;\n    background-color: #acacac;\n    border: solid 1px #1b00b3;\n    ","\n    border-radius: 4px;\n    box-sizing: border-box;\n    color: #060053;\n"])),(function(e){return e.isEnable?"":Object(d.a)(Zn||(Zn=Object(s.a)(["\n        opacity: 0.3;\n    "])))})),Co=d.b.div(Qn||(Qn=Object(s.a)(["\n    display: inline-block;\n    height: 40px;\n    font-size: 30px;\n    font-weight: 600;\n    color: #ad0000;\n    /* background-color: #3f80cf57; */\n    padding: 0 10px;\n"]))),Ao=d.b.div($n||($n=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 35px;\n    /* background-color: #3fcf7b56; */\n    padding: 4px 0 0 10px;\n"]))),To=d.b.div(et||(et=Object(s.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    width: 140px;\n    font-size: 24px;\n    line-height: 24px;\n    font-weight: 600;\n    color: #08106e;\n    border: solid 1px #1b00b3;\n    box-sizing: border-box;\n    background-color: #85a2c5;\n    border-radius: 4px;\n    text-align: center;\n"]))),Mo=d.b.div(nt||(nt=Object(s.a)(["\n    display: inline-block;\n    height: calc(100% - 4px);\n    width: calc(100% - 170px);\n    margin-left: 10px;\n    font-size: 24px;\n    line-height: 24px;\n    /* font-weight: 600; */\n    color: #ffffff;\n    padding: 0 5px;\n    box-sizing: border-box;\n    background-color: #808080;\n    text-align: left;\n"]))),Do=d.b.div(tt||(tt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 40px;\n    background-color: #888888;\n    box-sizing: border-box;\n    text-align: left;\n"]))),_o=d.b.div(it||(it=Object(s.a)(["\n    ","\n    /* width: 160px; */\n    padding: 0 40px;\n    box-sizing: border-box;\n    background-color: #a8a8a8;\n    border: 1px solid #000744;\n    color: #04274e;\n    border-radius: 4px;\n    margin: 5px 0 0 4px;\n    &:hover {\n        background-color: #98bfc2;\n    }\n"])),Ee),zo=function(e){var n=Object(o.useContext)(pg),t=n.store,i=n.dispatcher,c=t.scoreState,a=t.scoreData.chordList[c.focusIndex].detail;Object(o.useEffect)((function(){var e=v.getSymbolFromKey(a.symbolKey),n=null==e.base?null:v.getSymbolFromKey(e.base),t=[],o=[],r=[],s=0;if(null==n)t.push("major"),t.push("minor"),t.push("suspend4th"),t.push("diminish"),t.push("augument"),t.push("minor-minus5");else{v.SYMBOL_LIST.forEach((function(e){e.key===n.key&&o.push(e.key)}));var l=v.getSymbolDerives(n.key);v.SYMBOL_LIST.forEach((function(e){l.includes(e.key)&&t.push(e.key)}))}t.forEach((function(e,n){e===a.symbolKey&&(s=n)}));var d=v.getSymbolDerives(e.key);v.SYMBOL_LIST.forEach((function(e){d.includes(e.key)&&r.push(e.key)})),c.symbolMng={index:s,curLine:t,parentLine:o,childrenLine:r},i.score.setScoreState(c)}),[a.symbolKey]);var r=c.symbolMng,s=[],l=[],d=[];return null!=r&&(s.push(Object(ne.jsx)(No,{children:"Base"},s.length)),r.parentLine.forEach((function(e,n){var t=v.getSymbolFromKey(e);s.push(Object(ne.jsxs)(Po,{isActive:!1,children:["[",null===t||void 0===t?void 0:t.name,"]"]},s.length))})),l.push(Object(ne.jsx)(No,{children:"Current"},l.length)),r.curLine.forEach((function(e,n){var t=v.getSymbolFromKey(e);l.push(Object(ne.jsxs)(Po,{isActive:r.index===n,children:["[",null===t||void 0===t?void 0:t.name,"]"]},l.length))})),d.push(Object(ne.jsx)(No,{children:"Derives"},d.length)),r.childrenLine.forEach((function(e,n){var t=v.getSymbolFromKey(e);d.push(Object(ne.jsxs)(Po,{isActive:!1,children:["[",null===t||void 0===t?void 0:t.name,"]"]},d.length))}))),Object(ne.jsxs)(Fo,{children:[Object(ne.jsx)(Ro,{children:s}),Object(ne.jsx)(Ro,{children:l}),Object(ne.jsx)(Ro,{children:d})]})},Fo=d.b.div(ot||(ot=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 30;\n    top: 100px;\n    left: 0;\n    width: 250px;\n    height: 160px;\n    background-color: #a9cfd422;\n    border: 2px solid #000000ec;\n    box-sizing: border-box;\n    text-align: center;\n    opacity: 0.9;\n    box-shadow: 0 4px 16px 4px #000b3a48;\n    backdrop-filter: blur(6px);\n"]))),Ro=d.b.div(ct||(ct=Object(s.a)(["\n    display: inline-block;\n    width: 80px;\n    height: 100%;\n    /* background-color: #e6e6e6; */\n    margin: 1px;\n    vertical-align: top;\n"]))),No=d.b.div(at||(at=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    box-sizing: border-box;\n    /* background-color: #78dab4;\n    border: 1px solid #000000; */\n    background: linear-gradient(to bottom, #7a9ea3, #78cfda, #7a9ea3);\n    /* background: linear-gradient(to bottom, #a37a7a, #da7878, #a37a7a); */\n    margin: 1px;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: #f3f3f3;\n    line-height: 17px;\n"]))),Po=d.b.div(rt||(rt=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: 20px;\n    box-sizing: border-box;\n    background-color: #dbdbdb;\n    ","\n    border: 1px solid #000000;\n    margin: 1px;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: #000000;\n    line-height: 16px;\n"])),(function(e){return e.isActive?Object(d.a)(st||(st=Object(s.a)(["background-color: #ffef64;"]))):""})),Ko=function(e){var n,t=Object(o.useContext)(pg),i=t.store,c=(t.dispatcher,i.scoreState),a=(i.scoreData.chordList[e.index],c.elementCacheList[e.index]),r=null===(n=v.getSymbolFromKey(e.detail.symbolKey))||void 0===n?void 0:n.name,s=null;null!=e.detail.root&&(v.getDegreeRoot({index:e.detail.root.index,isFlat:e.detail.root.isFlat}),s=v.getRootName({index:e.detail.root.index,isFlat:e.detail.root.isFlat},a.keyIndex),null!=e.detail.on&&(v.getDegreeRoot({index:e.detail.on.index,isFlat:e.detail.on.isFlat}),v.getRootName({index:e.detail.on.index,isFlat:e.detail.root.isFlat},a.keyIndex)));var l=-1,d=c.elementCacheList[e.index-1];3!==e.index&&d.bar===a.bar||(l=a.bar+1);var b=-1!==l&&0!==a.surplusBeat,u="-";null!=s&&(u="".concat(s).concat(r));var h="";if(0!==a.minute)switch(a.minute){case 1:h="\u2192/16";break;case 2:h="\u2192/8";break;case-1:h="\u2190/16";break;case-2:h="\u2190/8"}return Object(ne.jsxs)(Jo,{children:[Object(ne.jsx)(Vo,{children:u}),Object(ne.jsxs)(Yo,{children:[Object(ne.jsx)(Bo,{isError:b,children:-1===l?Object(ne.jsx)(ne.Fragment,{children:"\xa0"}):l}),Object(ne.jsxs)(Uo,{children:[Object(ne.jsx)("span",{children:0===a.surplusBeat?Object(ne.jsx)(ne.Fragment,{children:"\xa0"}):a.surplusBeat}),0===a.minute?"":h]}),Object(ne.jsxs)(Ho,{children:[Math.round(a.pastSecond/100)/10,"s"]})]})]})},Bo=d.b.div(lt||(lt=Object(s.a)(["\n    font-size: 12px;\n    font-weight: 600;\n    color: #c72929;\n    ","\n    box-sizing: border-box;\n"])),(function(e){return e.isError?Object(d.a)(dt||(dt=Object(s.a)(["\n        background-color: #ee5959;\n        color: #ffffff;\n        /* border: 2px solid #c72929; */\n        border-radius: 2px;\n    "]))):""})),Ho=d.b.div(bt||(bt=Object(s.a)(["\n    font-size: 12px;\n    font-weight: 600;\n    color: #000000a0;\n    box-sizing: border-box;\n"]))),Uo=d.b.div(ut||(ut=Object(s.a)([""]))),Jo=d.b.div(ht||(ht=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 4;\n    width: 100%;\n    height: 50px;\n    // background-color: #00ff2a11;\n    bottom: 0;\n    left: 0;\n    box-sizing: border-box;\n    text-align: center;\n    box-sizing: border-box;\n"]))),Vo=d.b.div(xt||(xt=Object(s.a)(["\n    display: inline-block;\n    // width: calc(100% - ","px);\n    width: 100%;\n    height: 18px;\n    // background-color: #ffc4001c;\n    font-size: 12px;\n    font-weight: 600;\n    color: #2b2b2b;\n"])),60),Yo=(d.b.div(pt||(pt=Object(s.a)(["\n    display: inline-block;\n    width: 56px;\n    height: 30px;\n    background-color: #1100ff1c;\n"]))),d.b.div(ft||(ft=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 5;\n    width: ","px;\n    height: 100%;\n    // background-color: #0000ff11;\n    top: 0;\n    left: -","px;\n    box-sizing: border-box;\n    text-align: center;\n    \n    & "," {\n    }\n    & "," {\n        font-size: 12px;\n        color: #333;\n        & span {\n            color: #00a;\n            font-weight: 600;\n        }\n    }\n"])),50,25,Bo,Uo)),Wo=function(e){var n=Object(o.useContext)(pg),t=n.store,i=(n.dispatcher,t.scoreState),c=i.elementCacheList[e.index].sectionNo,a=i.sectionCacheList[c],r=Math.floor(a.beatSum/4),s=a.beatSum%4;return Object(ne.jsxs)(qo,{children:[Object(ne.jsxs)(Go,{children:[r,0===s?"":" (".concat(s,")")]}),Object(ne.jsx)(Xo,{})]})},qo=d.b.div(gt||(gt=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 4;\n    width: 100%;\n    height: 50px;\n    /* background-color: #ff000011; */\n    bottom: 0;\n    left: 0;\n    box-sizing: border-box;\n    text-align: center;\n    box-sizing: border-box;\n"]))),Go=d.b.div(jt||(jt=Object(s.a)(["\n    display: block;\n    position: relative;\n    /* min-width: 80px; */\n    height: 16px;\n    font-size: 14px;\n    font-weight: 600;\n    color: #474386cf;\n    text-align: center;\n    line-height: 16px;\n    /* background-color: #00000042; */\n"]))),Xo=d.b.div(vt||(vt=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 8px;\n    height: calc(100% - 16px);\n    background-color: #db0000cf;\n    border-radius: 4px 4px 0 0;\n"]))),Zo=function(e){var n=e.detail.alterType;return Object(ne.jsxs)(Qo,{children:[Object(ne.jsx)(ec,{children:null==n?"alter":n}),Object(ne.jsx)(nc,{children:function(){var t="-";if(null!=n)switch(n){case"modulate":var i=e.detail.modRel;if(null!=i)switch(i){case"domm":var o=e.detail.dommVal,c=o>0?"+":"";t="".concat(i,": ").concat(c).concat(o);break;case"relative":case"parallel":t=i;break;case"key":var a=e.detail.keyAdj,r=a>0?"+":"";t="".concat(i,": ").concat(r).concat(a)}break;case"tempo":var s=e.detail.tempoRel;switch(s){case"diff":var l=e.detail.tempoDiff,d=l>0?"+":"";t="".concat(s,": ").concat(d).concat(l);break;case"rate":t="".concat(s,": ").concat(e.detail.tempoRate,"%");break;case"abs":t="".concat(s,": ").concat(e.detail.tempoAbs)}}return t}()})]})},Qo=d.b.div(mt||(mt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    /* background-color: red; */\n"]))),$o=d.b.div(Ot||(Ot=Object(s.a)(["\n    display: block;\n    position: relative;\n    min-width: 100px;\n    height: 20px;\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 20px;\n    /* background-color: #1000eb42; */\n    margin-top: 3px;\n"]))),ec=Object(d.b)($o)(kt||(kt=Object(s.a)(["\n    color: #0014cc;\n"]))),nc=Object(d.b)($o)(yt||(yt=Object(s.a)(["\n    color: #5e5e5e;\n"]))),tc=function(e){var n,t,i,c=e.detail.minute,a=null===(n=v.getSymbolFromKey(e.detail.symbolKey))||void 0===n?void 0:n.name;return Object(o.useMemo)((function(){var n=e.detail.backing,t=null,i=null;null!=e.detail.root&&(t=v.getDegreeRoot({index:e.detail.root.index,isFlat:e.detail.root.isFlat}),v.getRootName({index:e.detail.root.index,isFlat:e.detail.root.isFlat},e.keyIndex),null!=e.detail.on&&(i=v.getDegreeRoot({index:e.detail.on.index,isFlat:e.detail.on.isFlat}),v.getRootName({index:e.detail.on.index,isFlat:e.detail.root.isFlat},e.keyIndex)));var o=v.getDiatonicDegreeList(e.scale).includes(t+a);return Object(ne.jsxs)(ic,{children:[Object(ne.jsx)(rc,{isSwitch:e.isSustainMode,scaleRelation:null!=t&&o?"diatonic":"none",isOnChordScale:null!=e.detail.on&&[0,2,4,5,7,9,11].includes(e.detail.on.index),children:null==t?"none":Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(oc,{children:t}),Object(ne.jsx)(cc,{children:a}),Object(ne.jsx)(ac,{children:null==i?"":"/".concat(i)})]})}),Object(ne.jsx)(sc,{isSwitch:e.isSustainMode,children:function(){for(var n=[],t=0;t<e.detail.beatLen;t++){var i="normal",o=0;if([0,e.detail.beatLen-1].includes(t)){var a=0===t?c.head:c.tail;0!==a&&(i=a>0?"long":"short",o=Math.abs(a))}n.push(Object(ne.jsx)(lc,{lenType:i,valueType:o},t))}return n}()}),Object(ne.jsx)(dc,{children:n.hasError?Object(ne.jsx)(bc,{}):Object(ne.jsxs)(ne.Fragment,{children:[0===n.voicingList.length?"":Object(ne.jsx)(uc,{}),0===n.voicingList.length||null==n.pattern?"":Object(ne.jsx)(hc,{})]})})]})}),[e.scale,e.isCurrent,e.detail.beatLen,null===(t=e.detail.root)||void 0===t?void 0:t.index,null===(i=e.detail.on)||void 0===i?void 0:i.index,e.detail.symbolKey,e.isSustainMode,e.keyIndex,e.detail.minute.head,e.detail.minute.tail,e.detail.backing])},ic=d.b.div(St||(St=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    /* border: 1px solid #c5c5cc; */\n    /* padding: 4px; */\n    box-sizing: border-box;\n    /* background-color: #00000013; */\n"]))),oc=d.b.div(wt||(wt=Object(s.a)([""]))),cc=d.b.div(It||(It=Object(s.a)([""]))),ac=d.b.div(Lt||(Lt=Object(s.a)([""]))),rc=d.b.div(Et||(Et=Object(s.a)(["\n    display: block;\n    /* width: 100%; */\n    height: 25px;\n    /* background-color: #f700d616; */\n    ","\n    font-size: 18px;\n    /* color: #4e516394; */\n    text-align: center;\n\n    & * {\n        display: inline-block;\n    }\n\n    & "," {\n        color: #4e5163cc;\n        ","\n        font-weight: 600;\n    }\n    & "," {\n        color: #4e5163cc;\n        ","\n    }\n    & "," {\n        color: #4e5163cc;\n        ","\n        font-weight: 600;\n    }\n"])),(function(e){return e.isSwitch?Object(d.a)(Ct||(Ct=Object(s.a)(["background-color: #0004f729;"]))):""}),oc,(function(e){return"diatonic"===e.scaleRelation?Object(d.a)(At||(At=Object(s.a)(["color: #4e516394;"]))):"secondaly"===e.scaleRelation?Object(d.a)(Tt||(Tt=Object(s.a)(["color: #00116e93;"]))):Object(d.a)(Mt||(Mt=Object(s.a)(["color: #70000093;"])))}),cc,(function(e){return"diatonic"===e.scaleRelation?Object(d.a)(Dt||(Dt=Object(s.a)(["color: #4e516394;"]))):"secondaly"===e.scaleRelation?Object(d.a)(_t||(_t=Object(s.a)(["color: #00116e93;"]))):Object(d.a)(zt||(zt=Object(s.a)(["color: #70000093;"])))}),ac,(function(e){return e.isOnChordScale?"":Object(d.a)(Ft||(Ft=Object(s.a)(["color: #70000093;"])))})),sc=(d.b.div(Rt||(Rt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 22px;\n    /* background-color: #d37979b2; */\n    font-size: 14px;\n    /* font-weight: 600; */\n    color: #9c5f74;\n    text-align: center;\n"]))),d.b.div(Nt||(Nt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 18px;\n    ","\n    /* background-color: #d8ccccb1; */\n    text-align: center;\n"])),(function(e){return e.isSwitch?Object(d.a)(Pt||(Pt=Object(s.a)(["background-color: #0004f729;"]))):""}))),lc=d.b.div(Kt||(Kt=Object(s.a)(["\n    display: inline-block;\n    width: 8px;\n    ","\n    height: calc(100% - 4px);\n    margin: 2px 2px 0 2px;\n    background-color: #e0e0e088;\n    ","\n    /* background: linear-gradient(to bottom, #9b9b9bc3, #85858514); */\n    border: solid 1px #0000004e;\n    /* border-radius: 2px; */\n    box-sizing: border-box;\n"])),(function(e){return"short"===e.lenType?Object(d.a)(Bt||(Bt=Object(s.a)(["\n        width: 4px;\n    "]))):"long"===e.lenType?Object(d.a)(Ht||(Ht=Object(s.a)(["\n        width: 12px;\n    "]))):""}),(function(e){return 2===e.valueType?Object(d.a)(Ut||(Ut=Object(s.a)(["\n        background-color: #db828287;\n    "]))):1===e.valueType?Object(d.a)(Jt||(Jt=Object(s.a)(["\n        background-color: #9394dd87;\n    "]))):""})),dc=d.b.div(Vt||(Vt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 6px;\n    /* background-color: #00a048; */\n    text-align: center;\n"]))),bc=d.b.div(Yt||(Yt=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    margin-top: 2px;\n    height: 4px;\n    border-radius: 4px;\n    background-color: #af3838;\n"]))),uc=d.b.div(Wt||(Wt=Object(s.a)(["\n    display: inline-block;\n    width: 40%;\n    margin: 2px 2px 0 0;\n    height: 4px;\n    border-radius: 4px 0 0 4px;\n    border: solid 1px #0000004e;\n    background-color: #acb6ca;\n"]))),hc=d.b.div(qt||(qt=Object(s.a)(["\n    display: inline-block;\n    width: 40%;\n    margin: 2px 0 0 2px;\n    height: 4px;\n    border-radius: 0 4px 4px 0;\n    border: solid 1px #0000004e;\n    background-color: #accab3;\n"]))),xc=function(e){var n=e.detail.fixed;return Object(ne.jsx)(pc,{isStart:"Start"===n,children:Object(ne.jsx)(fc,{children:n})})},pc=d.b.div(Gt||(Gt=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: calc(100% - ","px);\n    border-left: 1px solid #00000083;\n    border-top: 1px solid #00000083;\n    border-right: 1px solid #00000083;\n    /* border: 1px solid #00000083; */\n    box-sizing: border-box;\n    background-color: #9b9b9b1f;\n    ","\n"])),15,(function(e){return e.isStart?Object(d.a)(Xt||(Xt=Object(s.a)(["\n        border-radius: 0 35px 0 0;\n    "]))):Object(d.a)(Zt||(Zt=Object(s.a)(["\n        border-radius: 35px 0 0 0;\n    "])))})),fc=d.b.div(Qt||(Qt=Object(s.a)(["\n    display: inline-block;\n    /* width: calc(100% - 10px); */\n    width: 100%;\n    height: 48px;\n    /* background-color: #47438678; */\n    font-size: 26px;\n    font-weight: 600;\n    font-style: italic;\n    line-height: 46px;\n    color: #960000b0;\n    text-align: center;\n    margin-top: 30px;\n    /* vertical-align: middle; */\n"]))),gc=function(e){return Object(ne.jsxs)(jc,{children:[Object(ne.jsxs)(vc,{children:[Object(ne.jsx)(mc,{children:"Scale:"}),Object(ne.jsx)(Oc,{children:e.detail.scale})]}),Object(ne.jsxs)(vc,{children:[Object(ne.jsx)(mc,{children:"Key:"}),Object(ne.jsx)(Oc,{children:v.KEY12_MAJOR_SCALE_LIST[e.detail.keyIndex]})]}),Object(ne.jsxs)(vc,{children:[Object(ne.jsx)(mc,{children:"tempo:"}),Object(ne.jsx)(Oc,{children:e.detail.bpm})]}),Object(ne.jsxs)(vc,{children:[Object(ne.jsx)(mc,{children:"Rate:"}),Object(ne.jsx)(Oc,{children:e.detail.beatSignature})]})]})},jc=d.b.div($t||($t=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100px;\n"]))),vc=d.b.div(ei||(ei=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100px;\n    height: 16px;\n    margin: 1px 0;\n    /* background-color: #0066ff16; */\n    /* border-bottom: 1px solid #000; */\n    font-size: 12px;\n    font-weight: 600;\n    color: #2a2a2c;\n    line-height: 16px;\n"]))),mc=d.b.div(ni||(ni=Object(s.a)(["\n    display: inline-block;\n    margin: 0 2px;\n    width: 50px;\n    height: 100%;\n    color: #14a800;\n    /* background-color: #ff00b329; */\n"]))),Oc=d.b.div(ti||(ti=Object(s.a)(["\n    display: inline-block;\n    margin: 0 2px;\n    width: 40px;\n    height: 100%;\n    color: #000000;\n    /* background-color: #ff00b329; */\n"]))),kc=function(e){return Object(ne.jsx)(yc,{children:Object(ne.jsx)(Sc,{children:e.detail.labelName})})},yc=d.b.div(ii||(ii=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    position: relative;\n    /* width: 100px; */\n    text-align: center;\n    border: 1px;\n    /* border: 1px solid #c5c5cc; */\n"]))),Sc=d.b.div(oi||(oi=Object(s.a)(["\n    display: block;\n    position: relative;\n    min-width: 80px;\n    height: 20px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #c00;\n    text-align: center;\n    line-height: 20px;\n    /* background-color: #1000eb42; */\n    margin-top: 13px;\n"]))),wc=function(e){return Object(ne.jsxs)(Ic,{children:[Object(ne.jsx)(Ec,{children:function(){switch(e.detail.alterType){case"modulate":return"Key";case"tempo":return"Tempo";case"beat":return"Beat"}}()}),Object(ne.jsx)(Cc,{children:function(){switch(e.detail.alterType){case"modulate":var n=v.KEY12_SHARP_LIST[e.prevCache.keyIndex]+("major"===e.prevCache.scale?"":"m"),t=v.KEY12_SHARP_LIST[e.curCache.keyIndex]+("major"===e.curCache.scale?"":"m");return"".concat(n,"\u2192").concat(t);case"tempo":var i=e.prevCache.bpm,o=e.curCache.bpm;return"".concat(i,"\u2192").concat(o);case"beat":var c=e.prevCache.beatSignature,a=e.curCache.beatSignature;return"".concat(c,"\u2192").concat(a)}}()})]})},Ic=d.b.div(ci||(ci=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 4;\n    width: 100%;\n    height: 50px;\n    /* background-color: #ff000011; */\n    bottom: 0;\n    left: 0;\n    box-sizing: border-box;\n    text-align: center;\n    box-sizing: border-box;\n"]))),Lc=d.b.div(ai||(ai=Object(s.a)(["\n    display: block;\n    position: relative;\n    /* min-width: 80px; */\n    height: 16px;\n    font-size: 14px;\n    font-weight: 600;\n    text-align: center;\n    line-height: 16px;\n    /* background-color: #00000042; */\n"]))),Ec=Object(d.b)(Lc)(ri||(ri=Object(s.a)(["\n    color: #0b00a8cf;\n"]))),Cc=Object(d.b)(Lc)(si||(si=Object(s.a)(["\n    color: #050505cf;\n"]))),Ac=function(e){var n=Object(o.useContext)(pg),t=n.store,i=(n.dispatcher,t.scoreState),c=t.scoreData.chordList[i.focusIndex].detail;Object(o.useEffect)((function(){}),[c.root,c.symbolKey]);var a=function(e,n,t){return{root:{index:e,isFlat:n},symbolKey:t}},r=function(e,n){var t=[];return t.push(Object(ne.jsx)(Dc,{children:e},t.length)),n.forEach((function(e){var n=v.getDegreeRoot(e.root),i=v.getSymbolFromKey(e.symbolKey).name;t.push(Object(ne.jsx)(_c,{isActive:!1,children:n+i},t.length))})),Object(ne.jsx)(Mc,{children:t})};return Object(ne.jsxs)(Tc,{children:[r(Object(ne.jsx)(ne.Fragment,{children:"triad"}),[a(0,!1,"major"),a(2,!1,"minor"),a(4,!1,"minor"),a(5,!1,"major"),a(7,!1,"major"),a(9,!1,"minor"),a(11,!1,"minor-minus5")]),r(Object(ne.jsx)(ne.Fragment,{children:"domm"}),[a(9,!1,"major-min7th"),a(11,!1,"major-min7th"),a(0,!1,"major-min7th"),a(2,!1,"major-min7th"),a(4,!1,"major-min7th")]),r(Object(ne.jsx)(ne.Fragment,{children:"domm*"}),[a(1,!1,"diminish"),a(3,!1,"diminish"),a(4,!1,"diminish"),a(6,!1,"diminish"),a(8,!1,"diminish")])]})},Tc=d.b.div(li||(li=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 30;\n    top: 100px;\n    left: 0;\n    width: 250px;\n    /* height: 160px; */\n    background-color: #a9cfd422;\n    border: 2px solid #000000ec;\n    box-sizing: border-box;\n    text-align: center;\n    opacity: 0.9;\n    box-shadow: 0 4px 16px 4px #000b3a48;\n    backdrop-filter: blur(6px);\n"]))),Mc=d.b.div(di||(di=Object(s.a)(["\n    display: inline-block;\n    width: 80px;\n    /* height: 100%; */\n    /* background-color: #e6e6e6; */\n    margin: 1px;\n    vertical-align: top;\n"]))),Dc=d.b.div(bi||(bi=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    box-sizing: border-box;\n    /* background-color: #78dab4;\n    border: 1px solid #000000; */\n    background: linear-gradient(to bottom, #7a9ea3, #78cfda, #7a9ea3);\n    /* background: linear-gradient(to bottom, #a37a7a, #da7878, #a37a7a); */\n    margin: 1px;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: #f3f3f3;\n    line-height: 17px;\n"]))),_c=d.b.div(ui||(ui=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: 20px;\n    box-sizing: border-box;\n    background-color: #dbdbdb;\n    ","\n    border: 1px solid #000000;\n    margin: 1px;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: #000000;\n    line-height: 16px;\n"])),(function(e){return e.isActive?Object(d.a)(hi||(hi=Object(s.a)(["background-color: #ffef64;"]))):""})),zc=function(e){var n=Object(o.useRef)({}),t=Object(o.useRef)({}),i=e.state,c=i.keySwitch,a=i.focusIndex==e.index,r=e.element,s=i.elementCacheList[e.index],l=i.focusIndex<i.distIndex?i.focusIndex:i.distIndex,d=i.focusIndex>i.distIndex?i.focusIndex:i.distIndex,b=e.index>=l&&e.index<=d,u=b&&l!=d,h=b||i.elementCacheList[i.focusIndex].sectionNo===s.sectionNo;Object(o.useEffect)((function(){s.reffers.wrap=n.current,s.reffers.body=t.current,e.setState(i)}),[i.elementCacheList.length]);var x=JSON.stringify(r);return Object(o.useMemo)((function(){var o="chord"!==r.type?null:r.detail,c=!(h||"init"===r.type);return Object(ne.jsxs)(Pc,{ref:n,isSelectable:"fixed"!==r.type,isActive:b,isInactive:c,isAdditional:["chord","section","alter","init"].includes(r.type),children:[Object(ne.jsx)(Bc,{children:"chord"!==r.type?Object(ne.jsx)(ne.Fragment,{}):Object(ne.jsx)(Kc,{children:v.getDisplayKeyScaleName(s.keyIndex,s.scale)})}),["init","chord","section","alter"].includes(r.type)?Object(ne.jsx)(Fc,{ref:t,isActive:b,isRange:u,isInactive:c,type:r.type,isAnytime:["fixed","init"].includes(r.type)||0===i.focusIndex,onClick:function(){"fixed"!==r.type&&(i.keySwitch.distMode?i.distIndex=e.index:(i.focusIndex=e.index,i.distIndex=i.focusIndex),e.setState(i))},children:function(){switch(r.type){case"init":var e=r.detail;return Object(ne.jsx)(gc,{detail:e});case"section":var n=r.detail;return Object(ne.jsx)(kc,{detail:n});case"chord":var t=r.detail;return Object(ne.jsx)(tc,{detail:t,isCurrent:b,keyIndex:s.keyIndex,isSustainMode:b&&i.keySwitch.sustainMode,scale:s.scale});case"alter":var o=r.detail;return Object(ne.jsx)(Zo,{detail:o})}}()}):Object(ne.jsx)(xc,{detail:r.detail}),"chord"===r.type?Object(ne.jsx)(Ko,{index:e.index,detail:o}):"section"===r.type?Object(ne.jsx)(Wo,{index:e.index}):"alter"===r.type?Object(ne.jsx)(wc,{detail:r.detail,prevCache:i.elementCacheList[e.index-1],curCache:s}):Object(ne.jsx)(ne.Fragment,{}),Object(ne.jsx)(ne.Fragment,{children:a&&null!=o&&i.keySwitch.chordMode?Object(ne.jsx)(Ac,{}):""}),Object(ne.jsx)(ne.Fragment,{children:a&&null!=o&&null!=o.root&&i.keySwitch.symbolMode?Object(ne.jsx)(zo,{}):""}),["fixed","init"].includes(r.type)?Object(ne.jsx)(ne.Fragment,{}):Object(ne.jsxs)(Rc,{children:[Object(ne.jsx)(Nc,{children:"-"}),Object(ne.jsx)(Nc,{children:"+"})]})]})}),[x,h,u,b,c.chordMode,c.symbolMode,c.sustainMode])},Fc=(d.b.div(xi||(xi=Object(s.a)(["\n    display: block;\n    width: 1px;\n    height: 10px;\n    background-color: #ad0c0c;\n"]))),d.b.div(pi||(pi=Object(s.a)(["\n    display: inline-block;\n    /* position: relative; */\n    min-width: 80px;\n    height: calc(100% - ","px);\n    /* border: solid 1px #00000049; */\n    ","\n    ","\n    ","\n\n    opacity: 0.4;\n    border-radius: 4px;\n    ","\n    ","\n    box-sizing: border-box;\n    padding: 4px;\n    transition: background-color 100ms;\n    ","\n    ","\n"])),75,(function(e){return"section"!==e.type?"":Object(d.a)(fi||(fi=Object(s.a)(["\n        border: solid 1px #df8484;\n    "])))}),(function(e){return"init"!==e.type?"":Object(d.a)(gi||(gi=Object(s.a)(["\n        border: solid 1px #44b168;\n        height: 85px;\n    "])))}),(function(e){return"alter"!==e.type?"":Object(d.a)(ji||(ji=Object(s.a)(["\n        border: solid 1px #604fc0;\n    "])))}),(function(e){return e.isInactive?"":Object(d.a)(vi||(vi=Object(s.a)(["\n        /* background-color: #ebf1e2; */\n        opacity: 1;\n    "])))}),(function(e){return e.isAnytime?Object(d.a)(mi||(mi=Object(s.a)(["\n        opacity: 1;\n    "]))):""}),(function(e){return e.isActive?Object(d.a)(Oi||(Oi=Object(s.a)(["\n        background-color: #e4c9df;\n        border: solid 1px #00000049;\n        box-shadow: 0 0 8px 0 #000b3a48;\n    "]))):""}),(function(e){return e.isRange?Object(d.a)(ki||(ki=Object(s.a)(["\n        background-color: #80d4e2;\n        box-shadow: 0 0 8px 0 #000b3a48;\n    "]))):""}))),Rc=d.b.div(yi||(yi=Object(s.a)([""]))),Nc=d.b.div(Si||(Si=Object(s.a)([""]))),Pc=d.b.div(wi||(wi=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    height: ","px;\n    padding: 0 ","px;\n    box-sizing: border-box;\n    /* margin: 10px 5px 5px 5px; */\n    border-bottom: 1px solid #47438678;\n    margin-bottom: 4px;\n    vertical-align: top;\n    /* width: 1px; */\n    transition: width 500ms, opacity 300ms;\n    /* border: 1px solid #00000015; */\n    ","\n\n    & "," {\n        display: none;\n        position: absolute;\n        z-index: 5;\n        width: ","px;\n        height: 44px;\n        /* background-color: #0000ff11; */\n        top: ","px;\n        right: -","px;\n\n        /* background-color: #0400d84e; */\n        & "," {\n            display: inline-block;\n            width: ","px;\n            height: ","px;\n            background-color: #ebebeb6e;\n            border: 1px solid #818181;\n            margin: 1px 0;\n            font-size: 15px;\n            font-weight: 600;\n            text-align: center;\n            color: #818181;\n            box-sizing: border-box;\n            line-height: 15px;\n\n            &:hover {\n                background-color: #fffb0b9d\n            }\n        }\n    }\n\n    &:hover {\n        ","\n    }\n"])),134,8,(function(e){return e.isInactive||!e.isAdditional?"":Object(d.a)(Ii||(Ii=Object(s.a)(["\n        /* background-color: #e8ff9549; */\n        background: linear-gradient(to bottom, transparent,transparent,transparent, #ffffff9e);\n    "])))}),Rc,20,35,10,Nc,20,20,(function(e){return e.isSelectable?Object(d.a)(Li||(Li=Object(s.a)(["\n            & "," {\n                ","\n                opacity: 1;\n            }\n            & "," {\n                display: inline-block;\n            }\n        "])),Fc,(function(e){return e.isActive?"":Object(d.a)(Ei||(Ei=Object(s.a)(["background-color: #ffffff9b;"])))}),Rc):""})),Kc=d.b.div(Ci||(Ci=Object(s.a)([""]))),Bc=d.b.div(Ai||(Ai=Object(s.a)(["\n    display: inline-block;\n    /* position: relative; */\n    width: 100%;\n    height: ","px;\n    /* background-color: #eca8813b; */\n\n    & "," {\n        display: inline-block;\n        position: absolute;\n        top: -2px;\n        left: 10px;\n        width: 50px;\n        font-size: 12px;\n        color: #ca0000;\n        /* background-color: #fff; */\n    }\n"])),15,Kc),Hc=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.scoreData.chordList,c=n.scoreState.elementCacheList,a=[];if(c.length===i.length)for(var r=0;r<c.length;r++)a.push(Object(ne.jsx)(zc,{index:r,element:i[r],state:n.scoreState,setState:t.score.setScoreState},a.length));return Object(ne.jsx)(Uc,{children:a})},Uc=d.b.div(Ti||(Ti=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: 4px 0 0 4px;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    /* background-color: #e7dddd; */\n    background-color: #e9e9e9;\n    border: 1px solid #b3b3b3;\n    border-radius: 2px;\n    padding: 15px;\n    box-sizing: border-box;\n    text-align: left;\n    overflow: auto;\n    \n    &::-webkit-scrollbar {\n        width: 10px;\n        height: 10px;\n    }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: #1959A8;\n    }\n    &::-webkit-scrollbar-track {\n        border-radius: 5px;\n        box-shadow: 0 0 4px #aaa inset;\n    }\n"]))),Jc=(d.b.div(Mi||(Mi=Object(s.a)(["\n    transform-origin: top left;\n    /* width: 100%;\n    height: 100%; */\n    transform: scale(1);\n"]))),d.b.div(Di||(Di=Object(s.a)(["\n    display: inline-block;\n    /* position: relative; */\n    padding: ","px ","px;\n    width: ","px;\n    height: ","px;\n    background-color: #d8d8d8;\n    /* overflow: hidden; */\n    margin: 10px 0 0 10px;\n    box-shadow: 0 0 18px 0 #000b3a48;\n"])),10,30,891,1260),function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.scoreState,c=i.sectionCacheList;if(-1===i.focusIndex||i.focusIndex>i.elementCacheList.length)return Object(ne.jsx)(ne.Fragment,{});var a=i.elementCacheList[i.focusIndex].sectionNo,r=[];return c.forEach((function(e,n){var o=Math.floor(e.beatSum/4),c=e.beatSum%4,s=n===a;r.push(Object(ne.jsxs)(Wc,{isActive:s,onClick:function(){i.focusIndex=e.rangeIndexStart,i.distIndex=i.focusIndex,t.score.setScoreState(i)},children:[Object(ne.jsx)(Vc,{children:e.labelName}),Object(ne.jsxs)(Yc,{children:[o,0===c?"":" (".concat(c,")")]})]},n))})),Object(ne.jsx)(ne.Fragment,{children:r})}),Vc=d.b.div(_i||(_i=Object(s.a)([""]))),Yc=d.b.div(zi||(zi=Object(s.a)([""]))),Wc=d.b.div(Fi||(Fi=Object(s.a)(["\n    display: inline-block;\n    margin: 4px 4px 0 4px;\n    width: calc(100% - 8px);\n    height: 46px;\n    background-color: "," ;\n    border: 1px solid #929292;\n    /* border-radius: 20px 20px 20px 20px; */\n    border-radius: 2px;\n\n    text-align: center;\n\n    & "," {\n        display: inline-block;\n        width: 100%;\n        height: 25px;\n        font-size: 18px;\n        /* font-weight: 600; */\n        color: #4d4d4d;\n        /* background-color: #0000003a; */\n        line-height: 22px;\n    }\n    & "," {\n        display: inline-block;\n        width: 100%;\n        height: 21px;\n        font-size: 14px;\n        font-weight: 600;\n        color: #003eb3;\n        /* background-color: #adadad39; */\n        line-height: 20px;\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Ri||(Ri=Object(s.a)(["\n        #97cce0dd;\n        box-shadow: 0 0 8px 0 #000b3a48;\n    "]))):Object(d.a)(Ni||(Ni=Object(s.a)(["\n        #c4c4c42b;\n    "])))}),Vc,Yc);!function(e){e.previewStart=function(e,t){for(var i=e.scoreState,o=i.elementCacheList,c=e.scoreData.chordList,a=e.reserveTasks,r=-1,s=function(){t.score.setScoreState(i)},l=function(n){var l=o[n],d=c[n];if("chord"===d.type){var b=d.detail;if(-1===r&&(r=l.pastSecond),null==b.root)return"continue";var u=(b.root.index+l.keyIndex)%12,h=null==b.on?-1:(b.on.index+l.keyIndex)%12,x=v.getSymbolFromKey(b.symbolKey),p=b.backing,f=k.getPitchListFromVoicing(p.voicingList,u,h,x),g=b.minute.head+b.minute.tail,j=v.calcSustainMsec(b.beatLen,g,l.bpm,l.beatSignature);a.push(setTimeout((function(){k.playBacking(e,a,l,p,f,j),i.focusIndex=n,i.distIndex=i.focusIndex,setTimeout((function(){s()}),0)}),l.pastSecond-r-0))}n===c.length-1&&a.push(setTimeout((function(){Pi.stopPreview(e,t,a)}),l.pastSecond-r-0))},d=i.focusIndex;d<c.length;d++)l(d);i.isSolo||n(r/1e3,e,t,a),i.isPreview=!0,s()};var n=function(e,n,i,o){for(var c=n.melodyState,a=n.scoreState,r=n.scoreData,s=n.instruments.soundfontPlayer,d=n.invalidate.melody,b=-1,u=function(u){var h=r.notesList[u],x=I(h.pos),p=I(h.len),f=S.getTimeInfoFromNotesPos(x,p,a.tempoCacheList),g=Object(l.a)(f,2),j=g[0],m=g[1];if(j<e)return"continue";-1===b&&(b=-1===c.focusIndex?0:j);var O=h.pitchIndex,k=w(O),y=v.KEY12_SHARP_LIST[k%12],L=Math.floor((59-O+9)/12)+1;o.push(setTimeout((function(){i.melody.adjustScrollX(),null!=s&&(s.stop(),s.play(y+L,0,{duration:m})),setTimeout((function(){c.focusIndex=u,c.destIndex=c.focusIndex,d()}),0)}),1e3*(j-e))),u===r.notesList.length-1&&o.push(setTimeout((function(){t(n,i,o)}),1e3*(j-e+m)))},h=0;h<r.notesList.length;h++)u(h)},t=e.stopPreview=function(e,n,t){var i,o=e.scoreState;o.isPreview=!1,t.forEach((function(e){return clearTimeout(e)})),n.system.setReserveTasks([]),n.score.setScoreState(o),null===(i=e.instruments.harmony)||void 0===i||i.stop()};e.previewCurHarmony=function(e,n){var t=e.scoreState,i=e.reserveTasks,o=t.elementCacheList[t.focusIndex],c=e.scoreData.chordList[t.focusIndex];if(null!=c){var a=c.detail;if(null==a.root)return;var r=(a.root.index+o.keyIndex)%12,s=null==a.on?-1:(a.on.index+o.keyIndex)%12,l=v.getSymbolFromKey(a.symbolKey),d=a.backing,b=k.getPitchListFromVoicing(d.voicingList,r,s,l),u=a.minute.head+a.minute.tail,h=v.calcSustainMsec(a.beatLen,u,o.bpm,o.beatSignature);k.playBacking(e,e.reserveTasks,o,d,b,h),i.push(setTimeout((function(){t.isPreview=!1,n.score.setScoreState(t)}),h)),t.isPreview=!0,n.score.setScoreState(t)}}}(Pi||(Pi={}));var qc,Gc=Pi;!function(e){e.main=function(e,t,i){t.userEnv.keyConfig.note;var o=t.scoreState.keySwitch,c=(t.scoreData,t.backingState);if(null!=c)if(c.isPreview)switch(e.key){case" ":k.stopPreview(t,c,i,t.reserveTasks)}else n(e,c,o,i)};var n=function(e,n,c,a){var r=n.pattern;t(e,n,a),null!=r&&(-1===r.channelIndex?i(e,n,r,a):o(e,n,r,c.sustainMode,a))},t=function(e,n,t){switch(e.key){case"b":t.backing.closeBackingEditor();break;case"z":var i={voicingList:k.getVoicingListFromTable(n.voicingTable),pattern:null==n.pattern?null:k.buildPatternProps(n.pattern),hasError:n.hasError};console.log("source: "+Z.a.gZip(JSON.stringify(i))),console.log("source: "+JSON.stringify(i));break;case" ":n.hasError||t.backing.testBacking();break;case"Enter":t.backing.mappingEditorToScore(),t.backing.closeBackingEditor()}},i=function(e,n,t,i){switch(e.key){case"ArrowLeft":i.backing.movePatternColumn(!1);break;case"ArrowRight":i.backing.movePatternColumn(!0);break;case"ArrowUp":i.backing.incrementVel(1);break;case"ArrowDown":i.backing.incrementVel(-1);break;case"a":i.backing.addPatternColumn();break;case"w":i.backing.switchLayer();break;case"e":i.backing.switchMode();break;case"1":i.backing.setCurrentDivRate(16);break;case"2":i.backing.setCurrentDivRate(8);break;case"3":i.backing.setCurrentDivRate(4);break;case"4":i.backing.setCurrentDivRate(2);break;case"5":i.backing.setCurrentDivRate(1);break;case".":i.backing.toggleCurrentDivHalf();break;case"Delete":i.backing.deleteColumn();break;case"s":t.channelIndex=0,i.backing.setState(n)}},o=function(e,n,t,i,o){var c=function(){return o.backing.setState(n)};if(i){var a=t.layers[t.layerIndex],r=a.velocityList[t.layerIndex],s=t.channels.length-1-t.channelIndex,l=a.table[s][t.lenIndex];if(null!=l){var d=void 0==l.timing?0:l.timing,b=void 0==l.velAdj?0:l.velAdj,u=r+b;switch(e.key){case"ArrowUp":u<10&&b++;break;case"ArrowDown":u>1&&b--;break;case"ArrowLeft":d>-10&&d--;break;case"ArrowRight":d<10&&d++}0!==b?l.velAdj=b:delete l.velAdj,0!=d?l.timing=d:delete l.timing,c()}}else switch(e.key){case"ArrowLeft":o.backing.movePatternColumn(!1);break;case"ArrowRight":o.backing.movePatternColumn(!0);break;case"ArrowUp":o.backing.moveChannelIndex(!1);break;case"ArrowDown":o.backing.moveChannelIndex(!0);break;case"s":t.channelIndex=-1,c();break;case"a":var h=o.backing.getNotes(),x=void 0==t.layers[t.layerIndex].table.find((function(e){var n=e[t.lenIndex];if(null!=n&&"s"===n.signal)return n}))?"n":"s",p=null==h?{signal:x,timing:0,velAdj:0}:null;o.backing.setNotes(p),o.backing.updateErrorState()}}}(qc||(qc={}));var Xc,Zc,Qc,$c,ea,na,ta,ia,oa,ca,aa,ra,sa,la,da,ba,ua=qc,ha=function(e,n,t){var i=n.userEnv.keyConfig.note,o=n.scoreState.keySwitch,c=n.scoreData,a=n.scoreState,r="init"!==c.chordList[a.focusIndex].type;if(a.isPreview)switch(e.key){case" ":Gc.stopPreview(n,t,n.reserveTasks)}else if("none"===n.scoreState.hideMenu){if(r)if(o.control)switch(e.key){case"c":var s=c.chordList[a.focusIndex];if("chord"===s.type)null!=s.detail.root&&t.score.cloneBacking();break;case"x":t.score.copyElementList();break;case"v":if(null!=a.copiedElementList)t.score.pasteElementList();else if(null!=a.cloneBacking){var l=c.chordList[a.focusIndex];if("chord"===l.type)null!=l.detail.root&&t.score.pastBacking()}break;case"s":Z.a.saveFile(JSON.stringify(c),a)}else if(o.distMode)switch(e.key){case"ArrowLeft":t.score.moveDist(!1);break;case"ArrowRight":t.score.moveDist(!0)}else if(o.sustainMode)switch(e.key){case i.decRoot:t.score.incrementDegreeRoot(!1);break;case i.incRoot:t.score.incrementDegreeRoot(!0);break;case i.decBeat:t.score.incrementBeatLen(!1);break;case i.incBeat:t.score.incrementBeatLen(!0)}else if(o.minHeadMode)switch(e.key){case"ArrowLeft":t.score.incrementMinuteValRelation(!1,1);break;case"ArrowRight":t.score.incrementMinuteValRelation(!1,-1)}else if(o.minTailMode)switch(e.key){case"ArrowLeft":t.score.incrementMinuteValRelation(!0,-1);break;case"ArrowRight":t.score.incrementMinuteValRelation(!0,1)}else if(o.chordMode);else if(o.symbolMode)switch(e.key){case"ArrowUp":t.symbol.toNext(!1);break;case"ArrowDown":t.symbol.toNext(!0);break;case"ArrowLeft":t.symbol.toBase();break;case"ArrowRight":t.symbol.toDerive()}else!function(e,n,t){var i=n.userEnv.keyConfig.note,o=(n.scoreState.keySwitch,n.scoreData),c=n.scoreState;switch(o.chordList[c.focusIndex].type){case"chord":n.scoreState.hideMenu;var a=o.chordList[c.focusIndex].detail,r=c.elementCacheList[c.focusIndex];switch(e.key){case"z":Gc.previewCurHarmony(n,t);break;case"e":t.score.setDefaultBacking();break;case"b":null!=a.root&&t.backing.openBackingEditor();break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":t.score.setDiatonicChord(r.scale,Number(e.key)-1)}}switch(e.key){case i.left:c.focusIndex===c.distIndex?t.score.moveElement(!1):t.score.releaseRange(!1);break;case i.right:c.focusIndex===c.distIndex?t.score.moveElement(!0):t.score.releaseRange(!0);break;case i.up:t.score.moveSection(!1);break;case i.down:t.score.moveSection(!0);break;case i.addChord:t.score.addChordElement();break;case i.addSection:t.score.addSectionElement();break;case"m":t.score.addAlterElement();break;case i.deleteCur:t.score.removeCurElement();break;case" ":Gc.previewStart(n,t)}}(e,n,t)}else"backing"===n.scoreState.hideMenu&&ua.main(e,n,t)},xa=function(e,n,t,i){if(!n.scoreState.isPreview){var o=n.userEnv.keyConfig.note,c=n.scoreState.keySwitch;switch(e.key){case"Control":c.control=i,t.score.setKeySwitch(c);break;case o.distMode:c.control||(c.distMode=i,t.score.setKeySwitch(c));break;case o.edit1:c.control||c.distMode||(c.sustainMode=i,t.score.setKeySwitch(c));break;case"v":c.control||c.distMode||c.sustainMode||(c.chordMode=i,t.score.setKeySwitch(c));break;case o.edit2:c.control||c.distMode||c.sustainMode||c.chordMode||(c.symbolMode=i,t.score.setKeySwitch(c));break;case"d":c.control||c.distMode||c.sustainMode||c.chordMode||c.symbolMode||(c.minHeadMode=i,t.score.setKeySwitch(c));break;case"g":c.control||c.distMode||c.sustainMode||c.chordMode||c.symbolMode||c.minHeadMode||(c.minTailMode=i,t.score.setKeySwitch(c))}}i&&ha(e,n,t)};!function(e){e.___CSS_FORM=Object(d.a)(Xc||(Xc=Object(s.a)(["\n        display: inline-block;\n        /* width: 100px; */\n        height: 25px;\n        background-color: #bdbdbd;\n        border: 1px solid #000;\n        border-radius: 2px;\n        box-sizing: border-box;\n        color: #303030;\n        font-size: 16px;\n        font-weight: 600;\n        line-height: 20px;\n        text-align: center;\n    "]))),e.___CSS_TITLE=Object(d.a)(Zc||(Zc=Object(s.a)(["\n        display: inline-block;\n        width: 100%;\n        height: 26px;\n        /* background-color: #f0f0f0; */\n        background: linear-gradient(to bottom, #707070, #b3b3b3, #707070);\n        border: 1px solid #222222;\n        font-size: 20px;\n        color: #ffffff;\n        font-weight: 600;\n        line-height: 20px;\n        box-sizing: border-box;\n        /* border: 1px solid #c50000; */\n        text-align: center;\n    "]))),e.createNumberForm=function(e,t,i,o,c,a){return Object(ne.jsxs)(n,{isEnable:t,children:[Object(ne.jsx)("input",{type:"number",min:o,max:c,step:a,value:e,onChange:i}),Object(ne.jsx)("input",{type:"range",min:o,max:c,step:a,value:e,onChange:i})]})};var n=d.b.div(Qc||(Qc=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    ","\n    background-color: #ececec;\n\n    & * {\n        display: inline-block;\n        box-sizing: border-box;\n        vertical-align: top;\n    }\n    & input:nth-child(1) {\n        background-color: #dddddd;\n        width: 55px;\n        height: calc(100% - 4px);\n        margin: 2px 0 0 5px;\n        border: 1px solid #9b9b9b;\n        border-radius: 4px;\n    }\n    & input:nth-child(2) {\n        margin-left: 5px;\n        background-color: #f00;\n        width: calc(100% - 70px);\n        height: 100%;\n    }\n    "])),(function(e){return e.isEnable?"":Object(d.a)($c||($c=Object(s.a)(["\n        pointer-events: none;\n        opacity: 0.5;\n    "])))}))}(ea||(ea={}));var pa,fa,ga,ja,va,ma,Oa,ka,ya,Sa,wa,Ia,La,Ea,Ca,Aa,Ta,Ma,Da,_a,za,Fa,Ra,Na,Pa,Ka,Ba,Ha,Ua,Ja,Va,Ya,Wa,qa,Ga,Xa,Za,Qa,$a,er,nr,tr,ir,or,cr,ar,rr,sr,lr,dr,br,ur,hr,xr,pr,fr,gr,jr,vr,mr,Or,kr,yr,Sr,wr,Ir,Lr,Er,Cr,Ar,Tr,Mr,Dr,_r,zr,Fr,Rr,Nr,Pr,Kr,Br,Hr,Ur,Jr,Vr,Yr,Wr,qr,Gr,Xr,Zr,Qr,$r,es,ns,ts,is,os,cs,as,rs,ss,ls,ds,bs,us,hs,xs,ps,fs,gs,js,vs,ms,Os,ks,ys,Ss,ws,Is,Ls,Es,Cs,As,Ts,Ms,Ds,_s,zs,Fs,Rs,Ns,Ps,Ks,Bs,Hs,Us,Js,Vs,Ys,Ws,qs,Gs,Xs,Zs,Qs,$s,el,nl,tl,il,ol,cl,al,rl,sl,ll,dl,bl,ul,hl,xl,pl,fl,gl,jl,vl,ml,Ol,kl,yl,Sl,wl,Il,Ll,El,Cl,Al,Tl,Ml,Dl,_l,zl,Fl,Rl,Nl,Pl,Kl,Bl,Hl,Ul,Jl,Vl,Yl,Wl,ql,Gl,Xl,Zl,Ql,$l,ed,nd,td,id,od,cd=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.scoreState,c=n.scoreData.chordList[i.focusIndex].detail,a=c.alterType,r=function(){t.score.setScoreData(n.scoreData),S.updateHarmonizeCache(n,t)},s=function(e,n){var t="-"===e?null:e;return Object(ne.jsxs)(ld,{isActive:n,onClick:function(){c.alterType!==t&&(c.alterType=t,c.modRel=null,c.dommVal=0,c.keyAdj=0,c.tempoRel=null,c.tempoDiff=0,c.tempoRate=100,c.tempoAbs=100,c.beatSignature="4/4",r())},children:[" ",e]})},l=function(e){var n="-"===e?null:e;return Object(ne.jsx)(ld,{isActive:"modulate"===c.alterType&&n==c.modRel,onClick:function(){c.modRel!==n&&(c.modRel=n,c.dommVal=0,c.keyAdj=0,r())},children:e})},d=function(e){var n="-"===e?null:e;return Object(ne.jsx)(ld,{isActive:"tempo"===c.alterType&&n==c.tempoRel,onClick:function(){c.tempoRel!==n&&(c.tempoRel=n,c.tempoDiff=0,c.tempoRate=100,c.tempoAbs=100,r())},children:e})},b=function(e){return Object(ne.jsx)(ld,{isActive:"beat"===c.alterType&&c.beatSignature===e,onClick:function(){c.beatSignature!==e&&(c.beatSignature=e,r())},children:e})},u=Object(ne.jsx)(dd,{isEnable:"domm"===c.modRel,children:[-3,-2,-1,0,1,2,3].map((function(e,n){var t=e>0?"+":"";return Object(ne.jsx)(bd,{isActive:"modulate"===c.alterType&&"domm"===c.modRel&&e==c.dommVal,onClick:function(){c.dommVal=e,r()},children:"".concat(t).concat(e)},n)}))}),h=Object(ne.jsx)(dd,{isEnable:"key"===c.modRel,children:[-3,-2,-1,0,1,2,3].map((function(e,n){var t=e>0?"+":"";return Object(ne.jsx)(bd,{isActive:"modulate"===c.alterType&&"key"===c.modRel&&e==c.keyAdj,onClick:function(){c.keyAdj=e,r()},children:"".concat(t).concat(e)},n)}))});return Object(ne.jsxs)(ad,{children:[Object(ne.jsxs)(rd,{isEnable:!0,children:[Object(ne.jsx)(sd,{children:"Type"}),s("-",null==a),s("modulate","modulate"===a),s("tempo","tempo"===a),s("beat","beat"===a)]}),Object(ne.jsxs)(rd,{isEnable:"modulate"===c.alterType,children:[Object(ne.jsx)(sd,{children:"Modulate"}),l("-"),l("domm"),u,l("parallel"),l("relative"),l("key"),h]}),Object(ne.jsxs)(rd,{isEnable:"tempo"===c.alterType,children:[Object(ne.jsx)(sd,{children:"Tempo"}),d("-"),d("diff"),ea.createNumberForm(c.tempoDiff,"tempo"===c.alterType&&"diff"===c.tempoRel,(function(e){c.tempoDiff=e.currentTarget.valueAsNumber,r()}),-100,100,1),d("rate"),ea.createNumberForm(c.tempoRate,"tempo"===c.alterType&&"rate"===c.tempoRel,(function(e){c.tempoRate=e.currentTarget.valueAsNumber,r()}),10,200,1),d("abs"),ea.createNumberForm(c.tempoAbs,"tempo"===c.alterType&&"abs"===c.tempoRel,(function(e){c.tempoAbs=e.currentTarget.valueAsNumber,r()}),10,200,1)]}),Object(ne.jsxs)(rd,{isEnable:"beat"===c.alterType,children:[Object(ne.jsx)(sd,{children:"Beat"}),b("2/4"),b("4/4"),b("3/4"),b("6/8"),b("9/8"),b("12/8")]})]})},ad=d.b.div(na||(na=Object(s.a)(["\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        text-align: left;\n        background-color: #b3b5c5;\n        "]))),rd=d.b.div(ta||(ta=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 8px);\n    margin: 0 0 0 4px;\n    ","\n        "])),(function(e){return e.isEnable?"":Object(d.a)(ia||(ia=Object(s.a)(["\n    pointer-events: none;\n    opacity: 0.5;\n"])))})),sd=d.b.div(oa||(oa=Object(s.a)(["\n    ","\n    margin-top: 4px;\n"])),ea.___CSS_TITLE),ld=d.b.div(ca||(ca=Object(s.a)(["\n        ","\n        margin-top: 1px;\n        width: 100%;\n        background-color: #c1cdd4;\n        ","\n        "])),ea.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(aa||(aa=Object(s.a)(["\n        background-color: #e0c83e;\n    "]))):""})),dd=d.b.div(ra||(ra=Object(s.a)(["\n        margin: 1px;\n        background-color: #070707;\n        ","\n        "])),(function(e){return e.isEnable?"":Object(d.a)(sa||(sa=Object(s.a)(["\n        pointer-events: none;\n        opacity: 0.5;\n    "])))})),bd=d.b.div(la||(la=Object(s.a)(["\n        ","\n        width: 29px;\n        background-color: #dddddd;\n        ","\n        "])),ea.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(da||(da=Object(s.a)(["\n        background-color: #e0c83e;\n    "]))):""})),ud=(d.b.div(ba||(ba=Object(s.a)(["\n        display: inline-block;\n        width: 100%;\n        height: 24px;\n        /* margin: 5px 0 0 0; */\n        text-align: left;\n        background-color: #ececec;\n\n        & * {\n            display: inline-block;\n            box-sizing: border-box;\n            vertical-align: top;\n    }\n        & input:nth-child(1) {\n            background-color: #dddddd;\n            width: 60px;\n            height: calc(100% - 4px);\n            margin: 2px 0 0 0;\n            border: 1px solid #9b9b9b;\n            border-radius: 4px;\n    }\n        & input:nth-child(2) {\n            margin-left: 5px;\n            background-color: #f00;\n            width: calc(100% - 70px);\n            height: 100%;\n    }\n        "]))),[{value:-2,label:"-/8"},{value:-1,label:"-/16"},{value:0,label:"\xb10"},{value:1,label:"+/16"},{value:2,label:"+/8"}]),hd=function(e){var n=e.value>=0?0:50*Math.abs(e.value),t=e.value<=0?0:50*Math.abs(e.value),i=1===Math.abs(e.value),o=ud.map((function(n,t){return function(n,t,i){var o=e.value===t;return Object(ne.jsx)(fd,{isActive:o,onClick:function(){return e.setValue(t)},children:o?i:""},n)}(t,n.value,n.label)}));return Object(ne.jsxs)(xd,{isHead:e.isHead,children:[Object(ne.jsxs)(gd,{children:[Object(ne.jsx)(jd,{isLeft:!0,isRed:i,rate:e.isHead?t:n,children:Object(ne.jsx)("div",{})}),Object(ne.jsx)(jd,{isLeft:!1,isRed:i,rate:e.isHead?n:t,children:Object(ne.jsx)("div",{})})]}),Object(ne.jsx)(pd,{children:e.isHead?o.reverse():o})]})},xd=d.b.div(pa||(pa=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 30px;\n    background-color: #bfd380;\n    text-align: left;\n"]))),pd=d.b.div(fa||(fa=Object(s.a)(["\n    width: 100%;\n    height: 100%;\n    text-align: center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 9;\n"]))),fd=d.b.div(ga||(ga=Object(s.a)(["\n    display: inline-block;\n    width: calc(20% - 8px);\n    height: calc(100% - 8px);\n    margin: 4px;\n    text-align: left;\n    vertical-align: top;\n    background-color: #0000001a;\n    /* border: 1px solid #4d4d4d91; */\n    border-radius: 4px;\n    ","\n    font-size: 12px;\n    line-height: 18px;\n    font-weight: 600;\n    color: #ffffff;\n    box-sizing: border-box;\n    text-align: center;\n    /* opacity: 0.15; */\n    &:hover {\n        background-color: #ffffff24;\n    }\n"])),(function(e){return e.isActive?Object(d.a)(ja||(ja=Object(s.a)(["\n        border: 1px solid #c00000c5;\n    "]))):""})),gd=d.b.div(va||(va=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n    /* position: absolute;\n    top: 0;\n    left: 0; */\n    z-index: 8;\n    text-align: center;\n"]))),jd=d.b.div(ma||(ma=Object(s.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 16px;\n    margin-top: 7px;\n    text-align: left;\n    box-sizing: border-box;\n    position: relative;\n\n    & div {\n        position: absolute;\n        top: 0;\n        height: 100%;\n        width: ","%;\n        ","\n        ","\n    }\n"])),(function(e){return e.rate}),(function(e){return e.isRed?Object(d.a)(Oa||(Oa=Object(s.a)(["\n            background: linear-gradient(to right, #0066ff, #7691a3);\n        "]))):Object(d.a)(ka||(ka=Object(s.a)(["\n            background: linear-gradient(to left, #ff0000, #a37676);\n        "])))}),(function(e){return e.isLeft?Object(d.a)(ya||(ya=Object(s.a)(["\n            right: 0;\n            border-radius: 10px 0 0 10px;\n        "]))):Object(d.a)(Sa||(Sa=Object(s.a)(["\n            left: 0;\n            border-radius: 0 10px 10px 0;\n        "])))})),vd=function(e){for(var n=Object(o.useContext)(pg),t=n.store,i=n.dispatcher,c=t.scoreState,a=t.scoreData.chordList[c.focusIndex].detail,r=c.elementCacheList[c.focusIndex],s=[],d=function(e){var n=a.beatLen>=e+1;s.push(Object(ne.jsx)(Sd,{isExist:n,isActive:a.beatLen===e+1,onClick:function(){var n=t.scoreData;n.chordList=n.chordList.slice(),a.beatLen=e+1,n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n)},children:Object(ne.jsx)("span",{})},e))},b=0;b<4;b++)d(b);var u=[];v.ROOT_ALL.forEach((function(e,n){var o=JSON.stringify(a.root)===JSON.stringify(e),c=null!=a.on&&JSON.stringify(a.on)===JSON.stringify(e),s="major"===r.scale?v.MAJOR_SCALE_INTERVALS:v.MINOR_SCALE_INTERVALS,l=null!=e&&s.includes(e.index);u.push(Object(ne.jsx)(Ed,{isRootActive:o,isOnActive:c,isDiatonic:l,onClick:function(){var n=t.scoreData;(c||null==e)&&(a.on=null),a.root=null==e?null:Object(h.a)({},e),null==e&&(a.symbolKey="major"),n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n)},onContextMenu:function(){var n=t.scoreData;null==a.root||o||(a.on=c||null==e?null:Object(h.a)({},e),n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n))},children:null==e?"-":Object(ne.jsxs)(ne.Fragment,{children:[v.getDegreeRoot(e)," (",v.getRootName(e,r.keyIndex),")"]})},n))}));var x=[];v.SYMBOL_LIST.forEach((function(e,n){var o=null!=a.root&&e.key===a.symbolKey;x.push(Object(ne.jsxs)(Ad,{isActive:o,isDiatonic:!0,onClick:function(){var n=t.scoreData;a.symbolKey=e.key,n.chordList[t.scoreState.focusIndex].detail=a,i.score.setScoreData(n)},children:["[",e.name,"]"]},n))}));var p=function(e){var n=a.minute,o=e?[n.head,function(e){n.head=e,i.score.setScoreData(t.scoreData)}]:[n.tail,function(e){n.tail=e,i.score.setScoreData(t.scoreData)}],c=Object(l.a)(o,2),r=c[0],s=c[1];return Object(ne.jsx)(hd,{value:r,setValue:s,isHead:e})};return Object(ne.jsxs)(Od,{children:[Object(ne.jsxs)(kd,{children:[Object(ne.jsx)(md,{children:"Beat length"}),Object(ne.jsx)(yd,{children:s}),Object(ne.jsxs)(wd,{children:[Object(ne.jsx)(md,{children:"Minute head"}),p(!0),Object(ne.jsx)(md,{children:"Minute tail"}),p(!1)]})]}),Object(ne.jsxs)(Id,{children:[Object(ne.jsx)(Ld,{children:u}),Object(ne.jsx)(Cd,{isDisable:null==a.root,children:x})]})]})},md=d.b.div(wa||(wa=Object(s.a)(["\n    ","\n    margin-top: 4px;\n"])),ea.___CSS_TITLE),Od=d.b.div(Ia||(Ia=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    background-color: #8a8a8a;\n"]))),kd=d.b.div(La||(La=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 100px; */\n    text-align: left;\n    background-color: #979797;\n"]))),yd=d.b.div(Ea||(Ea=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 25px;\n    text-align: left;\n    background-color: #afafaf;\n"]))),Sd=d.b.div(Ca||(Ca=Object(s.a)(["\n    display: inline-block;\n    width: 25%;\n    height: 20px;\n    text-align: left;\n    background-color: #696969;\n\n    & span{\n        display: inline-block;\n        margin: 2px 0 0 3px;\n        width: calc(100% - 6px);\n        height: calc(100% - 4px);\n        background-color: #9b8585;\n        ","\n        box-sizing: border-box;\n        border-radius: 6px;\n        ","\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Aa||(Aa=Object(s.a)(["\n            /* border: solid 1px #fff; */\n        "]))):""}),(function(e){return e.isExist?Object(d.a)(Ta||(Ta=Object(s.a)(["\n            /* background-color: #ebf37eb7; */\n            background: linear-gradient(to bottom, #c5c5c5d2, #f3f3f3d2, #c5c5c5d2);\n        "]))):""})),wd=d.b.div(Ma||(Ma=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    text-align: left;\n    background-color: #cecece;\n"]))),Id=d.b.div(Da||(Da=Object(s.a)(["\n    display: inline-block;\n    margin-top: 5px;\n    width: 100%;\n    /* height: 360px; */\n    text-align: left;\n    /* background-color: #000000; */\n    & * {\n        vertical-align: top;\n    }\n"]))),Ld=d.b.div(_a||(_a=Object(s.a)(["\n    display: inline-block;\n    width: 90px;\n    margin: 0 0 0 1px;\n    height: 100%;\n    text-align: left;\n    /* background-color: #e6e6e6; */\n"]))),Ed=d.b.div(za||(za=Object(s.a)(["\n    display: inline-block;\n    margin: 1px 0 0 0;\n    width: 100%;\n    height: 25px;\n    text-align: left;\n    background-color: #90bbcc;\n    ","\n    ","\n    border: 1px solid #000;\n    border-radius: 2px;\n    box-sizing: border-box;\n    color: #616161;\n    ","\n    font-size: 16px;\n    font-weight: 600;\n    line-height: 20px;\n    text-align: center;\n    & span {\n        color: #9e9e9e;\n    }\n    &:hover {\n        background-color: #99999940;\n        ","\n        ","\n    }\n"])),(function(e){return e.isRootActive?Object(d.a)(Fa||(Fa=Object(s.a)(["background-color: #d1c521b8;"]))):""}),(function(e){return e.isOnActive?Object(d.a)(Ra||(Ra=Object(s.a)(["background-color: #6070ffbc;"]))):""}),(function(e){return e.isDiatonic?Object(d.a)(Na||(Na=Object(s.a)(["color: #ffffff;"]))):""}),(function(e){return e.isRootActive?Object(d.a)(Pa||(Pa=Object(s.a)(["background-color: #cc6363b8;"]))):""}),(function(e){return e.isOnActive?Object(d.a)(Ka||(Ka=Object(s.a)(["background-color: #6374ccb8;"]))):""})),Cd=d.b.div(Ba||(Ba=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 93px);\n    margin: 0 1px 0 1px;\n    height: 100%;\n    text-align: left;\n    ","\n"])),(function(e){return e.isDisable?Object(d.a)(Ha||(Ha=Object(s.a)(["\n        opacity: 0.3;\n        pointer-events: none;\n    "]))):""})),Ad=d.b.div(Ua||(Ua=Object(s.a)(["\n    ","\n    margin: 1px 0 0 0;\n    width: 100%;\n    background-color: #a1cc90;\n    ","\n    color: #fff;\n    ","\n    /* & span {\n        color: #f000;\n    } */\n    &:hover {\n        background-color: #dddddd40;\n        ","\n    }\n"])),ea.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(Ja||(Ja=Object(s.a)(["background-color: #d1c521b8;"]))):""}),(function(e){return e.isDiatonic?Object(d.a)(Va||(Va=Object(s.a)(["color: #fff;"]))):""}),(function(e){return e.isActive?Object(d.a)(Ya||(Ya=Object(s.a)(["background-color: #cc6363b8;"]))):""})),Td=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.scoreData,c=i.chordList[0].detail,a=function(){i.chordList=i.chordList.slice(),t.score.setScoreData(i),S.updateHarmonizeCache(n,t)},r=v.SCALE_DEF_LIST.map((function(e,n){return Object(ne.jsx)(zd,{isActive:c.scale===e,onClick:function(){c.scale=e,a()},children:e},n)})),s=("major"===c.scale?v.KEY12_MAJOR_SCALE_LIST:v.KEY12_MINOR_SCALE_LIST).map((function(e,n){var t=c.scale;return Object(ne.jsx)(Rd,{isActive:c.keyIndex===n,onClick:function(){c.keyIndex=n,a()},children:"".concat(e," ").concat(t)},n)})),l=v.BEAT_DEF_LIST.map((function(e,n){return Object(ne.jsx)(Pd,{isActive:c.beatSignature===e,onClick:function(){c.beatSignature=e,a()},children:e},n)}));return Object(ne.jsxs)(Md,{children:[Object(ne.jsx)(Dd,{children:"Scale"}),Object(ne.jsx)(_d,{children:r}),Object(ne.jsx)(Dd,{children:"Key"}),Object(ne.jsx)(Fd,{children:s}),Object(ne.jsx)(Dd,{children:"Tempo"}),ea.createNumberForm(c.bpm,!0,(function(e){c.bpm=e.currentTarget.valueAsNumber,a()}),30,220,1),Object(ne.jsx)(Dd,{children:"Rate"}),Object(ne.jsx)(Nd,{children:l})]})},Md=d.b.div(Wa||(Wa=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    background-color: #9b9eb8;\n"]))),Dd=d.b.div(qa||(qa=Object(s.a)(["\n    ","\n    margin-top: 4px;\n"])),ea.___CSS_TITLE),_d=d.b.div(Ga||(Ga=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    /* background-color: #ececec; */\n"]))),zd=d.b.div(Xa||(Xa=Object(s.a)(["\n    ","\n    border: solid 1px #fff;\n    color: #fff;\n    width: 50%;\n    margin: 1px 0 0 0;\n\n    background-color: #61b47d;\n    ","\n"])),ea.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(Za||(Za=Object(s.a)(["\n        background-color: #da909082;\n    "]))):""})),Fd=d.b.div(Qa||(Qa=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 24px; */\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    /* background-color: #ececec; */\n"]))),Rd=d.b.div($a||($a=Object(s.a)(["\n    ","\n    border: solid 1px #fff;\n    color: #fff;\n    width: 100%;\n    margin: 1px 0 0 0;\n    \n    /* margin: 5px 0 0 0; */\n    background-color: #61b47d;\n    ","\n"])),ea.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(er||(er=Object(s.a)(["\n        background-color: #da909082;\n    "]))):""})),Nd=(d.b.div(nr||(nr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 24px;\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    background-color: #ececec;\n\n    & * {\n        display: inline-block;\n        box-sizing: border-box;\n        vertical-align: top;\n    }\n    & input:nth-child(1) {\n        background-color: #dddddd;\n        width: 60px;\n        height: calc(100% - 4px);\n        margin: 2px 0 0 0;\n        border: 1px solid #9b9b9b;\n        border-radius: 4px;\n    }\n    & input:nth-child(2) {\n        margin-left: 5px;\n        background-color: #f00;\n        width: calc(100% - 70px);\n        height: 100%;\n    }\n"]))),d.b.div(tr||(tr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 24px; */\n    /* margin: 5px 0 0 0; */\n    text-align: left;\n    /* background-color: #ececec; */\n"])))),Pd=d.b.div(ir||(ir=Object(s.a)(["\n    ","\n    width: 100%;\n    border: solid 1px #fff;\n    color: #fff;\n    margin: 1px 0 0 0;\n    /* margin: 5px 0 0 0; */\n    background-color: #61b47d;\n    ","\n\n"])),ea.___CSS_FORM,(function(e){return e.isActive?Object(d.a)(or||(or=Object(s.a)(["\n        background-color: #da909082;\n    "]))):""})),Kd=function(e){var n=Object(o.useContext)(pg),t=n.store,i=n.dispatcher,c=t.scoreState,a=t.scoreData.chordList[c.focusIndex].detail,r=function(e){a.labelName=e,t.scoreData.chordList=t.scoreData.chordList.slice(),i.score.setScoreData(t.scoreData)},s=Object(o.useMemo)((function(){var e=[];return Xe.SECTION_CATEGORY.forEach((function(n){var t=0===a.labelName.indexOf(n);e.push(Object(ne.jsx)(Wd,{isActive:t,onClick:function(){r(n)},children:n},e.length))})),e}),[a.labelName]),l=Object(o.useMemo)((function(){var e=[],n=a.labelName.split(" ");return Xe.SECTION_NO.forEach((function(t){var i=n[n.length-1]===t.toString();e.push(Object(ne.jsx)(qd,{isActive:i,onClick:function(){r("".concat(n[0]," ").concat(t))},children:t},e.length))})),e}),[a.labelName]);return Object(ne.jsxs)(Bd,{children:[Object(ne.jsx)(Hd,{type:"text",value:a.labelName,onChange:function(e){r(e.target.value)}}),Object(ne.jsxs)(Jd,{children:[Object(ne.jsx)(Vd,{children:s}),Object(ne.jsx)(Yd,{children:l})]})]})},Bd=d.b.div(cr||(cr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    text-align: left;\n    /* background-color: #b89b9b; */\n"]))),Hd=d.b.input(ar||(ar=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    text-align: left;\n    background-color: #bbbbbb;\n    font-size: 22px;\n    font-weight: 600;\n    color: #a30000;\n    box-sizing: border-box;\n    outline: none;\n    border: 1px solid black;\n    border-radius: 4px;\n"]))),Ud=d.b.div(rr||(rr=Object(s.a)(["\n    ","\n    width: 100%;\n    vertical-align: top;\n"])),ea.___CSS_FORM),Jd=d.b.div(sr||(sr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    padding: 2px;\n    box-sizing: border-box;\n    background-color: #acacac;\n"]))),Vd=d.b.div(lr||(lr=Object(s.a)(["\n    display: inline-block;\n    width: calc(60% - 4px);\n    margin: 0 2px 0 2px;\n    text-align: center;\n    background-color: #dac3d8;\n    vertical-align: top;\n"]))),Yd=d.b.div(dr||(dr=Object(s.a)(["\n    display: inline-block;\n    width: calc(40% - 2px);\n    margin: 0 2px 0 0;\n    text-align: center;\n    background-color: #dac3d8;\n    vertical-align: top;\n"]))),Wd=Object(d.b)(Ud)(br||(br=Object(s.a)(["\n    /* background-color: #6182b4; */\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(ur||(ur=Object(s.a)(["\n        background-color: #ad993fe6;\n    "]))):""})),qd=Object(d.b)(Ud)(hr||(hr=Object(s.a)(["\n    /* background-color: #61b4b0; */\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(xr||(xr=Object(s.a)(["\n        background-color: #ad993fe6;\n    "]))):""})),Gd=function(){var e=Object(o.useContext)(pg),n=e.store,t=(e.dispatcher,n.scoreState),i=n.scoreData.chordList;if(-1===t.focusIndex||t.focusIndex>i.length-1)return Object(ne.jsx)(ne.Fragment,{});var c=i[t.focusIndex];return Object(ne.jsx)(Xd,{children:function(){switch(c.type){case"init":return Object(ne.jsx)(Td,{});case"section":return Object(ne.jsx)(Kd,{});case"chord":return Object(ne.jsx)(vd,{});case"alter":return Object(ne.jsx)(cd,{})}}()})},Xd=d.b.div(pr||(pr=Object(s.a)(["\n    display: inline-block;\n    margin: 3px 0 0 3px;\n    width: calc(100% - 6px);\n    height: calc(100% - 6px);\n    text-align: left;\n    background-color: #8a8a8a;\n"]))),Zd=function(){var e=Object(o.useContext)(pg),n=e.store,t=(e.dispatcher,n.scoreState),i=n.scoreData.chordList[t.focusIndex],c=t.elementCacheList[t.focusIndex],a=("major"===c.scale?[0,2,4,5,7,9,11]:[0,2,3,5,7,8,10]).map((function(e){return(c.keyIndex+e)%12})),r=[],s=Object(o.useMemo)((function(){var e=[],n=[];if("chord"===i.type){var t=i.detail,o=t.root,s=v.getSymbolFromKey(t.symbolKey);null!=o&&null!=s&&(r=v.getIntervalValues((o.index+c.keyIndex)%12,s.structs),n=s.structs.map((function(e,n){return Object(ne.jsxs)($d,{children:[Object(ne.jsx)("span",{children:e}),Object(ne.jsx)("span",{children:v.IntervalRelationProps[e]})]},n)})))}for(var l=0;l<14;l++){var d=e.length,b=a.includes(d%12),u=r.includes(d);if(e.push(Object(ne.jsx)(nb,{isBlack:!1,index:l,isScale:b,isUse:u},e.length)),[0,1,3,4,5].includes(l%7)){var h=e.length,x=a.includes(h%12),p=r.includes(h);e.push(Object(ne.jsx)(nb,{isBlack:!0,index:l,isScale:x,isUse:p},e.length))}}return[e,n]}),[r]),d=Object(l.a)(s,2),b=d[0];d[1];return Object(ne.jsx)(Qd,{isUse:r.length>0,children:Object(ne.jsx)(eb,{children:b})})},Qd=d.b.div(fr||(fr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    ","\n    & * {\n        vertical-align: top;\n    }\n"])),(function(e){return e.isUse?"":Object(d.a)(gr||(gr=Object(s.a)(["\n        opacity: 0.5;\n    "])))})),$d=(d.b.div(jr||(jr=Object(s.a)(["\n    display: inline-block;\n    width: 50px;\n    height: 100%;\n    background-color: #949494;\n    /* border: solid 1px #a3a3a3; */\n    box-sizing: border-box;\n    /* padding: 2px 0 0 0; */\n"]))),d.b.div(vr||(vr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 15px;\n    box-sizing: border-box;\n\n    /* background-color: #4b4b4b; */\n    /* background: linear-gradient(to bottom, #adac6c, #e0df7d, #adac6c); */\n    /* background: linear-gradient(to bottom, #858585, #4b4b4b, #858585); */\n    border: solid 1px rgb(207, 207, 207);\n    margin-bottom: 1px;\n    font-size: 12px;\n    font-weight: 600;\n    line-height: 12px;\n    text-align: center;\n\n    & span:nth-child(1){\n        color: #f5e400;\n    }\n    & span:nth-child(2){\n        margin-left: 10px;\n        color: #ffffff;\n    }\n"])))),eb=d.b.div(mr||(mr=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 50px);\n    height: 100%;\n    /* background-color: #383838; */\n    /* padding: 12px 0 0 2px;\n    box-sizing: border-box; */\n"]))),nb=d.b.div(Or||(Or=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: ","px;\n    left: ","px;\n    z-index: 2;\n    /* border: 1px solid #ffffffda; */\n    border-radius: 20px;\n    width: 25px;\n    height: ","px;\n    /* background-color: #7d7d9e; */\n    ","\n    ","\n    box-sizing: border-box;\n"])),(function(e){return 2+(e.isBlack?0:32)}),(function(e){return 2+27*e.index+(e.isBlack?12.5:0)}),(function(e){return e.isBlack?32:43}),(function(e){return e.isScale?Object(d.a)(kr||(kr=Object(s.a)(["\n    background: radial-gradient(#d6c3ca, #a88995);\n    "]))):Object(d.a)(yr||(yr=Object(s.a)(["\n    background: radial-gradient(#d6cec3, #a89889);\n    "])))}),(function(e){return e.isUse?e.isScale?Object(d.a)(Sr||(Sr=Object(s.a)(["\n        background: radial-gradient(#d43131, #722a2a);\n    "]))):Object(d.a)(wr||(wr=Object(s.a)(["\n        background: radial-gradient(#e7a144, #72552a);\n    "]))):""})),tb=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.backingState,c=i.pattern,a=c.layers[c.layerIndex],r=c.channels.length-1-c.channelIndex,s=a.table[r][c.lenIndex],l=a.velocityList[c.lenIndex],d=null==s||void 0==s.timing?0:s.timing,b=null==s||void 0==s.velAdj?0:s.velAdj;return Object(ne.jsx)(ib,{children:null==s?Object(ne.jsx)(ne.Fragment,{}):Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)(cb,{children:[Object(ne.jsx)(ob,{children:"delay"}),Object(ne.jsx)(ab,{type:"range",min:-10,max:10,step:1,value:d,onChange:function(e){s.timing=Number(e.target.value),t.backing.setState(i)}})]}),Object(ne.jsxs)(rb,{children:[Object(ne.jsx)(ob,{children:"velocity"}),Object(ne.jsx)(sb,{isFocus:!1,children:Object(ne.jsx)(lb,{value:l,isEdit:!1})}),Object(ne.jsx)(sb,{isFocus:n.scoreState.keySwitch.sustainMode,children:Object(ne.jsx)(lb,{value:l+b,isEdit:0!=b})})]})]})})},ib=d.b.div(Ir||(Ir=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    /* white-space: nowrap; */\n"]))),ob=d.b.div(Lr||(Lr=Object(s.a)(["\n    ","\n    line-height: 18px;\n    margin-top: 14px;\n    margin-left: 5px;\n    width: 80px;\n    background-color: #868686;\n    color: #e7e7e7;\n    border: 1px solid #616161;\n    border-radius: 4px;\n"])),Le.CSS_LABEL_SMALL),cb=d.b.div(Er||(Er=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    height: 100%;\n    background-color: #9c9c9c;\n"])),181),ab=d.b.input(Cr||(Cr=Object(s.a)(["\n    display: inline-block;\n    outline: none;\n    margin: 20px 0 0 8px;\n    width: calc(100% - 100px);\n    height: 10px;\n    box-sizing: border-box;\n"]))),rb=d.b.div(Ar||(Ar=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: 100%;\n    margin-left: 1px;\n    /* background-color: #9a2020; */\n"])),180),sb=d.b.div(Tr||(Tr=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 46px;\n    height: 100%;\n    ","\n    /* background-color: #63a0a1;\n    border-radius: 20px; */\n"])),(function(e){return e.isFocus?Object(d.a)(Mr||(Mr=Object(s.a)(["\n        background-color: #ffffff17;\n    "]))):""})),lb=d.b.div(Dr||(Dr=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    bottom: 0;\n    left: calc(50% - 5px);\n    width: 10px;\n    height: ","%;\n    background-color: #5cceddaf;\n    ","\n"])),(function(e){return 10*e.value}),(function(e){return e.isEdit?Object(d.a)(_r||(_r=Object(s.a)(["\n        background-color: #ddc35cae;\n    "]))):""})),db=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.backingState,c=i.chordInfo,a=[],r=i.pattern,s=r.layers[r.layerIndex],l=4===v.getBeatProps(c.init.beatSignature).beatMemoriCount?1:1.5;return s.noteDivList.forEach((function(e,n){var o=r.lenIndex===n,c=o&&-1!==r.channelIndex,s=e.rate;e.isDot&&(s/=1.5),0!==e.div3&&(s/=e.div3/3),a.push(Object(ne.jsxs)(ub,{rate:s*l,isActive:o,isEdit:c,onClick:function(){r.channelIndex=-1,r.lenIndex=n,t.backing.setState(i)},children:[e.rate,e.isDot?".":"",0===e.div3?"":"/"]},n))})),Object(ne.jsx)(bb,{children:a})},bb=d.b.div(zr||(zr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    white-space: nowrap;\n"]))),ub=d.b.div(Fr||(Fr=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - 4px);\n    margin: 2px 0 0 1px;\n    background-color: #1616beb0;\n    ","\n    ","\n    box-sizing: border-box;\n\n    font-size: 14px;\n    font-weight: 600;\n    color: #ffffffba;\n    text-align: center;\n"])),(function(e){return X/e.rate-1}),(function(e){return e.isActive?Object(d.a)(Rr||(Rr=Object(s.a)(["\n        background-color: #6363eeaf;\n    "]))):""}),(function(e){return e.isEdit?Object(d.a)(Nr||(Nr=Object(s.a)(["\n        background-color: #b40000af;\n    "]))):""})),hb=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.backingState,c=i.chordInfo,a=[],r=i.pattern,s=r.layers[0],l=4===v.getBeatProps(c.init.beatSignature).beatMemoriCount?1:1.5,d="off";return r.pedalActs.forEach((function(e,n){var o=0===r.layerIndex&&r.lenIndex===n,c=s.noteDivList[n],b=c.rate*l;c.isDot&&(b/=1.5),0!==c.div3&&(b/=c.div3/3);var u=!1,h=d;"change"===h&&(d="on"),null!=e&&(u=!0,d=e),a.push(Object(ne.jsx)(pb,{rate:b,isActive:o,isUse:u,onClick:function(){if("off"===h)switch(e){case null:r.pedalActs[n]="on";break;case"on":r.pedalActs[n]=null}else if("on"===h)switch(e){case null:r.pedalActs[n]="off";break;case"off":r.pedalActs[n]="change";break;case"change":r.pedalActs[n]=null}else if("change"===h)switch(e){case null:r.pedalActs[n]="off";break;case"off":r.pedalActs[n]=null}if(n<r.pedalActs.length-1)for(var o=n+1;o<r.pedalActs.length;o++)r.pedalActs[o]=null;t.backing.setState(i)},children:Object(ne.jsx)("div",{children:Object(ne.jsx)(fb,{action:d})})},n))})),Object(ne.jsx)(xb,{children:a})},xb=d.b.div(Pr||(Pr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    white-space: nowrap;\n    /* background-color: #4e4e4e; */\n"]))),pb=d.b.div(Kr||(Kr=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: calc(100% - 4px);\n    margin: 2px 0 0 1px;\n    background-color: #00635eac;\n    ","\n    box-sizing: border-box;\n    text-align: center;\n    white-space: normal;\n\n    &>div {\n        display: inline-block;\n        width: 10px;\n        height: calc(100% - 2px);\n        background-color: #ffffffa0;\n        border-radius: 6px;\n        margin: 1px 0;\n        ","\n    }\n"])),(function(e){return X/e.rate-1}),(function(e){return e.isActive?Object(d.a)(Br||(Br=Object(s.a)(["\n        background-color: #179483ac;\n    "]))):""}),(function(e){return e.isUse?"":Object(d.a)(Hr||(Hr=Object(s.a)(["\n            background-color: #ffffff2f;\n        "])))})),fb=d.b.div(Ur||(Ur=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 14px;\n    border: 1px solid #9c9c9c;\n    ","\n    box-sizing: border-box;\n    border-radius: 6px;\n"])),(function(e){switch(e.action){case"off":return Object(d.a)(Jr||(Jr=Object(s.a)(["\n                margin-top: 0;\n                background-color: #271db8;\n            "])));case"change":return Object(d.a)(Vr||(Vr=Object(s.a)(["\n                margin-top: 15px;\n                background-color: #f3d631;\n            "])));case"on":return Object(d.a)(Yr||(Yr=Object(s.a)(["\n                margin-top: 30px;\n                background-color: #e03030;\n            "])))}})),gb=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.backingState,c=i.chordInfo,a=i.pattern,r=a.channels.length,s=a.layers[a.layerIndex],l=function(){return t.backing.setState(i)},d=4===v.getBeatProps(c.init.beatSignature).beatMemoriCount?1:1.5,b=Object(o.useMemo)((function(){var e=Array(2);return a.layers.forEach((function(n,i){for(var o=[],c=function(e){var c=[];n.noteDivList.forEach((function(o,b){var u=r-1-e,h=a.layerIndex===i&&a.lenIndex===b,x=n.table[u][b],p=function(e){return n.table[u][b]=e},f=null!=x,g=a.layerIndex===i&&(f&&k.checkOverlapBackLayer(a.layers,i,u,b)),j=h&&a.channelIndex===e,v=o.rate*d;o.isDot&&(v/=1.5),0!==o.div3&&(v/=o.div3/3);var m=null;if(null!=x&&(m=x.signal,b>0)){var O=n.table[u][b-1];null!=O&&"t"===O.signal&&(m="t")}c.push(Object(ne.jsx)(mb,{rate:v,isActive:h,isEdit:j,isBack:a.layerIndex!==i,children:Object(ne.jsx)(Ob,{isError:g,signal:m,isBack:a.layerIndex!==i,onClick:function(){if(null==x){var e=void 0==n.table.find((function(e){var n=e[a.lenIndex];if(null!=n&&"s"===n.signal)return n}))?"n":"s";p({signal:e,timing:0,velAdj:0})}else p(null);s.table=s.table.slice(),l(),t.backing.updateErrorState()},onContextMenu:function(){a.channelIndex=e,a.lenIndex=b,l()}})},b))})),o.push(Object(ne.jsx)(vb,{isEven:e%2==0,isFront:!0,children:c},e))},b=0;b<r;b++)c(b);e[i]=o})),e}),[a.channels,a.layerIndex,a.lenIndex,s.noteDivList,s.table,a.channelIndex]),u=0===a.layerIndex?b:b.reverse();return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(jb,{zIndex:2,children:u[1]}),Object(ne.jsx)(jb,{zIndex:1,children:u[0]})]})},jb=d.b.div(Wr||(Wr=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    /* background-color: #000000f; */\n"]))),vb=d.b.div(qr||(qr=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 20px;\n    overflow: hidden;\n    white-space: nowrap;\n    ","\n"])),(function(e){return e.isFront?Object(d.a)(Gr||(Gr=Object(s.a)(["\n        ","\n    "])),(function(e){return e.isEven?Object(d.a)(Zr||(Zr=Object(s.a)(["\n            background-color: #42425542;\n        "]))):Object(d.a)(Xr||(Xr=Object(s.a)(["\n            background-color: #3a3a502f;\n        "])))})):""})),mb=d.b.div(Qr||(Qr=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - 1px);\n    margin: 1px 0 0 1px;\n    ","\n    ","\n    box-sizing: border-box;\n\n    &:hover {\n        background-color: #82f7ff57;\n    }\n"])),(function(e){return X/e.rate-1}),(function(e){return e.isBack?"":Object(d.a)($r||($r=Object(s.a)(["\n        background-color: #00000013;\n        ","\n    "])),(function(e){return e.isActive?Object(d.a)(es||(es=Object(s.a)(["\n            background-color: #9b9b9b1d;\n        "]))):""}))}),(function(e){return e.isEdit?Object(d.a)(ns||(ns=Object(s.a)(["\n        border: 2px solid #d80000ba;\n    "]))):""})),Ob=d.b.div(ts||(ts=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: calc(100% - 2px);\n    margin: 1px 0 0 1px;\n    background-color: #a7a7a754;\n    ","\n    box-sizing: border-box;\n    &:hover {\n        background-color: #ffffff63;\n        ","\n    }\n"])),(function(e){return null==e.signal?"":Object(d.a)(is||(is=Object(s.a)(["\n        /* background-color: #f8fc029b; */\n        background: linear-gradient(to bottom, #9b9e00, #f8fc02, #9b9e00);\n        ","\n        ","\n        // \u30a8\u30e9\u30fc\u3042\u308a\n        ","\n        // \u88cf\u9762\u306e\u30ec\u30a4\u30e4\u30fc\n        ","\n    "])),(function(e){return"s"!==e.signal?"":Object(d.a)(os||(os=Object(s.a)(["\n            border-radius: 8px;\n            background: linear-gradient(to bottom, #009e0d, #02fc49, #009e0d);\n        "])))}),(function(e){return"t"!==e.signal?"":Object(d.a)(cs||(cs=Object(s.a)(["\n            height: calc(100% - 8px);\n            margin: 4px 0 0 1px;\n            background: linear-gradient(to bottom, #9e4c00, #fc6a02, #9e4c00);\n        "])))}),(function(e){return e.isError?Object(d.a)(as||(as=Object(s.a)(["\n            opacity: 0.5;\n        "]))):""}),(function(e){return e.isBack?Object(d.a)(rs||(rs=Object(s.a)(["\n            background: linear-gradient(to bottom, #9e0000, #fc0202, #9e0000);\n            opacity: 0.5;\n        "]))):""}))}),(function(e){return null==e.signal?"":Object(d.a)(ss||(ss=Object(s.a)(["\n            background-color: #fdff719b;\n        "])))})),kb=function(){var e=Object(o.useContext)(pg),n=e.store,t=(e.dispatcher,n.backingState),i=t.chordInfo,c=[],a=t.pattern,r=a.layers[a.layerIndex],s=4===v.getBeatProps(i.init.beatSignature).beatMemoriCount?1:1.5;return r.velocityList.forEach((function(e,n){var t=a.lenIndex===n,i=r.noteDivList[n],o=i.rate*s;i.isDot&&(o/=1.5),0!==i.div3&&(o/=i.div3/3),c.push(Object(ne.jsx)(Sb,{rate:o,isActive:t,children:Object(ne.jsx)(wb,{value:e})},n))})),Object(ne.jsx)(yb,{children:c})},yb=d.b.div(ls||(ls=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    white-space: nowrap;\n"]))),Sb=d.b.div(ds||(ds=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: calc(100% - 4px);\n    margin: 2px 0 0 1px;\n    background-color: #001763ac;\n    ","\n    box-sizing: border-box;\n    /* text-align: center; */\n"])),(function(e){return X/e.rate-1}),(function(e){return e.isActive?Object(d.a)(bs||(bs=Object(s.a)(["\n        background-color: #173494ac;\n    "]))):""})),wb=d.b.div(us||(us=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    bottom: 0;\n    left: calc(50% - 6px);\n    width: 10px;\n    height: ","%;\n    background-color: #5cceddaf;\n"])),(function(e){return 10*e.value})),Ib=function(){var e=Object(o.useContext)(pg),n=e.store,t=(e.dispatcher,n.backingState),i=t.chordInfo,c=t.pattern,a=c.layers[c.layerIndex].noteDivList,r=k.getLimitLen(i),s=k.getUsingLenFromDivs(a,i),l=0<=r-s,d=v.getBeatProps(i.init.beatSignature),b=i.beatLen*d.beatMemoriCount;b+=i.minute.head+i.minute.tail;for(var u=4===d.beatMemoriCount?16:24,h=X/u,x=[],p=0;p<b+1;p++){var f=p,g={thickness:1,height:10,color:"#555"};if(4===d.beatMemoriCount)switch(!0){case f%16===0:g={thickness:2,height:22,color:"#747474"};break;case f%4===0:g={thickness:2,height:18,color:"#646464"};break;case f%2===0:g={thickness:1,height:14,color:"#7a7a7a"}}else switch(!0){case f%24===0:g={thickness:2,height:22,color:"#747474"};break;case f%6===0:g={thickness:2,height:18,color:"#646464"};break;case f%2===0:g={thickness:1,height:14,color:"#7a7a7a"}}x.push(Object(ne.jsx)(Tb,{width:h,height:g.height,color:g.color,thickness:g.thickness},x.length))}return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)(Lb,{children:[Object(ne.jsx)(Eb,{children:Object(ne.jsx)(db,{})}),Object(ne.jsxs)(Cb,{children:[Object(ne.jsx)(Ab,{children:x}),l?Object(ne.jsx)(zb,{pos:120*r}):Object(ne.jsx)(Mb,{pos:120*r,width:120*(s-r)})]})]}),Object(ne.jsx)(Db,{children:Object(ne.jsx)(gb,{})}),Object(ne.jsx)(_b,{children:-1===c.channelIndex?"velocity"===c.mode?Object(ne.jsx)(kb,{}):Object(ne.jsx)(hb,{}):Object(ne.jsx)(tb,{})})]})},Lb=d.b.div(hs||(hs=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #9292bdd6;\n"])),q),Eb=d.b.div(xs||(xs=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #9292bdd6;\n"])),25),Cb=d.b.div(ps||(ps=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    background-color: #b492bdd5;\n    background: linear-gradient(to bottom, rgb(255, 255, 255), rgb(98, 97, 114));\n"])),25),Ab=d.b.div(fs||(fs=Object(s.a)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n"]))),Tb=d.b.div(gs||(gs=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: ","px;\n    border-left: solid ","px ",";\n    box-sizing: border-box;\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.thickness}),(function(e){return e.color})),Mb=d.b.div(js||(js=Object(s.a)(["\n    position: absolute;\n    z-index: 10;\n    left: ","px;\n    width: ","px;\n    height: ","px;\n    background-color: #f8000053;\n    pointer-events: none;\n"])),(function(e){return e.pos}),(function(e){return e.width}),265),Db=d.b.div(vs||(vs=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    background-color: #97d3cec8;\n"])),G),_b=d.b.div(ms||(ms=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #898997cc;\n"])),50),zb=d.b.div(Os||(Os=Object(s.a)(["\n    position: absolute;\n    z-index: 10;\n    left: ","px;\n    width: 4px;\n    height: ","px;\n    background-color: #ffffffc7;\n"])),(function(e){return e.pos}),265),Fb=function(e){var n=Object(o.useContext)(pg),t=n.store,i=n.dispatcher,c=t.backingState,a=c.pattern,r=a.channels.length-1-e.index,s=a.channels.length,l=function(){i.backing.setState(c),i.backing.updateErrorState()};return Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsxs)(Rb,{isError:"-"===e.soundFullName,children:[Object(ne.jsx)(Pb,{children:e.soundFullName}),Object(ne.jsx)(Kb,{isEnable:s>1,onClick:function(){a.layers.forEach((function(e){e.table.splice(r,1)}));var e=k.buildChannels(c.voicingTable);a.channels=k.getChannels(e,a.channels.length-1),l()},children:"-"}),Object(ne.jsx)(Kb,{isEnable:s<k.CHANNEL_MAX,onClick:function(){a.layers.forEach((function(e){var n=k.getInitialRecord(e.noteDivList.length);e.table.splice(r,0,n)}));var e=k.buildChannels(c.voicingTable);a.channels=k.getChannels(e,a.channels.length+1),l()},children:"+"})]})})},Rb=d.b.div(ks||(ks=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 19px;\n    background-color: #b4b3b36f;\n    ","\n    margin: 0 0 1px 0;\n"])),(function(e){return e.isError?Object(d.a)(ys||(ys=Object(s.a)(["\n        background-color: #ff0000c3;\n    "]))):""})),Nb=d.b.div(Ss||(Ss=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    margin: 0 1px 0 0;\n    border: 1px solid #322e4292;\n    border-radius: 4px;\n    box-sizing: border-box;\n    font-size: 12px;\n    font-weight: 600;\n    color: #ffffff;\n    text-align: center;\n"]))),Pb=Object(d.b)(Nb)(ws||(ws=Object(s.a)(["\n    width: 47px;\n\n"]))),Kb=Object(d.b)(Nb)(Is||(Is=Object(s.a)(["\n    width: 25px;\n    &:hover {\n        background-color: #f1ef866c;\n    }\n    ","\n    \n"])),(function(e){return e.isEnable?"":Ce})),Bb=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.backingState,c=i.chordInfo,a=v.getSymbolFromKey(c.symbolKey),r=(c.root.index+c.init.keyIndex)%12,s=[],l=[];if(null==i.pattern)return Object(ne.jsx)(ne.Fragment,{});var d=i.pattern;return d.channels.forEach((function(e,n){var t="-";if(-1!==e.octave){var i=r+v.IntervalRelationProps[a.structs[e.structIndex]],o=e.octave+Math.floor(i/12);t=v.KEY12_SHARP_LIST[i%12]+o}s.push(Object(ne.jsx)(Fb,{index:n,soundFullName:t},n))})),d.layers.forEach((function(e,n){var i=0===n?"L-HAND":"R-HAND";l.push(Object(ne.jsx)(Ub,{isActive:d.layerIndex===n,onClick:function(){n!==d.layerIndex&&t.backing.switchLayer()},children:i},n))})),Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(Hb,{children:l}),Object(ne.jsx)(Jb,{children:s}),Object(ne.jsxs)(Vb,{children:[Object(ne.jsx)(Yb,{isActive:"velocity"===d.mode,onClick:function(){d.mode="velocity",t.backing.setState(i)},children:"Velocity"}),Object(ne.jsx)(Yb,{isActive:"pedal"===d.mode,onClick:function(){d.mode="pedal",t.backing.setState(i)},children:"Pedal"})]})]})},Hb=d.b.div(Ls||(Ls=Object(s.a)(["\n    /* display: inline-block; */\n    width: 100%;\n    height: ","px;\n    background-color: #929292;\n"])),q),Ub=d.b.div(Es||(Es=Object(s.a)(["\n    display: inline-block;\n    height: 22px;\n    width: calc(100% - 4px);\n    margin: 2px 0 0 2px;\n    box-sizing: border-box;\n    text-align: center;\n    \n    font-size: 14px;\n    font-weight: 600;\n    color: #3b3b3b;\n    line-height: 20px;\n    background-color: #b8b8b8;\n    border: 1px solid #7a7a7a;\n    border-radius: 2px;\n\n    ","\n\n    &:hover {\n        background-color: #d4d4d4;\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Cs||(Cs=Object(s.a)(["\n        background-color: #dad600;\n        color: #c40000;\n    "]))):""})),Jb=d.b.div(As||(As=Object(s.a)(["\n/* display: inline-block; */\n    width: 100%;\n    height: ","px;\n    background-color: #97d3cec8;\n"])),G),Vb=d.b.div(Ts||(Ts=Object(s.a)(["\n/* display: inline-block; */\n    width: 100%;\n    height: ","px;\n    background-color: #898997;\n"])),50),Yb=d.b.div(Ms||(Ms=Object(s.a)(["\n    display: inline-block;\n    height: 22px;\n    width: calc(100% - 4px);\n    margin: 2px 0 0 2px;\n    box-sizing: border-box;\n    text-align: center;\n    \n    font-size: 14px;\n    font-weight: 600;\n    color: #3b3b3b;\n    line-height: 20px;\n    background-color: #b8b8b8;\n    border: 1px solid #7a7a7a;\n    border-radius: 2px;\n\n    ","\n\n    &:hover {\n        background-color: #d4d4d4;\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Ds||(Ds=Object(s.a)(["\n        background-color: #4fe419;\n        color: #c40000;\n    "]))):""})),Wb=function(){for(var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.backingState,c=i.pattern,a=c.layers[c.layerIndex],r=c.channels.length-1-c.channelIndex,s=a.noteDivList[c.lenIndex],l=i.chordInfo,d=function(){a.noteDivList=a.noteDivList.slice(),t.backing.setState(i),t.backing.updateErrorState()},b=function(e,n,t,i){return Object(ne.jsx)(Qb,{isEnable:t,isActive:n,onClick:i,children:e})},u=function(e){return b(String(e),s.rate===e,!0,(function(){return function(e){s.rate=e,d()}(e)}))},h=[],x=0;x<k.CHANNEL_MAX;x++){var p=x+1;h.push(Object(ne.jsx)(Zb,{value:p,children:p},x))}var f=["2/4","4/4","4/3"].includes(l.init.beatSignature),g=k.isPermitDot(s),j=Object(ne.jsxs)(qb,{children:[Object(ne.jsx)(Xb,{value:c.channels.length,onChange:function(e){var n=c.channels.length,t=Number(e.target.value),o=k.buildChannels(i.voicingTable);c.channels=k.getChannels(o,t);var a=Number(e.target.value)-n;c.layers.forEach((function(e,n){if(a>0)for(var t=new Array(e.noteDivList.length).fill(null),i=0;i<a;i++)e.table.push(JSON.parse(JSON.stringify(t)));else{var o=Math.abs(a);e.table.splice(-o,o)}})),d()},children:h}),u(16),u(8),u(4),u(2),u(1),b(".",s.isDot,g,(function(){s.isDot=!s.isDot,d()})),b("1/3",1===s.div3,f,(function(){1===s.div3?s.div3=0:s.div3=1,d()})),b("2/3",2===s.div3,f,(function(){2===s.div3?s.div3=0:s.div3=2,d()}))]}),v=a.table[r],m=-1===c.channelIndex?null:v[c.lenIndex],O=function(e){a.table.forEach((function(n){var t=n[c.lenIndex];null!=t&&(t.signal=e?"s":"n")}))},y=Object(ne.jsxs)(Gb,{children:[b("-",null==m,!0,(function(){v[c.lenIndex]=null,d()})),b("\u25a1",null!=m&&"n"===m.signal,!0,(function(){null!=m?"s"===m.signal?O(!1):m.signal="n":v[c.lenIndex]={signal:"n",timing:0,velAdj:0},d()})),b("\u30fb",null!=m&&"s"===m.signal,null!=m&&void 0==a.table.find((function(e){var n=e[c.lenIndex];if(null!=n&&"t"===n.signal)return n})),(function(){O(!0),d()})),b("\u2040",null!=m&&"t"===m.signal,function(){if(null==v)return!1;var e=void 0!=a.table.find((function(e){var n=e[c.lenIndex];if(null!=n&&"s"===n.signal)return n})),n=!1;return c.lenIndex<v.length-1&&null!=v[c.lenIndex+1]&&(n=!0),!e&&n}(),(function(){m.signal="t",d()}))]});return-1===c.channelIndex?j:y},qb=d.b.div(_s||(_s=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #86c5b2;\n"]))),Gb=d.b.div(zs||(zs=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #86b8c5;\n"]))),Xb=d.b.select(Fs||(Fs=Object(s.a)(["\n    display: inline-block;\n    width: 50px;\n    height: 26px;\n    margin: 2px 2px 0 0;\n    color: #eeff00;\n    font-size: 20px;\n    font-weight: 600;\n    background-color: #d4d4d422;\n    border: solid 1px #555;\n    border-radius: 4px;\n    box-sizing: border-box;\n    line-height: 20px;\n    text-align: center;\n    outline: none;\n"]))),Zb=d.b.option(Rs||(Rs=Object(s.a)(["\n    background-color: black;\n    color: white;\n    font-size: 16px;\n    font-weight: 600;\n"]))),Qb=d.b.div(Ns||(Ns=Object(s.a)(["\n    display: inline-block;\n    width: 50px;\n    height: 26px;\n    margin: 2px 2px 0 0;\n    font-size: 20px;\n    color: white;\n    font-weight: 600;\n    background-color: #ff008023;\n    border: solid 1px #555;\n    border-radius: 4px;\n    box-sizing: border-box;\n    line-height: 20px;\n    text-align: center;\n\n    ","\n\n    ","\n\n    &:hover {\n        background-color: #ff008039;\n        ","\n    }\n"])),(function(e){return e.isEnable?"":Object(d.a)(Ps||(Ps=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))}),(function(e){return e.isActive?Object(d.a)(Ks||(Ks=Object(s.a)(["\n        background-color: #fbff0050;\n    "]))):""}),(function(e){return e.isActive?Object(d.a)(Bs||(Bs=Object(s.a)(["\n            background-color: #dfe07850;\n        "]))):""})),$b=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.backingState,c=(i.chordInfo,null!=i.pattern),a=function(){t.backing.setState(i)};return Object(ne.jsxs)(eu,{children:[Object(ne.jsx)(nu,{children:Object(ne.jsxs)(iu,{children:[Object(ne.jsx)(tu,{children:"Pattern"}),Object(ne.jsx)(ou,{isActive:c,onClick:function(){if(c)i.pattern=null,a();else{var e=i.voicingTable,n=k.buildChannels(e),o=k.getChannels(n,1);i.pattern={layerIndex:0,lenIndex:0,channelIndex:-1,channels:o,isUsePedal:!1,mode:"velocity",pedalActs:[null],layers:[t.backing.getInitialLayer(),t.backing.getInitialLayer()]},a()}},children:"Use"})]})}),Object(ne.jsx)(cu,{isActive:c,children:c?Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(au,{children:Object(ne.jsx)(Wb,{})}),Object(ne.jsxs)(ru,{children:[Object(ne.jsx)(su,{children:Object(ne.jsx)(Bb,{})}),Object(ne.jsx)(lu,{children:Object(ne.jsx)(Ib,{})})]})]}):Object(ne.jsx)(ne.Fragment,{})})]})},eu=d.b.div(Hs||(Hs=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    /* height: 300px; */\n    background-color: #001279;\n\n    & *{\n        /* display: inline-block;\n        width: 100%; */\n    }\n"]))),nu=d.b.div(Us||(Us=Object(s.a)(["\n    height: 30px;\n    background-color: #a5d1c3;\n"]))),tu=d.b.div(Js||(Js=Object(s.a)([""]))),iu=d.b.div(Vs||(Vs=Object(s.a)(["\n    display: inline-block;\n    width: 200px;\n    height: 100%;\n    /* background-color: #7986d1; */\n\n    & * {\n        display: inline-block;\n        height: calc(100% - 4px);\n        margin-top: 2px;\n        box-sizing: border-box;        \n    }\n\n    & "," {\n        width: 80px;\n        font-size: 20px;\n        color: #f1fffb;\n        font-weight: 600;\n        /* background-color: #00000028; */\n        margin: 2px 2px 0 2px;\n        line-height: 22px;\n        text-align: center;\n    }\n"])),tu),ou=d.b.div(Ys||(Ys=Object(s.a)(["\n    width: 100px;\n    font-size: 20px;\n    color: white;\n    font-weight: 600;\n    background-color: #ff008023;\n    border: solid 1px #555;\n    border-radius: 4px;\n    line-height: 20px;\n    text-align: center;\n\n    ","\n\n    &:hover {\n        background-color: #ff008039;\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Ws||(Ws=Object(s.a)(["\n        /* background-color: #b1dfc979; */\n        color: #e00000;\n    "]))):""})),cu=d.b.div(qs||(qs=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    overflow: hidden;\n    height: ","px;\n    ","\n    transition: height 100ms;\n"])),370,(function(e){return e.isActive?"":Object(d.a)(Gs||(Gs=Object(s.a)(["\n        height: 0;\n    "])))})),au=d.b.div(Xs||(Xs=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #8d98d4;\n    text-align: left;\n"])),30),ru=d.b.div(Zs||(Zs=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #d48d8d;\n\n    /* & *{\n        display: inline-block;\n        height: 100%;\n    } */\n"]))),su=d.b.div(Qs||(Qs=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    background-color: #ff0000;\n"]))),lu=d.b.div($s||($s=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 100px);\n    background-color: #76af90;\n"]))),du=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.backingState,c=i.voicingTable,a=i.pattern,r=null==a?k.OCTAVE_NUM*k.STRUCT_NUM:a.channels.length,s=i.chordInfo,l=v.getSymbolFromKey(s.symbolKey),d=(s.root.index+s.init.keyIndex)%12,b=v.getRootName(s.root,s.init.keyIndex)+l.name,u=-1;if(null!=s.on){var x=v.getRootName(s.on,s.init.keyIndex);b="".concat(b,"/").concat(x),u=(s.on.index+s.init.keyIndex)%12}var p=l.structs.map((function(e){var n=e,t=v.IntervalRelationProps[n],i=(d+t)%12,o=Math.floor((d+t)/12);return{relation:n,structIndex:i,isFlat:v.isFlatFromRelation(n),adjustOctave:o}}));if(-1!==u){var f=-1;p.some((function(e,n){e.structIndex!==u||(f=n)})),-1!==f&&p.splice(f,1),p.unshift({relation:null,structIndex:u,isFlat:!1,adjustOctave:0}),p.sort((function(e,n){return e.structIndex-n.structIndex}));var g=-1;p.some((function(e,n){null!=e.relation||(g=n)}));for(var j=p[g].structIndex,m=[],O=g;O<p.length;O++){var y=p[O];m.push(y)}for(var S=0;S<g;S++){var w=p[S];m.push(w)}m.forEach((function(e){e.adjustOctave=0,e.structIndex<j&&(e.adjustOctave=1)})),p=m}for(var I=[],L=0,E=function(e){for(var o=[],s=function(s){var l=p.length>s,d=c[e][s];d&&L++;var b=function(){if(!l)return"";var n=p[s],t=e+n.adjustOctave,i=n.isFlat?v.KEY12_FLAT_LIST:v.KEY12_SHARP_LIST;return"".concat(i[n.structIndex]).concat(t)}();o.push(Object(ne.jsx)(Ou,{isEnable:l,isSelected:d,isOver:d&&L>r,onClick:function(){if(c[e][s]=!d,null!=a){var n=k.buildChannels(c);a.channels=k.getChannels(n,a.channels.length)}t.backing.setState(Object(h.a)(Object(h.a)({},i),{},{voicingTable:c,pattern:a})),t.backing.updateErrorState()},onContextMenu:function(){var e=n.instruments.harmony;null!=e&&e.play(b,0,{duration:1})},children:b},s))},l=0;l<k.STRUCT_NUM;l++)s(l);I.push(Object(ne.jsx)(mu,{children:o},e))},C=0;C<k.OCTAVE_NUM;C++)E(C);var A=p.map((function(e,n){var t=e.isFlat?v.KEY12_FLAT_LIST:v.KEY12_SHARP_LIST;return Object(ne.jsxs)(ju,{isOnChord:null==e.relation,children:[null==e.relation?"Base":"p1"===e.relation?"Root":e.relation," [",t[e.structIndex],"]"]},n)}));return Object(ne.jsxs)(bu,{children:[Object(ne.jsxs)(uu,{children:[Object(ne.jsxs)(hu,{children:[Object(ne.jsx)(xu,{children:"Chord"}),Object(ne.jsx)(pu,{children:b})]}),Object(ne.jsxs)(hu,{children:[Object(ne.jsx)(xu,{children:"Type"}),Object(ne.jsx)(pu,{children:l.attr})]})]}),Object(ne.jsxs)(fu,{children:[Object(ne.jsx)(gu,{children:A}),Object(ne.jsx)(vu,{children:I})]})]})},bu=d.b.div(el||(el=Object(s.a)(["\n    display: inline-block;\n    width: 600px;\n"]))),uu=d.b.div(nl||(nl=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    background-color: #338f8f;\n"]))),hu=d.b.div(tl||(tl=Object(s.a)(["\n    display: inline-block;\n    width: 50%;\n    height: 100%;\n    /* background-color: #89dada; */\n"]))),xu=d.b.div(il||(il=Object(s.a)(["\n    display: inline-block;\n    margin-top: 4px;\n    margin-left: 5px;\n    height: calc(100% - 8px);\n    width: 80px;\n    background-color: #69bcdd;\n    font-size: 18px;\n    line-height: 18px;\n    font-weight: 600;\n    color: #026c86;\n    border: 1px solid #303030;\n    border-radius: 2px;\n    box-sizing: border-box;\n    text-align: center;\n"]))),pu=d.b.div(ol||(ol=Object(s.a)(["\n    display: inline-block;\n    margin-top: 4px;\n    margin-left: 6px;\n    height: calc(100% - 8px);\n    /* background-color: #cccccc; */\n    font-size: 18px;\n    line-height: 18px;\n    font-weight: 600;\n    color: #ffffff;\n"]))),fu=d.b.div(cl||(cl=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #c09e05;\n    border: solid 1px #888;\n    border-radius: 5px;\n    box-sizing: border-box;\n\n    & *{\n        vertical-align: top;\n        height: 100%;\n    }\n"])),142),gu=d.b.div(al||(al=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    /* width: 100px; */\n    background-color: #8fb5bc;\n"])),480),ju=d.b.div(rl||(rl=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 2px);\n    height: ","px;\n    margin-top: 1px;\n    /* width: 100px; */\n    /* background-color: #8fb5bc; */\n    background: linear-gradient(to bottom, #10828a, #76d5db, #10828a);\n    ","\n    font-size: 16px;\n    font-weight: 600;\n    color: white;\n    padding-left: 5px;\n    box-sizing: border-box;\n"])),22,(function(e){return e.isOnChord?Object(d.a)(sl||(sl=Object(s.a)(["\n        background: linear-gradient(to bottom, #8a1010, #db7676, #8a1010);\n    "]))):""})),vu=d.b.div(ll||(ll=Object(s.a)(["\n    display: inline-block;\n    background-color: #a7acd8;\n"]))),mu=d.b.div(dl||(dl=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    /* margin-left: 1px; */\n    background-color: #a7d8c4;\n    padding-bottom: 2px;\n    box-sizing: border-box;\n"])),60),Ou=d.b.div(bl||(bl=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 1px);\n    height: ","px;\n    margin: 1px 0 0 1px;\n    background-color: #409ca3;\n    color: #01004e;\n    ","\n    ","\n    ","\n    /* border: 1px solid #ffffff; */\n    box-sizing: border-box;\n\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n\n    &:hover {\n        background-color: #117dbb;\n        ","\n        ","\n    }\n"])),22,(function(e){return e.isSelected?Object(d.a)(ul||(ul=Object(s.a)(["\n        background-color: #e5e747;\n    "]))):""}),(function(e){return e.isOver?Object(d.a)(hl||(hl=Object(s.a)(["\n        background-color: #c40000;\n        color: #ffffff;\n    "]))):""}),(function(e){return e.isEnable?"":Object(d.a)(xl||(xl=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))}),(function(e){return e.isSelected?Object(d.a)(pl||(pl=Object(s.a)(["\n            background-color: #b9bb3f;\n        "]))):""}),(function(e){return e.isOver?Object(d.a)(fl||(fl=Object(s.a)(["\n            background-color: #bb3f3f;\n        "]))):""})),ku=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.backingState;return Object(o.useEffect)((function(){console.log("backing start")}),[]),Object(ne.jsxs)(yu,{children:[Object(ne.jsx)(Iu,{isUse:i.isPreview}),Object(ne.jsx)(du,{}),Object(ne.jsx)($b,{}),Object(ne.jsxs)(Su,{children:[Object(ne.jsx)(wu,{isEnable:!i.hasError,onClick:function(){i.isPreview?k.stopPreview(n,i,t,n.reserveTasks):t.backing.testBacking()},children:i.isPreview?"Stop":"Test"}),Object(ne.jsx)(wu,{isEnable:!i.isPreview,onClick:function(){t.backing.closeBackingEditor()},children:"Cancel"}),Object(ne.jsx)(wu,{isEnable:!i.isPreview,onClick:function(){t.backing.mappingEditorToScore(),t.backing.closeBackingEditor()},children:"Update"})]})]})},yu=d.b.div(gl||(gl=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 600px;\n"]))),Su=d.b.div(jl||(jl=Object(s.a)(["\n    display: inline-block;\n    height: 30px;\n    width: 100%;\n    /* background-color: #bd4646; */\n    text-align: right;\n"]))),wu=d.b.div(vl||(vl=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    height: 26px;\n    margin: 2px 2px 0 0;\n    font-size: 20px;\n    color: white;\n    font-weight: 600;\n    background-color: #0051ff21;\n    border: solid 1px #555;\n    border-radius: 4px;\n    box-sizing: border-box;\n    line-height: 20px;\n    text-align: center;\n\n    ","\n\n    &:hover {\n        background-color: #ff008039;\n    }\n"])),(function(e){return e.isEnable?"":Object(d.a)(ml||(ml=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))})),Iu=d.b.div(Ol||(Ol=Object(s.a)(["\n    position: absolute;\n    display: ",";\n    z-index: 80;\n    width: 100%;\n    height: calc(100% - 30px);\n    background-color: #7a270028;\n"])),(function(e){return e.isUse?"block":"none"})),Lu=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.scoreState,c="backing"===i.hideMenu,a=n.scoreData.chordList[n.scoreState.focusIndex],r="chord"===a.type&&null!=a.detail.root;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(Eu,{isOpen:c,onClick:function(){t.backing.closeBackingEditor()}}),Object(ne.jsxs)(Cu,{children:[Object(ne.jsx)(Au,{isOpen:c,children:null==n.backingState?Object(ne.jsx)(ne.Fragment,{}):Object(ne.jsx)(ku,{})}),Object(ne.jsx)(Tu,{isEnable:r,onClick:function(){"none"===i.hideMenu?t.backing.openBackingEditor():"backing"===i.hideMenu&&t.backing.closeBackingEditor()},children:Object(ne.jsx)("div",{children:"Backing"})})]})]})},Eu=d.b.div(kl||(kl=Object(s.a)(["\n    display: ",";\n    position: absolute;\n    z-index: 7;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #01004216;\n    backdrop-filter: blur(6px);\n"])),(function(e){return e.isOpen?"inline-block":"none"})),Cu=d.b.div(yl||(yl=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 8;\n    left: 0;\n    top: 0;\n    /* width: 525px; */\n\n    & * {\n        vertical-align: top;\n    }\n"]))),Au=d.b.div(Sl||(Sl=Object(s.a)(["\n    display: inline-block;\n    width: ",";\n    /* height: 400px; */\n    background-color: #a3a3a3;\n    opacity: 0.9;\n    transition: width 0.1s;\n    overflow: hidden;\n"])),(function(e){return e.isOpen?"600px":0})),Tu=d.b.div(wl||(wl=Object(s.a)(["\n    display: inline-block;\n    width: 25px;\n    height: 150px;\n    background-color: #e4e4e4;\n    border-top: 1px solid #5a5a5a;\n    border-right: 1px solid #5a5a5a;\n    border-bottom: 1px solid #5a5a5a;\n    border-radius: 0 10px 10px 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: #5a5a5a;\n    text-align: center;\n    line-height: 16px;\n    box-sizing: border-box;\n    ","\n    \n    & div {\n        width: 150px;\n        transform-origin: top left;\n        transform: rotate(-90deg) translateX(-100%);\n        /* background-color: #fff; */\n    }\n\n    &:hover {\n        background-color: #d1e5eb;\n    }\n"])),(function(e){return e.isEnable?"":Object(d.a)(Il||(Il=Object(s.a)(["\n        opacity: 0.5;\n        pointer-events: none;\n    "])))})),Mu=function(){var e=Object(o.useContext)(pg),n=e.store,t=(e.dispatcher,n.scoreState);return Object(ne.jsxs)(Du,{children:[Object(ne.jsx)(_u,{children:"clipboard"}),Object(ne.jsxs)(zu,{children:[Object(ne.jsx)(Fu,{isActive:null!=t.cloneBacking,children:"Backing"}),Object(ne.jsx)(Fu,{isActive:null!=t.copiedElementList,children:"Elements"})]})]})},Du=d.b.div(Ll||(Ll=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    margin-left: 20px;\n    /* background-color: red; */\n    & *{\n        vertical-align: top;\n    }\n"]))),_u=d.b.div(El||(El=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    font-size: 18px;\n    font-weight: 600;\n    color: #979797;\n    margin-left: 4px;\n    font-style: italic;\n    line-height: 38px;\n    /* background-color: yellow; */\n"]))),zu=d.b.div(Cl||(Cl=Object(s.a)(["\n    display: inline-block;\n    height: 100%;\n    margin-left: 10px;\n    /* background-color: yellow; */\n"]))),Fu=d.b.div(Al||(Al=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    width: 120px;\n    height: calc(100% - 8px);\n    /* background-color: #e0ff6f55; */\n    ","\n    margin: 4px 0 0 4px;\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #8f8f8f;\n    border-radius: 2px;\n    border: 1px solid #969696;\n    box-sizing: border-box;\n    text-align: center;\n"])),(function(e){return e.isActive?Object(d.a)(Tl||(Tl=Object(s.a)(["\n        background-color: #a8dbb3;\n    "]))):""})),Ru=12,Nu=function(){var e=Object(o.useContext)(pg),n=e.store,t=(e.dispatcher,n.scoreState),i=n.scoreData.chordList,c=t.focusIndex,a=t.elementCacheList,r=Object(o.useMemo)((function(){var e=[];return e.push(Object(ne.jsx)(Wu,{},e.length)),t.measureCacheList.forEach((function(n){var t={width:1,height:10,color:"#555"};switch(!0){case 4===n.rate:t={width:2,height:22,color:"#747474"};break;case 8===n.rate:t={width:1,height:18,color:"#646464"};break;case 16===n.rate:t={width:1,height:10,color:"#7a7a7a"}}e.push(Object(ne.jsx)(qu,{width:t.width,height:t.height,color:t.color,children:-1!==n.barCount?Object(ne.jsx)(Gu,{children:n.barCount}):""},e.length))})),e.push(Object(ne.jsx)(Wu,{},e.length)),e}),[t.beatCacheList]),s=Object(o.useMemo)((function(){var e=[],n=[],o="chord"===i[c].type,r=a[c].chordIndex;return i.forEach((function(i,c){var a=t.elementCacheList[c];if("chord"===i.type&&Math.abs(a.chordIndex-r)<=5){var s=i.detail,l=(s.beatLen,s.minute.head,s.minute.tail,""),d="ather";o?a.chordIndex===r?(l="cur",d="cur"):a.chordIndex===r-1?(l="prev",d="prev"):a.chordIndex===r+1&&(l="next",d="next"):a.chordIndex===r?(l="prev",d="prev"):a.chordIndex===r+1&&(l="next",d="next");var b=v.getBeatProps(a.beatSignature),u=s.minute.head+s.minute.tail,h=s.beatLen*b.beatMemoriCount,x=16+a.curTotalMemori;e.push(Object(ne.jsx)(Ju,{type:d,pos:x,sustain:h+u,children:l},e.length)),n.push(Object(ne.jsx)(Vu,{isActive:"cur"===d,pos:x+s.minute.head,sustain:h},e.length))}})),[e,n]}),[i.length,c,t.beatCacheList]),d=Object(l.a)(s,2),b=d[0],u=d[1],h=a[c].curTotalMemori*Ru;return Object(ne.jsx)(Pu,{children:Object(ne.jsxs)(Ku,{pos:h,children:[Object(ne.jsxs)(Bu,{children:[Object(ne.jsx)(Hu,{children:b}),Object(ne.jsx)(Uu,{children:u})]}),Object(ne.jsx)(Yu,{children:r})]})})},Pu=d.b.div(Ml||(Ml=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n    width: 100%;\n    text-align: left;\n    white-space: nowrap;  \n"]))),Ku=d.b.div(Dl||(Dl=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    position: absolute;\n    height: 100%;\n    /* width: 100px;\n    background-color: #000; */\n    transition: left 0.5s;\n"])),(function(e){return-e.pos})),Bu=d.b.div(_l||(_l=Object(s.a)(["\n    display: block;\n    /* position: relative; */\n    height: 40px;\n    /* width: 2200px; */\n    background-color: rgb(131, 131, 131);\n"]))),Hu=d.b.div(zl||(zl=Object(s.a)(["\n    display: block;\n    position: relative;\n    height: 30px;\n"]))),Uu=d.b.div(Fl||(Fl=Object(s.a)(["\n    display: block;\n    position: relative;\n    height: 10px;\n"]))),Ju=d.b.div(Rl||(Rl=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    width: ","px;\n    height: 100%;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: white;\n    text-align: center;\n    background-color: rgb(136, 163, 133);\n    ","\n    border-left: solid 1px #000;\n    border-top: solid 1px #000;\n    border-bottom: solid 1px #000;\n    box-sizing: border-box;\n"])),(function(e){return e.pos*Ru}),(function(e){return e.sustain*Ru}),(function(e){switch(e.type){case"cur":return Object(d.a)(Nl||(Nl=Object(s.a)(["\n                background-color: rgb(218, 107, 134);\n                /* color: #ffe551; */\n            "])));case"prev":return Object(d.a)(Pl||(Pl=Object(s.a)(["\n                opacity: 0.4;\n                background-color: rgb(163, 177, 221);\n            "])));case"next":return Object(d.a)(Kl||(Kl=Object(s.a)(["\n                opacity: 0.4;\n                background-color: rgb(163, 221, 171);\n            "])));case"ather":return Object(d.a)(Bl||(Bl=Object(s.a)(["\n                background-color: rgb(192, 192, 192);\n            "])))}})),Vu=d.b.div(Hl||(Hl=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    width: ","px;\n    height: 100%;\n\n    font-size: 16px;\n    font-weight: 600;\n    color: white;\n    text-align: center;\n    background-color: rgb(224, 224, 224);\n    border-left: solid 1px #000;\n    ","\n"])),(function(e){return e.pos*Ru}),(function(e){return e.sustain*Ru}),(function(e){return e.isActive?Object(d.a)(Ul||(Ul=Object(s.a)(["\n        /* background-color: rgb(233, 180, 228); */\n        /* color: #ffe551; */\n    "]))):""})),Yu=d.b.div(Jl||(Jl=Object(s.a)(["\n    display: block;\n    position: relative;\n    height: 38px;\n    background-color: rgb(48, 48, 48);\n    border-top: solid 2px rgb(128, 128, 128);\n    background: linear-gradient(to bottom, rgb(255, 255, 255), rgb(98, 97, 114));\n"]))),Wu=d.b.div(Vl||(Vl=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #d9ebe7;\n    box-sizing: border-box;\n"])),192),qu=d.b.div(Yl||(Yl=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: ","px;\n    border-left: solid ","px ",";\n    box-sizing: border-box;\n"])),Ru,(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.color})),Gu=d.b.div(Wl||(Wl=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    left: -5px;\n    top: 18px;\n    font-size: 16px;\n    font-weight: 600;\n    color: #dd0000;\n"]))),Xu=function(e){var n=Object(o.useContext)(pg),t=n.store,i=n.dispatcher,c=Object(o.useRef)({}),a=Object(o.useState)({}),r=Object(l.a)(a,2),s=(r[0],r[1],t.scoreData.chordList,t.scoreState),d=(t.scoreData.chordList[0].detail,t.scoreState.isMelody);Object(o.useEffect)((function(){i.system.setInvalidate(Object(h.a)(Object(h.a)({},t.invalidate),{},{harmonize:function(){i.system.setInvalidate(Object(h.a)(Object(h.a)({},t.invalidate),{},{harmoniizeInvalidate:{}}))}}))}),[]),Object(o.useEffect)((function(){d||c.current.focus()}),[d]);var b=0===s.elementCacheList.length?Object(ne.jsx)(ne.Fragment,{}):Object(ne.jsx)(Nu,{}),u=0===s.elementCacheList.length?Object(ne.jsx)(ne.Fragment,{}):Object(ne.jsx)(Zd,{});return Object(ne.jsxs)(Zu,{tabIndex:999,ref:c,isActive:e.isActive,onKeyDown:function(e){return xa(e,t,i,!0)},onKeyUp:function(e){return xa(e,t,i,!1)},children:[Object(ne.jsx)(Qu,{children:Object(ne.jsx)(Jc,{})}),Object(ne.jsxs)($u,{children:[Object(ne.jsx)(nh,{isEnable:!s.isPreview,children:Object(ne.jsx)(Mu,{})}),Object(ne.jsxs)(th,{children:[Object(ne.jsx)(Lu,{}),Object(ne.jsx)(ih,{children:Object(ne.jsx)(Hc,{})}),Object(ne.jsx)(rh,{isUse:s.isPreview})]}),Object(ne.jsxs)(oh,{children:[Object(ne.jsx)(ch,{children:b}),Object(ne.jsx)(ah,{children:u})]})]}),Object(ne.jsx)(eh,{isEnable:!s.isPreview,children:Object(ne.jsx)(Gd,{})})]})},Zu=d.b.div(ql||(ql=Object(s.a)(["\n    display: ",";\n    width: 100%;\n    height: 100%;\n    outline: none;\n"])),(function(e){return e.isActive?"inline-block":"none"})),Qu=d.b.div(Gl||(Gl=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #d8d8d8;\n    border-right: 1px solid #3e3f57;\n    box-sizing: border-box;\n    vertical-align: top;\n"])),110),$u=d.b.div(Xl||(Xl=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    height: 100%;\n    background-color: #c7c7c7;\n    vertical-align: top;\n"])),330),eh=d.b.div(Zl||(Zl=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #d6d6d6;\n    vertical-align: top;\n    ","\n"])),220,(function(e){return e.isEnable?"":Ce})),nh=d.b.div(Ql||(Ql=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #d4d4d4;\n    ","\n"])),35,(function(e){return e.isEnable?"":Ce})),th=d.b.div($l||($l=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: calc(100% - ","px);\n    background-color: #e0e0e0;\n"])),115),ih=d.b.div(ed||(ed=Object(s.a)(["\n    position: absolute;\n    margin-left: 25px;\n    width: calc(100% - 25px);\n    height: 100%;\n    vertical-align: top;\n"]))),oh=d.b.div(nd||(nd=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #cacaca;\n    & * {\n        vertical-align: top;\n    }\n"])),80),ch=d.b.div(td||(td=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - ","px);\n    height: 100%;\n    /* background-color: #ddc2c2; */\n"])),380),ah=d.b.div(id||(id=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: 100%;\n    background-color: #757575;\n"])),380),rh=d.b.div(od||(od=Object(s.a)(["\n    position: absolute;\n    display: ",";\n    z-index: 80;\n    width: 100%;\n    height: 100%;\n    background-color: #7a270028;\n"])),(function(e){return e.isUse?"block":"none"})),sh=t(23),lh=t.n(sh),dh=function e(){Object(p.a)(this,e)};dh.mouseDownEvent=function(e,n,t,i,o){if(0===e.button){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=c.measure.getBoundingClientRect(),r=e.clientX-a.left;n.melodyState.timelineMouse.lock=r,o()}}},dh.mouseMoveEvent=function(e,n,t,i,o){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=c.measure.getBoundingClientRect(),r=e.clientX-a.left,s=n.melodyState.timelineMouse;s.pos!==r&&(s.pos=r,o())}},dh.mouseUpEvent=function(e,n,t,i,o){if(0===e.button){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){for(var a=c.measure.getBoundingClientRect(),r=(e.clientX,a.left,n.melodyState),s=r.timelineMouse,d=s.lock+c.measure.scrollLeft,b=s.pos+c.measure.scrollLeft,u=n.scoreData.notesList,h=-1,x=-1,p=0;p<u.length;p++){var f=u[p],g=I(f.pos)*r.beatWidth,j=g+I(f.len)*r.beatWidth,v=d<b?[d,b]:[b,d],m=Object(l.a)(v,2),O=m[0],k=m[1];if(O<=g&&k>=j)-1===h&&(h=p);else if(-1!==h){x=p-1;break}}-1!==h&&-1===x&&(x=u.length-1),r.focusIndex=h,r.destIndex=x,s.lock=-1,t.melody.setState(r)}}};var bh,uh,hh,xh,ph,fh,gh,jh,vh,mh,Oh,kh,yh,Sh,wh,Ih,Lh,Eh,Ch,Ah,Th,Mh,Dh,_h,zh,Fh,Rh,Nh,Ph,Kh,Bh,Hh=dh,Uh=function(e){var n=Object(o.useContext)(pg),t=n.store,i=n.dispatcher,c=Object(o.useRef)(null),a=Object(o.useRef)(null),r=t.scoreState,s=e.update,l=t.scoreData.chordList,d=e.barLength,b=e.beatWidth,u=e.curChord,h=e.timelineLength,x=e.mouseMeasurePos,p=1/t.melodyState.quantize,f=t.scoreData.chordList[0].detail;Object(o.useEffect)((function(){t.refs.melody.measure=c.current,t.refs.melody.chord=a.current}),[]);var g=Object(o.useMemo)((function(){var e=[];return r.measureCacheList.forEach((function(n,t){var i={width:1,height:10,color:"#555"};switch(!0){case 4===n.rate:i={width:2,height:22,color:"#747474"};break;case 8===n.rate:i={width:1,height:18,color:"#646464"};break;case 16===n.rate:i={width:1,height:10,color:"#7a7a7a"}}var o=n.barCount;e.push(Object(ne.jsx)(Qh,{beatWidth:b,width:i.width,height:i.height,color:i.color,children:-1!==o?Object(ne.jsx)($h,{children:o}):""},e.length))})),e}),[r.beatCacheList,d]),j=Object(o.useMemo)((function(){var e=[];if(0===r.elementCacheList.length)return e;var n=0;return l.forEach((function(o,c){if("chord"===o.type){var s=o.detail,l=r.elementCacheList[c],d=.25*(s.minute.head+s.minute.tail),h=v.getBeatProps(l.beatSignature).beatMemoriCount/4,x=b*(s.beatLen*h+d);if(null!=a.current){var p=a.current.scrollLeft;if(n+x-p>=0||n-p<=a.current.clientWidth){var g,j=null===(g=v.getSymbolFromKey(s.symbolKey))||void 0===g?void 0:g.name,m=null==s.root?"-":v.getDegreeRoot(s.root)+j,O=null==s.root?"-":v.getRootName(s.root,f.keyIndex)+j;e.push(Object(ne.jsxs)(Gh,{left:n,width:x,isActive:o==u,onClick:function(){r.isMelody=!1,r.focusIndex=c,i.score.setScoreState(r)},onContextMenu:function(){V.previewCurHarmony(t,i)},children:[Object(ne.jsx)(Xh,{children:m}),Object(ne.jsxs)(Zh,{children:[" (",O,")"]})]},e.length))}}n+=x}})),e}),[l,u]);return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(Wh,{ref:a,children:Object(ne.jsx)(qh,{width:h,children:j})}),Object(ne.jsx)(Jh,{ref:c,children:Object(ne.jsxs)(Vh,{onMouseDown:function(e){return Hh.mouseDownEvent(e,t,i,h,s)},onMouseMove:function(e){return Hh.mouseMoveEvent(e,t,i,h,s)},onMouseUp:function(e){return Hh.mouseUpEvent(e,t,i,h,s)},onMouseLeave:function(){var e=t.melodyState.timelineMouse;e.pos=-1,e.lock=-1,s()},children:[g,Object(ne.jsx)(Yh,{left:x*b*p,width:b*p})]})})]})},Jh=d.b.div(bh||(bh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    background: linear-gradient(to bottom, #ffffff, #808080);\n    width: 100%;\n    height: 40px;\n    text-align: left;\n    border-top: solid 2px #000;\n    white-space: nowrap;\n    overflow: hidden;\n"]))),Vh=d.b.div(uh||(uh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    /* width: 100%; */\n    left: 0;\n    top: 0;\n    width: 10000px;\n    height: 100%;\n    &:hover {\n        background-color: #ff00b347;\n    }\n"]))),Yh=d.b.div(hh||(hh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    left: ","px;\n    top: 0px;\n    width: ","px;\n    height: 100%;\n    background-color: #ffff006c;\n"])),(function(e){return e.left}),(function(e){return e.width})),Wh=d.b.div(xh||(xh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    background-color: #c0c0c0;\n    width: 100%;\n    height: calc(100% - 40px);\n    text-align: left;\n    white-space: nowrap;\n    overflow: hidden;\n"]))),qh=d.b.div(ph||(ph=Object(s.a)(["\n    width: ","px;\n    height: 100%;\n    overflow: hidden;\n"])),(function(e){return e.width})),Gh=d.b.div(fh||(fh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    width: ","px;\n    height: calc(100% - 2px);\n    box-sizing: border-box;\n    border: 1px solid #646464;\n    border-left: 4px solid #940000;\n    background-color: #ffffff22;\n    ","\n    margin: 1px 0 0 1px;\n    \n    font-size: 18px;\n    font-weight: 600;\n    text-align: center;\n\n    &:hover {\n        background-color: #fffb0037;\n    }\n"])),(function(e){return e.left}),(function(e){return e.width-1}),(function(e){return e.isActive?Object(d.a)(gh||(gh=Object(s.a)(["background-color: #ffce2c9b;"]))):""})),Xh=d.b.span(jh||(jh=Object(s.a)(["\n    color: #d80000;\n"]))),Zh=d.b.span(vh||(vh=Object(s.a)(["\n    color: #0000007d;\n"]))),Qh=(d.b.div(mh||(mh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    pointer-events: none;\n    /* background-color: #ffffffbe; */\n    width: ","px;\n    vertical-align: bottom;\n    margin-top: 25px;\n    height: ",";\n    box-sizing: border-box;\n    border-left: solid "," #000;\n"])),(function(e){return e.beatWidth/4}),(function(e){return e.isHead?"15px":"10px"}),(function(e){return e.isHead?"2px":"1px"})),d.b.div(Oh||(Oh=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: ","px;\n    height: ","px;\n    border-left: solid ","px ",";\n    box-sizing: border-box;\n    vertical-align: top;\n"])),(function(e){return e.beatWidth/4}),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.color}))),$h=d.b.div(kh||(kh=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    left: -5px;\n    top: 18px;\n    font-size: 16px;\n    font-weight: 600;\n    color: #dd0000;\n"]))),ex=function(e){var n=Object(o.useContext)(pg),t=n.store,i=(n.dispatcher,t.scoreData.chordList[0].detail),c=Object(o.useMemo)((function(){var n=[];if(null!=e.curChord){var o=e.curChord.detail,c=v.getSymbolFromKey(o.symbolKey),a=o.root;null!=a&&null!=c&&c.structs.forEach((function(e){n.push((a.index+i.keyIndex+v.IntervalRelationProps[e])%12)}))}for(var r=[],s=function(i){var o=(59-i+9)%12,c=Math.floor((59-i+9)/12)+1,a=v.KEY12_SHARP_LIST[o%12];nx(c);r.push(Object(ne.jsx)(cx,{isScale:[0,2,4,5,7,9,11].includes(o),isStruct:n.includes(o),isActive:i===e.mousePitchIndex,onClick:function(){var e=t.instruments.soundfontPlayer;null!=e&&(e.stop(),e.play(a+c,0,{duration:1}))},children:a},i))},l=0;l<60;l++)s(l);return r}),[e.mousePitchIndex,e.curChord]);return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)(tx,{children:[Object(ne.jsx)(ox,{isActive:!1,children:Object(ne.jsx)("div",{children:"hihi"})}),Object(ne.jsx)(ox,{isActive:!1,children:Object(ne.jsx)("div",{children:"hi"})}),Object(ne.jsx)(ox,{isActive:!1,children:Object(ne.jsx)("div",{children:"mid2"})}),Object(ne.jsx)(ox,{isActive:!1,children:Object(ne.jsx)("div",{children:"mid1"})}),Object(ne.jsx)(ox,{isActive:!1,children:Object(ne.jsx)("div",{children:"low"})})]}),Object(ne.jsx)(ix,{children:c})]})},nx=function(e){switch(e){case 0:return"low";case 1:return"mid1";case 2:return"mid2";case 3:return"hi";case 4:return"hihi";default:return""}},tx=d.b.div(yh||(yh=Object(s.a)(["\n    display: inline-block;\n    width: 30px;\n    height: 100%;\n    vertical-align: top;\n"]))),ix=d.b.div(Sh||(Sh=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 30px);\n    height: 100%;\n    vertical-align: top;\n"]))),ox=d.b.div(wh||(wh=Object(s.a)(["\n    display: inline-block;\n    border: 1px solid black;\n    width: 100%;\n    height: 360px;\n    background-color: #8f8f8f;\n    ","\n    box-sizing: border-box;\n\n    font-size: 18px;\n    color: #dfdfdf;\n    font-weight: 600;\n    & div {\n        width: 360px;\n        transform-origin: top left;\n        transform: rotate(-90deg) translateX(-50%);\n        /* background-color: #fff; */\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Ih||(Ih=Object(s.a)(["background-color: #ffc40089;"]))):""})),cx=d.b.div(Lh||(Lh=Object(s.a)(["\n    display: inline-block;\n    width: calc(100% - 20px);\n    border: 1px solid black;\n    ","\n    height: ","px;\n    background-color: #adadad;\n    ","\n    ","\n    box-sizing: border-box;\n\n    padding-left: 5px;\n    line-height: 28px;\n    font-size: 18px;\n    color: #3b3b3b;\n    font-weight: 600;\n"])),(function(e){return e.isScale?Object(d.a)(Eh||(Eh=Object(s.a)(["\n        width: 100%;\n    "]))):""}),W,(function(e){return e.isStruct?Object(d.a)(Ch||(Ch=Object(s.a)(["background-color: #ce6565;"]))):""}),(function(e){return e.isActive?Object(d.a)(Ah||(Ah=Object(s.a)(["background-color: #9e9e6c;"]))):""})),ax=function(e){var n=Object(o.useContext)(pg),t=n.store,i=n.dispatcher,c=t.melodyState;return Object(ne.jsxs)(rx,{isActive:e.soundfontInfo.name===c.soundfontInfo.name,onClick:function(){c.soundfontInfo=e.soundfontInfo,c.isPreview=!0,i.melody.setState(c);var n=e.soundfontInfo;lh.a.instrument(new AudioContext,n.name,{gain:n.gain,release:.5}).then((function(e){i.melody.setInstrument(e)})).then((function(){c.isPreview=!1,i.melody.setState(c)}))},children:[Object(ne.jsx)(sx,{children:e.icon}),Object(ne.jsx)(lx,{children:e.labelName})]})},rx=d.b.div(Th||(Th=Object(s.a)(["\n    display: inline-block;\n    width: 85px;\n    height: 40px;\n    text-align: center;\n    border: 1px solid #4b4b4b;\n    background-color: #cacacada;\n    ","\n    border-radius: 6px;\n    margin-left: 4px;\n    box-sizing: border-box;\n\n    &:hover {\n        background-color: #e4e4e4da;\n        ","\n    }\n"])),(function(e){return e.isActive?Object(d.a)(Mh||(Mh=Object(s.a)(["\n        background-color: #f7f7f7da;\n    "]))):""}),(function(e){return e.isActive?Object(d.a)(Dh||(Dh=Object(s.a)(["\n            background-color: #f7f7f7da;\n        "]))):""})),sx=d.b.div(_h||(_h=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 30px;\n    /* background-color: #ff0000da; */\n    font-size: 20px;\n    color: #4b4b4b;\n    text-align: center;\n    /* padding-top: 5px; */\n    box-sizing: border-box;\n"]))),lx=d.b.div(zh||(zh=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 10px;\n    /* background-color: #0400ffdc; */\n    font-size: 16px;\n    font-weight: 600;\n    line-height: 0;\n    color: #3b3b3b;\n    text-align: center;\n"]))),dx=function(e){return Object(ne.jsx)(bx,{isActive:e.isActive,isDisable:e.isDisable,onClick:e.callback,children:e.labelName})},bx=d.b.div(Fh||(Fh=Object(s.a)(["\n    display: inline-block;\n    width: 100px;\n    height: 28px;\n    background: linear-gradient(to bottom, #e0e0e0, #aaaaaa, #e0e0e0);\n    ","\n    ","\n    color: #5d6e63;\n    border-radius: 2px;\n    border: solid 1px #747373;\n    font-size: 20px;\n    font-weight: 600;\n    text-align: center;\n\n    margin-left: 4px;\n"])),(function(e){return e.isActive?Object(d.a)(Rh||(Rh=Object(s.a)(["\n        background: linear-gradient(to bottom, #b7d9df, #59c6da, #b7d9df);\n    "]))):""}),(function(e){return e.isDisable?Ce:""})),ux=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.melodyState;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)(hx,{children:[Object(ne.jsxs)(xx,{children:[Object(ne.jsx)(dx,{labelName:"16",isDisable:!1,isActive:4===i.quantize,callback:function(){i.quantize=4,t.melody.setState(i)}}),Object(ne.jsx)(dx,{labelName:"8",isDisable:!1,isActive:[2,6].includes(i.quantize),callback:function(){i.quantize=2,t.melody.setState(i)}}),Object(ne.jsx)(dx,{labelName:"4",isDisable:!1,isActive:[1,3].includes(i.quantize),callback:function(){i.quantize=1,t.melody.setState(i)}}),Object(ne.jsx)(dx,{labelName:"/3",isDisable:4===i.quantize,isActive:[3,6].includes(i.quantize),callback:function(){[3,6].includes(i.quantize)?i.quantize/=3:i.quantize*=3,t.melody.setState(i)}})]}),Object(ne.jsx)(px,{})]}),Object(ne.jsxs)(fx,{children:[Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.h,{}),labelName:"violin",soundfontInfo:{name:"violin",gain:9}}),Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.b,{}),labelName:"e-guitar",soundfontInfo:{name:"distortion_guitar",gain:3}}),Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.e,{}),labelName:"saxphone",soundfontInfo:{name:"tenor_sax",gain:3}}),Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.g,{}),labelName:"viola",soundfontInfo:{name:"viola",gain:5}}),Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.f,{}),labelName:"trumpet",soundfontInfo:{name:"trumpet",gain:5}}),Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.a,{}),labelName:"clarinet",soundfontInfo:{name:"clarinet",gain:4}}),Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.a,{}),labelName:"oboe",soundfontInfo:{name:"oboe",gain:5}}),Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.a,{}),labelName:"flute",soundfontInfo:{name:"flute",gain:5}}),Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.d,{}),labelName:"ocarina",soundfontInfo:{name:"ocarina",gain:4}}),Object(ne.jsx)(ax,{icon:Object(ne.jsx)(Be.b,{}),labelName:"shamisen",soundfontInfo:{name:"shamisen",gain:9}})]})]})},hx=d.b.div(Nh||(Nh=Object(s.a)(["\n    display: block;\n    padding: 4px 4px 4px 0;\n    background-color: #bbbbbb;\n"]))),xx=d.b.div(Ph||(Ph=Object(s.a)(["\n    display: inline-block;\n    /* margin-left: 20px; */\n"]))),px=d.b.div(Kh||(Kh=Object(s.a)(["\n    display: inline-block;\n    margin-left: 20px;\n"]))),fx=d.b.div(Bh||(Bh=Object(s.a)(["\n    display: inline-block;\n    /* padding: 4px 4px 4px 0; */\n    background-color: #e4e4e486;\n"]))),gx=function e(){Object(p.a)(this,e)};gx.mouseDownEvent=function(e,n,t,i,o){if(0===e.button){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=n.melodyState,r=n.melodyState.tableMouse,s=r.notesState,l=n.scoreData.notesList,d=1/a.quantize,b=function(){var e=l.find((function(e){return x<I(e.pos)*a.beatWidth})),n=i;return void 0!=e&&(n=I(e.pos)*a.beatWidth),n},u=c.table.getBoundingClientRect(),x=e.clientX+c.table.scrollLeft-u.left,p=e.clientY+c.table.scrollTop-u.top;if(-1===s.index)r.isPut=!0,r.lock={x:Math.floor(x/a.beatWidth/d)*a.beatWidth*d,y:Math.floor(p/W)*W},r.nextLeft=b(),r.width=0;else if("normal"===s.side){var f=n.refs.melody;if(null!=f.table&&null!=f.measure&&null!=f.chord&&null!=f.pitch){a.dataHistory.add(JSON.stringify(n.scoreData.notesList));var g=f.table.getBoundingClientRect(),j=e.clientY+f.table.scrollTop-g.top,v=Math.floor(j/W);l[s.index].pitchIndex=v,n.scoreData.notesList=l.slice(),T(v,n)}}else{var m=l[s.index];if(r.lock={x:I(m.pos)*a.beatWidth,y:0},r.nextLeft=b(),"left"===s.side){if(s.isMove=!0,r.prevRight=0,s.index>0){var O=l[s.index-1];r.prevRight=(I(O.pos)+I(O.len))*a.beatWidth}}else"right"===s.side&&(s.isResize=!0);r.notesState=Object(h.a)({},s)}o()}}},gx.mouseMoveEvent=function(e,n,t,i,o){if(0===e.button){var c=n.refs.melody;if(null!=c.table&&null!=c.measure&&null!=c.chord&&null!=c.pitch){var a=n.melodyState,r=n.melodyState.tableMouse,s=r.notesState,l=n.scoreData.notesList,d=n.scoreData.chordList,b=1/a.quantize,u=c.table.getBoundingClientRect(),x=e.clientX+c.table.scrollLeft-u.left,p=e.clientY+c.table.scrollTop-u.top;if(r.isPut||s.isResize||s.isMove){if(r.isPut){var f=(Math.floor(x/a.beatWidth/b)+1)*a.beatWidth*b;r.width=(f>r.nextLeft?r.nextLeft:f)-r.lock.x}else if(s.isResize){var g=(Math.floor(x/a.beatWidth/b)+1)*a.beatWidth*b,j=l[s.index],v=g-r.lock.x;g>r.nextLeft&&(v=r.nextLeft-r.lock.x),g<=r.lock.x&&(v=a.beatWidth/a.quantize);var m=C(a.quantize,Math.floor(v/a.beatWidth*a.quantize));I(j.len)!==I(m)&&(a.dataHistory.add(JSON.stringify(n.scoreData.notesList)),j.len=m,n.scoreData.notesList=l.slice())}else if(s.isMove){var O=(Math.floor(x/a.beatWidth/b)+0)*a.beatWidth*b,k=l[s.index],y=I(k.len)*a.beatWidth,S=O;O+y>r.nextLeft&&(S=r.nextLeft-y),O<r.prevRight&&(S=r.prevRight);var w=C(a.quantize,Math.floor(S/a.beatWidth*a.quantize));I(k.pos)!==I(w)&&(a.dataHistory.add(JSON.stringify(n.scoreData.notesList)),k.pos=w,n.scoreData.notesList=l.slice())}}else{r.mousePitchIndex=Math.floor(p/W),r.mouseMeasurePos=Math.floor(x/a.beatWidth/b);var L=0,E=d.find((function(e){if("chord"===e.type){var n=e.detail.beatLen*a.beatWidth;if(x>=L&&x<L+n)return e;L+=n}}));r.curChord=void 0==E?null:E,s.index=-1;var A=a.focusIndex;a.focusIndex=-1,s.side="normal";for(var T=0;T<l.length;T++){var M=l[T],D=I(M.pos)*a.beatWidth,_=D+I(M.len)*a.beatWidth;if(x>=D&&x<=_){s.index=T,a.focusIndex=T,x<D+10?s.side="left":x>_-10&&(s.side="right");break}}a.destIndex=a.focusIndex,-1!==A&&A!==a.focusIndex&&(a.lastFocus=A),r.notesState=Object(h.a)({},s)}o()}}},gx.mouseUpEvent=function(e,n,t,i,o){if(0===e.button){var c=n.melodyState,a=n.melodyState.tableMouse,r=a.notesState,s=n.scoreData.notesList,l=c.quantize;if(a.isPut){if(a.isPut=!1,a.width>0){c.dataHistory.add(JSON.stringify(n.scoreData.notesList));var d=Math.floor(a.lock.y/W);s.push({pos:C(l,Math.floor(a.lock.x/c.beatWidth*l)),pitchIndex:d,len:C(l,Math.floor(a.width/c.beatWidth*l))}),s.sort((function(e,n){var t=I(e.pos),i=I(n.pos);return t===i?0:t<i?-1:1})),t.melody.setNotesList(s),T(d,n)}}else r.isMove=!1,r.isResize=!1,a.notesState=Object(h.a)({},r),t.melody.setNotesList(s.slice());o()}};var jx=gx,vx=function e(){Object(p.a)(this,e)};vx.keyDownEvent=function(e,n,t){n.userEnv.keyConfig.note;var i=n.melodyState.keySwitch,o=n.melodyState,c=o.focusIndex===o.destIndex,a=o.tableMouse;if(o.isPreview)switch(e.key){case" ":V.stopPreview(n,t,n.reserveTasks)}else if(-1!==a.notesState.index&&(a.notesState.index=-1,a.notesState.isResize=!1,a.notesState.side="normal"),a.mouseMeasurePos=-1,a.mousePitchIndex=-1,i.scaleMode||i.octave||i.resize||i.move||i.shift||i.control){if(i.control)switch(e.key){case"c":t.melody.copyNotes();break;case"v":t.melody.pasteNotes();break;case"a":t.melody.allSelect();break;case"s":t.score.saveFile();break;case"z":t.melody.undo();break;case"y":t.melody.redo()}else if(i.scaleMode||i.octave){var r=i.scaleMode?"scale":"octave";switch(e.key){case"ArrowUp":t.melody.incrementCurPitch(!0,r);break;case"ArrowDown":t.melody.incrementCurPitch(!1,r)}}else if(i.resize)switch(e.key){case"ArrowLeft":t.melody.resizeNotes(!1);break;case"ArrowRight":t.melody.resizeNotes(!0)}else if(i.move)switch(e.key){case"ArrowLeft":t.melody.moveNotes(!1);break;case"ArrowRight":t.melody.moveNotes(!0)}else if(i.shift)switch(e.key){case"ArrowLeft":t.melody.moveDestFocus(!1);break;case"ArrowRight":t.melody.moveDestFocus(!0)}}else switch(e.key){case"ArrowUp":t.melody.incrementCurPitch(!0,"normal");break;case"ArrowDown":t.melody.incrementCurPitch(!1,"normal");break;case"ArrowLeft":c?t.melody.moveFocus(!1):t.melody.releaseRange(!1);break;case"ArrowRight":c?t.melody.moveFocus(!0):t.melody.releaseRange(!0);break;case"a":t.melody.addNotes();break;case"q":alert(JSON.stringify(n.scoreData.notesList[o.focusIndex].len));break;case"w":t.melody.adjustScrollX();break;case"e":t.melody.adjustScrollY();break;case"z":V.previewCurHarmony(n,t);break;case"p":o.isSolo=!o.isSolo,t.melody.setState(o);break;case"Home":t.melody.firstNotes();break;case"1":o.quantize=4,t.melody.setState(o);break;case"2":o.quantize=2,t.melody.setState(o);break;case"3":o.quantize=1,t.melody.setState(o);break;case"/":[3,6].includes(o.quantize)?o.quantize/=3:o.quantize*=3,t.melody.setState(o);break;case"Delete":t.melody.removeNotes();break;case" ":t.melody.previewStart()}},vx.keySwitchEvent=function(e,n,t,i){n.userEnv.keyConfig.note;var o=n.melodyState.keySwitch,c=n.melodyState;if(!c.isPreview&&("Control"===e.key&&(o.control=i,t.melody.setKeySwitch(o)),!o.control)){var a=c.focusIndex===c.destIndex;switch(e.key){case"x":o.octave=i,t.melody.setKeySwitch(o);break;case"c":a&&(o.scaleMode=i,t.melody.setKeySwitch(o));break;case"f":a&&(o.resize=i,t.melody.setKeySwitch(o));break;case"d":o.move=i,t.melody.setKeySwitch(o);break;case"Shift":o.shift=i,t.melody.setKeySwitch(o)}}i&&vx.keyDownEvent(e,n,t)};var mx,Ox,kx,yx,Sx,wx,Ix,Lx,Ex,Cx,Ax,Tx,Mx,Dx,_x,zx,Fx,Rx,Nx,Px,Kx,Bx,Hx,Ux,Jx,Vx,Yx,Wx,qx,Gx,Xx,Zx,Qx,$x,ep,np,tp,ip,op,cp,ap,rp,sp,lp,dp,bp,up,hp,xp,pp,fp,gp,jp,vp,mp,Op,kp,yp,Sp,wp,Ip,Lp,Ep,Cp=vx,Ap=function(e){var n=Object(o.useContext)(pg),t=n.store,i=n.dispatcher,c=t.scoreState,a=t.melodyState,r=Object(o.useRef)(null),s=Object(o.useRef)(null),d=Object(o.useRef)(null),b=Object(o.useState)({}),u=Object(l.a)(b,2),x=(u[0],u[1]),p=Object(o.useState)({}),f=Object(l.a)(p,2),g=(f[0],f[1]),j=function(){return x({})},m=a.tableMouse,O=m.isPut,k=m.notesState,y=m.curChord,L=m.mouseMeasurePos,E=m.mousePitchIndex,C=m.width,T=m.lock,M=150*a.beatWidth*4,D=t.scoreData.notesList,_=(t.melodyState.quantize,t.scoreState.isMelody);null==s.current||(s.current.scrollLeft,s.current.clientWidth);Object(o.useEffect)((function(){i.system.setRefs(Object(h.a)(Object(h.a)({},t.refs),{},{melody:Object(h.a)(Object(h.a)({},t.refs.melody),{},{table:s.current,pitch:d.current})})),i.system.setInvalidate(Object(h.a)(Object(h.a)({},t.invalidate),{},{melody:j}))}),[]),Object(o.useEffect)((function(){_&&null!=r.current&&r.current.focus()}),[_]);var z=Object(o.useMemo)((function(){var e=[];return c.measureCacheList.forEach((function(n,t){e.push(Object(ne.jsx)(Wp,{isHead:4===n.rate,beatWidth:a.beatWidth},t))})),e}),[c.beatCacheList,150]),F=Object(o.useMemo)((function(){var e=[];return c.scaleCacheList.forEach((function(n,t){for(var i=("major"===n.scale?v.MAJOR_SCALE_INTERVALS:v.MINOR_SCALE_INTERVALS).map((function(e){return(n.keyIndex+e)%12})),o=[],c=0;c<60;c++){var r=w(c);o.push(Object(ne.jsx)(Vp,{isScale:i.includes(r),isBase:r===i[0]},c))}e.push(Object(ne.jsx)(Jp,{width:a.beatWidth/4*n.memoriCnt,isEven:t%2===0,children:o},t))})),e}),[c.scaleCacheList]),R=Object(o.useMemo)((function(){var e=[];if(0===c.scaleCacheList.length)return e;for(var n=function(n){var t=D[n],o=I(t.pos),r=I(t.len);if(null!=s.current){var d=s.current.scrollLeft,b=o*a.beatWidth;if(b+r*a.beatWidth-d<0||b-d>s.current.clientWidth)return"continue"}var u=S.getKeyScaleFromNotesPos(o,c.scaleCacheList),h=a.focusIndex<a.destIndex?[a.focusIndex,a.destIndex]:[a.destIndex,a.focusIndex],x=Object(l.a)(h,2),p=x[0],f=x[1],g=p<=n&&f>=n,j=("major"===u.scale?v.MAJOR_SCALE_INTERVALS:v.MINOR_SCALE_INTERVALS).map((function(e){return(u.keyIndex+e)%12})),m=w(t.pitchIndex),O=j.includes(m),y=A(t.pos),L=A(t.len);e.push(Object(ne.jsx)(qp,{left:o*a.beatWidth,width:r*a.beatWidth,side:k.side,isActive:g,isScale:a.keySwitch.scaleMode,isResize:a.keySwitch.resize,isMove:a.keySwitch.move,isOctave:a.keySwitch.octave,isPreview:a.isPreview,onContextMenu:function(){i.melody.removeNotes()},children:Object(ne.jsx)(Gp,{y:t.pitchIndex*W,lenType:y>L?y:L,isScale:O,isActive:g,isPreview:a.isPreview})},n))},t=0;t<D.length;t++)n(t);return e}),[D,D.length,a.focusIndex,a.destIndex,k,a.isPreview,a.keySwitch.scaleMode,a.keySwitch.octave,a.keySwitch.resize,a.keySwitch.move]);return Object(ne.jsxs)(Tp,{tabIndex:999,ref:r,isActive:e.isActive,onKeyDown:function(e){return Cp.keySwitchEvent(e,t,i,!0)},onKeyUp:function(e){return Cp.keySwitchEvent(e,t,i,!1)},children:[Object(ne.jsx)(_p,{isEnable:!a.isPreview,children:Object(ne.jsx)(ux,{})}),Object(ne.jsxs)(zp,{children:[function(){var e=a.timelineMouse;if(-1===e.lock)return-1===e.pos?Object(ne.jsx)(ne.Fragment,{}):Object(ne.jsx)(Rp,{left:e.pos});var n=e.lock<e.pos?[e.lock,e.pos]:[e.pos,e.lock],t=Object(l.a)(n,2),i=t[0],o=t[1]-i;return Object(ne.jsx)(Np,{left:i,width:o})}(),Object(ne.jsx)(Pp,{children:Object(ne.jsx)(Uh,{barLength:150,beatWidth:a.beatWidth,curChord:y,timelineLength:M,mouseMeasurePos:L,update:function(){return g({})}})}),Object(ne.jsx)(Kp,{ref:d,children:Object(ne.jsx)(ex,{mousePitchIndex:E,curChord:y})}),Object(ne.jsxs)(Bp,{ref:s,onScroll:function(){var e=t.refs.melody;if(null!=e.table&&null!=e.measure&&null!=e.chord&&null!=e.pitch){var n=e.table.scrollLeft,i=e.table.scrollTop;e.measure.scrollTo({left:n}),e.chord.scrollTo({left:n}),e.pitch.scrollTo({top:i})}j()},children:[Object(ne.jsx)(Hp,{width:M,children:z}),Object(ne.jsx)(Up,{width:M,children:F}),Object(ne.jsxs)(Yp,{width:M,onMouseDown:function(e){return jx.mouseDownEvent(e,t,i,M,j)},onMouseMove:function(e){return jx.mouseMoveEvent(e,t,i,M,j)},onMouseUp:function(e){return jx.mouseUpEvent(e,t,i,M,j)},onMouseLeave:function(){console.log("leave!"),-1!==m.notesState.index&&(m.notesState.index=-1,m.notesState.isResize=!1,m.notesState.side="normal"),m.mouseMeasurePos=-1,m.mousePitchIndex=-1,j()},children:[O?Object(ne.jsx)(Dp,{x:T.x,y:T.y,width:C,lenType:C%a.beatWidth===0?4:C%(a.beatWidth/2)===0?8:16}):Object(ne.jsx)(ne.Fragment,{}),R]}),Object(ne.jsx)(Xp,{isUse:a.isPreview,width:M})]})]})]})},Tp=d.b.div(mx||(mx=Object(s.a)(["\n    display: ",";\n    width: 100%;\n    height: 100%;\n    outline: none;\n"])),(function(e){return e.isActive?"inline-block":"none"})),Mp=Object(d.c)(Ox||(Ox=Object(s.a)(["\n  0%,100% {\n    opacity: 0.2;\n  }\n  50% {\n    opacity: 1;\n  }\n"]))),Dp=d.b.div(kx||(kx=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: ","px;\n    top: ","px;\n    width: ","px;\n    height: ","px;\n    background: linear-gradient(to bottom, #dff85230, #fffb00, #dff85230);\n    border: 1px solid #fbffd9;\n    \n    animation: "," .8s linear infinite;\n"])),(function(e){return e.x}),(function(e){return e.y}),(function(e){return e.width}),(function(e){switch(e.lenType){case 4:return W;case 8:return 24;case 16:return 18;default:return 16}}),Mp),_p=d.b.div(yx||(yx=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    background-color: #b3b3b3;\n    ","\n"])),80,(function(e){return e.isEnable?"":Ce})),zp=d.b.div(Sx||(Sx=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: calc(100% - ","px);\n    background-color: #464646;\n"])),80),Fp=Object(d.a)(wx||(wx=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    pointer-events: none;\n    z-index: 99;\n    top: ","px;\n    height: calc(100% - 42px);\n    width: 3px;\n"])),32),Rp=d.b.div(Ix||(Ix=Object(s.a)(["\n    ","\n    left: ","px;\n    background-color: #15ff00;\n"])),Fp,(function(e){return Y+e.left})),Np=(d.b.div(Lx||(Lx=Object(s.a)(["\n    ","\n    left: ","px;\n    background-color: #fbff00;\n"])),Fp,(function(e){return Y+e.left})),d.b.div(Ex||(Ex=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    pointer-events: none;\n    z-index: 99;\n    top: ","px;\n    height: calc(100% - 42px);\n    left: ","px;\n    width: ","px;\n    background-color: #ffffff8b;\n"])),32,(function(e){return Y+e.left}),(function(e){return e.width}))),Pp=d.b.div(Cx||(Cx=Object(s.a)(["\n    display: inline-block;\n    margin-left: ","px;\n    width: calc(100% - ","px - 10px);\n    height: ","px;\n    background-color: #534b81;\n    overflow-y: hidden;\n"])),Y,Y,70),Kp=d.b.div(Ax||(Ax=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: calc(100% - ","px - 10px);\n    background-color: #464545;\n    vertical-align: top;\n    overflow-y: hidden;\n"])),Y,70),Bp=d.b.div(Tx||(Tx=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: #bdbdbd;\n    vertical-align: top;\n    overflow: scroll;\n    &::-webkit-scrollbar {\n        width: 10px;\n        height: 10px;\n    }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: #1959A8;\n    }\n    &::-webkit-scrollbar-track {\n        border-radius: 5px;\n        box-shadow: 0 0 4px #aaa inset;\n    }\n"])),Y,70),Hp=d.b.div(Mx||(Mx=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 3;\n    width: ","px;\n    height: ","px;\n    white-space: nowrap;\n"])),(function(e){return e.width}),1800),Up=d.b.div(Dx||(Dx=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* z-index: 6; */\n    width: ","px;\n    height: ","px;\n    /* pointer-events: none; */\n    /* background-color: #70ff7058; */\n"])),(function(e){return e.width}),1800),Jp=d.b.div(_x||(_x=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    top: 0;\n    left: 0;\n    /* z-index: 6; */\n    width: ","px;\n    height: 100%;\n    /* pointer-events: none; */\n    background-color: #70ff7021;\n    ","\n"])),(function(e){return e.width}),(function(e){return e.isEven?Object(d.a)(zx||(zx=Object(s.a)(["\n        background-color: #708aff20;\n    "]))):""})),Vp=d.b.div(Fx||(Fx=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: ","px;\n    margin: 1px 0 0 0;\n    background-color: #00000024;\n    /* border-bottom: 1px solid #00000018; */\n    ","\n    ","\n"])),29,(function(e){return e.isScale?Object(d.a)(Rx||(Rx=Object(s.a)(["\n        background-color: #d1d1d11f;\n    "]))):""}),(function(e){return e.isBase?Object(d.a)(Nx||(Nx=Object(s.a)(["\n        background-color: #e0e0e0;\n    "]))):""})),Yp=d.b.div(Px||(Px=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 5;\n    width: ","px;\n    height: ","px;\n    cursor: crosshair;\n"])),(function(e){return e.width}),1800),Wp=d.b.div(Kx||(Kx=Object(s.a)(["\n    display: inline-block;\n    /* background-color: #ffffffbe; */\n    width: ","px;\n    vertical-align: top;\n    height: ","px;\n    box-sizing: border-box;\n    border-left: solid "," #757575;\n"])),(function(e){return e.beatWidth/4}),1800,(function(e){return e.isHead?"2px":"1px"})),qp=d.b.div(Bx||(Bx=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 9;\n    left: ","px;\n    top: 0;\n    width: ","px;\n    height: 100%;\n    cursor: default;\n    background-color: #2727275a;\n    box-sizing: border-box;\n\n    // \u30a2\u30af\u30c6\u30a3\u30d6\u6642\n    ","\n    // \u30b9\u30b1\u30fc\u30eb\u30e2\u30fc\u30c9ON\n    ","\n    // \u30aa\u30af\u30bf\u30fc\u30d6\u30e2\u30fc\u30c9ON\n    ","\n    /* border-left: 1px solid #ff0000b2; */\n    ","\n\n    // \u30ad\u30fc\u30dc\u30fc\u30c9\u306b\u3088\u308b\u30ea\u30b5\u30a4\u30ba\u30e2\u30fc\u30c9ON\n    ","\n    // \u30ad\u30fc\u30dc\u30fc\u30c9\u306b\u3088\u308b\u79fb\u52d5\u30e2\u30fc\u30c9ON\n    ","\n    // \u30d7\u30ec\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9\n    ","\n"])),(function(e){return e.left}),(function(e){return e.width}),(function(e){return e.isActive?Object(d.a)(Hx||(Hx=Object(s.a)(["\n        background-color: #00a6cf52;\n    "]))):""}),(function(e){return e.isActive&&e.isScale?Object(d.a)(Ux||(Ux=Object(s.a)(["\n        background-color: #00cf4552;\n    "]))):""}),(function(e){return e.isActive&&e.isOctave?Object(d.a)(Jx||(Jx=Object(s.a)(["\n        background-color: #ffa9a952;\n    "]))):""}),(function(e){return e.isActive?"left"===e.side?Object(d.a)(Vx||(Vx=Object(s.a)(["\n        border-left: 3px solid #0026ffb1;\n        cursor : col-resize;\n        background-color: #1900ff52;\n    "]))):"right"===e.side?Object(d.a)(Yx||(Yx=Object(s.a)(["\n        border-right: 3px solid #0026ffb1;\n        cursor : col-resize;\n        background-color: #ff00006e;\n    "]))):"":""}),(function(e){return e.isActive&&e.isResize?Object(d.a)(Wx||(Wx=Object(s.a)(["\n        border-right: 3px solid #0026ffb1;\n        background-color: #ff00006e;\n    "]))):""}),(function(e){return e.isActive&&e.isMove?Object(d.a)(qx||(qx=Object(s.a)(["\n        border-left: 3px solid #0026ffb1;\n        background-color: #1900ff52;\n    "]))):""}),(function(e){return e.isActive&&e.isPreview?Object(d.a)(Gx||(Gx=Object(s.a)(["\n        background-color: #fffb0040;\n    "]))):""})),Gp=d.b.div(Xx||(Xx=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 10;\n    top: ","px;\n    width: 100%;\n    height: ","px;\n    /* background-color: red; */\n    /* background: linear-gradient(to bottom, ","); */\n    background: linear-gradient(to bottom, #f8525232, #ff0000, #f8525232);\n    ","\n    opacity: 0.5;\n    ","\n    /* border: 1px solid #000; */\n    box-sizing: border-box;\n    font-size: 12px;\n    color: #000000;\n    box-shadow: 0 0 22px 0 #0000007d;\n    ","\n    &:hover {\n        opacity: 0.8;\n    }\n"])),(function(e){return e.y}),(function(e){return W-(1===e.lenType?0:2===e.lenType?6:4===e.lenType?12:14)}),(function(e){switch(e.lenType){case 4:return"#f8525232, #ff0000, #f8525232";case 8:return"#5d52f831, #0400ff, #5d52f831";case 16:return"#52f85a31, #00ff15, #52f85a31"}}),(function(e){return e.isScale?"":Object(d.a)(Zx||(Zx=Object(s.a)(["    \n       background: linear-gradient(to bottom, #f8b65231, #ffae00, #f8b65231);\n    "])))}),(function(e){return e.isPreview&&!e.isActive?"":Object(d.a)(Qx||(Qx=Object(s.a)(["    \n       opacity: 1;\n    "])))}),(function(e){return e.isPreview&&e.isActive?Object(d.a)($x||($x=Object(s.a)(["\n        box-shadow: 0 0 32px 0 #ffffff92;\n    "]))):""})),Xp=d.b.div(ep||(ep=Object(s.a)(["\n    position: absolute;\n    display: ",";\n    z-index: 80;\n    width: ","px;\n    height: ","px;\n    background-color: #7a270028;\n"])),(function(e){return e.isUse?"block":"none"}),(function(e){return e.width}),1800),Zp=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=n.scoreState,c=n.melodyState;Object(o.useEffect)((function(){var e=c.soundfontInfo;lh.a.instrument(new AudioContext,e.name,{gain:e.gain,release:.5}).then((function(e){t.melody.setInstrument(e)})),lh.a.instrument(new AudioContext,"electric_grand_piano",{gain:2,release:.5}).then((function(e){t.score.setPiano(e)}))}),[]);var a=function(){i.isMelody=!i.isMelody,t.score.setScoreState(i)};if(0===n.scoreData.chordList.length)return Object(ne.jsx)(ne.Fragment,{});var r=i.isMelody?n.melodyState.isPreview:i.isPreview,s=i.isMelody?c.isSolo:i.isSolo,l=i.isMelody?function(){c.isPreview?V.stopPreview(n,t,n.reserveTasks):t.melody.previewStart()}:function(){i.isPreview?Gc.stopPreview(n,t,n.reserveTasks):Gc.previewStart(n,t)},d=i.isMelody?function(){c.isSolo=!c.isSolo,t.melody.setState(c)}:function(){i.isSolo=!i.isSolo,t.score.setScoreState(i)};return Object(ne.jsxs)(Qp,{children:[Object(ne.jsxs)($p,{children:[Object(ne.jsxs)(ef,{isEnable:!r,children:[Object(ne.jsx)(nf,{isActive:!i.isMelody,onClick:function(){i.isMelody&&a()},children:"Harmony"}),Object(ne.jsx)(nf,{isActive:i.isMelody,onClick:function(){i.isMelody||a()},children:"Melody"})]}),Object(ne.jsxs)(tf,{children:[Object(ne.jsxs)(of,{onClick:l,children:[Object(ne.jsx)(cf,{isActive:r,children:"Play"})," / ",Object(ne.jsx)(cf,{isActive:!r,children:"Pause"})]}),Object(ne.jsxs)(of,{onClick:d,children:[Object(ne.jsx)(cf,{isActive:!s,children:"Emsamble"})," / ",Object(ne.jsx)(cf,{isActive:s,children:"Solo"})]})]})]}),Object(ne.jsx)(af,{tabIndex:999,onKeyDown:function(e){if(!r&&"none"===i.hideMenu)switch(e.key){case"r":a()}},children:Object(ne.jsxs)(rf,{children:[Object(ne.jsx)(Xu,{isActive:!i.isMelody}),Object(ne.jsx)(Ap,{isActive:i.isMelody})]})})]})},Qp=d.b.div(np||(np=Object(s.a)(["\n    width: 100%;\n    height: 100%;\n    outline: none;\n"]))),$p=d.b.div(tp||(tp=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 35px;\n    background-color: #ececec;\n"]))),ef=d.b.div(ip||(ip=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    text-align: center;\n    margin-right: 20px;\n    ","\n"])),(function(e){return e.isEnable?"":Ce})),nf=d.b.div(op||(op=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    width: 120px;\n    height: calc(100% - 8px);\n    /* background-color: #e0ff6f55; */\n    ","\n    margin: 4px 0 0 4px;\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #505050;\n    border-radius: 5px;\n    border: 1px solid #969696;\n    box-sizing: border-box;\n    &:hover {\n        background-color: #e0ff6f55;\n        ","\n    }\n"])),(function(e){return e.isActive?Object(d.a)(cp||(cp=Object(s.a)(["background-color: #e2c36dc0;"]))):""}),(function(e){return e.isActive?Object(d.a)(ap||(ap=Object(s.a)(["background-color: #e2c36dc0;"]))):""})),tf=d.b.div(rp||(rp=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    /* background-color: #e0ff6f55; */\n\n    & * {\n        margin: 3px 0 0 5px;\n    }\n"]))),of=d.b.div(sp||(sp=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    width: 220px;\n    height: calc(100% - 8px);\n    background-color: #e1e4ca;\n    margin: 4px 0 0 4px;\n    text-align: center;\n\n    font-size: 18px;\n    font-weight: 600;\n    color: #000000cf;\n    border-radius: 5px;\n    border: 1px solid #969696;\n    box-sizing: border-box;\n    &:hover {\n        background-color: #eff3cf\n    }\n"]))),cf=d.b.span(lp||(lp=Object(s.a)(["\n    color: #00109e6e;\n    ","\n"])),(function(e){return e.isActive?Object(d.a)(dp||(dp=Object(s.a)(["color: #db0000;"]))):""})),af=d.b.div(bp||(bp=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - 35px);\n    background-color: #c50000;\n    outline: none;\n"]))),rf=d.b.div(up||(up=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    background-color: #dddddd;\n    vertical-align: top;\n"]))),sf=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher,i=-1!==n.scoreState.focusIndex;return Object(ne.jsx)(lf,{children:Object(ne.jsx)(He,{tabElements:[{name:"Manage",disable:!1,cont:Object(ne.jsx)(Oo,{})},{name:"Edit",disable:!i,cont:Object(ne.jsx)(Zp,{})}],activeNo:n.systemState.scoreTabIndex,selectTabIndex:function(e){return t.score.setScoreTabIndex(e)}})})},lf=d.b.div(hp||(hp=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),8,8,16,16),df=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher;return Object(ne.jsx)(bf,{children:Object(ne.jsx)(He,{tabElements:[{name:"Sound",disable:!0,cont:Object(ne.jsx)("div",{})},{name:"Design",disable:!0,cont:Object(ne.jsx)("div",{})}],activeNo:n.systemState.scoreTabIndex,selectTabIndex:function(e){return t.score.setScoreTabIndex(e)}})})},bf=d.b.div(xp||(xp=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),8,8,16,16),uf=function(){var e=function(e,n){var t=[];return t.push(Object(ne.jsx)(ff,{children:Object(ne.jsx)("div",{children:e})},t.length)),n.forEach((function(e){var n=e.degree,i=(n.isFlat?v.DEGREE12_FLAT_LIST:v.DEGREE12_SHARP_LIST)[n.index],o=(n.isFlat?v.KEY12_FLAT_LIST:v.KEY12_SHARP_LIST)[n.index],c=v.getSymbolFromKey(e.symbolKey).name;t.push(Object(ne.jsxs)(gf,{onMouseDown:function(n){0===n.button&&v.getSymbolFromKey(e.symbolKey).structs.map((function(n){var t=v.IntervalRelationProps[n];return 36+e.degree.index+t})).forEach((function(e){v.KEY12_SHARP_LIST[e%12],Math.floor(e/12)}))},children:[Object(ne.jsxs)("div",{children:[i,c]}),Object(ne.jsxs)("div",{children:[o,c]})]},t.length))})),Object(ne.jsx)(xf,{children:t})};return Object(ne.jsxs)(hf,{onMouseDown:function(e){e.button},children:[e("Diatonic Triad",[{degree:{index:0,isFlat:!1},symbolKey:"major"},{degree:{index:2,isFlat:!1},symbolKey:"minor"},{degree:{index:4,isFlat:!1},symbolKey:"minor"},{degree:{index:5,isFlat:!1},symbolKey:"major"},{degree:{index:7,isFlat:!1},symbolKey:"major"},{degree:{index:9,isFlat:!1},symbolKey:"minor"},{degree:{index:11,isFlat:!1},symbolKey:"minor-minus5"}]),e("Diatonic Tetrad",[{degree:{index:0,isFlat:!1},symbolKey:"major-maj7th"},{degree:{index:2,isFlat:!1},symbolKey:"minor-7th"},{degree:{index:4,isFlat:!1},symbolKey:"minor-7th"},{degree:{index:5,isFlat:!1},symbolKey:"major-maj7th"},{degree:{index:7,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:9,isFlat:!1},symbolKey:"minor-7th"},{degree:{index:11,isFlat:!1},symbolKey:"minor7-minus5"}]),e("Parallel Triad",[{degree:{index:0,isFlat:!0},symbolKey:"minor"},{degree:{index:2,isFlat:!0},symbolKey:"major"},{degree:{index:3,isFlat:!0},symbolKey:"major"},{degree:{index:5,isFlat:!0},symbolKey:"minor"},{degree:{index:7,isFlat:!0},symbolKey:"minor"},{degree:{index:8,isFlat:!0},symbolKey:"major"},{degree:{index:10,isFlat:!0},symbolKey:"major"}]),e("Secondary Dominant",[{degree:{index:7,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:9,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:11,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:0,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:2,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:4,isFlat:!1},symbolKey:"major-min7th"},{degree:{index:10,isFlat:!1},symbolKey:"major-min7th"}])]})},hf=d.b.div(pp||(pp=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: calc(100% - 8px);\n    height: calc(100% - 8px);\n    margin: 4px 0 0 4px;\n    background-color: #c3d8dd6f;\n    border: solid 1px #888;\n    border-radius: 5px;\n    box-sizing: border-box;\n"]))),xf=d.b.div(fp||(fp=Object(s.a)(["\n    display: inline-block;\n    width: 160px;\n    background-color: #bbbbbb;\n    padding-bottom: 5px;\n"]))),pf=d.b.div(gp||(gp=Object(s.a)(["\n    display: inline-block;\n    width: 150px;\n    height: 80px;\n    margin: 5px 0 0 5px;\n    box-sizing: border-box;\n    border-radius: 4px;\n"]))),ff=Object(d.b)(pf)(jp||(jp=Object(s.a)(["\n    background-color: #51608f;\n    /* border: 1px solid #dfdfdf; */\n    font-weight: 600;\n    & div:nth-child(1) {\n        width: 100%;\n        text-align: center;\n        height: 100%;\n        font-size: 26px;\n        color: #ebebeb;\n    }\n"]))),gf=Object(d.b)(pf)(vp||(vp=Object(s.a)(["\n    background-color: #e0ebe5;\n    border: 1px solid #777;\n    & *{\n        width: 100%;\n        text-align: center;\n        height: 50%;\n    }\n    & div:nth-child(1) {\n        font-size: 26px;\n        color: #d40000;\n    }\n    & div:nth-child(2) {\n        font-size: 24px;\n        color: #000000;\n    }\n    &:hover {\n        background-color: #fcf29f;\n    }\n"]))),jf=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher;return Object(ne.jsx)(vf,{children:Object(ne.jsx)(Ae,{tabElements:[{name:"Home",icon:Object(ne.jsx)(Pe.a,{}),isEnable:!1,cont:Object(ne.jsx)("div",{})},{name:"Perform",icon:Object(ne.jsx)(Ke.b,{}),isEnable:!1,cont:Object(ne.jsx)(uf,{})},{name:"Score",icon:Object(ne.jsx)(Be.c,{}),isEnable:!0,cont:Object(ne.jsx)(sf,{})},{name:"Option",icon:Object(ne.jsx)(Ke.a,{}),isEnable:!1,cont:Object(ne.jsx)(df,{})}],activeNo:n.systemState.mainChannelIndex,selectTabIndex:function(e){return t.system.setMainTabIndex(e)}})})},vf=d.b.div(mp||(mp=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin: ","px 0 0 ","px;\n    width: calc(100% - ","px);\n    height: calc(100% - ","px);\n    background-color: transparent;\n    /* background-color: #c3d8dd6f; */\n    /* border: solid 1px black;\n    border-radius: 5px; */\n    /* box-shadow: 0 2px 14px 4px #000b3a48; */\n"])),15,15,30,30),mf=function(e){var n=Object(o.useState)(!1),t=Object(l.a)(n,2),i=t[0],c=t[1],a=Object(o.useState)(),r=Object(l.a)(a,2),s=r[0],d=r[1];return Object(o.useEffect)((function(){d(setTimeout((function(){c(!0)}),3e3))}),[]),Object(o.useEffect)((function(){i&&setTimeout((function(){e.remove()}),500)}),[i]),Object(ne.jsx)(Of,{isSwitch:i,onClick:function(e){clearTimeout(s),c(!0)},children:Object(ne.jsxs)(kf,{children:[Object(ne.jsxs)(Sf,{children:[Object(ne.jsx)("span",{children:"L"}),"iCreSia"]}),Object(ne.jsx)(wf,{children:"Now Loading..."}),Object(ne.jsx)(If,{children:"Copyright \xa9 2022 Licresia All Rights Reserved."})]})})},Of=d.b.div(Op||(Op=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 10;\n    width: 100%;\n    height: 100%;\n    background-color: #000f3a86;\n    opacity: ",";\n    transition: opacity 500ms;\n"])),(function(e){return e.isSwitch?"0":"1"})),kf=d.b.div(kp||(kp=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    left: calc(50% - 450px);\n    top: calc(50% - 300px);\n    z-index: 11;\n    width: 900px;\n    height: 600px;\n    background: radial-gradient(#868686, #ffffff);\n    border-radius: 8px;\n    border: solid 2px #cfcfcf;\n    box-sizing: border-box;\n    transition: opacity 500ms;\n"]))),yf=Object(d.c)(yp||(yp=Object(s.a)(["\n  0%, 100% {\n    opacity: 0.4;\n  }\n  50% {\n    opacity: 1;\n  }\n"]))),Sf=d.b.div(Sp||(Sp=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    margin-top: 10%;\n    width: 100%;\n    /* height: 400px; */\n    /* background-color: #0003b69e; */\n    background: linear-gradient(to bottom, #99999913, #ffffff13,#ffffff13,#ffffff13, #99999913);\n    color: white;\n    font-size: 130px;\n    font-weight: 600;\n    text-align: center;\n    text-shadow: 1px 2px 22px #0000003d;\n    /* line-height: 350px; */\n    animation: "," 3s linear infinite;\n    /* -webkit-box-reflect:below 1px; */\n    -webkit-box-reflect: below 1px -webkit-gradient(\n      linear,left top,left bottom,\n      from(transparent),\n      color-stop(0.6, transparent),\n      to(#f80000));\n    & span {\n        color: red;\n        font-size: 160px;\n    }\n"])),yf),wf=d.b.div(wp||(wp=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    bottom: 80px;\n    width: 100%;\n    left: 20px;\n    color: #ffffff;\n    font-size: 42px;\n    font-weight: 600;\n    text-align: center;\n"]))),If=d.b.div(Ip||(Ip=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    bottom: 5px;\n    left: 20px;\n    color: #636363;\n    font-size: 22px;\n    font-weight: 600;\n    text-align: left;\n"]))),Lf=t(51),Ef=t(52);(Ep=Lp||(Lp={})).checkStringLength=function(e,n,t){return e.length>=n&&e.length<=t},Ep.checkAsciiChars=function(e){return!1},Ep.checkAll=function(e){for(var n=!0,t=0;t<e.length;t++)if(!e[t]){n=!1;break}return n};var Cf,Af,Tf,Mf,Df,_f,zf,Ff,Rf,Nf,Pf,Kf,Bf,Hf,Uf,Jf,Vf,Yf,Wf,qf,Gf=Lp,Xf=function(){var e=Object(o.useState)(!1),n=Object(l.a)(e,2),t=n[0],i=n[1],c=Object(o.useState)(""),a=Object(l.a)(c,2),r=a[0],s=a[1],d=Object(o.useState)(""),b=Object(l.a)(d,2),h=b[0],p=b[1],f=Object(o.useState)(""),g=Object(l.a)(f,2),j=g[0],v=g[1],m=Object(o.useState)(""),O=Object(l.a)(m,2),k=O[0],y=(O[1],Object(o.useMemo)((function(){return Gf.checkAll([Gf.checkStringLength(r,4,20),Gf.checkStringLength(h,4,20),Gf.checkStringLength(j,4,20)])}),[t,r,h,j])),S=function(e,n,t){return Object(ne.jsxs)(eg,{children:[Object(ne.jsx)(ng,{children:e}),Object(ne.jsx)(tg,{value:n,onChange:function(e){return t(e.target.value)}})]})};return Object(ne.jsxs)(Zf,{width:600,height:400,children:[Object(ne.jsxs)(Qf,{children:[Object(ne.jsx)($f,{isActive:!t,onClick:function(){i(!1)},children:"Login"}),Object(ne.jsx)($f,{isActive:t,onClick:function(){i(!0)},children:"Create Account"})]}),S("user id",r,s),S("password",h,p),S("password *",j,v),Object(ne.jsx)(ig,{children:k}),Object(ne.jsxs)(og,{children:[Object(ne.jsx)(cg,{isEnable:!0,children:"Clear"}),Object(ne.jsx)(cg,{isEnable:y,onClick:function(){t&&(h!=j?alert("Confirmation passwords don't match."):Object(x.a)(u.a.mark((function e(){var n,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.sendQueryRequestToAPI("select","SELECT count(*) as cnt FROM user_tbl where id = '".concat(r,"'"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(t=e.sent,console.log(JSON.stringify(t[0].cnt)),!(t[0].cnt>0)){e.next=12;break}alert("That user id has already been recorded."),e.next=19;break;case 12:return e.next=14,Z.a.sendQueryRequestToAPI("update","INSERT INTO user_tbl(id, pass) VALUES('".concat(r,"', '").concat(h,"')"));case 14:return n=e.sent,e.next=17,n.json();case 17:t=e.sent,alert("You have successfully created an account!");case 19:case"end":return e.stop()}}),e)})))())},children:"Enter"})]})]})},Zf=d.b.div(Cf||(Cf=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    z-index: 11;\n    top: calc(50% - ","px);\n    left: calc(50% - ","px);\n    width: ","px;\n    height: ","px;\n    background-color: #a9c5c7;\n    /* border: 1px solid #dadada; */\n"])),(function(e){return e.height/2}),(function(e){return e.width/2}),(function(e){return e.width}),(function(e){return e.height})),Qf=d.b.div(Af||(Af=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: 50px;\n    background-color: #d1d1d1;\n    text-align: center;\n"]))),$f=d.b.div(Tf||(Tf=Object(s.a)(["\n    ",";\n    background-color: #c73e3e75;\n    ","\n    color: white;\n    width: 250px;\n    margin: 10px 10px;\n    text-align: center;\n    &:hover {\n        background-color: #d86262;\n    }\n"])),Le.CSS_LABEL_MIDIUM,(function(e){return e.isActive?Object(d.a)(Mf||(Mf=Object(s.a)(["\n        background-color: #c7a73e;\n    "]))):""})),eg=d.b.div(Df||(Df=Object(s.a)(["\n    display: inline-block;\n    margin: 2px 0 0 0;\n    width: 100%;\n    height: 50px;\n    /* background-color: #e6e3c1; */\n    text-align: left;\n"]))),ng=d.b.div(_f||(_f=Object(s.a)(["\n    ",";\n    /* background-color: #80e45832; */\n    color: #bd2d2d;\n    width: 150px;\n    margin: 10px 0 0 5px;\n    text-align: center;\n"])),Le.CSS_LABEL_MIDIUM),tg=d.b.input(zf||(zf=Object(s.a)(["\n    ",";\n    background-color: #f7f09787;\n    width: 300px;\n    margin: 10px 0 0 15px;\n    text-align: center;\n    border: solid 1px #5e5e5e;\n    text-align: left;\n    box-sizing: border-box;\n    border-radius: 4px;\n"])),Le.CSS_LABEL_MIDIUM),ig=d.b.div(Ff||(Ff=Object(s.a)(["\n    display: inline-block;\n    background-color: #91bdd6;\n    width: 100%;\n    height: 60px;\n    padding: 5px;\n    box-sizing: border-box;\n    text-align: left;\n    font-size: ","px;\n    color: #222fa7;\n"])),Le.FONT_SMALL),og=d.b.div(Rf||(Rf=Object(s.a)(["\n    display: inline-block;\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height: 50px;\n    background-color: #d1d1d1;\n    text-align: right;\n"]))),cg=d.b.div(Nf||(Nf=Object(s.a)(["\n    ",";\n    ",";\n    background-color: #5c9253;\n    width: 150px;\n    margin: 10px 5px 0 0;\n    text-align: center;\n    &:hover {\n        background-color: #7eaf75;\n    }\n"])),Le.CSS_LABEL_MIDIUM,(function(e){return e.isEnable?"":Le.CSS_BUTTON_DISABLE})),ag=function(){var e=Object(o.useContext)(pg),n=e.store,t=e.dispatcher;return Object(ne.jsxs)(rg,{children:[Object(ne.jsxs)(sg,{children:[Object(ne.jsx)(dg,{children:"L"}),Object(ne.jsx)(lg,{children:"iCreSia"})]}),Object(ne.jsxs)(bg,{children:[Object(ne.jsxs)(hg,{onClick:function(){n.systemState.dialog=Object(ne.jsx)(Xf,{}),t.system.setState(n.systemState)},children:[Object(ne.jsx)("div",{children:Object(ne.jsx)(Lf.a,{})}),"Login / Sign up"]}),Object(ne.jsx)(xg,{children:Object(ne.jsx)("div",{children:Object(ne.jsx)(Ef.a,{})})})]})]})},rg=d.b.div(Pf||(Pf=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: ","px;\n    background: linear-gradient(to bottom, #ececec, #e2e2e2, #eeeeee);\n    /* background-color: #c2c2c2; */\n    box-shadow: 0 0 8px 0 #000b3a48;\n"])),44),sg=d.b.div(Kf||(Kf=Object(s.a)(["\n    display: inline-block;\n    margin: 2px 0 0 10px;\n    width: 200px;\n    height: calc(100% - 4px);\n    /* background-color: #00000013; */\n    font-size: 34px;\n    font-weight: 600;\n    line-height: 36px;\n    text-shadow: 1px 2px 3px #8080806a;\n"]))),lg=d.b.span(Bf||(Bf=Object(s.a)(["\n    color: #ffffff;\n"]))),dg=d.b.span(Hf||(Hf=Object(s.a)(["\n    font-size: 34px;\n    color: #da4242;\n"]))),bg=d.b.div(Uf||(Uf=Object(s.a)(["\n    display: inline-block;\n    /* width: 300px; */\n    height: 100%;\n    position: absolute;\n    right: 30px;\n    /* background-color: #ff00002b; */\n"]))),ug=d.b.div(Jf||(Jf=Object(s.a)(["\n    background-color: #c9c7c7;\n    &:hover {\n        background-color: #cf9bae;\n    }\n    transition: background-color 800ms;\n"]))),hg=Object(d.b)(ug)(Vf||(Vf=Object(s.a)(["\n    display: inline-block;\n    width: 240px;\n    margin: 5px 10px 0 0;\n    height: calc(100% - 10px);\n    border-radius: 20px;\n    /* background: linear-gradient(to bottom, #e9baba, #d39d9d, #e9baba); */\n    /* background-color: #adadad; */\n    /* border: 1px solid #7e7e7e; */\n    /* box-shadow: 0 0 8px 0 #000b3a48; */\n    /* text-shadow: 1px 2px 3px #808080ba; */\n    text-align: center;\n    font-size: 22px;\n    font-weight: 600;\n    line-height: 28px;\n    color: #ffffff;\n    vertical-align: top;\n\n    & div {\n        display: inline-block;\n        /* background-color: #0000007d; */\n        margin: 2px 5px 0 0;\n        vertical-align: top;\n    }\n"]))),xg=Object(d.b)(ug)(Yf||(Yf=Object(s.a)(["\n    display: inline-block;\n    width: ","px;\n    height: ","px;\n    margin: 3px 0 0 0;\n    border-radius: 50%;\n    /* background: linear-gradient(to bottom, #e9baba, #d39d9d, #e9baba); */\n    /* background-color: #48aa9d; */\n    /* border: 1px solid #7e7e7e; */\n    /* box-shadow: 0 0 8px 0 #000b3a48; */\n    /* text-shadow: 1px 2px 3px #808080ba; */\n    /* text-align: center; */\n    font-size: 28px;\n    font-weight: 600;\n    color: #ffffff;\n    & div {\n        display: inline-block;\n        margin: 2px 0 0 5px;\n        /* background-color: #0000007d; */\n        vertical-align: top;\n    }\n"])),38,38),pg=Object(o.createContext)({}),fg=function(){var e=Object(o.useReducer)(g,ee),n=Object(l.a)(e,2),t=n[0],i=n[1],c=new Q(t,i),a=Object(o.useCallback)(c.system.switchSplashToMain,[]);return Object(ne.jsx)(pg.Provider,{value:{store:t,dispatcher:c},children:Object(ne.jsxs)(ne.Fragment,{children:[t.systemState.isSplash?Object(ne.jsx)(mf,{remove:a}):Object(ne.jsx)(ne.Fragment,{}),Object(ne.jsxs)(gg,{children:[Object(ne.jsx)(te,{}),Object(ne.jsx)(ag,{}),Object(ne.jsx)(jg,{children:Object(ne.jsx)(jf,{})})]})]})})},gg=d.b.div(Wf||(Wf=Object(s.a)(["\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background-color: #d8d8d8;\n"]))),jg=d.b.div(qf||(qf=Object(s.a)(["\n    display: inline-block;\n    width: 100%;\n    height: calc(100% - ","px);\n    /* background-color: #c2c2c2; */\n"])),44);var vg=function(){return Object(o.useEffect)((function(){document.oncontextmenu=function(){return!1},document.onkeydown=function(e){if(e.ctrlKey&&["f","s"].includes(e.key))return!1}}),[]),Object(ne.jsx)(fg,{})},mg=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,111)).then((function(n){var t=n.getCLS,i=n.getFID,o=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),i(e),o(e),c(e),a(e)}))};r.a.render(Object(ne.jsx)(c.a.StrictMode,{children:Object(ne.jsx)(vg,{})}),document.getElementById("root")),mg()},58:function(e,n,t){},71:function(e,n){},73:function(e,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.d75c9b86.chunk.js.map